var Hs=Object.defineProperty;var Ns=(g,n,t)=>n in g?Hs(g,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):g[n]=t;var xe=(g,n,t)=>Ns(g,typeof n!="symbol"?n+"":n,t);import{r as ref,o as onMounted,c as createElementBlock,a as openBlock,b as createBaseVNode,w as withDirectives,v as vModelText,d as withKeys,e as createTextVNode,f as createCommentVNode,F as Fragment,g as renderList,t as toDisplayString,h as onBeforeUnmount,n as normalizeStyle,i as createStaticVNode,j as createBlock,k as createApp}from"./vue-vendor-DJBEnSHK.js";import{V as Vector3,Q as Quaternion,H as Capsule,J as GLTFLoader,K as AnimationMixer,X as Euler,Y as DataUtils,Z as Quaternion$1,_ as BufferGeometry,$ as MeshBasicMaterial,a0 as Matrix4,a1 as Vector3$1,a2 as Matrix3,a3 as Vector4,a4 as Ray$1,a5 as Plane,a6 as Vector2,a7 as Scene,a8 as PerspectiveCamera,a9 as OrthographicCamera,aa as WebGLRenderer,ab as Color,ac as MathUtils,ad as Mesh,ae as Box3,af as DataTexture,ag as RGBAIntegerFormat,ah as UnsignedIntType,ai as RGBAFormat,aj as FloatType,ak as UnsignedByteType,al as HalfFloatType,am as RedIntegerFormat,an as WebGLUtils,ao as WebGLRenderTarget,ap as DepthTexture,aq as DepthFormat,ar as ShaderMaterial,as as OneMinusSrcAlphaFactor,at as SrcAlphaFactor,au as CustomBlending,av as PlaneGeometry,aw as ConeGeometry,ax as Object3D,ay as SphereGeometry,az as DoubleSide,aA as BoxGeometry,aB as FrontSide,aC as EventDispatcher,aD as MOUSE,aE as TOUCH,aF as Spherical,aG as BufferAttribute,aH as InstancedBufferGeometry,aI as InstancedBufferAttribute,aJ as DynamicDrawUsage,aK as NormalBlending,aL as CylinderGeometry,aM as MathUtils$1,aN as PlaneGeometry$1,aO as MeshLambertMaterial,C as Color$1,M as Mesh$1,S as Scene$1,aP as Octree,A as PerspectiveCamera$1,aQ as WebGLRenderer$1,aR as PCFSoftShadowMap,aS as OrbitControls$1,aT as AmbientLight,aU as DirectionalLight,aV as Stats,w as MeshStandardMaterial,q as DoubleSide$1,aW as BoxGeometry$1,r as Clock,aX as MeshBasicMaterial$1,B as Box3$1}from"./three-vendor-BZMI7BeI.js";import{S as SparkRenderer,P as PackedSplats,a as SplatMesh$1}from"./@sparkjsdev/spark-vendor-BLE3KzrL.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const e of a.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&r(e)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();const _export_sfc=(g,n)=>{const t=g.__vccOpts||g;for(const[r,s]of n)t[r]=s;return t},_hoisted_1$2={class:"model-list"},_hoisted_2$1={class:"baidu-search-box"},_hoisted_3$1={class:"models-grid"},_hoisted_4=["onClick"],_hoisted_5={class:"model-preview"},_sfc_main$2={__name:"ModelList",setup(g){const n=ref([]),t=ref("");ref(!1),onMounted(async()=>{const a=await fetch("https://mogs-1300354879.cos.ap-shanghai.myqcloud.com/mogs/timi-activity/gs-viewer/config/scene.json",{mode:"cors",credentials:"omit",cache:"reload"});if(console.log(1111,a),a.status!==200)return new Error(`load  error ${a.statusText},${a.body}`);const e=await a.json();n.value=e.sceneConfig,console.log("success file url content:",e)});const r=a=>{console.log("goToModel===",a),`${a.modelUrl}`,console.log("goToModel===",location.href),window.location.hash=`#/viewer?sceneUrl=${a.modelUrl}`},s=()=>{console.log("goToViewer==="),t.value&&(console.log("goToModel===",location.href),window.location.hash=`#/viewer?sceneUrl=${t.value}`)};return(a,e)=>(openBlock(),createElementBlock("div",_hoisted_1$2,[e[4]||(e[4]=createBaseVNode("header",{class:"header"},[createBaseVNode("h1",null,"Web Wide World"),createBaseVNode("p",null,"By Nobdy, For Everyoneï¼šå¹³å‡¡äººå…±åˆ›æ™®æƒ ä¸–ç•Œ")],-1)),createBaseVNode("div",_hoisted_2$1,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":e[0]||(e[0]=u=>t.value=u),type:"text",class:"baidu-input",placeholder:"è¯·å¡«å…¥åœºæ™¯ URL",onKeydown:withKeys(s,["enter"])},null,544),[[vModelText,t.value]]),createBaseVNode("button",{class:"baidu-btn",onClick:s},[...e[1]||(e[1]=[createTextVNode(" Go ",-1),createBaseVNode("svg",{class:"btn-icon",width:"18",height:"18",viewBox:"0 0 20 20"},[createBaseVNode("polyline",{points:"7 5 13 10 7 15",fill:"none",stroke:"#fff","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),createBaseVNode("div",_hoisted_3$1,[n.value.length>0?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(n.value,u=>(openBlock(),createElementBlock("div",{key:u.id,class:"model-card",onClick:p=>r(u)},[createBaseVNode("div",_hoisted_5,[e[2]||(e[2]=createBaseVNode("div",{class:"model-icon"},"ðŸŽ¯",-1)),createBaseVNode("h3",null,toDisplayString(u.name),1)]),e[3]||(e[3]=createBaseVNode("div",{class:"model-info"},[createBaseVNode("button",{class:"view-button"},"æŸ¥çœ‹è¯¦æƒ…")],-1))],8,_hoisted_4))),128)):createCommentVNode("",!0)])]))}},ModelList=_export_sfc(_sfc_main$2,[["__scopeId","data-v-b6b213fc"]]);function isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2}class MobileController{constructor(n){this.container=n.parentNode,this.joystick=null,this.runButton=null,this.touchAreas=null,this.isRunning=!0,this.joystickData={x:0,y:0},this.isMobile=isMobile(),this.isPortrait=window.innerHeight>window.innerWidth,this.isMobile&&(this.createMobileControls(),this.bindOrientationChange())}createMobileControls(){this.createJoystick(),this.createTouchAreas()}createTouchAreas(){const n=document.createElement("div");n.setAttribute("id","leftArea");const t=document.createElement("div"),r=document.createElement("div");this.container.appendChild(n),this.container.appendChild(t),this.container.appendChild(r),this.touchAreas={left:n,right:t,top:r},this.updateTouchAreasLayout(),this.addTouchAreaEvents()}updateTouchAreasLayout(){this.isPortrait?(this.touchAreas.left.style.cssText=`
        position: fixed;
        top: 50%;
        left: 0;
        width: 40%;
        height: 50vh;
        z-index: 999;
        touch-action: none;
        pointer-events: auto;
      `,this.touchAreas.right.style.cssText=`
        position: fixed;
        top: 0;
        right: 0;
        width: 60%;
        height: 100vh;
        z-index: 999;
        touch-action: none;
        pointer-events: none;
      `,this.touchAreas.top.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        width: 40%;
        height: 50vh;
        z-index: 999;
        touch-action: none;
        pointer-events: none;
      `):(this.touchAreas.left.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        width: 40%;
        height: 100vh;
        z-index: 999;
        touch-action: none;
        pointer-events: auto;
      `,this.touchAreas.right.style.cssText=`
        position: fixed;
        top: 0;
        right: 0;
        width: 60%;
        height: 100vh;
        z-index: 999;
        touch-action: none;
        pointer-events: none;
      `,this.touchAreas.top.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        width: 0;
        height: 0;
        z-index: 999;
        touch-action: none;
        pointer-events: none;
        display: none;
      `)}bindOrientationChange(){const n=()=>{const t=this.isPortrait;this.isPortrait=window.innerHeight>window.innerWidth,t!==this.isPortrait&&this.updateTouchAreasLayout()};window.addEventListener("resize",n),window.addEventListener("orientationchange",n)}createJoystick(){const n=document.createElement("div");n.style.cssText=`
            position: fixed;
            bottom: 50px;
            left: 50px;
            width: 120px;
            height: 120px;
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.25);
            border-radius: 50%;
            z-index: 1001;
            touch-action: none;
            display: block;
            pointer-events: none;
            opacity: 0.4;
        `;const t=document.createElement("div");t.style.cssText=`
            position: absolute;
            top: 50%;
            left: 50%;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: none;
        `,n.appendChild(t),this.container.appendChild(n),this.joystick={container:n,handle:t,centerX:60,centerY:60,maxDistance:40,isVisible:!1,isActive:!1,defaultLeft:50,defaultBottom:50}}createRunButton(){const n=document.createElement("div");n.innerHTML="èµ°",n.style.cssText=`
            position: fixed;
            bottom: 50px;
            right: 50px;
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            color: white;
            z-index: 1000;
            touch-action: none;
            user-select: none;
        `,this.container.appendChild(n),this.runButton=n,this.addRunButtonEvents()}addTouchAreaEvents(){let n=!1,t=null;const r=e=>{for(let u=0;u<e.touches.length;u++){const p=e.touches[u],y=this.touchAreas.left.getBoundingClientRect();if(p.clientX>=y.left&&p.clientX<=y.right&&p.clientY>=y.top&&p.clientY<=y.bottom){if(n&&t!==null)continue;e.preventDefault(),t=p.identifier,this.activateJoystickAt(p.clientX,p.clientY),n=!0;break}}},s=e=>{if(!n||!this.joystick.isActive||t===null)return;let u=null;for(let p=0;p<e.touches.length;p++)if(e.touches[p].identifier===t){u=e.touches[p];break}u&&(e.preventDefault(),this.updateJoystickPosition(u.clientX,u.clientY))},a=e=>{if(!n||t===null)return;let u=!0;for(let p=0;p<e.touches.length;p++)if(e.touches[p].identifier===t){u=!1;break}u&&(e.preventDefault(),this.deactivateJoystick(),n=!1,t=null)};document.addEventListener("touchstart",r,{passive:!1}),document.addEventListener("touchmove",s,{passive:!1}),document.addEventListener("touchend",a,{passive:!1})}activateJoystickAt(n,t){this.joystick.isActive=!0,this.joystick.isVisible=!0,this.joystick.container.style.background="rgba(255, 255, 255, 0.3)",this.joystick.container.style.border="2px solid rgba(255, 255, 255, 0.5)",this.joystick.container.style.opacity="1",this.joystick.container.style.pointerEvents="auto",this.joystick.handle.style.background="rgba(255, 255, 255, 0.8)",this.joystick.container.style.left=`${n}px`,this.joystick.container.style.top=`${t}px`,this.joystick.container.style.bottom="auto",this.joystick.container.style.transform="translate(-50%, -50%)",this.joystick.handle.style.transform="translate(-50%, -50%)",this.joystickData.x=0,this.joystickData.y=0}updateJoystickPosition(n,t){if(!this.joystick.isVisible||!this.joystick.isActive)return;const r=this.joystick.container.getBoundingClientRect(),s=r.left+r.width/2,a=r.top+r.height/2,e=n-s,u=t-a,p=Math.sqrt(e*e+u*u),{maxDistance:y}=this.joystick;let C=e,b=u;p>y&&(C=e/p*y,b=u/p*y),this.joystick.handle.style.transform=`translate(calc(-50% + ${C}px), calc(-50% + ${b}px))`,this.joystickData.x=C/y,this.joystickData.y=-b/y}deactivateJoystick(){this.joystick.isActive=!1,this.joystick.isVisible=!1,this.joystick.container.style.background="rgba(255, 255, 255, 0.15)",this.joystick.container.style.border="2px solid rgba(255, 255, 255, 0.25)",this.joystick.container.style.opacity="0.4",this.joystick.container.style.pointerEvents="none",this.joystick.handle.style.background="rgba(255, 255, 255, 0.4)",this.joystick.container.style.left=`${this.joystick.defaultLeft}px`,this.joystick.container.style.top="auto",this.joystick.container.style.bottom=`${this.joystick.defaultBottom}px`,this.joystick.container.style.transform="none",this.joystick.handle.style.transform="translate(-50%, -50%)",this.joystickData.x=0,this.joystickData.y=0}addRunButtonEvents(){const n=t=>{t.preventDefault(),this.isRunning=!this.isRunning,this.isRunning?(this.runButton.innerHTML="èµ°",this.runButton.style.background="rgba(255, 255, 255, 0.3)"):(this.runButton.innerHTML="è·‘",this.runButton.style.background="rgba(255, 100, 100, 0.6)")};this.runButton.addEventListener("touchstart",n,{passive:!1}),this.runButton.addEventListener("click",n)}getMovementInput(){return this.isMobile?{...this.joystickData}:{x:0,y:0}}getRunState(){return this.isMobile?this.isRunning:!1}isMobileDevice(){return this.isMobile}destroy(){this.touchAreas&&(this.touchAreas.left.remove(),this.touchAreas.right.remove(),this.touchAreas.top&&this.touchAreas.top.remove()),this.joystick&&this.joystick.container.remove(),this.runButton&&this.runButton.remove(),window.removeEventListener("resize",this.handleOrientationChange),window.removeEventListener("orientationchange",this.handleOrientationChange)}}const W="w",A="a",S="s",D="d",DIRECTIONS=[W,A,S,D];class InputController{constructor(n){this.keysPressed={},this.characterControls=null,this.mobileController=new MobileController(n),this.container=n,this.isMouseHidden=!1,this.isOrbiting=!1,this.mouseHideTimer=null,this.mouseHideDelay=3e3,this.isMousePressed=!1,this.orbitButton=null,this.onOrbitStart=null,this.onOrbitEnd=null,this.initEventListeners(),this.createOrbitButton()}initEventListeners(){document.addEventListener("keydown",this.onKeyDown.bind(this),!1),document.addEventListener("keyup",this.onKeyUp.bind(this),!1),this.mobileController.isMobileDevice()||(this.container.addEventListener("mousedown",this.onMouseDown.bind(this),!1),this.container.addEventListener("mousemove",this.onMouseMove.bind(this),!1),this.container.addEventListener("mouseup",this.onMouseUp.bind(this),!1),document.addEventListener("keydown",this.onEscapeKey.bind(this),!1),this.resetMouseHideTimer())}onMouseDown(n){this.mobileController.isMobileDevice()||(this.isMousePressed=!0,this.hideMouse())}onMouseMove(n){this.mobileController.isMobileDevice()||this.isMousePressed||(this.isMouseHidden&&this.showMouse(),this.resetMouseHideTimer())}onMouseUp(n){this.mobileController.isMobileDevice()||(this.isMousePressed=!1,this.showMouse(),this.resetMouseHideTimer())}onEscapeKey(n){n.key==="Escape"&&this.isMouseHidden&&this.showMouse()}hideMouse(){this.container.style.cursor="none",this.isMouseHidden=!0,this.clearMouseHideTimer()}showMouse(){this.container.style.cursor="default",this.isMouseHidden=!1,this.clearMouseHideTimer()}resetMouseHideTimer(){this.clearMouseHideTimer(),this.mouseHideTimer=setTimeout(()=>{this.isMouseHidden||this.hideMouse()},this.mouseHideDelay)}clearMouseHideTimer(){this.mouseHideTimer&&(clearTimeout(this.mouseHideTimer),this.mouseHideTimer=null)}onKeyDown(n){n.shiftKey&&this.characterControls?this.characterControls.switchRunToggle():this.keysPressed[n.key.toLowerCase()]=!0}onKeyUp(n){this.keysPressed[n.key.toLowerCase()]=!1}setCharacterControls(n){this.characterControls=n}isDirectionPressed(){if(this.isOrbiting)return!1;const n=DIRECTIONS.some(s=>this.keysPressed[s]===!0),t=this.mobileController.getMovementInput(),r=Math.abs(t.x)>.1||Math.abs(t.y)>.1;return n||r}isKeyPressed(n){return this.keysPressed[n]===!0}getMovementDirection(){if(this.isOrbiting)return{forward:!1,backward:!1,left:!1,right:!1,joystick:{x:0,y:0}};if(this.mobileController.isMobileDevice()){const n=this.mobileController.getMovementInput();if(Math.abs(n.x)>.1||Math.abs(n.y)>.1)return{forward:n.y>.1,backward:n.y<-.1,left:n.x<-.1,right:n.x>.1,joystick:n}}return{forward:this.keysPressed[W],backward:this.keysPressed[S],left:this.keysPressed[A],right:this.keysPressed[D]}}getDirectionOffset(){if(this.isOrbiting)return 0;if(this.mobileController.isMobileDevice()){const t=this.mobileController.getMovementInput();if(Math.abs(t.x)>.1||Math.abs(t.y)>.1)return Math.atan2(-t.x,t.y)}let n=0;return this.keysPressed[W]?this.keysPressed[A]?n=Math.PI/4:this.keysPressed[D]&&(n=-Math.PI/4):this.keysPressed[S]?this.keysPressed[A]?n=Math.PI/4+Math.PI/2:this.keysPressed[D]?n=-Math.PI/4-Math.PI/2:n=Math.PI:this.keysPressed[A]?n=Math.PI/2:this.keysPressed[D]&&(n=-Math.PI/2),n}getRunToggleState(){return this.mobileController.isMobileDevice()?this.mobileController.getRunState():!1}getOrbitState(){return this.mobileController.getOrbitState()}createOrbitButton(){const n=document.createElement("div");n.setAttribute("id","orbitButton"),n.innerHTML="çŽ¯é¡¾",n.style.cssText=`
            position: fixed;
            bottom: 50px;
            right: 50px;
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: bold;
            color: white;
            z-index: 1000;
            touch-action: none;
            user-select: none;
        `,this.container.parentNode.appendChild(n),this.orbitButton=n,this.addOrbitButtonEvents()}addOrbitButtonEvents(){const n=r=>{r.preventDefault(),this.isOrbiting=!0,this.orbitButton.style.background="rgba(100, 255, 100, 0.6)",this.onOrbitStart&&this.onOrbitStart()},t=r=>{r.preventDefault(),this.isOrbiting=!1,this.orbitButton.style.background="rgba(255, 255, 255, 0.3)",this.onOrbitEnd&&this.onOrbitEnd()};this.orbitButton.addEventListener("touchstart",n,{passive:!1}),this.orbitButton.addEventListener("touchend",t,{passive:!1}),this.orbitButton.addEventListener("touchcancel",t,{passive:!1}),this.orbitButton.addEventListener("mousedown",n,{passive:!1}),this.orbitButton.addEventListener("mouseup",t,{passive:!1}),this.orbitButton.addEventListener("mouseleave",t,{passive:!1})}setOrbitCallbacks(n,t){this.onOrbitStart=n,this.onOrbitEnd=t}destroy(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.mobileController.isMobileDevice()||(this.container.removeEventListener("mousedown",this.onMouseDown),this.container.removeEventListener("mousemove",this.onMouseMove),this.container.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("keydown",this.onEscapeKey),this.clearMouseHideTimer(),this.showMouse()),this.orbitButton&&this.orbitButton.remove(),this.mobileController.destroy()}}class PlayerController{constructor(n,t,r,s){console.log("player controller",r),this.scene=n,this.worldOctree=t,this.model=null,this.mixer=null,this.animationsMap=new Map,this.initialPosition=r!=null&&r.player.position?new Vector3(r.player.position.x,r.player.position.y,r.player.position.z):new Vector3(0,0,0),this.initialRotation=r!=null&&r.player.rotation?new Vector3(r.player.rotation.x,r.player.rotation.y,r.player.rotation.z):new Vector3(0,0,0),this.playerVelocity=new Vector3,this.playerOnFloor=!0,this.gravity=30,this.runVelocity=5,this.walkVelocity=2,this.toggleRun=!0,this.currentAction="Idle",this.fadeDuration=.2,this.walkDirection=new Vector3,this.rotateAngle=new Vector3(0,1,0),this.rotateQuarternion=new Quaternion,this.playerCollider=new Capsule(new Vector3(this.initialPosition.x,this.initialPosition.y+.35,this.initialPosition.z),new Vector3(this.initialPosition.x,this.initialPosition.y+1,this.initialPosition.z),.35),this.ensurePlayerOnGround()}async init(){await this.loadCharacterModel(),console.log("loadCharacterModel",this.initialPosition)}loadCharacterModel(){return new Promise((n,t)=>{const r=new GLTFLoader;r.setPath("./models/"),r.load("Soldier.glb",s=>{this.model=s.scene,this.model.traverse(e=>{e.isMesh&&(e.castShadow=!0)}),this.initialPosition&&(this.model.position.copy(this.initialPosition),this.playerCollider.start.set(this.initialPosition.x,this.initialPosition.y+.35,this.initialPosition.z),this.playerCollider.end.set(this.initialPosition.x,this.initialPosition.y+1,this.initialPosition.z)),this.initialRotation&&(this.model.rotation.x=this.initialRotation.x,this.model.rotation.y=this.initialRotation.y,this.model.rotation.z=this.initialRotation.z),this.scene.add(this.model);const a=s.animations;this.mixer=new AnimationMixer(this.model),a.filter(e=>e.name!=="TPose").forEach(e=>{this.animationsMap.set(e.name,this.mixer.clipAction(e))}),this.animationsMap.forEach((e,u)=>{u===this.currentAction&&e.play()}),n(this)},void 0,t)})}isLoaded(){return this.model!==null&&this.mixer!==null}switchRunToggle(){this.toggleRun=!this.toggleRun}ensurePlayerOnGround(){const n=new Vector3(0,10,0);new Vector3(0,-1,0),this.playerCollider.start.copy(n),this.playerCollider.end.copy(new Vector3(0,n.y+.65,0)),this.playerVelocity.set(0,-.1,0)}update(n,t,r){if(!this.mixer)return;const s=t.isDirectionPressed(),a=t.getRunToggleState(),e=t.mobileController.isMobileDevice()?a:this.toggleRun;let u="";if(s&&e?u="Run":s?u="Walk":u="Idle",this.currentAction!==u){const p=this.animationsMap.get(u),y=this.animationsMap.get(this.currentAction);p&&y&&(y.fadeOut(this.fadeDuration),p.reset().fadeIn(this.fadeDuration).play(),this.currentAction=u)}this.mixer.update(n),this.playerOnFloor?this.playerVelocity.y=Math.max(0,this.playerVelocity.y):this.playerVelocity.y-=this.gravity*n,this.currentAction==="Run"||this.currentAction==="Walk"?this.handleMovement(t,r):(this.playerVelocity.x-=this.playerVelocity.x*10*n,this.playerVelocity.z-=this.playerVelocity.z*10*n),this.updatePosition(n)}handleMovement(n,t){const r=Math.atan2(t.position.x-this.model.position.x,t.position.z-this.model.position.z),s=n.getDirectionOffset();this.rotateQuarternion.setFromAxisAngle(this.rotateAngle,r+s),this.model.quaternion.rotateTowards(this.rotateQuarternion,.2),t.getWorldDirection(this.walkDirection),this.walkDirection.y=0,this.walkDirection.normalize(),this.walkDirection.applyAxisAngle(this.rotateAngle,s);const a=this.currentAction==="Run"?this.runVelocity:this.walkVelocity;this.playerVelocity.x=this.walkDirection.x*a,this.playerVelocity.z=this.walkDirection.z*a}updatePosition(n){if(!this.model)return;const t=this.playerVelocity.clone().multiplyScalar(n);this.playerCollider.translate(t),this.playerOnFloor=!1;const r=this.worldOctree.capsuleIntersect(this.playerCollider);r&&(this.playerOnFloor=r.normal.y>0,this.playerOnFloor||this.playerVelocity.addScaledVector(r.normal,-r.normal.dot(this.playerVelocity)),this.playerCollider.translate(r.normal.multiplyScalar(r.depth))),this.playerCollider.end.y<.35&&(this.playerCollider.end.y=.35,this.playerCollider.start.y=.35-.65,this.playerOnFloor=!0,this.playerVelocity.y=0),this.model.position.copy(this.playerCollider.end),this.model.position.y-=1,this.initialPosition.copy(this.model.position)}getPosition(){return this.model?this.model.position.clone():new Vector3}getVelocity(){return this.playerVelocity.clone()}getRotation(){return this.model?this.model.rotation.clone():new Euler}setPosition(n,t,r){this.model&&(this.model.position.set(n,t,r),this.playerCollider.start.set(n,t+.35,r),this.playerCollider.end.set(n,t+1,r),this.initialPosition.set(n,t,r),this.playerVelocity.set(0,0,0),console.log("çŽ©å®¶ä½ç½®å·²è®¾ç½®ä¸º:",{x:n,y:t,z:r}))}setRotation(n,t,r){this.model&&(this.model.rotation.set(n,t,r),console.log("çŽ©å®¶æœå‘å·²è®¾ç½®ä¸º:",{x:n,y:t,z:r}))}setPositionAndRotation(n,t){n&&this.setPosition(n.x,n.y,n.z),t&&this.setRotation(t.x,t.y,t.z)}saveCurrentPosition(n,t="default"){if(!this.model||!n)return console.warn("PlayerControlleræˆ–SceneControlleræœªåˆå§‹åŒ–å®Œæˆï¼Œæ— æ³•ä¿å­˜ä½ç½®"),!1;try{const r=this.getPosition(),s=this.getRotation(),a=n.getCamera(),e=n.getOrbitControl(),u={position:{x:a.position.x,y:a.position.y,z:a.position.z},target:{x:e.target.x,y:e.target.y,z:e.target.z},polarAngle:e.getPolarAngle(),azimuthalAngle:e.getAzimuthalAngle(),distance:e.getDistance()},p={timestamp:Date.now(),modelUrl:t,player:{position:{x:r.x,y:r.y,z:r.z},rotation:{x:s.x,y:s.y,z:s.z}},camera:u},y=`metaverse_position_${t}`;return localStorage.setItem(y,JSON.stringify(p)),console.log("ä½ç½®ä¿¡æ¯å·²ä¿å­˜:",p,JSON.stringify(p)),!0}catch(r){return console.error("ä¿å­˜ä½ç½®ä¿¡æ¯å¤±è´¥:",r),!1}}restoreSavedPosition(n,t="default",r=!1){var s,a;if(!this.model||!n)return console.warn("PlayerControlleræˆ–SceneControlleræœªåˆå§‹åŒ–å®Œæˆï¼Œæ— æ³•æ¢å¤ä½ç½®"),!1;try{const e=`metaverse_position_${t}`,u=localStorage.getItem(e);if(!u)return console.log("æ²¡æœ‰æ‰¾åˆ°ä¿å­˜çš„ä½ç½®ä¿¡æ¯"),!1;const p=JSON.parse(u);return console.log("æ¢å¤ä½ç½®ä¿¡æ¯:",p),p!=null&&p.player&&this.setPositionAndRotation((s=p.player)==null?void 0:s.position,(a=p.player)==null?void 0:a.rotation),r||p!=null&&p.camera&&n.setCameraAndOribitControl(p.camera),!0}catch(e){return console.error("æ¢å¤ä½ç½®ä¿¡æ¯å¤±è´¥:",e),!1}}hasSavedPosition(n="default"){const t=`metaverse_position_${n}`;return localStorage.getItem(t)!==null}clearSavedPosition(n="default"){try{const t=`metaverse_position_${n}`;return localStorage.removeItem(t),console.log("å·²æ¸…é™¤ä¿å­˜çš„ä½ç½®ä¿¡æ¯"),!0}catch(t){return console.error("æ¸…é™¤ä½ç½®ä¿¡æ¯å¤±è´¥:",t),!1}}}const EngineConfig={GaussianSplats3D:"GaussianSplats3D",Spark:"Spark"},kn=class kn{constructor(n,t){let r,s;this.promise=new Promise((y,C)=>{r=y,s=C});const a=r.bind(this),e=s.bind(this),u=(...y)=>{a(...y)},p=y=>{e(y)};n(u.bind(this),p.bind(this)),this.abortHandler=t,this.id=kn.idGen++}then(n){return new kn((t,r)=>{this.promise=this.promise.then((...s)=>{const a=n(...s);a instanceof Promise||a instanceof kn?a.then((...e)=>{t(...e)}):t(a)}).catch(s=>{r(s)})},this.abortHandler)}catch(n){return new kn(t=>{this.promise=this.promise.then((...r)=>{t(...r)}).catch(n)},this.abortHandler)}abort(n){this.abortHandler&&this.abortHandler(n)}};xe(kn,"idGen",0);let AbortablePromise=kn;class AbortedPromiseError extends Error{constructor(n){super(n)}}(function(){const g=new Float32Array(1),n=new Int32Array(g.buffer);return function(t){g[0]=t;const r=n[0];let s=r>>16&32768,a=r>>12&2047;const e=r>>23&255;return e<103?s:e>142?(s|=31744,s|=(e==255?0:1)&&r&8388607,s):e<113?(a|=2048,s|=(a>>114-e)+(a>>113-e&1),s):(s|=e-112<<10|a>>1,s+=a&1,s)}})();const uintEncodedFloat=(function(){const g=new Float32Array(1),n=new Int32Array(g.buffer);return function(t){return g[0]=t,n[0]}})(),rgbaArrayToInteger=function(g,n){return g[n]+(g[n+1]<<8)+(g[n+2]<<16)+(g[n+3]<<24)},fetchWithProgress=function(g,n,t=!0,r){const s=new AbortController,a=s.signal;let e=!1;const u=C=>{s.abort(C),e=!0};let p=!1;const y=(C,b,x,w)=>{n&&!p&&(n(C,b,x,w),C===100&&(p=!0))};return new AbortablePromise((C,b)=>{const x={signal:a};r&&(x.headers=r),fetch(g,x).then(async w=>{if(!w.ok){const L=await w.text();b(new Error(`Fetch failed: ${w.status} ${w.statusText} ${L}`));return}const E=w.body.getReader();let I=0,R=w.headers.get("Content-Length"),M=R?parseInt(R):void 0;const T=[];for(;!e;)try{const{value:L,done:V}=await E.read();if(V){if(y(100,"100%",L,M),t){const P=new Blob(T).arrayBuffer();C(P)}else C();break}I+=L.length;let k,F;M!==void 0&&(k=I/M*100,F=`${k.toFixed(2)}%`),t&&T.push(L),y(k,F,L,M)}catch(L){b(L);return}}).catch(w=>{b(new AbortedPromiseError(w))})},u)},clamp=function(g,n,t){return Math.max(Math.min(g,t),n)},getCurrentTime=function(){return performance.now()/1e3},disposeAllMeshes=g=>{if(g.geometry&&(g.geometry.dispose(),g.geometry=null),g.material&&(g.material.dispose(),g.material=null),g.children)for(let n of g.children)disposeAllMeshes(n)},delayedExecute=(g,n)=>new Promise(t=>{window.setTimeout(()=>{t(g?g():void 0)},n?1:4e3)}),getSphericalHarmonicsComponentCountForDegree=(g=0)=>{let n=0;if(g===1)n=9;else if(g===2)n=24;else if(g===3)n=45;else if(g>3)throw new Error("getSphericalHarmonicsComponentCountForDegree() -> Invalid spherical harmonics degree");return n},nativePromiseWithExtractedComponents=()=>{let g,n;return{promise:new Promise((r,s)=>{g=r,n=s}),resolve:g,reject:n}},abortablePromiseWithExtractedComponents=g=>{let n,t;return g||(g=()=>{}),{promise:new AbortablePromise((s,a)=>{n=s,t=a},g),resolve:n,reject:t}};class Semver{constructor(n,t,r){this.major=n,this.minor=t,this.patch=r}toString(){return`${this.major}_${this.minor}_${this.patch}`}}function isIOS(){const g=navigator.userAgent;return g.indexOf("iPhone")>0||g.indexOf("iPad")>0}function getIOSSemever(){if(isIOS()){const g=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return new Semver(parseInt(g[1]||0,10),parseInt(g[2]||0,10),parseInt(g[3]||0,10))}else return null}const BASE_COMPONENT_COUNT=14,er=class er{constructor(n=0){this.sphericalHarmonicsDegree=n,this.sphericalHarmonicsCount=getSphericalHarmonicsComponentCountForDegree(this.sphericalHarmonicsDegree),this.componentCount=this.sphericalHarmonicsCount+BASE_COMPONENT_COUNT,this.defaultSphericalHarmonics=new Array(this.sphericalHarmonicsCount).fill(0),this.splats=[],this.splatCount=0}static createSplat(n=0){const t=[0,0,0,1,1,1,1,0,0,0,0,0,0,0];let r=getSphericalHarmonicsComponentCountForDegree(n);for(let s=0;s<r;s++)t.push(0);return t}addSplat(n){this.splats.push(n),this.splatCount++}getSplat(n){return this.splats[n]}addDefaultSplat(){const n=er.createSplat(this.sphericalHarmonicsDegree);return this.addSplat(n),n}addSplatFromComonents(n,t,r,s,a,e,u,p,y,C,b,x,w,E,...I){const R=[n,t,r,s,a,e,u,p,y,C,b,x,w,E,...this.defaultSphericalHarmonics];for(let M=0;M<I.length&&M<this.sphericalHarmonicsCount;M++)R[M]=I[M];return this.addSplat(R),R}addSplatFromArray(n,t){const r=n.splats[t],s=er.createSplat(this.sphericalHarmonicsDegree);for(let a=0;a<this.componentCount&&a<r.length;a++)s[a]=r[a];this.addSplat(s)}};xe(er,"OFFSET",{X:0,Y:1,Z:2,SCALE0:3,SCALE1:4,SCALE2:5,ROTATION0:6,ROTATION1:7,ROTATION2:8,ROTATION3:9,FDC0:10,FDC1:11,FDC2:12,OPACITY:13,FRC0:14,FRC1:15,FRC2:16,FRC3:17,FRC4:18,FRC5:19,FRC6:20,FRC7:21,FRC8:22,FRC9:23,FRC10:24,FRC11:25,FRC12:26,FRC13:27,FRC14:28,FRC15:29,FRC16:30,FRC17:31,FRC18:32,FRC19:33,FRC20:34,FRC21:35,FRC22:36,FRC23:37});let UncompressedSplatArray=er;class Constants{}xe(Constants,"DefaultSplatSortDistanceMapPrecision",16),xe(Constants,"MemoryPageSize",65536),xe(Constants,"BytesPerFloat",4),xe(Constants,"BytesPerInt",4),xe(Constants,"MaxScenes",32),xe(Constants,"ProgressiveLoadSectionSize",262144),xe(Constants,"ProgressiveLoadSectionDelayDuration",15),xe(Constants,"SphericalHarmonics8BitCompressionRange",3),xe(Constants,"RenderChunkSize",162144),xe(Constants,"RenderChunkDelay",50),xe(Constants,"MaxRenderChunksPerSecond",2);const DefaultSphericalHarmonics8BitCompressionRange=Constants.SphericalHarmonics8BitCompressionRange,DefaultSphericalHarmonics8BitCompressionHalfRange=DefaultSphericalHarmonics8BitCompressionRange/2,toHalfFloat=DataUtils.toHalfFloat.bind(DataUtils),fromHalfFloat$1=DataUtils.fromHalfFloat.bind(DataUtils),toUncompressedFloat=(g,n,t=!1,r,s)=>{if(n===0)return g;if(n===1||n===2&&!t)return DataUtils.fromHalfFloat(g);if(n===2)return fromUint8(g,r,s)},toUint8=(g,n,t)=>{g=clamp(g,n,t);const r=t-n;return clamp(Math.floor((g-n)/r*255),0,255)},fromUint8=(g,n,t)=>{const r=t-n;return g/255*r+n},fromHalfFloatToUint8=(g,n,t)=>toUint8(fromHalfFloat$1(g,n,t)),fromUint8ToHalfFloat=(g,n,t)=>toHalfFloat(fromUint8(g,n,t)),dataViewFloatForCompressionLevel=(g,n,t,r=!1)=>t===0?g.getFloat32(n*4,!0):t===1||t===2&&!r?g.getUint16(n*2,!0):g.getUint8(n,!0),convertBetweenCompressionLevels=(function(){const g=n=>n;return function(n,t,r,s=!1){if(t===r)return n;let a=g;return t===2&&s?r===1?a=fromUint8ToHalfFloat:r==0&&(a=fromUint8):t===2||t===1?r===0?a=fromHalfFloat$1:r==2&&(s?a=fromHalfFloatToUint8:a=g):t===0&&(r===1?a=toHalfFloat:r==2&&(s?a=toUint8:a=toHalfFloat)),a(n)}})(),copyBetweenBuffers=(g,n,t,r,s=0)=>{const a=new Uint8Array(g,n),e=new Uint8Array(t,r);for(let u=0;u<s;u++)e[u]=a[u]},pe=class pe{constructor(n,t=!0){xe(this,"getSplatScaleAndRotation",(function(){const n=new Matrix4,t=new Matrix4,r=new Matrix4,s=new Vector3$1,a=new Vector3$1,e=new Quaternion$1;return function(u,p,y,C,b){const x=this.globalSplatIndexToSectionMap[u],w=this.sections[x],E=u-w.splatCountOffset,I=w.bytesPerSplat*E+pe.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,R=new DataView(this.bufferData,w.dataBase+I);a.set(toUncompressedFloat(dataViewFloatForCompressionLevel(R,0,this.compressionLevel),this.compressionLevel),toUncompressedFloat(dataViewFloatForCompressionLevel(R,1,this.compressionLevel),this.compressionLevel),toUncompressedFloat(dataViewFloatForCompressionLevel(R,2,this.compressionLevel),this.compressionLevel)),b&&(b.x!==void 0&&(a.x=b.x),b.y!==void 0&&(a.y=b.y),b.z!==void 0&&(a.z=b.z)),e.set(toUncompressedFloat(dataViewFloatForCompressionLevel(R,4,this.compressionLevel),this.compressionLevel),toUncompressedFloat(dataViewFloatForCompressionLevel(R,5,this.compressionLevel),this.compressionLevel),toUncompressedFloat(dataViewFloatForCompressionLevel(R,6,this.compressionLevel),this.compressionLevel),toUncompressedFloat(dataViewFloatForCompressionLevel(R,3,this.compressionLevel),this.compressionLevel)),C?(n.makeScale(a.x,a.y,a.z),t.makeRotationFromQuaternion(e),r.copy(n).multiply(t).multiply(C),r.decompose(s,y,p)):(p.copy(a),y.copy(e))}})());xe(this,"fillSplatScaleRotationArray",(function(){const n=new Matrix4,t=new Matrix4,r=new Matrix4,s=new Vector3$1,a=new Quaternion$1,e=new Vector3$1,u=p=>{const y=p.w<0?-1:1;p.x*=y,p.y*=y,p.z*=y,p.w*=y};return function(p,y,C,b,x,w,E,I){const R=this.splatCount;b=b||0,x=x||R-1,w===void 0&&(w=b);const M=(T,L)=>convertBetweenCompressionLevels(T,L,E);for(let T=b;T<=x;T++){const L=this.globalSplatIndexToSectionMap[T],V=this.sections[L],k=T-V.splatCountOffset,F=V.bytesPerSplat*k+pe.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,P=(T-b+w)*pe.ScaleComponentCount,U=(T-b+w)*pe.RotationComponentCount,G=new DataView(this.bufferData,V.dataBase+F),Q=I&&I.x!==void 0?I.x:dataViewFloatForCompressionLevel(G,0,this.compressionLevel),ee=I&&I.y!==void 0?I.y:dataViewFloatForCompressionLevel(G,1,this.compressionLevel),de=I&&I.z!==void 0?I.z:dataViewFloatForCompressionLevel(G,2,this.compressionLevel),ne=dataViewFloatForCompressionLevel(G,3,this.compressionLevel),ae=dataViewFloatForCompressionLevel(G,4,this.compressionLevel),fe=dataViewFloatForCompressionLevel(G,5,this.compressionLevel),Ae=dataViewFloatForCompressionLevel(G,6,this.compressionLevel);s.set(toUncompressedFloat(Q,this.compressionLevel),toUncompressedFloat(ee,this.compressionLevel),toUncompressedFloat(de,this.compressionLevel)),a.set(toUncompressedFloat(ae,this.compressionLevel),toUncompressedFloat(fe,this.compressionLevel),toUncompressedFloat(Ae,this.compressionLevel),toUncompressedFloat(ne,this.compressionLevel)).normalize(),C&&(e.set(0,0,0),n.makeScale(s.x,s.y,s.z),t.makeRotationFromQuaternion(a),r.identity().premultiply(n).premultiply(t),r.premultiply(C),r.decompose(e,a,s),a.normalize()),u(a),p&&(p[P]=M(s.x,0),p[P+1]=M(s.y,0),p[P+2]=M(s.z,0)),y&&(y[U]=M(a.x,0),y[U+1]=M(a.y,0),y[U+2]=M(a.z,0),y[U+3]=M(a.w,0))}}})());xe(this,"fillSphericalHarmonicsArray",(function(){for(let ae=0;ae<15;ae++)new Vector3$1;const n=new Matrix3,t=new Matrix4,r=new Vector3$1,s=new Vector3$1,a=new Quaternion$1,e=[],u=[],p=[],y=[],C=[],b=[],x=[],w=[],E=[],I=[],R=[],M=[],T=[],L=[],V=[],k=[],F=[],P=[],U=ae=>ae,G=(ae,fe,Ae,q)=>{ae[0]=fe,ae[1]=Ae,ae[2]=q},Q=(ae,fe,Ae,q,te)=>{ae[0]=dataViewFloatForCompressionLevel(fe,q,te,!0),ae[1]=dataViewFloatForCompressionLevel(fe,q+Ae,te,!0),ae[2]=dataViewFloatForCompressionLevel(fe,q+Ae+Ae,te,!0)},ee=(ae,fe)=>{fe[0]=ae[0],fe[1]=ae[1],fe[2]=ae[2]},de=(ae,fe,Ae,q)=>{fe[Ae]=q(ae[0]),fe[Ae+1]=q(ae[1]),fe[Ae+2]=q(ae[2])},ne=(ae,fe,Ae,q,te)=>(fe[0]=toUncompressedFloat(ae[0],Ae,!0,q,te),fe[1]=toUncompressedFloat(ae[1],Ae,!0,q,te),fe[2]=toUncompressedFloat(ae[2],Ae,!0,q,te),fe);return function(ae,fe,Ae,q,te,he,Ce){const ye=this.splatCount;q=q||0,te=te||ye-1,he===void 0&&(he=q),Ae&&fe>=1&&(t.copy(Ae),t.decompose(r,a,s),a.normalize(),t.makeRotationFromQuaternion(a),n.setFromMatrix4(t),G(e,n.elements[4],-n.elements[7],n.elements[1]),G(u,-n.elements[5],n.elements[8],-n.elements[2]),G(p,n.elements[3],-n.elements[6],n.elements[0]));const ce=J=>fromHalfFloatToUint8(J,this.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff),N=J=>toUint8(J,this.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff);for(let J=q;J<=te;J++){const le=this.globalSplatIndexToSectionMap[J],Se=this.sections[le];fe=Math.min(fe,Se.sphericalHarmonicsDegree);const Be=getSphericalHarmonicsComponentCountForDegree(fe),Ne=J-Se.splatCountOffset,je=Se.bytesPerSplat*Ne+pe.CompressionLevels[this.compressionLevel].SphericalHarmonicsOffsetBytes,ke=new DataView(this.bufferData,Se.dataBase+je),Ve=(J-q+he)*Be;let Ge=Ae?0:this.compressionLevel,We=U;Ge!==Ce&&(Ge===1?Ce===0?We=fromHalfFloat$1:Ce==2&&(We=ce):Ge===0&&(Ce===1?We=toHalfFloat:Ce==2&&(We=N)));const Ke=this.minSphericalHarmonicsCoeff,Oe=this.maxSphericalHarmonicsCoeff;fe>=1&&(Q(E,ke,3,0,this.compressionLevel),Q(I,ke,3,1,this.compressionLevel),Q(R,ke,3,2,this.compressionLevel),Ae?(ne(E,E,this.compressionLevel,Ke,Oe),ne(I,I,this.compressionLevel,Ke,Oe),ne(R,R,this.compressionLevel,Ke,Oe),pe.rotateSphericalHarmonics3(E,I,R,e,u,p,L,V,k)):(ee(E,L),ee(I,V),ee(R,k)),de(L,ae,Ve,We),de(V,ae,Ve+3,We),de(k,ae,Ve+6,We),fe>=2&&(Q(E,ke,5,9,this.compressionLevel),Q(I,ke,5,10,this.compressionLevel),Q(R,ke,5,11,this.compressionLevel),Q(M,ke,5,12,this.compressionLevel),Q(T,ke,5,13,this.compressionLevel),Ae?(ne(E,E,this.compressionLevel,Ke,Oe),ne(I,I,this.compressionLevel,Ke,Oe),ne(R,R,this.compressionLevel,Ke,Oe),ne(M,M,this.compressionLevel,Ke,Oe),ne(T,T,this.compressionLevel,Ke,Oe),pe.rotateSphericalHarmonics5(E,I,R,M,T,e,u,p,y,C,b,x,w,L,V,k,F,P)):(ee(E,L),ee(I,V),ee(R,k),ee(M,F),ee(T,P)),de(L,ae,Ve+9,We),de(V,ae,Ve+12,We),de(k,ae,Ve+15,We),de(F,ae,Ve+18,We),de(P,ae,Ve+21,We)))}}})());this.constructFromBuffer(n,t)}getSplatCount(){return this.splatCount}getMaxSplatCount(){return this.maxSplatCount}getMinSphericalHarmonicsDegree(){let n=0;for(let t=0;t<this.sections.length;t++){const r=this.sections[t];(t===0||r.sphericalHarmonicsDegree<n)&&(n=r.sphericalHarmonicsDegree)}return n}getBucketIndex(n,t){let r;const s=n.fullBucketCount*n.bucketSize;if(t<s)r=Math.floor(t/n.bucketSize);else{let a=s;r=n.fullBucketCount;let e=0;for(;a<n.splatCount;){let u=n.partiallyFilledBucketLengths[e];if(t>=a&&t<a+u)break;a+=u,r++,e++}}return r}getSplatCenter(n,t,r){const s=this.globalSplatIndexToSectionMap[n],a=this.sections[s],e=n-a.splatCountOffset,u=a.bytesPerSplat*e,p=new DataView(this.bufferData,a.dataBase+u),y=dataViewFloatForCompressionLevel(p,0,this.compressionLevel),C=dataViewFloatForCompressionLevel(p,1,this.compressionLevel),b=dataViewFloatForCompressionLevel(p,2,this.compressionLevel);if(this.compressionLevel>=1){const w=this.getBucketIndex(a,e)*pe.BucketStorageSizeFloats,E=a.compressionScaleFactor,I=a.compressionScaleRange;t.x=(y-I)*E+a.bucketArray[w],t.y=(C-I)*E+a.bucketArray[w+1],t.z=(b-I)*E+a.bucketArray[w+2]}else t.x=y,t.y=C,t.z=b;r&&t.applyMatrix4(r)}getSplatColor(n,t){const r=this.globalSplatIndexToSectionMap[n],s=this.sections[r],a=n-s.splatCountOffset,e=s.bytesPerSplat*a+pe.CompressionLevels[this.compressionLevel].ColorOffsetBytes,u=new Uint8Array(this.bufferData,s.dataBase+e,4);t.set(u[0],u[1],u[2],u[3])}fillSplatCenterArray(n,t,r,s,a){const e=this.splatCount;r=r||0,s=s||e-1,a===void 0&&(a=r);const u=new Vector3$1;for(let p=r;p<=s;p++){const y=this.globalSplatIndexToSectionMap[p],C=this.sections[y],b=p-C.splatCountOffset,x=(p-r+a)*pe.CenterComponentCount,w=C.bytesPerSplat*b,E=new DataView(this.bufferData,C.dataBase+w),I=dataViewFloatForCompressionLevel(E,0,this.compressionLevel),R=dataViewFloatForCompressionLevel(E,1,this.compressionLevel),M=dataViewFloatForCompressionLevel(E,2,this.compressionLevel);if(this.compressionLevel>=1){const L=this.getBucketIndex(C,b)*pe.BucketStorageSizeFloats,V=C.compressionScaleFactor,k=C.compressionScaleRange;u.x=(I-k)*V+C.bucketArray[L],u.y=(R-k)*V+C.bucketArray[L+1],u.z=(M-k)*V+C.bucketArray[L+2]}else u.x=I,u.y=R,u.z=M;t&&u.applyMatrix4(t),n[x]=u.x,n[x+1]=u.y,n[x+2]=u.z}}fillSplatCovarianceArray(n,t,r,s,a,e){const u=this.splatCount,p=new Vector3$1,y=new Quaternion$1;r=r||0,s=s||u-1,a===void 0&&(a=r);for(let C=r;C<=s;C++){const b=this.globalSplatIndexToSectionMap[C],x=this.sections[b],w=C-x.splatCountOffset,E=(C-r+a)*pe.CovarianceComponentCount,I=x.bytesPerSplat*w+pe.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,R=new DataView(this.bufferData,x.dataBase+I);p.set(toUncompressedFloat(dataViewFloatForCompressionLevel(R,0,this.compressionLevel),this.compressionLevel),toUncompressedFloat(dataViewFloatForCompressionLevel(R,1,this.compressionLevel),this.compressionLevel),toUncompressedFloat(dataViewFloatForCompressionLevel(R,2,this.compressionLevel),this.compressionLevel)),y.set(toUncompressedFloat(dataViewFloatForCompressionLevel(R,4,this.compressionLevel),this.compressionLevel),toUncompressedFloat(dataViewFloatForCompressionLevel(R,5,this.compressionLevel),this.compressionLevel),toUncompressedFloat(dataViewFloatForCompressionLevel(R,6,this.compressionLevel),this.compressionLevel),toUncompressedFloat(dataViewFloatForCompressionLevel(R,3,this.compressionLevel),this.compressionLevel)),pe.computeCovariance(p,y,t,n,E,e)}}fillSplatColorArray(n,t,r,s,a){const e=this.splatCount;r=r||0,s=s||e-1,a===void 0&&(a=r);for(let u=r;u<=s;u++){const p=this.globalSplatIndexToSectionMap[u],y=this.sections[p],C=u-y.splatCountOffset,b=(u-r+a)*pe.ColorComponentCount,x=y.bytesPerSplat*C+pe.CompressionLevels[this.compressionLevel].ColorOffsetBytes,w=new Uint8Array(this.bufferData,y.dataBase+x);let E=w[3];E=E>=t?E:0,n[b]=w[0],n[b+1]=w[1],n[b+2]=w[2],n[b+3]=E}}static parseHeader(n){const t=new Uint8Array(n,0,pe.HeaderSizeBytes),r=new Uint16Array(n,0,pe.HeaderSizeBytes/2),s=new Uint32Array(n,0,pe.HeaderSizeBytes/4),a=new Float32Array(n,0,pe.HeaderSizeBytes/4),e=t[0],u=t[1],p=s[1],y=s[2],C=s[3],b=s[4],x=r[10],w=new Vector3$1(a[6],a[7],a[8]),E=a[9]||-DefaultSphericalHarmonics8BitCompressionHalfRange,I=a[10]||DefaultSphericalHarmonics8BitCompressionHalfRange;return{versionMajor:e,versionMinor:u,maxSectionCount:p,sectionCount:y,maxSplatCount:C,splatCount:b,compressionLevel:x,sceneCenter:w,minSphericalHarmonicsCoeff:E,maxSphericalHarmonicsCoeff:I}}static writeHeaderCountsToBuffer(n,t,r){const s=new Uint32Array(r,0,pe.HeaderSizeBytes/4);s[2]=n,s[4]=t}static writeHeaderToBuffer(n,t){const r=new Uint8Array(t,0,pe.HeaderSizeBytes),s=new Uint16Array(t,0,pe.HeaderSizeBytes/2),a=new Uint32Array(t,0,pe.HeaderSizeBytes/4),e=new Float32Array(t,0,pe.HeaderSizeBytes/4);r[0]=n.versionMajor,r[1]=n.versionMinor,r[2]=0,r[3]=0,a[1]=n.maxSectionCount,a[2]=n.sectionCount,a[3]=n.maxSplatCount,a[4]=n.splatCount,s[10]=n.compressionLevel,e[6]=n.sceneCenter.x,e[7]=n.sceneCenter.y,e[8]=n.sceneCenter.z,e[9]=n.minSphericalHarmonicsCoeff||-DefaultSphericalHarmonics8BitCompressionHalfRange,e[10]=n.maxSphericalHarmonicsCoeff||DefaultSphericalHarmonics8BitCompressionHalfRange}static parseSectionHeaders(n,t,r=0,s){const a=n.compressionLevel,e=n.maxSectionCount,u=new Uint16Array(t,r,e*pe.SectionHeaderSizeBytes/2),p=new Uint32Array(t,r,e*pe.SectionHeaderSizeBytes/4),y=new Float32Array(t,r,e*pe.SectionHeaderSizeBytes/4),C=[];let b=0,x=b/2,w=b/4,E=pe.HeaderSizeBytes+n.maxSectionCount*pe.SectionHeaderSizeBytes,I=0;for(let R=0;R<e;R++){const M=p[w+1],T=p[w+2],L=p[w+3],V=y[w+4],k=V/2,F=u[x+10],P=p[w+6]||pe.CompressionLevels[a].ScaleRange,U=p[w+8],G=p[w+9],Q=G*4,ee=F*L+Q,de=u[x+20],{bytesPerSplat:ne}=pe.calculateComponentStorage(a,de),ae=ne*M,fe=ae+ee,Ae={bytesPerSplat:ne,splatCountOffset:I,splatCount:s?M:0,maxSplatCount:M,bucketSize:T,bucketCount:L,bucketBlockSize:V,halfBucketBlockSize:k,bucketStorageSizeBytes:F,bucketsStorageSizeBytes:ee,splatDataStorageSizeBytes:ae,storageSizeBytes:fe,compressionScaleRange:P,compressionScaleFactor:k/P,base:E,bucketsBase:E+Q,dataBase:E+ee,fullBucketCount:U,partiallyFilledBucketCount:G,sphericalHarmonicsDegree:de};C[R]=Ae,E+=fe,b+=pe.SectionHeaderSizeBytes,x=b/2,w=b/4,I+=M}return C}static writeSectionHeaderToBuffer(n,t,r,s=0){const a=new Uint16Array(r,s,pe.SectionHeaderSizeBytes/2),e=new Uint32Array(r,s,pe.SectionHeaderSizeBytes/4),u=new Float32Array(r,s,pe.SectionHeaderSizeBytes/4);e[0]=n.splatCount,e[1]=n.maxSplatCount,e[2]=t>=1?n.bucketSize:0,e[3]=t>=1?n.bucketCount:0,u[4]=t>=1?n.bucketBlockSize:0,a[10]=t>=1?pe.BucketStorageSizeBytes:0,e[6]=t>=1?n.compressionScaleRange:0,e[7]=n.storageSizeBytes,e[8]=t>=1?n.fullBucketCount:0,e[9]=t>=1?n.partiallyFilledBucketCount:0,a[20]=n.sphericalHarmonicsDegree}static writeSectionHeaderSplatCountToBuffer(n,t,r=0){const s=new Uint32Array(t,r,pe.SectionHeaderSizeBytes/4);s[0]=n}constructFromBuffer(n,t){this.bufferData=n,this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSectionMap=[];const r=pe.parseHeader(this.bufferData);this.versionMajor=r.versionMajor,this.versionMinor=r.versionMinor,this.maxSectionCount=r.maxSectionCount,this.sectionCount=t?r.maxSectionCount:0,this.maxSplatCount=r.maxSplatCount,this.splatCount=t?r.maxSplatCount:0,this.compressionLevel=r.compressionLevel,this.sceneCenter=new Vector3$1().copy(r.sceneCenter),this.minSphericalHarmonicsCoeff=r.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff=r.maxSphericalHarmonicsCoeff,this.sections=pe.parseSectionHeaders(r,this.bufferData,pe.HeaderSizeBytes,t),this.linkBufferArrays(),this.buildMaps()}static calculateComponentStorage(n,t){const r=pe.CompressionLevels[n].BytesPerCenter,s=pe.CompressionLevels[n].BytesPerScale,a=pe.CompressionLevels[n].BytesPerRotation,e=pe.CompressionLevels[n].BytesPerColor,u=getSphericalHarmonicsComponentCountForDegree(t),p=pe.CompressionLevels[n].BytesPerSphericalHarmonicsComponent*u,y=r+s+a+e+p;return{bytesPerCenter:r,bytesPerScale:s,bytesPerRotation:a,bytesPerColor:e,sphericalHarmonicsComponentsPerSplat:u,sphericalHarmonicsBytesPerSplat:p,bytesPerSplat:y}}linkBufferArrays(){for(let n=0;n<this.maxSectionCount;n++){const t=this.sections[n];t.bucketArray=new Float32Array(this.bufferData,t.bucketsBase,t.bucketCount*pe.BucketStorageSizeFloats),t.partiallyFilledBucketCount>0&&(t.partiallyFilledBucketLengths=new Uint32Array(this.bufferData,t.base,t.partiallyFilledBucketCount))}}buildMaps(){let n=0;for(let t=0;t<this.maxSectionCount;t++){const r=this.sections[t];for(let s=0;s<r.maxSplatCount;s++){const a=n+s;this.globalSplatIndexToLocalSplatIndexMap[a]=s,this.globalSplatIndexToSectionMap[a]=t}n+=r.maxSplatCount}}updateLoadedCounts(n,t){pe.writeHeaderCountsToBuffer(n,t,this.bufferData),this.sectionCount=n,this.splatCount=t}updateSectionLoadedCounts(n,t){const r=pe.HeaderSizeBytes+pe.SectionHeaderSizeBytes*n;pe.writeSectionHeaderSplatCountToBuffer(t,this.bufferData,r),this.sections[n].splatCount=t}static generateFromUncompressedSplatArrays(n,t,r,s,a,e,u=[]){let p=0;for(let k=0;k<n.length;k++){const F=n[k];p=Math.max(F.sphericalHarmonicsDegree,p)}let y,C;for(let k=0;k<n.length;k++){const F=n[k];for(let P=0;P<F.splats.length;P++){const U=F.splats[P];for(let G=UncompressedSplatArray.OFFSET.FRC0;G<UncompressedSplatArray.OFFSET.FRC23&&G<U.length;G++)(!y||U[G]<y)&&(y=U[G]),(!C||U[G]>C)&&(C=U[G])}}y=y||-DefaultSphericalHarmonics8BitCompressionHalfRange,C=C||DefaultSphericalHarmonics8BitCompressionHalfRange;const{bytesPerSplat:b}=pe.calculateComponentStorage(r,p),x=pe.CompressionLevels[r].ScaleRange,w=[],E=[];let I=0;for(let k=0;k<n.length;k++){const F=n[k],P=new UncompressedSplatArray(p);for(let le=0;le<F.splatCount;le++){const Se=F.splats[le];(Se[UncompressedSplatArray.OFFSET.OPACITY]||0)>=t&&P.addSplat(Se)}const U=u[k]||{},G=(U.blockSizeFactor||1)*(a||pe.BucketBlockSize),Q=Math.ceil((U.bucketSizeFactor||1)*(e||pe.BucketSize)),ee=pe.computeBucketsForUncompressedSplatArray(P,G,Q),de=ee.fullBuckets.length,ne=ee.partiallyFullBuckets.map(le=>le.splats.length),ae=ne.length,fe=[...ee.fullBuckets,...ee.partiallyFullBuckets],Ae=P.splats.length*b,q=ae*4,te=r>=1?fe.length*pe.BucketStorageSizeBytes+q:0,he=Ae+te,Ce=new ArrayBuffer(he),ye=x/(G*.5),ce=new Vector3$1;let N=0;for(let le=0;le<fe.length;le++){const Se=fe[le];ce.fromArray(Se.center);for(let Be=0;Be<Se.splats.length;Be++){let Ne=Se.splats[Be];const je=P.splats[Ne],ke=te+N*b;pe.writeSplatDataToSectionBuffer(je,Ce,ke,r,p,ce,ye,x,y,C),N++}}if(I+=N,r>=1){const le=new Uint32Array(Ce,0,ne.length*4);for(let Be=0;Be<ne.length;Be++)le[Be]=ne[Be];const Se=new Float32Array(Ce,q,fe.length*pe.BucketStorageSizeFloats);for(let Be=0;Be<fe.length;Be++){const Ne=fe[Be],je=Be*3;Se[je]=Ne.center[0],Se[je+1]=Ne.center[1],Se[je+2]=Ne.center[2]}}w.push(Ce);const J=new ArrayBuffer(pe.SectionHeaderSizeBytes);pe.writeSectionHeaderToBuffer({maxSplatCount:N,splatCount:N,bucketSize:Q,bucketCount:fe.length,bucketBlockSize:G,compressionScaleRange:x,storageSizeBytes:he,fullBucketCount:de,partiallyFilledBucketCount:ae,sphericalHarmonicsDegree:p},r,J,0),E.push(J)}let R=0;for(let k of w)R+=k.byteLength;const M=pe.HeaderSizeBytes+pe.SectionHeaderSizeBytes*w.length+R,T=new ArrayBuffer(M);pe.writeHeaderToBuffer({versionMajor:0,versionMinor:1,maxSectionCount:w.length,sectionCount:w.length,maxSplatCount:I,splatCount:I,compressionLevel:r,sceneCenter:s,minSphericalHarmonicsCoeff:y,maxSphericalHarmonicsCoeff:C},T);let L=pe.HeaderSizeBytes;for(let k of E)new Uint8Array(T,L,pe.SectionHeaderSizeBytes).set(new Uint8Array(k)),L+=pe.SectionHeaderSizeBytes;for(let k of w)new Uint8Array(T,L,k.byteLength).set(new Uint8Array(k)),L+=k.byteLength;return new pe(T)}static computeBucketsForUncompressedSplatArray(n,t,r){let s=n.splatCount;const a=t/2,e=new Vector3$1,u=new Vector3$1;for(let I=0;I<s;I++){const R=n.splats[I],M=[R[UncompressedSplatArray.OFFSET.X],R[UncompressedSplatArray.OFFSET.Y],R[UncompressedSplatArray.OFFSET.Z]];(I===0||M[0]<e.x)&&(e.x=M[0]),(I===0||M[0]>u.x)&&(u.x=M[0]),(I===0||M[1]<e.y)&&(e.y=M[1]),(I===0||M[1]>u.y)&&(u.y=M[1]),(I===0||M[2]<e.z)&&(e.z=M[2]),(I===0||M[2]>u.z)&&(u.z=M[2])}const p=new Vector3$1().copy(u).sub(e),y=Math.ceil(p.y/t),C=Math.ceil(p.z/t),b=new Vector3$1,x=[],w={};for(let I=0;I<s;I++){const R=n.splats[I],M=[R[UncompressedSplatArray.OFFSET.X],R[UncompressedSplatArray.OFFSET.Y],R[UncompressedSplatArray.OFFSET.Z]],T=Math.floor((M[0]-e.x)/t),L=Math.floor((M[1]-e.y)/t),V=Math.floor((M[2]-e.z)/t);b.x=T*t+e.x+a,b.y=L*t+e.y+a,b.z=V*t+e.z+a;const k=T*(y*C)+L*C+V;let F=w[k];F||(w[k]=F={splats:[],center:b.toArray()}),F.splats.push(I),F.splats.length>=r&&(x.push(F),w[k]=null)}const E=[];for(let I in w)if(w.hasOwnProperty(I)){const R=w[I];R&&E.push(R)}return{fullBuckets:x,partiallyFullBuckets:E}}static preallocateUncompressed(n,t){const r=pe.CompressionLevels[0].SphericalHarmonicsDegrees[t],s=pe.HeaderSizeBytes+pe.SectionHeaderSizeBytes,a=s+r.BytesPerSplat*n,e=new ArrayBuffer(a);return pe.writeHeaderToBuffer({versionMajor:pe.CurrentMajorVersion,versionMinor:pe.CurrentMinorVersion,maxSectionCount:1,sectionCount:1,maxSplatCount:n,splatCount:n,compressionLevel:0,sceneCenter:new Vector3$1},e),pe.writeSectionHeaderToBuffer({maxSplatCount:n,splatCount:n,bucketSize:0,bucketCount:0,bucketBlockSize:0,compressionScaleRange:0,storageSizeBytes:0,fullBucketCount:0,partiallyFilledBucketCount:0,sphericalHarmonicsDegree:t},0,e,pe.HeaderSizeBytes),{splatBuffer:new pe(e,!0),splatBufferDataOffsetBytes:s}}};xe(pe,"CurrentMajorVersion",0),xe(pe,"CurrentMinorVersion",1),xe(pe,"CenterComponentCount",3),xe(pe,"ScaleComponentCount",3),xe(pe,"RotationComponentCount",4),xe(pe,"ColorComponentCount",4),xe(pe,"CovarianceComponentCount",6),xe(pe,"SplatScaleOffsetFloat",3),xe(pe,"SplatRotationOffsetFloat",6),xe(pe,"CompressionLevels",{0:{BytesPerCenter:12,BytesPerScale:12,BytesPerRotation:16,BytesPerColor:4,ScaleOffsetBytes:12,RotationffsetBytes:24,ColorOffsetBytes:40,SphericalHarmonicsOffsetBytes:44,ScaleRange:1,BytesPerSphericalHarmonicsComponent:4,SphericalHarmonicsOffsetFloat:11,SphericalHarmonicsDegrees:{0:{BytesPerSplat:44},1:{BytesPerSplat:80},2:{BytesPerSplat:140}}},1:{BytesPerCenter:6,BytesPerScale:6,BytesPerRotation:8,BytesPerColor:4,ScaleOffsetBytes:6,RotationffsetBytes:12,ColorOffsetBytes:20,SphericalHarmonicsOffsetBytes:24,ScaleRange:32767,BytesPerSphericalHarmonicsComponent:2,SphericalHarmonicsOffsetFloat:12,SphericalHarmonicsDegrees:{0:{BytesPerSplat:24},1:{BytesPerSplat:42},2:{BytesPerSplat:72}}},2:{BytesPerCenter:6,BytesPerScale:6,BytesPerRotation:8,BytesPerColor:4,ScaleOffsetBytes:6,RotationffsetBytes:12,ColorOffsetBytes:20,SphericalHarmonicsOffsetBytes:24,ScaleRange:32767,BytesPerSphericalHarmonicsComponent:1,SphericalHarmonicsOffsetFloat:12,SphericalHarmonicsDegrees:{0:{BytesPerSplat:24},1:{BytesPerSplat:33},2:{BytesPerSplat:48}}}}),xe(pe,"CovarianceSizeFloats",6),xe(pe,"HeaderSizeBytes",4096),xe(pe,"SectionHeaderSizeBytes",1024),xe(pe,"BucketStorageSizeBytes",12),xe(pe,"BucketStorageSizeFloats",3),xe(pe,"BucketBlockSize",5),xe(pe,"BucketSize",256),xe(pe,"computeCovariance",(function(){const n=new Matrix4,t=new Matrix3,r=new Matrix3,s=new Matrix3,a=new Matrix3,e=new Matrix3,u=new Matrix3;return function(p,y,C,b,x=0,w){n.makeScale(p.x,p.y,p.z),t.setFromMatrix4(n),n.makeRotationFromQuaternion(y),r.setFromMatrix4(n),s.copy(r).multiply(t),a.copy(s).transpose().premultiply(s),C&&(e.setFromMatrix4(C),u.copy(e).transpose(),a.multiply(u),a.premultiply(e)),w>=1?(b[x]=toHalfFloat(a.elements[0]),b[x+1]=toHalfFloat(a.elements[3]),b[x+2]=toHalfFloat(a.elements[6]),b[x+3]=toHalfFloat(a.elements[4]),b[x+4]=toHalfFloat(a.elements[7]),b[x+5]=toHalfFloat(a.elements[8])):(b[x]=a.elements[0],b[x+1]=a.elements[3],b[x+2]=a.elements[6],b[x+3]=a.elements[4],b[x+4]=a.elements[7],b[x+5]=a.elements[8])}})()),xe(pe,"dot3",(n,t,r,s,a)=>{a[0]=a[1]=a[2]=0;const e=s[0],u=s[1],p=s[2];pe.addInto3(n[0]*e,n[1]*e,n[2]*e,a),pe.addInto3(t[0]*u,t[1]*u,t[2]*u,a),pe.addInto3(r[0]*p,r[1]*p,r[2]*p,a)}),xe(pe,"addInto3",(n,t,r,s)=>{s[0]=s[0]+n,s[1]=s[1]+t,s[2]=s[2]+r}),xe(pe,"dot5",(n,t,r,s,a,e,u)=>{u[0]=u[1]=u[2]=0;const p=e[0],y=e[1],C=e[2],b=e[3],x=e[4];pe.addInto3(n[0]*p,n[1]*p,n[2]*p,u),pe.addInto3(t[0]*y,t[1]*y,t[2]*y,u),pe.addInto3(r[0]*C,r[1]*C,r[2]*C,u),pe.addInto3(s[0]*b,s[1]*b,s[2]*b,u),pe.addInto3(a[0]*x,a[1]*x,a[2]*x,u)}),xe(pe,"rotateSphericalHarmonics3",(n,t,r,s,a,e,u,p,y)=>{pe.dot3(n,t,r,s,u),pe.dot3(n,t,r,a,p),pe.dot3(n,t,r,e,y)}),xe(pe,"rotateSphericalHarmonics5",(n,t,r,s,a,e,u,p,y,C,b,x,w,E,I,R,M,T)=>{const L=Math.sqrt(.25),V=Math.sqrt(3/4),k=Math.sqrt(1/3),F=Math.sqrt(4/3),P=Math.sqrt(1/12);y[0]=L*(p[2]*e[0]+p[0]*e[2]+(e[2]*p[0]+e[0]*p[2])),y[1]=p[1]*e[0]+e[1]*p[0],y[2]=V*(p[1]*e[1]+e[1]*p[1]),y[3]=p[1]*e[2]+e[1]*p[2],y[4]=L*(p[2]*e[2]-p[0]*e[0]+(e[2]*p[2]-e[0]*p[0])),pe.dot5(n,t,r,s,a,y,E),C[0]=L*(u[2]*e[0]+u[0]*e[2]+(e[2]*u[0]+e[0]*u[2])),C[1]=u[1]*e[0]+e[1]*u[0],C[2]=V*(u[1]*e[1]+e[1]*u[1]),C[3]=u[1]*e[2]+e[1]*u[2],C[4]=L*(u[2]*e[2]-u[0]*e[0]+(e[2]*u[2]-e[0]*u[0])),pe.dot5(n,t,r,s,a,C,I),b[0]=k*(u[2]*u[0]+u[0]*u[2])+-P*(p[2]*p[0]+p[0]*p[2]+(e[2]*e[0]+e[0]*e[2])),b[1]=F*u[1]*u[0]+-k*(p[1]*p[0]+e[1]*e[0]),b[2]=u[1]*u[1]+-L*(p[1]*p[1]+e[1]*e[1]),b[3]=F*u[1]*u[2]+-k*(p[1]*p[2]+e[1]*e[2]),b[4]=k*(u[2]*u[2]-u[0]*u[0])+-P*(p[2]*p[2]-p[0]*p[0]+(e[2]*e[2]-e[0]*e[0])),pe.dot5(n,t,r,s,a,b,R),x[0]=L*(u[2]*p[0]+u[0]*p[2]+(p[2]*u[0]+p[0]*u[2])),x[1]=u[1]*p[0]+p[1]*u[0],x[2]=V*(u[1]*p[1]+p[1]*u[1]),x[3]=u[1]*p[2]+p[1]*u[2],x[4]=L*(u[2]*p[2]-u[0]*p[0]+(p[2]*u[2]-p[0]*u[0])),pe.dot5(n,t,r,s,a,x,M),w[0]=L*(p[2]*p[0]+p[0]*p[2]-(e[2]*e[0]+e[0]*e[2])),w[1]=p[1]*p[0]-e[1]*e[0],w[2]=V*(p[1]*p[1]-e[1]*e[1]),w[3]=p[1]*p[2]-e[1]*e[2],w[4]=L*(p[2]*p[2]-p[0]*p[0]-(e[2]*e[2]-e[0]*e[0])),pe.dot5(n,t,r,s,a,w,T)}),xe(pe,"writeSplatDataToSectionBuffer",(function(){const n=new ArrayBuffer(12),t=new ArrayBuffer(12),r=new ArrayBuffer(16),s=new ArrayBuffer(4),a=new ArrayBuffer(256),e=new Quaternion$1,u=new Vector3$1,p=new Vector3$1,{X:y,Y:C,Z:b,SCALE0:x,SCALE1:w,SCALE2:E,ROTATION0:I,ROTATION1:R,ROTATION2:M,ROTATION3:T,FDC0:L,FDC1:V,FDC2:k,OPACITY:F,FRC0:P,FRC9:U}=UncompressedSplatArray.OFFSET,G=(Q,ee,de)=>{const ne=de*2+1;return Q=Math.round(Q*ee)+de,clamp(Q,0,ne)};return function(Q,ee,de,ne,ae,fe,Ae,q,te=-DefaultSphericalHarmonics8BitCompressionHalfRange,he=DefaultSphericalHarmonics8BitCompressionHalfRange){const Ce=getSphericalHarmonicsComponentCountForDegree(ae),ye=pe.CompressionLevels[ne].BytesPerCenter,ce=pe.CompressionLevels[ne].BytesPerScale,N=pe.CompressionLevels[ne].BytesPerRotation,J=pe.CompressionLevels[ne].BytesPerColor,le=de,Se=le+ye,Be=Se+ce,Ne=Be+N,je=Ne+J;if(Q[I]!==void 0?(e.set(Q[I],Q[R],Q[M],Q[T]),e.normalize()):e.set(1,0,0,0),Q[x]!==void 0?u.set(Q[x]||0,Q[w]||0,Q[E]||0):u.set(0,0,0),ne===0){const Ve=new Float32Array(ee,le,pe.CenterComponentCount),Ge=new Float32Array(ee,Be,pe.RotationComponentCount),We=new Float32Array(ee,Se,pe.ScaleComponentCount);if(Ge.set([e.x,e.y,e.z,e.w]),We.set([u.x,u.y,u.z]),Ve.set([Q[y],Q[C],Q[b]]),ae>0){const Ke=new Float32Array(ee,je,Ce);if(ae>=1){for(let Oe=0;Oe<9;Oe++)Ke[Oe]=Q[P+Oe]||0;if(ae>=2)for(let Oe=0;Oe<15;Oe++)Ke[Oe+9]=Q[U+Oe]||0}}}else{const Ve=new Uint16Array(n,0,pe.CenterComponentCount),Ge=new Uint16Array(r,0,pe.RotationComponentCount),We=new Uint16Array(t,0,pe.ScaleComponentCount);if(Ge.set([toHalfFloat(e.x),toHalfFloat(e.y),toHalfFloat(e.z),toHalfFloat(e.w)]),We.set([toHalfFloat(u.x),toHalfFloat(u.y),toHalfFloat(u.z)]),p.set(Q[y],Q[C],Q[b]).sub(fe),p.x=G(p.x,Ae,q),p.y=G(p.y,Ae,q),p.z=G(p.z,Ae,q),Ve.set([p.x,p.y,p.z]),ae>0){const Ke=ne===1?Uint16Array:Uint8Array,Oe=ne===1?2:1,qe=new Ke(a,0,Ce);if(ae>=1){for(let Ye=0;Ye<9;Ye++){const ht=Q[P+Ye]||0;qe[Ye]=ne===1?toHalfFloat(ht):toUint8(ht,te,he)}const Xe=9*Oe;if(copyBetweenBuffers(qe.buffer,0,ee,je,Xe),ae>=2){for(let Ye=0;Ye<15;Ye++){const ht=Q[U+Ye]||0;qe[Ye+9]=ne===1?toHalfFloat(ht):toUint8(ht,te,he)}copyBetweenBuffers(qe.buffer,Xe,ee,je+Xe,15*Oe)}}}copyBetweenBuffers(Ve.buffer,0,ee,le,6),copyBetweenBuffers(We.buffer,0,ee,Se,6),copyBetweenBuffers(Ge.buffer,0,ee,Be,8)}const ke=new Uint8ClampedArray(s,0,4);ke.set([Q[L]||0,Q[V]||0,Q[k]||0]),ke[3]=Q[F]||0,copyBetweenBuffers(ke.buffer,0,ee,Ne,4)}})());let SplatBuffer=pe;const HeaderMagicBytes=new Uint8Array([112,108,121,10]),HeaderEndTokenBytes=new Uint8Array([10,101,110,100,95,104,101,97,100,101,114,10]),HeaderEndToken="end_header",DataTypeMap=new Map([["char",Int8Array],["uchar",Uint8Array],["short",Int16Array],["ushort",Uint16Array],["int",Int32Array],["uint",Uint32Array],["float",Float32Array],["double",Float64Array]]),unpackUnorm=(g,n)=>{const t=(1<<n)-1;return(g&t)/t},unpack111011=(g,n)=>{g.x=unpackUnorm(n>>>21,11),g.y=unpackUnorm(n>>>11,10),g.z=unpackUnorm(n,11)},unpack8888=(g,n)=>{g.x=unpackUnorm(n>>>24,8),g.y=unpackUnorm(n>>>16,8),g.z=unpackUnorm(n>>>8,8),g.w=unpackUnorm(n,8)},unpackRot=(g,n)=>{const t=1/(Math.sqrt(2)*.5),r=(unpackUnorm(n>>>20,10)-.5)*t,s=(unpackUnorm(n>>>10,10)-.5)*t,a=(unpackUnorm(n,10)-.5)*t,e=Math.sqrt(1-(r*r+s*s+a*a));switch(n>>>30){case 0:g.set(e,r,s,a);break;case 1:g.set(r,e,s,a);break;case 2:g.set(r,s,e,a);break;case 3:g.set(r,s,a,e);break}},lerp=(g,n,t)=>g*(1-t)+n*t,getElementPropStorage=(g,n)=>{var t;return(t=g.properties.find(r=>r.name===n&&r.storage))==null?void 0:t.storage},yt=class yt{static decodeHeaderText(n){let t,r,s,a;const e=n.split(`
`).filter(b=>!b.startsWith("comment "));let u=0,p=!1;for(let b=1;b<e.length;++b){const x=e[b].split(" ");switch(x[0]){case"format":if(x[1]!=="binary_little_endian")throw new Error("Unsupported ply format");break;case"element":t={name:x[1],count:parseInt(x[2],10),properties:[],storageSizeBytes:0},t.name==="chunk"?r=t:t.name==="vertex"?s=t:t.name==="sh"&&(a=t);break;case"property":{if(!DataTypeMap.has(x[1]))throw new Error(`Unrecognized property data type '${x[1]}' in ply header`);const w=DataTypeMap.get(x[1]),E=w.BYTES_PER_ELEMENT*t.count;t.name==="vertex"&&(u+=w.BYTES_PER_ELEMENT),t.properties.push({type:x[1],name:x[2],storage:null,byteSize:w.BYTES_PER_ELEMENT,storageSizeByes:E}),t.storageSizeBytes+=E;break}case HeaderEndToken:p=!0;break;default:throw new Error(`Unrecognized header value '${x[0]}' in ply header`)}if(p)break}let y=0,C=0;return a&&(C=a.properties.length,a.properties.length>=45?y=3:a.properties.length>=24?y=2:a.properties.length>=9&&(y=1)),{chunkElement:r,vertexElement:s,shElement:a,bytesPerSplat:u,headerSizeBytes:n.indexOf(HeaderEndToken)+HeaderEndToken.length+1,sphericalHarmonicsDegree:y,sphericalHarmonicsPerSplat:C}}static decodeHeader(n){const t=(w,E)=>{const I=w.length-E.length;let R,M;for(R=0;R<=I;++R){for(M=0;M<E.length&&w[R+M]===E[M];++M);if(M===E.length)return R}return-1},r=(w,E)=>{if(w.length<E.length)return!1;for(let I=0;I<E.length;++I)if(w[I]!==E[I])return!1;return!0};let s=new Uint8Array(n),a;if(s.length>=HeaderMagicBytes.length&&!r(s,HeaderMagicBytes))throw new Error("Invalid PLY header");if(a=t(s,HeaderEndTokenBytes),a===-1)throw new Error("End of PLY header not found");const e=new TextDecoder("ascii").decode(s.slice(0,a)),{chunkElement:u,vertexElement:p,shElement:y,sphericalHarmonicsDegree:C,sphericalHarmonicsPerSplat:b,bytesPerSplat:x}=yt.decodeHeaderText(e);return{headerSizeBytes:a+HeaderEndTokenBytes.length,bytesPerSplat:x,chunkElement:u,vertexElement:p,shElement:y,sphericalHarmonicsDegree:C,sphericalHarmonicsPerSplat:b}}static readElementData(n,t,r,s,a,e=null){let u=t instanceof DataView?t:new DataView(t);s=s||0,a=a||n.count-1;for(let p=s;p<=a;++p)for(let y=0;y<n.properties.length;++y){const C=n.properties[y],b=DataTypeMap.get(C.type),x=b.BYTES_PER_ELEMENT*n.count;if((!C.storage||C.storage.byteLength<x)&&(!e||e(C.name))&&(C.storage=new b(n.count)),C.storage)switch(C.type){case"char":C.storage[p]=u.getInt8(r);break;case"uchar":C.storage[p]=u.getUint8(r);break;case"short":C.storage[p]=u.getInt16(r,!0);break;case"ushort":C.storage[p]=u.getUint16(r,!0);break;case"int":C.storage[p]=u.getInt32(r,!0);break;case"uint":C.storage[p]=u.getUint32(r,!0);break;case"float":C.storage[p]=u.getFloat32(r,!0);break;case"double":C.storage[p]=u.getFloat64(r,!0);break}r+=C.byteSize}return r}static readPly(n,t=null){const r=yt.decodeHeader(n);let s=yt.readElementData(r.chunkElement,n,r.headerSizeBytes,null,null,t);return s=yt.readElementData(r.vertexElement,n,s,null,null,t),yt.readElementData(r.shElement,n,s,null,null,t),{chunkElement:r.chunkElement,vertexElement:r.vertexElement,shElement:r.shElement,sphericalHarmonicsDegree:r.sphericalHarmonicsDegree,sphericalHarmonicsPerSplat:r.sphericalHarmonicsPerSplat}}static getElementStorageArrays(n,t,r){const s={};if(t){const a=getElementPropStorage(n,"min_r"),e=getElementPropStorage(n,"min_g"),u=getElementPropStorage(n,"min_b"),p=getElementPropStorage(n,"max_r"),y=getElementPropStorage(n,"max_g"),C=getElementPropStorage(n,"max_b"),b=getElementPropStorage(n,"min_x"),x=getElementPropStorage(n,"min_y"),w=getElementPropStorage(n,"min_z"),E=getElementPropStorage(n,"max_x"),I=getElementPropStorage(n,"max_y"),R=getElementPropStorage(n,"max_z"),M=getElementPropStorage(n,"min_scale_x"),T=getElementPropStorage(n,"min_scale_y"),L=getElementPropStorage(n,"min_scale_z"),V=getElementPropStorage(n,"max_scale_x"),k=getElementPropStorage(n,"max_scale_y"),F=getElementPropStorage(n,"max_scale_z"),P=getElementPropStorage(t,"packed_position"),U=getElementPropStorage(t,"packed_rotation"),G=getElementPropStorage(t,"packed_scale"),Q=getElementPropStorage(t,"packed_color");s.colorExtremes={minR:a,maxR:p,minG:e,maxG:y,minB:u,maxB:C},s.positionExtremes={minX:b,maxX:E,minY:x,maxY:I,minZ:w,maxZ:R},s.scaleExtremes={minScaleX:M,maxScaleX:V,minScaleY:T,maxScaleY:k,minScaleZ:L,maxScaleZ:F},s.position=P,s.rotation=U,s.scale=G,s.color=Q}if(r){const a={};for(let e=0;e<45;e++){const u=`f_rest_${e}`,p=getElementPropStorage(r,u);if(p)a[u]=p;else break}s.sh=a}return s}static parseToUncompressedSplatBufferSection(n,t,r,s,a,e,u,p,y=null){yt.readElementData(t,e,0,r,s,y);const C=SplatBuffer.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat,{positionExtremes:b,scaleExtremes:x,colorExtremes:w,position:E,rotation:I,scale:R,color:M}=yt.getElementStorageArrays(n,t),T=UncompressedSplatArray.createSplat();for(let L=r;L<=s;++L){yt.decompressBaseSplat(L,a,E,b,R,x,I,w,M,T);const V=L*C+p;SplatBuffer.writeSplatDataToSectionBuffer(T,u,V,0,0)}}static parseToUncompressedSplatArraySection(n,t,r,s,a,e,u,p=null){yt.readElementData(t,e,0,r,s,p);const{positionExtremes:y,scaleExtremes:C,colorExtremes:b,position:x,rotation:w,scale:E,color:I}=yt.getElementStorageArrays(n,t);for(let R=r;R<=s;++R){const M=UncompressedSplatArray.createSplat();yt.decompressBaseSplat(R,a,x,y,E,C,w,b,I,M),u.addSplat(M)}}static parseSphericalHarmonicsToUncompressedSplatArraySection(n,t,r,s,a,e,u,p,y,C=null){yt.readElementData(t,a,e,r,s,C);const{sh:b}=yt.getElementStorageArrays(n,void 0,t),x=Object.values(b);for(let w=r;w<=s;++w)yt.decompressSphericalHarmonics(w,x,u,p,y.splats[w])}static parseToUncompressedSplatArray(n,t){const{chunkElement:r,vertexElement:s,shElement:a,sphericalHarmonicsDegree:e}=yt.readPly(n);t=Math.min(t,e);const u=new UncompressedSplatArray(t),{positionExtremes:p,scaleExtremes:y,colorExtremes:C,position:b,rotation:x,scale:w,color:E}=yt.getElementStorageArrays(r,s);let I;if(t>0){const{sh:R}=yt.getElementStorageArrays(r,void 0,a);I=Object.values(R)}for(let R=0;R<s.count;++R){u.addDefaultSplat();const M=u.getSplat(u.splatCount-1);yt.decompressBaseSplat(R,0,b,p,w,y,x,C,E,M),t>0&&yt.decompressSphericalHarmonics(R,I,t,e,M)}return u}static parseToUncompressedSplatBuffer(n,t){const{chunkElement:r,vertexElement:s,shElement:a,sphericalHarmonicsDegree:e}=yt.readPly(n);t=Math.min(t,e);const{splatBuffer:u,splatBufferDataOffsetBytes:p}=SplatBuffer.preallocateUncompressed(s.count,t),{positionExtremes:y,scaleExtremes:C,colorExtremes:b,position:x,rotation:w,scale:E,color:I}=yt.getElementStorageArrays(r,s);let R;if(t>0){const{sh:L}=yt.getElementStorageArrays(r,void 0,a);R=Object.values(L)}const M=SplatBuffer.CompressionLevels[0].SphericalHarmonicsDegrees[t].BytesPerSplat,T=UncompressedSplatArray.createSplat(t);for(let L=0;L<s.count;++L){yt.decompressBaseSplat(L,0,x,y,E,C,w,b,I,T),t>0&&yt.decompressSphericalHarmonics(L,R,t,e,T);const V=L*M+p;SplatBuffer.writeSplatDataToSectionBuffer(T,u.bufferData,V,0,t)}return u}};xe(yt,"decompressBaseSplat",(function(){const n=new Vector3$1,t=new Quaternion$1,r=new Vector3$1,s=new Vector4,a=UncompressedSplatArray.OFFSET;return function(e,u,p,y,C,b,x,w,E,I){I=I||UncompressedSplatArray.createSplat();const R=Math.floor((u+e)/256);return unpack111011(n,p[e]),unpackRot(t,x[e]),unpack111011(r,C[e]),unpack8888(s,E[e]),I[a.X]=lerp(y.minX[R],y.maxX[R],n.x),I[a.Y]=lerp(y.minY[R],y.maxY[R],n.y),I[a.Z]=lerp(y.minZ[R],y.maxZ[R],n.z),I[a.ROTATION0]=t.x,I[a.ROTATION1]=t.y,I[a.ROTATION2]=t.z,I[a.ROTATION3]=t.w,I[a.SCALE0]=Math.exp(lerp(b.minScaleX[R],b.maxScaleX[R],r.x)),I[a.SCALE1]=Math.exp(lerp(b.minScaleY[R],b.maxScaleY[R],r.y)),I[a.SCALE2]=Math.exp(lerp(b.minScaleZ[R],b.maxScaleZ[R],r.z)),w.minR&&w.maxR?I[a.FDC0]=clamp(Math.round(lerp(w.minR[R],w.maxR[R],s.x)*255),0,255):I[a.FDC0]=clamp(Math.floor(s.x*255),0,255),w.minG&&w.maxG?I[a.FDC1]=clamp(Math.round(lerp(w.minG[R],w.maxG[R],s.y)*255),0,255):I[a.FDC1]=clamp(Math.floor(s.y*255),0,255),w.minB&&w.maxB?I[a.FDC2]=clamp(Math.round(lerp(w.minB[R],w.maxB[R],s.z)*255),0,255):I[a.FDC2]=clamp(Math.floor(s.z*255),0,255),I[a.OPACITY]=clamp(Math.floor(s.w*255),0,255),I}})()),xe(yt,"decompressSphericalHarmonics",(function(){const n=[0,3,8,15],t=[0,1,2,9,10,11,12,13,24,25,26,27,28,29,30,3,4,5,14,15,16,17,18,31,32,33,34,35,36,37,6,7,8,19,20,21,22,23,38,39,40,41,42,43,44];return function(r,s,a,e,u){u=u||UncompressedSplatArray.createSplat();let p=n[a],y=n[e];for(let C=0;C<3;++C)for(let b=0;b<15;++b){const x=t[C*15+b];b<p&&b<y&&(u[UncompressedSplatArray.OFFSET.FRC0+x]=s[C*y+b][r]*(8/255)-4)}return u}})());let PlayCanvasCompressedPlyParser=yt;const PlyFormat={INRIAV1:0,INRIAV2:1,PlayCanvasCompressed:2},[FieldSizeIdDouble,FieldSizeIdInt,FieldSizeIdUInt,FieldSizeIdFloat,FieldSizeIdShort,FieldSizeIdUShort,FieldSizeIdUChar]=[0,1,2,3,4,5,6],FieldSizeStringMap={double:FieldSizeIdDouble,int:FieldSizeIdInt,uint:FieldSizeIdUInt,float:FieldSizeIdFloat,short:FieldSizeIdShort,ushort:FieldSizeIdUShort,uchar:FieldSizeIdUChar},FieldSize={[FieldSizeIdDouble]:8,[FieldSizeIdInt]:4,[FieldSizeIdUInt]:4,[FieldSizeIdFloat]:4,[FieldSizeIdShort]:2,[FieldSizeIdUShort]:2,[FieldSizeIdUChar]:1},sn=class sn{static decodeSectionHeader(n,t,r=0){const s=[];let a=!1,e=-1,u=0,p=!1,y=null;const C=[],b=[],x=[],w={};for(let M=r;M<n.length;M++){const T=n[M].trim();if(T.startsWith("element"))if(a){e--;break}else{a=!0,r=M,e=M;const L=T.split(" ");let V=0;for(let k of L){const F=k.trim();F.length>0&&(V++,V===2?y=F:V===3&&(u=parseInt(F)))}}else if(T.startsWith("property")){const L=T.match(/(\w+)\s+(\w+)\s+(\w+)/);if(L){const V=L[2],k=L[3];x.push(k);const F=t[k];w[k]=V;const P=FieldSizeStringMap[V];F!==void 0&&(C.push(F),b[F]=P)}}if(T===sn.HeaderEndToken){p=!0;break}a&&(s.push(T),e++)}const E=[];let I=0;for(let M of x){const T=w[M];if(w.hasOwnProperty(M)){const L=t[M];L!==void 0&&(E[L]=I)}I+=FieldSize[FieldSizeStringMap[T]]}const R=sn.decodeSphericalHarmonicsFromSectionHeader(x,t);return{headerLines:s,headerStartLine:r,headerEndLine:e,fieldTypes:b,fieldIds:C,fieldOffsets:E,bytesPerVertex:I,vertexCount:u,dataSizeBytes:I*u,endOfHeader:p,sectionName:y,sphericalHarmonicsDegree:R.degree,sphericalHarmonicsCoefficientsPerChannel:R.coefficientsPerChannel,sphericalHarmonicsDegree1Fields:R.degree1Fields,sphericalHarmonicsDegree2Fields:R.degree2Fields}}static decodeSphericalHarmonicsFromSectionHeader(n,t){let r=0,s=0;for(let p of n)p.startsWith("f_rest")&&r++;s=r/3;let a=0;s>=3&&(a=1),s>=8&&(a=2);let e=[],u=[];for(let p=0;p<3;p++){if(a>=1)for(let y=0;y<3;y++)e.push(t["f_rest_"+(y+s*p)]);if(a>=2)for(let y=0;y<5;y++)u.push(t["f_rest_"+(y+s*p+3)])}return{degree:a,coefficientsPerChannel:s,degree1Fields:e,degree2Fields:u}}static getHeaderSectionNames(n){const t=[];for(let r of n)if(r.startsWith("element")){const s=r.split(" ");let a=0;for(let e of s){const u=e.trim();u.length>0&&(a++,a===2&&t.push(u))}}return t}static checkTextForEndHeader(n){return!!n.includes(sn.HeaderEndToken)}static checkBufferForEndHeader(n,t,r,s){const a=new Uint8Array(n,Math.max(0,t-r),r),e=s.decode(a);return sn.checkTextForEndHeader(e)}static extractHeaderFromBufferToText(n){const t=new TextDecoder;let r=0,s="";const a=100;for(;;){if(r+a>=n.byteLength)throw new Error("End of file reached while searching for end of header");const e=new Uint8Array(n,r,a);if(s+=t.decode(e),r+=a,sn.checkBufferForEndHeader(n,r,a*2,t))break}return s}static readHeaderFromBuffer(n){const t=new TextDecoder;let r=0,s="";const a=100;for(;;){if(r+a>=n.byteLength)throw new Error("End of file reached while searching for end of header");const e=new Uint8Array(n,r,a);if(s+=t.decode(e),r+=a,sn.checkBufferForEndHeader(n,r,a*2,t))break}return s}static convertHeaderTextToLines(n){const t=n.split(`
`),r=[];for(let s=0;s<t.length;s++){const a=t[s].trim();if(r.push(a),a===sn.HeaderEndToken)break}return r}static determineHeaderFormatFromHeaderText(n){const t=sn.convertHeaderTextToLines(n);let r=PlyFormat.INRIAV1;for(let s=0;s<t.length;s++){const a=t[s].trim();if(a.startsWith("element chunk")||a.match(/[A-Za-z]*packed_[A-Za-z]*/))r=PlyFormat.PlayCanvasCompressed;else if(a.startsWith("element codebook_centers"))r=PlyFormat.INRIAV2;else if(a===sn.HeaderEndToken)break}return r}static determineHeaderFormatFromPlyBuffer(n){const t=sn.extractHeaderFromBufferToText(n);return sn.determineHeaderFormatFromHeaderText(t)}static readVertex(n,t,r,s,a,e,u=!0){const p=r*t.bytesPerVertex+s,y=t.fieldOffsets,C=t.fieldTypes;for(let b of a){const x=C[b];x===FieldSizeIdFloat?e[b]=n.getFloat32(p+y[b],!0):x===FieldSizeIdShort?e[b]=n.getInt16(p+y[b],!0):x===FieldSizeIdUShort?e[b]=n.getUint16(p+y[b],!0):x===FieldSizeIdInt?e[b]=n.getInt32(p+y[b],!0):x===FieldSizeIdUInt?e[b]=n.getUint32(p+y[b],!0):x===FieldSizeIdUChar&&(u?e[b]=n.getUint8(p+y[b])/255:e[b]=n.getUint8(p+y[b]))}}};xe(sn,"HeaderEndToken","end_header");let PlyParserUtils=sn;const BaseFieldNamesToRead=["scale_0","scale_1","scale_2","rot_0","rot_1","rot_2","rot_3","x","y","z","f_dc_0","f_dc_1","f_dc_2","opacity","red","green","blue","f_rest_0"],BaseFieldsToReadIndexes=BaseFieldNamesToRead.map((g,n)=>n),[SCALE_0,SCALE_1,SCALE_2,ROT_0,ROT_1,ROT_2,ROT_3,X,Y,Z,F_DC_0,F_DC_1,F_DC_2,OPACITY,RED$1,GREEN$1,BLUE$1,F_REST_0]=BaseFieldsToReadIndexes,fn=class fn{static decodeHeaderLines(n){let t=0;n.forEach(C=>{C.includes("f_rest_")&&t++});let r=0;t>=45?r=45:t>=24?r=24:t>=9&&(r=9);let a=Array.from(Array(Math.max(r-1,0))).map((C,b)=>`f_rest_${b+1}`);const e=[...BaseFieldNamesToRead,...a],u=e.map((C,b)=>b),p=u.reduce((C,b)=>(C[e[b]]=b,C),{}),y=PlyParserUtils.decodeSectionHeader(n,p,0);return y.splatCount=y.vertexCount,y.bytesPerSplat=y.bytesPerVertex,y.fieldsToReadIndexes=u,y}static decodeHeaderText(n){const t=PlyParserUtils.convertHeaderTextToLines(n),r=fn.decodeHeaderLines(t);return r.headerText=n,r.headerSizeBytes=n.indexOf(PlyParserUtils.HeaderEndToken)+PlyParserUtils.HeaderEndToken.length+1,r}static decodeHeaderFromBuffer(n){const t=PlyParserUtils.readHeaderFromBuffer(n);return fn.decodeHeaderText(t)}static findSplatData(n,t){return new DataView(n,t.headerSizeBytes)}static parseToUncompressedSplatBufferSection(n,t,r,s,a,e,u,p=0){p=Math.min(p,n.sphericalHarmonicsDegree);const y=SplatBuffer.CompressionLevels[0].SphericalHarmonicsDegrees[p].BytesPerSplat;for(let C=t;C<=r;C++){const b=fn.parseToUncompressedSplat(s,C,n,a,p),x=C*y+u;SplatBuffer.writeSplatDataToSectionBuffer(b,e,x,0,p)}}static parseToUncompressedSplatArraySection(n,t,r,s,a,e,u=0){u=Math.min(u,n.sphericalHarmonicsDegree);for(let p=t;p<=r;p++){const y=fn.parseToUncompressedSplat(s,p,n,a,u);e.addSplat(y)}}static decodeSectionSplatData(n,t,r,s,a=!0){if(s=Math.min(s,r.sphericalHarmonicsDegree),a){const e=new UncompressedSplatArray(s);for(let u=0;u<t;u++){const p=fn.parseToUncompressedSplat(n,u,r,0,s);e.addSplat(p)}return e}else{const{splatBuffer:e,splatBufferDataOffsetBytes:u}=SplatBuffer.preallocateUncompressed(t,s);return fn.parseToUncompressedSplatBufferSection(r,0,t-1,n,0,e.bufferData,u,s),e}}static readSplat(n,t,r,s,a){return PlyParserUtils.readVertex(n,t,r,s,t.fieldsToReadIndexes,a,!0)}static parseToUncompressedSplatArray(n,t=0){const{header:r,splatCount:s,splatData:a}=separatePlyHeaderAndData(n);return fn.decodeSectionSplatData(a,s,r,t,!0)}static parseToUncompressedSplatBuffer(n,t=0){const{header:r,splatCount:s,splatData:a}=separatePlyHeaderAndData(n);return fn.decodeSectionSplatData(a,s,r,t,!1)}};xe(fn,"parseToUncompressedSplat",(function(){let n=[];const t=new Quaternion$1,r=UncompressedSplatArray.OFFSET.X,s=UncompressedSplatArray.OFFSET.Y,a=UncompressedSplatArray.OFFSET.Z,e=UncompressedSplatArray.OFFSET.SCALE0,u=UncompressedSplatArray.OFFSET.SCALE1,p=UncompressedSplatArray.OFFSET.SCALE2,y=UncompressedSplatArray.OFFSET.ROTATION0,C=UncompressedSplatArray.OFFSET.ROTATION1,b=UncompressedSplatArray.OFFSET.ROTATION2,x=UncompressedSplatArray.OFFSET.ROTATION3,w=UncompressedSplatArray.OFFSET.FDC0,E=UncompressedSplatArray.OFFSET.FDC1,I=UncompressedSplatArray.OFFSET.FDC2,R=UncompressedSplatArray.OFFSET.OPACITY,M=[];for(let T=0;T<45;T++)M[T]=UncompressedSplatArray.OFFSET.FRC0+T;return function(T,L,V,k=0,F=0){F=Math.min(F,V.sphericalHarmonicsDegree),fn.readSplat(T,V,L,k,n);const P=UncompressedSplatArray.createSplat(F);if(n[SCALE_0]!==void 0?(P[e]=Math.exp(n[SCALE_0]),P[u]=Math.exp(n[SCALE_1]),P[p]=Math.exp(n[SCALE_2])):(P[e]=.01,P[u]=.01,P[p]=.01),n[F_DC_0]!==void 0){const U=.28209479177387814;P[w]=(.5+U*n[F_DC_0])*255,P[E]=(.5+U*n[F_DC_1])*255,P[I]=(.5+U*n[F_DC_2])*255}else n[RED$1]!==void 0?(P[w]=n[RED$1]*255,P[E]=n[GREEN$1]*255,P[I]=n[BLUE$1]*255):(P[w]=0,P[E]=0,P[I]=0);if(n[OPACITY]!==void 0&&(P[R]=1/(1+Math.exp(-n[OPACITY]))*255),P[w]=clamp(Math.floor(P[w]),0,255),P[E]=clamp(Math.floor(P[E]),0,255),P[I]=clamp(Math.floor(P[I]),0,255),P[R]=clamp(Math.floor(P[R]),0,255),F>=1&&n[F_REST_0]!==void 0){for(let U=0;U<9;U++)P[M[U]]=n[V.sphericalHarmonicsDegree1Fields[U]];if(F>=2)for(let U=0;U<15;U++)P[M[9+U]]=n[V.sphericalHarmonicsDegree2Fields[U]]}return t.set(n[ROT_0],n[ROT_1],n[ROT_2],n[ROT_3]),t.normalize(),P[y]=t.x,P[C]=t.y,P[b]=t.z,P[x]=t.w,P[r]=n[X],P[s]=n[Y],P[a]=n[Z],P}})());let INRIAV1PlyParser=fn;function separatePlyHeaderAndData(g){const n=INRIAV1PlyParser.decodeHeaderFromBuffer(g),t=n.splatCount,r=INRIAV1PlyParser.findSplatData(g,n);return{header:n,splatCount:t,splatData:r}}const CodeBookEntryNamesToRead=["features_dc","features_rest_0","features_rest_1","features_rest_2","features_rest_3","features_rest_4","features_rest_5","features_rest_6","features_rest_7","features_rest_8","features_rest_9","features_rest_10","features_rest_11","features_rest_12","features_rest_13","features_rest_14","opacity","scaling","rotation_re","rotation_im"],CodeBookEntriesToReadIndexes=CodeBookEntryNamesToRead.map((g,n)=>n),[CB_FEATURES_DC,CB_FEATURES_REST_0,CB_FEATURES_REST_3,CB_OPACITY,CB_SCALING,CB_ROTATION_RE,CB_ROTATION_IM]=[0,1,4,16,17,18,19],FieldNamesToRead=["scale_0","scale_1","scale_2","rot_0","rot_1","rot_2","rot_3","x","y","z","f_dc_0","f_dc_1","f_dc_2","opacity","red","green","blue","f_rest_0","f_rest_1","f_rest_2","f_rest_3","f_rest_4","f_rest_5","f_rest_6","f_rest_7","f_rest_8","f_rest_9","f_rest_10","f_rest_11","f_rest_12","f_rest_13","f_rest_14","f_rest_15","f_rest_16","f_rest_17","f_rest_18","f_rest_19","f_rest_20","f_rest_21","f_rest_22","f_rest_23","f_rest_24","f_rest_25","f_rest_26","f_rest_27","f_rest_28","f_rest_29","f_rest_30","f_rest_31","f_rest_32","f_rest_33","f_rest_34","f_rest_35","f_rest_36","f_rest_37","f_rest_38","f_rest_39","f_rest_40","f_rest_41","f_rest_42","f_rest_43","f_rest_44","f_rest_45"],FieldsToReadIndexes=FieldNamesToRead.map((g,n)=>n),[PLY_SCALE_0,PLY_SCALE_1,PLY_SCALE_2,PLY_ROT_0,PLY_ROT_1,PLY_ROT_2,PLY_ROT_3,PLY_X,PLY_Y,PLY_Z,PLY_F_DC_0,PLY_F_DC_1,PLY_F_DC_2,PLY_OPACITY]=FieldsToReadIndexes,PLY_RED=PLY_F_DC_0,PLY_GREEN=PLY_F_DC_1,PLY_BLUE=PLY_F_DC_2,fromHalfFloat=g=>{const n=(31744&g)>>10,t=1023&g;return(g>>15?-1:1)*(n?n===31?t?NaN:1/0:Math.pow(2,n-15)*(1+t/1024):t/1024*6103515625e-14)},an=class an{static decodeSectionHeadersFromHeaderLines(n){const t=FieldsToReadIndexes.reduce((C,b)=>(C[FieldNamesToRead[b]]=b,C),{}),r=CodeBookEntriesToReadIndexes.reduce((C,b)=>(C[CodeBookEntryNamesToRead[b]]=b,C),{}),s=PlyParserUtils.getHeaderSectionNames(n);let a;for(let C=0;C<s.length;C++)s[C]==="codebook_centers"&&(a=C);let e=0,u=!1;const p=[];let y=0;for(;!u;){let C;y===a?C=PlyParserUtils.decodeSectionHeader(n,r,e):C=PlyParserUtils.decodeSectionHeader(n,t,e),u=C.endOfHeader,e=C.headerEndLine+1,u||(C.splatCount=C.vertexCount,C.bytesPerSplat=C.bytesPerVertex),p.push(C),y++}return p}static decodeSectionHeadersFromHeaderText(n){const t=PlyParserUtils.convertHeaderTextToLines(n);return an.decodeSectionHeadersFromHeaderLines(t)}static getSplatCountFromSectionHeaders(n){let t=0;for(let r of n)r.sectionName!=="codebook_centers"&&(t+=r.vertexCount);return t}static decodeHeaderFromHeaderText(n){const t=n.indexOf(PlyParserUtils.HeaderEndToken)+PlyParserUtils.HeaderEndToken.length+1,r=an.decodeSectionHeadersFromHeaderText(n),s=an.getSplatCountFromSectionHeaders(r);return{headerSizeBytes:t,sectionHeaders:r,splatCount:s}}static decodeHeaderFromBuffer(n){const t=PlyParserUtils.readHeaderFromBuffer(n);return an.decodeHeaderFromHeaderText(t)}static findVertexData(n,t,r){let s=t.headerSizeBytes;for(let a=0;a<r&&a<t.sectionHeaders.length;a++){const e=t.sectionHeaders[a];s+=e.dataSizeBytes}return new DataView(n,s,t.sectionHeaders[r].dataSizeBytes)}static decodeCodeBook(n,t){const r=[],s=[];for(let a=0;a<t.vertexCount;a++){PlyParserUtils.readVertex(n,t,a,0,CodeBookEntriesToReadIndexes,r);for(let e of CodeBookEntriesToReadIndexes){const u=CodeBookEntriesToReadIndexes[e];let p=s[u];p||(s[u]=p=[]),p.push(r[e])}}for(let a=0;a<s.length;a++){const e=s[a],u=.28209479177387814;for(let p=0;p<e.length;p++){const y=fromHalfFloat(e[p]);a===CB_OPACITY?e[p]=Math.round(1/(1+Math.exp(-y))*255):a===CB_FEATURES_DC?e[p]=Math.round((.5+u*y)*255):a===CB_SCALING?e[p]=Math.exp(y):e[p]=y}}return s}static decodeSectionSplatData(n,t,r,s,a){a=Math.min(a,r.sphericalHarmonicsDegree);const e=new UncompressedSplatArray(a);for(let u=0;u<t;u++){const p=an.parseToUncompressedSplat(n,u,r,s,0,a);e.addSplat(p)}return e}static readSplat(n,t,r,s,a){return PlyParserUtils.readVertex(n,t,r,s,FieldsToReadIndexes,a,!1)}static parseToUncompressedSplatArray(n,t=0){const r=[],s=an.decodeHeaderFromBuffer(n,t);let a;for(let u=0;u<s.sectionHeaders.length;u++){const p=s.sectionHeaders[u];if(p.sectionName==="codebook_centers"){const y=an.findVertexData(n,s,u);a=an.decodeCodeBook(y,p)}}for(let u=0;u<s.sectionHeaders.length;u++){const p=s.sectionHeaders[u];if(p.sectionName!=="codebook_centers"){const y=p.vertexCount,C=an.findVertexData(n,s,u),b=an.decodeSectionSplatData(C,y,p,a,t);r.push(b)}}const e=new UncompressedSplatArray(t);for(let u of r)for(let p of u.splats)e.addSplat(p);return e}};xe(an,"parseToUncompressedSplat",(function(){let n=[];const t=new Quaternion$1,r=UncompressedSplatArray.OFFSET.X,s=UncompressedSplatArray.OFFSET.Y,a=UncompressedSplatArray.OFFSET.Z,e=UncompressedSplatArray.OFFSET.SCALE0,u=UncompressedSplatArray.OFFSET.SCALE1,p=UncompressedSplatArray.OFFSET.SCALE2,y=UncompressedSplatArray.OFFSET.ROTATION0,C=UncompressedSplatArray.OFFSET.ROTATION1,b=UncompressedSplatArray.OFFSET.ROTATION2,x=UncompressedSplatArray.OFFSET.ROTATION3,w=UncompressedSplatArray.OFFSET.FDC0,E=UncompressedSplatArray.OFFSET.FDC1,I=UncompressedSplatArray.OFFSET.FDC2,R=UncompressedSplatArray.OFFSET.OPACITY,M=[];for(let T=0;T<45;T++)M[T]=UncompressedSplatArray.OFFSET.FRC0+T;return function(T,L,V,k,F=0,P=0){P=Math.min(P,V.sphericalHarmonicsDegree),an.readSplat(T,V,L,F,n);const U=UncompressedSplatArray.createSplat(P);if(n[PLY_SCALE_0]!==void 0?(U[e]=k[CB_SCALING][n[PLY_SCALE_0]],U[u]=k[CB_SCALING][n[PLY_SCALE_1]],U[p]=k[CB_SCALING][n[PLY_SCALE_2]]):(U[e]=.01,U[u]=.01,U[p]=.01),n[PLY_F_DC_0]!==void 0?(U[w]=k[CB_FEATURES_DC][n[PLY_F_DC_0]],U[E]=k[CB_FEATURES_DC][n[PLY_F_DC_1]],U[I]=k[CB_FEATURES_DC][n[PLY_F_DC_2]]):n[PLY_RED]!==void 0?(U[w]=n[PLY_RED]*255,U[E]=n[PLY_GREEN]*255,U[I]=n[PLY_BLUE]*255):(U[w]=0,U[E]=0,U[I]=0),n[PLY_OPACITY]!==void 0&&(U[R]=k[CB_OPACITY][n[PLY_OPACITY]]),U[w]=clamp(Math.floor(U[w]),0,255),U[E]=clamp(Math.floor(U[E]),0,255),U[I]=clamp(Math.floor(U[I]),0,255),U[R]=clamp(Math.floor(U[R]),0,255),P>=1&&V.sphericalHarmonicsDegree>=1){for(let ne=0;ne<9;ne++){const ae=k[CB_FEATURES_REST_0+ne%3];U[M[ne]]=ae[n[V.sphericalHarmonicsDegree1Fields[ne]]]}if(P>=2&&V.sphericalHarmonicsDegree>=2)for(let ne=0;ne<15;ne++){const ae=k[CB_FEATURES_REST_3+ne%5];U[M[9+ne]]=ae[n[V.sphericalHarmonicsDegree2Fields[ne]]]}}const G=k[CB_ROTATION_RE][n[PLY_ROT_0]],Q=k[CB_ROTATION_IM][n[PLY_ROT_1]],ee=k[CB_ROTATION_IM][n[PLY_ROT_2]],de=k[CB_ROTATION_IM][n[PLY_ROT_3]];return t.set(G,Q,ee,de),t.normalize(),U[y]=t.x,U[C]=t.y,U[b]=t.z,U[x]=t.w,U[r]=fromHalfFloat(n[PLY_X]),U[s]=fromHalfFloat(n[PLY_Y]),U[a]=fromHalfFloat(n[PLY_Z]),U}})());let INRIAV2PlyParser=an;class PlyParser{static parseToUncompressedSplatArray(n,t=0){const r=PlyParserUtils.determineHeaderFormatFromPlyBuffer(n);if(r===PlyFormat.PlayCanvasCompressed)return PlayCanvasCompressedPlyParser.parseToUncompressedSplatArray(n,t);if(r===PlyFormat.INRIAV1)return INRIAV1PlyParser.parseToUncompressedSplatArray(n,t);if(r===PlyFormat.INRIAV2)return INRIAV2PlyParser.parseToUncompressedSplatArray(n,t)}static parseToUncompressedSplatBuffer(n,t=0){const r=PlyParserUtils.determineHeaderFormatFromPlyBuffer(n);if(r===PlyFormat.PlayCanvasCompressed)return PlayCanvasCompressedPlyParser.parseToUncompressedSplatBuffer(n,t);if(r===PlyFormat.INRIAV1)return INRIAV1PlyParser.parseToUncompressedSplatBuffer(n,t);if(r===PlyFormat.INRIAV2)throw new Error("parseToUncompressedSplatBuffer() is not implemented for INRIA V2 PLY files")}}class SplatPartitioner{constructor(n,t,r,s){this.sectionCount=n,this.sectionFilters=t,this.groupingParameters=r,this.partitionGenerator=s}partitionUncompressedSplatArray(n){let t,r,s;if(this.partitionGenerator){const e=this.partitionGenerator(n);t=e.groupingParameters,r=e.sectionCount,s=e.sectionFilters}else t=this.groupingParameters,r=this.sectionCount,s=this.sectionFilters;const a=[];for(let e=0;e<r;e++){const u=new UncompressedSplatArray(n.sphericalHarmonicsDegree),p=s[e];for(let y=0;y<n.splatCount;y++)p(y)&&u.addSplat(n.splats[y]);a.push(u)}return{splatArrays:a,parameters:t}}static getStandardPartitioner(n=0,t=new Vector3$1,r=SplatBuffer.BucketBlockSize,s=SplatBuffer.BucketSize){const a=e=>{const u=UncompressedSplatArray.OFFSET.X,p=UncompressedSplatArray.OFFSET.Y,y=UncompressedSplatArray.OFFSET.Z;n<=0&&(n=e.splatCount);const C=new Vector3$1,b=.5,x=M=>{M.x=Math.floor(M.x/b)*b,M.y=Math.floor(M.y/b)*b,M.z=Math.floor(M.z/b)*b};e.splats.forEach(M=>{C.set(M[u],M[p],M[y]).sub(t),x(C),M.centerDist=C.lengthSq()}),e.splats.sort((M,T)=>{let L=M.centerDist,V=T.centerDist;return L>V?1:-1});const w=[],E=[];n=Math.min(e.splatCount,n);const I=Math.ceil(e.splatCount/n);let R=0;for(let M=0;M<I;M++){let T=R;w.push(L=>L>=T&&L<T+n),E.push({blocksSize:r,bucketSize:s}),R+=n}return{sectionCount:w.length,sectionFilters:w,groupingParameters:E}};return new SplatPartitioner(void 0,void 0,void 0,a)}}class SplatBufferGenerator{constructor(n,t,r,s,a,e,u){this.splatPartitioner=n,this.alphaRemovalThreshold=t,this.compressionLevel=r,this.sectionSize=s,this.sceneCenter=a?new Vector3$1().copy(a):void 0,this.blockSize=e,this.bucketSize=u}generateFromUncompressedSplatArray(n){const t=this.splatPartitioner.partitionUncompressedSplatArray(n);return SplatBuffer.generateFromUncompressedSplatArrays(t.splatArrays,this.alphaRemovalThreshold,this.compressionLevel,this.sceneCenter,this.blockSize,this.bucketSize,t.parameters)}static getStandardGenerator(n=1,t=1,r=0,s=new Vector3$1,a=SplatBuffer.BucketBlockSize,e=SplatBuffer.BucketSize){const u=SplatPartitioner.getStandardPartitioner(r,s,a,e);return new SplatBufferGenerator(u,n,t,r,s,a,e)}}const LoaderStatus={Downloading:0,Processing:1,Done:2};class DirectLoadError extends Error{constructor(n){super(n)}}const InternalLoadType={ProgressiveToSplatBuffer:0,ProgressiveToSplatArray:1,DownloadBeforeProcessing:2};function storeChunksInBuffer(g,n){let t=0;for(let s of g)t+=s.sizeBytes;(!n||n.byteLength<t)&&(n=new ArrayBuffer(t));let r=0;for(let s of g)new Uint8Array(n,r,s.sizeBytes).set(s.data),r+=s.sizeBytes;return n}function finalize$1(g,n,t,r,s,a,e,u){return n?SplatBufferGenerator.getStandardGenerator(t,r,s,a,e,u).generateFromUncompressedSplatArray(g):SplatBuffer.generateFromUncompressedSplatArrays([g],t,0,new Vector3$1)}class PlyLoader{static loadFromURL(n,t,r,s,a,e,u=!0,p=0,y,C,b,x,w){let E;!r&&!u?E=InternalLoadType.DownloadBeforeProcessing:u?E=InternalLoadType.ProgressiveToSplatArray:E=InternalLoadType.ProgressiveToSplatBuffer;const I=Constants.ProgressiveLoadSectionSize,R=SplatBuffer.HeaderSizeBytes+SplatBuffer.SectionHeaderSizeBytes,M=1;let T,L,V,k,F,P=0,U=0,G=0,Q=!1,ee=!1,de=!1;const ne=nativePromiseWithExtractedComponents();let ae=0,fe=0,Ae=0,q=0,te="",he=null,Ce=[],ye;const ce=new TextDecoder,N=(J,le,Se)=>{const Be=J>=100;if(Se&&(Ce.push({data:Se,sizeBytes:Se.byteLength,startBytes:Ae,endBytes:Ae+Se.byteLength}),Ae+=Se.byteLength),E===InternalLoadType.DownloadBeforeProcessing)Be&&ne.resolve(Ce);else{if(Q){if(T===PlyFormat.PlayCanvasCompressed&&!ee){const Ne=he.headerSizeBytes+he.chunkElement.storageSizeBytes;F=storeChunksInBuffer(Ce,F),F.byteLength>=Ne&&(PlayCanvasCompressedPlyParser.readElementData(he.chunkElement,F,he.headerSizeBytes),ae=Ne,fe=Ne,ee=!0)}}else if(te+=ce.decode(Se),PlyParserUtils.checkTextForEndHeader(te)){if(T=PlyParserUtils.determineHeaderFormatFromHeaderText(te),T===PlyFormat.INRIAV1)he=INRIAV1PlyParser.decodeHeaderText(te),p=Math.min(p,he.sphericalHarmonicsDegree),P=he.splatCount,ee=!0,q=he.headerSizeBytes+he.bytesPerSplat*P;else if(T===PlyFormat.PlayCanvasCompressed){if(he=PlayCanvasCompressedPlyParser.decodeHeaderText(te),p=Math.min(p,he.sphericalHarmonicsDegree),E===InternalLoadType.ProgressiveToSplatBuffer&&p>0)throw new DirectLoadError("PlyLoader.loadFromURL() -> Selected PLY format has spherical harmonics data that cannot be progressively loaded.");P=he.vertexElement.count,q=he.headerSizeBytes+he.bytesPerSplat*P+he.chunkElement.storageSizeBytes}else{if(E===InternalLoadType.ProgressiveToSplatBuffer)throw new DirectLoadError("PlyLoader.loadFromURL() -> Selected PLY format cannot be progressively loaded.");E=InternalLoadType.DownloadBeforeProcessing;return}if(E===InternalLoadType.ProgressiveToSplatBuffer){const Ne=SplatBuffer.CompressionLevels[0].SphericalHarmonicsDegrees[p],je=R+Ne.BytesPerSplat*P;V=new ArrayBuffer(je),SplatBuffer.writeHeaderToBuffer({versionMajor:SplatBuffer.CurrentMajorVersion,versionMinor:SplatBuffer.CurrentMinorVersion,maxSectionCount:M,sectionCount:M,maxSplatCount:P,splatCount:0,compressionLevel:0,sceneCenter:new Vector3$1},V)}else ye=new UncompressedSplatArray(p);ae=he.headerSizeBytes,fe=he.headerSizeBytes,Q=!0}if(Q&&ee&&Ce.length>0&&(L=storeChunksInBuffer(Ce,L),Ae-ae>I||Ae>=q&&!de||Be)){const je=de?he.sphericalHarmonicsPerSplat:he.bytesPerSplat,Ve=(de?Ae:Math.min(q,Ae))-fe,Ge=Math.floor(Ve/je),We=Ge*je,Ke=Ae-fe-We,Oe=fe-Ce[0].startBytes,qe=new DataView(L,Oe,We);if(de)T===PlyFormat.PlayCanvasCompressed&&E===InternalLoadType.ProgressiveToSplatArray&&(PlayCanvasCompressedPlyParser.parseSphericalHarmonicsToUncompressedSplatArraySection(he.chunkElement,he.shElement,G,G+Ge-1,qe,0,p,he.sphericalHarmonicsDegree,ye),G+=Ge);else{if(E===InternalLoadType.ProgressiveToSplatBuffer){const Xe=SplatBuffer.CompressionLevels[0].SphericalHarmonicsDegrees[p],Ye=U*Xe.BytesPerSplat+R;T===PlyFormat.PlayCanvasCompressed?PlayCanvasCompressedPlyParser.parseToUncompressedSplatBufferSection(he.chunkElement,he.vertexElement,0,Ge-1,U,qe,V,Ye):INRIAV1PlyParser.parseToUncompressedSplatBufferSection(he,0,Ge-1,qe,0,V,Ye,p)}else T===PlyFormat.PlayCanvasCompressed?PlayCanvasCompressedPlyParser.parseToUncompressedSplatArraySection(he.chunkElement,he.vertexElement,0,Ge-1,U,qe,ye):INRIAV1PlyParser.parseToUncompressedSplatArraySection(he,0,Ge-1,qe,0,ye,p);U+=Ge,E===InternalLoadType.ProgressiveToSplatBuffer&&(k||(SplatBuffer.writeSectionHeaderToBuffer({maxSplatCount:P,splatCount:U,bucketSize:0,bucketCount:0,bucketBlockSize:0,compressionScaleRange:0,storageSizeBytes:0,fullBucketCount:0,partiallyFilledBucketCount:0,sphericalHarmonicsDegree:p},0,V,SplatBuffer.HeaderSizeBytes),k=new SplatBuffer(V,!1)),k.updateLoadedCounts(1,U)),Ae>=q&&(de=!0)}if(Ke===0)Ce=[];else{let Xe=[],Ye=0;for(let ht=Ce.length-1;ht>=0;ht--){const At=Ce[ht];if(Ye+=At.sizeBytes,Xe.unshift(At),Ye>=Ke)break}Ce=Xe}ae+=I,fe+=We}s&&k&&s(k,Be),Be&&(E===InternalLoadType.ProgressiveToSplatBuffer?ne.resolve(k):ne.resolve(ye))}t&&t(J,le,LoaderStatus.Downloading)};return t&&t(0,"0%",LoaderStatus.Downloading),fetchWithProgress(n,N,!1,y).then(()=>(t&&t(0,"0%",LoaderStatus.Processing),ne.promise.then(J=>{if(t&&t(100,"100%",LoaderStatus.Done),E===InternalLoadType.DownloadBeforeProcessing){const le=Ce.map(Se=>Se.data);return new Blob(le).arrayBuffer().then(Se=>PlyLoader.loadFromFileData(Se,a,e,u,p,C,b,x,w))}else return E===InternalLoadType.ProgressiveToSplatBuffer?J:delayedExecute(()=>finalize$1(J,u,a,e,C,b,x,w))})))}static loadFromFileData(n,t,r,s,a=0,e,u,p,y){return s?delayedExecute(()=>PlyParser.parseToUncompressedSplatArray(n,a)).then(C=>finalize$1(C,s,t,r,e,u,p,y)):delayedExecute(()=>PlyParser.parseToUncompressedSplatBuffer(n,a))}}const createStream=g=>new ReadableStream({async start(n){n.enqueue(g),n.close()}});async function decompressGzipped(g){try{const n=createStream(g);if(!n)throw new Error("Failed to create stream from data");return await decompressGzipStream(n)}catch(n){throw console.error("Error decompressing gzipped data:",n),n}}async function decompressGzipStream(g){const n=g.pipeThrough(new DecompressionStream("gzip")),r=await new Response(n).arrayBuffer();return new Uint8Array(r)}const SPZ_MAGIC=1347635022,FLAG_ANTIALIASED=1,COLOR_SCALE=.15;function halfToFloat(g){const n=g>>15&1,t=g>>10&31,r=g&1023,s=n===1?-1:1;return t===0?s*Math.pow(2,-14)*r/1024:t===31?r!==0?NaN:s*(1/0):s*Math.pow(2,t-15)*(1+r/1024)}function unquantizeSH(g){return(g-128)/128}function dimForDegree(g){switch(g){case 0:return 0;case 1:return 3;case 2:return 8;case 3:return 15;default:return console.error(`[SPZ: ERROR] Unsupported SH degree: ${g}`),0}}const unpackedSplatToUncompressedSplat=(function(){let g=[];const n=new Quaternion$1,t=UncompressedSplatArray.OFFSET.X,r=UncompressedSplatArray.OFFSET.Y,s=UncompressedSplatArray.OFFSET.Z,a=UncompressedSplatArray.OFFSET.SCALE0,e=UncompressedSplatArray.OFFSET.SCALE1,u=UncompressedSplatArray.OFFSET.SCALE2,p=UncompressedSplatArray.OFFSET.ROTATION0,y=UncompressedSplatArray.OFFSET.ROTATION1,C=UncompressedSplatArray.OFFSET.ROTATION2,b=UncompressedSplatArray.OFFSET.ROTATION3,x=UncompressedSplatArray.OFFSET.FDC0,w=UncompressedSplatArray.OFFSET.FDC1,E=UncompressedSplatArray.OFFSET.FDC2,I=UncompressedSplatArray.OFFSET.OPACITY,R=[dimForDegree(0),dimForDegree(1),dimForDegree(2),dimForDegree(3)],M=[0,1,2,9,10,11,12,13,24,25,26,27,28,29,30,3,4,5,14,15,16,17,18,31,32,33,34,35,36,37,6,7,8,19,20,21,22,23,38,39,40,41,42,43,44];return function(T,L,V){V=Math.min(L,V);const k=UncompressedSplatArray.createSplat(V);T.scale[0]!==void 0?(k[a]=T.scale[0],k[e]=T.scale[1],k[u]=T.scale[2]):(k[a]=.01,k[e]=.01,k[u]=.01),T.color[0]!==void 0?(k[x]=T.color[0],k[w]=T.color[1],k[E]=T.color[2]):g[RED]!==void 0?(k[x]=g[RED]*255,k[w]=g[GREEN]*255,k[E]=g[BLUE]*255):(k[x]=0,k[w]=0,k[E]=0),T.alpha!==void 0&&(k[I]=T.alpha),k[x]=clamp(Math.floor(k[x]),0,255),k[w]=clamp(Math.floor(k[w]),0,255),k[E]=clamp(Math.floor(k[E]),0,255),k[I]=clamp(Math.floor(k[I]),0,255);let F=R[V],P=R[L];for(let U=0;U<3;++U)for(let G=0;G<15;++G){const Q=M[U*15+G];G<F&&G<P&&(k[UncompressedSplatArray.OFFSET.FRC0+Q]=T.sh[U*P+G])}return n.set(T.rotation[3],T.rotation[0],T.rotation[1],T.rotation[2]),n.normalize(),k[p]=n.x,k[y]=n.y,k[C]=n.z,k[b]=n.w,k[t]=T.position[0],k[r]=T.position[1],k[s]=T.position[2],k}})();function checkSizes2(g,n,t,r){return!(g.positions.length!==n*3*(r?2:3)||g.scales.length!==n*3||g.rotations.length!==n*3||g.alphas.length!==n||g.colors.length!==n*3||g.sh.length!==n*t*3)}function unpackGaussians(g,n,t,r,s){n=Math.min(n,g.shDegree);const a=g.numPoints,e=dimForDegree(g.shDegree),u=g.positions.length===a*3*2;if(!checkSizes2(g,a,e,u))return null;const p={position:[],scale:[],rotation:[],alpha:void 0,color:[],sh:[]};let y;u&&(y=new Uint16Array(g.positions.buffer,g.positions.byteOffset,a*3));const C=1/(1<<g.fractionalBits),b=dimForDegree(g.shDegree),x=.28209479177387814;for(let w=0;w<a;w++){if(u)for(let T=0;T<3;T++)p.position[T]=halfToFloat(y[w*3+T]);else for(let T=0;T<3;T++){const L=w*9+T*3;let V=g.positions[L];V|=g.positions[L+1]<<8,V|=g.positions[L+2]<<16,V|=V&8388608?4278190080:0,p.position[T]=V*C}for(let T=0;T<3;T++)p.scale[T]=Math.exp(g.scales[w*3+T]/16-10);const E=g.rotations.subarray(w*3,w*3+3),I=[E[0]/127.5-1,E[1]/127.5-1,E[2]/127.5-1];p.rotation[0]=I[0],p.rotation[1]=I[1],p.rotation[2]=I[2];const R=I[0]*I[0]+I[1]*I[1]+I[2]*I[2];p.rotation[3]=Math.sqrt(Math.max(0,1-R)),p.alpha=Math.floor(g.alphas[w]);for(let T=0;T<3;T++)p.color[T]=Math.floor(((g.colors[w*3+T]/255-.5)/COLOR_SCALE*x+.5)*255);for(let T=0;T<3;T++)for(let L=0;L<b;L++)p.sh[T*b+L]=unquantizeSH(g.sh[b*3*w+L*3+T]);const M=unpackedSplatToUncompressedSplat(p,g.shDegree,n);if(t){const T=SplatBuffer.CompressionLevels[0].SphericalHarmonicsDegrees[n].BytesPerSplat,L=w*T+s;SplatBuffer.writeSplatDataToSectionBuffer(M,r,L,0,n)}else r.addSplat(M)}}const HEADER_SIZE=16,MAX_POINTS_TO_READ=1e7;function deserializePackedGaussians(g){const n=new DataView(g);let t=0;const r={magic:n.getUint32(t,!0),version:n.getUint32(t+4,!0),numPoints:n.getUint32(t+8,!0),shDegree:n.getUint8(t+12),fractionalBits:n.getUint8(t+13),flags:n.getUint8(t+14),reserved:n.getUint8(t+15)};if(t+=HEADER_SIZE,r.magic!==SPZ_MAGIC)return console.error("[SPZ ERROR] deserializePackedGaussians: header not found"),null;if(r.version<1||r.version>2)return console.error(`[SPZ ERROR] deserializePackedGaussians: version not supported: ${r.version}`),null;if(r.numPoints>MAX_POINTS_TO_READ)return console.error(`[SPZ ERROR] deserializePackedGaussians: Too many points: ${r.numPoints}`),null;if(r.shDegree>3)return console.error(`[SPZ ERROR] deserializePackedGaussians: Unsupported SH degree: ${r.shDegree}`),null;const s=r.numPoints,a=dimForDegree(r.shDegree),e=r.version===1,u={numPoints:s,shDegree:r.shDegree,fractionalBits:r.fractionalBits,antialiased:(r.flags&FLAG_ANTIALIASED)!==0,positions:new Uint8Array(s*3*(e?2:3)),scales:new Uint8Array(s*3),rotations:new Uint8Array(s*3),alphas:new Uint8Array(s),colors:new Uint8Array(s*3),sh:new Uint8Array(s*a*3)};try{const p=new Uint8Array(g);let y=u.positions.length,C=t;if(u.positions.set(p.slice(C,C+y)),C+=y,u.alphas.set(p.slice(C,C+u.alphas.length)),C+=u.alphas.length,u.colors.set(p.slice(C,C+u.colors.length)),C+=u.colors.length,u.scales.set(p.slice(C,C+u.scales.length)),C+=u.scales.length,u.rotations.set(p.slice(C,C+u.rotations.length)),C+=u.rotations.length,u.sh.set(p.slice(C,C+u.sh.length)),C+u.sh.length!==g.byteLength)return console.error("[SPZ ERROR] deserializePackedGaussians: incorrect buffer size"),null}catch(p){return console.error("[SPZ ERROR] deserializePackedGaussians: read error",p),null}return u}async function loadSpzPacked(g){try{const n=await decompressGzipped(g);return deserializePackedGaussians(n.buffer)}catch(n){return console.error("[SPZ ERROR] loadSpzPacked: decompression error",n),null}}class SpzLoader{static loadFromURL(n,t,r,s,a=!0,e=0,u,p,y,C,b){return t&&t(0,"0%",LoaderStatus.Downloading),fetchWithProgress(n,t,!0,u).then(x=>(t&&t(0,"0%",LoaderStatus.Processing),SpzLoader.loadFromFileData(x,r,s,a,e,p,y,C,b)))}static async loadFromFileData(n,t,r,s,a=0,e,u,p,y){await delayedExecute();const C=await loadSpzPacked(n);a=Math.min(C.shDegree,a);const b=new UncompressedSplatArray(a);if(s)return unpackGaussians(C,a,!1,b,0),SplatBufferGenerator.getStandardGenerator(t,r,e,u,p,y).generateFromUncompressedSplatArray(b);{const{splatBuffer:x,splatBufferDataOffsetBytes:w}=SplatBuffer.preallocateUncompressed(C.numPoints,a);return unpackGaussians(C,a,!0,x.bufferData,w),x}}}const vt=class vt{static parseToUncompressedSplatBufferSection(n,t,r,s,a,e){const u=SplatBuffer.CompressionLevels[0].BytesPerCenter,p=SplatBuffer.CompressionLevels[0].BytesPerScale,y=SplatBuffer.CompressionLevels[0].BytesPerRotation,C=SplatBuffer.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat;for(let b=n;b<=t;b++){const x=b*vt.RowSizeBytes+s,w=new Float32Array(r,x,3),E=new Float32Array(r,x+vt.CenterSizeBytes,3),I=new Uint8Array(r,x+vt.CenterSizeBytes+vt.ScaleSizeBytes,4),R=new Uint8Array(r,x+vt.CenterSizeBytes+vt.ScaleSizeBytes+vt.RotationSizeBytes,4),M=new Quaternion$1((R[1]-128)/128,(R[2]-128)/128,(R[3]-128)/128,(R[0]-128)/128);M.normalize();const T=b*C+e,L=new Float32Array(a,T,3),V=new Float32Array(a,T+u,3),k=new Float32Array(a,T+u+p,4),F=new Uint8Array(a,T+u+p+y,4);L[0]=w[0],L[1]=w[1],L[2]=w[2],V[0]=E[0],V[1]=E[1],V[2]=E[2],k[0]=M.w,k[1]=M.x,k[2]=M.y,k[3]=M.z,F[0]=I[0],F[1]=I[1],F[2]=I[2],F[3]=I[3]}}static parseToUncompressedSplatArraySection(n,t,r,s,a){for(let e=n;e<=t;e++){const u=e*vt.RowSizeBytes+s,p=new Float32Array(r,u,3),y=new Float32Array(r,u+vt.CenterSizeBytes,3),C=new Uint8Array(r,u+vt.CenterSizeBytes+vt.ScaleSizeBytes,4),b=new Uint8Array(r,u+vt.CenterSizeBytes+vt.ScaleSizeBytes+vt.RotationSizeBytes,4),x=new Quaternion$1((b[1]-128)/128,(b[2]-128)/128,(b[3]-128)/128,(b[0]-128)/128);x.normalize(),a.addSplatFromComonents(p[0],p[1],p[2],y[0],y[1],y[2],x.w,x.x,x.y,x.z,C[0],C[1],C[2],C[3])}}static parseStandardSplatToUncompressedSplatArray(n){const t=n.byteLength/vt.RowSizeBytes,r=new UncompressedSplatArray;for(let s=0;s<t;s++){const a=s*vt.RowSizeBytes,e=new Float32Array(n,a,3),u=new Float32Array(n,a+vt.CenterSizeBytes,3),p=new Uint8Array(n,a+vt.CenterSizeBytes+vt.ScaleSizeBytes,4),y=new Uint8Array(n,a+vt.CenterSizeBytes+vt.ScaleSizeBytes+vt.ColorSizeBytes,4),C=new Quaternion$1((y[1]-128)/128,(y[2]-128)/128,(y[3]-128)/128,(y[0]-128)/128);C.normalize(),r.addSplatFromComonents(e[0],e[1],e[2],u[0],u[1],u[2],C.w,C.x,C.y,C.z,p[0],p[1],p[2],p[3])}return r}};xe(vt,"RowSizeBytes",32),xe(vt,"CenterSizeBytes",12),xe(vt,"ScaleSizeBytes",12),xe(vt,"RotationSizeBytes",4),xe(vt,"ColorSizeBytes",4);let SplatParser=vt;function finalize(g,n,t,r,s,a,e,u){return n?SplatBufferGenerator.getStandardGenerator(t,r,s,a,e,u).generateFromUncompressedSplatArray(g):SplatBuffer.generateFromUncompressedSplatArrays([g],t,0,new Vector3$1)}class SplatLoader{static loadFromURL(n,t,r,s,a,e,u=!0,p,y,C,b,x){let w=r?InternalLoadType.ProgressiveToSplatBuffer:InternalLoadType.ProgressiveToSplatArray;u&&(w=InternalLoadType.ProgressiveToSplatArray);const E=SplatBuffer.HeaderSizeBytes+SplatBuffer.SectionHeaderSizeBytes,I=Constants.ProgressiveLoadSectionSize,R=1;let M,T,L,V=0,k=0,F;const P=nativePromiseWithExtractedComponents();let U=0,G=0,Q=[];const ee=(de,ne,ae,fe)=>{const Ae=de>=100;if(ae&&Q.push(ae),w===InternalLoadType.DownloadBeforeProcessing){Ae&&P.resolve(Q);return}if(!fe){if(r)throw new DirectLoadError("Cannon directly load .splat because no file size info is available.");w=InternalLoadType.DownloadBeforeProcessing;return}if(!M){V=fe/SplatParser.RowSizeBytes,M=new ArrayBuffer(fe);const q=SplatBuffer.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat,te=E+q*V;w===InternalLoadType.ProgressiveToSplatBuffer?(T=new ArrayBuffer(te),SplatBuffer.writeHeaderToBuffer({versionMajor:SplatBuffer.CurrentMajorVersion,versionMinor:SplatBuffer.CurrentMinorVersion,maxSectionCount:R,sectionCount:R,maxSplatCount:V,splatCount:k,compressionLevel:0,sceneCenter:new Vector3$1},T)):F=new UncompressedSplatArray(0)}if(ae){new Uint8Array(M,G,ae.byteLength).set(new Uint8Array(ae)),G+=ae.byteLength;const q=G-U;if(q>I||Ae){const he=(Ae?q:I)/SplatParser.RowSizeBytes,Ce=k+he;if(w===InternalLoadType.ProgressiveToSplatBuffer?SplatParser.parseToUncompressedSplatBufferSection(k,Ce-1,M,0,T,E):SplatParser.parseToUncompressedSplatArraySection(k,Ce-1,M,0,F),k=Ce,w===InternalLoadType.ProgressiveToSplatBuffer){if(!L){SplatBuffer.writeSectionHeaderToBuffer({maxSplatCount:V,splatCount:k,bucketSize:0,bucketCount:0,bucketBlockSize:0,compressionScaleRange:0,storageSizeBytes:0,fullBucketCount:0,partiallyFilledBucketCount:0},0,T,SplatBuffer.HeaderSizeBytes);debugger;L=new SplatBuffer(T,!1)}L.updateLoadedCounts(1,k),s&&s(L,Ae)}U+=I}}Ae&&(w===InternalLoadType.ProgressiveToSplatBuffer?P.resolve(L):P.resolve(F)),t&&t(de,ne,LoaderStatus.Downloading)};return t&&t(0,"0%",LoaderStatus.Downloading),fetchWithProgress(n,ee,!1,p).then(()=>(t&&t(0,"0%",LoaderStatus.Processing),P.promise.then(de=>(t&&t(100,"100%",LoaderStatus.Done),w===InternalLoadType.DownloadBeforeProcessing?new Blob(Q).arrayBuffer().then(ne=>SplatLoader.loadFromFileData(ne,a,e,u,y,C,b,x)):w===InternalLoadType.ProgressiveToSplatBuffer?de:delayedExecute(()=>finalize(de,u,a,e,y,C,b,x))))))}static loadFromFileData(n,t,r,s,a,e,u,p){return delayedExecute(()=>{const y=SplatParser.parseStandardSplatToUncompressedSplatArray(n);return finalize(y,s,t,r,a,e,u,p)})}}const Gn=class Gn{static checkVersion(n){const t=SplatBuffer.CurrentMajorVersion,r=SplatBuffer.CurrentMinorVersion,s=SplatBuffer.parseHeader(n);if(s.versionMajor===t&&s.versionMinor>=r||s.versionMajor>t)return!0;throw new Error(`KSplat version not supported: v${s.versionMajor}.${s.versionMinor}. Minimum required: v${t}.${r}`)}static loadFromURL(n,t,r,s,a,e={}){const p={...{chunkSize:Constants.RenderChunkSize,renderDelay:Constants.RenderChunkDelay,forceChunking:!0,maxChunksPerSecond:Constants.MaxRenderChunksPerSecond},...e};let y,C,b,x,w=!1,E=!1,I,R=[],M=!1,T=!1,L=0,V=0,k=0,F=!1,P=!1,U=!1,G=0,Q=[];const ee=nativePromiseWithExtractedComponents(),de=()=>{!w&&!E&&L>=SplatBuffer.HeaderSizeBytes&&(E=!0,new Blob(Q).arrayBuffer().then(he=>{b=new ArrayBuffer(SplatBuffer.HeaderSizeBytes),new Uint8Array(b).set(new Uint8Array(he,0,SplatBuffer.HeaderSizeBytes)),Gn.checkVersion(b),E=!1,w=!0,x=SplatBuffer.parseHeader(b),window.setTimeout(()=>{fe()},1)}))};let ne=0;const ae=()=>{ne===0&&(ne++,window.setTimeout(()=>{ne--,Ae()},1))},fe=()=>{const te=()=>{T=!0,new Blob(Q).arrayBuffer().then(Ce=>{T=!1,M=!0,I=new ArrayBuffer(x.maxSectionCount*SplatBuffer.SectionHeaderSizeBytes),new Uint8Array(I).set(new Uint8Array(Ce,SplatBuffer.HeaderSizeBytes,x.maxSectionCount*SplatBuffer.SectionHeaderSizeBytes)),R=SplatBuffer.parseSectionHeaders(x,I,0,!1);let ye=0;for(let N=0;N<x.maxSectionCount;N++)ye+=R[N].storageSizeBytes;const ce=SplatBuffer.HeaderSizeBytes+x.maxSectionCount*SplatBuffer.SectionHeaderSizeBytes+ye;if(!y){y=new ArrayBuffer(ce);let N=0;for(let J=0;J<Q.length;J++){const le=Q[J];new Uint8Array(y,N,le.byteLength).set(new Uint8Array(le)),N+=le.byteLength}}k=SplatBuffer.HeaderSizeBytes+SplatBuffer.SectionHeaderSizeBytes*x.maxSectionCount;for(let N=0;N<=R.length&&N<x.maxSectionCount;N++)k+=R[N].storageSizeBytes;ae()})};!T&&!M&&w&&L>=SplatBuffer.HeaderSizeBytes+SplatBuffer.SectionHeaderSizeBytes*x.maxSectionCount&&te()},Ae=()=>{if(U)return;U=!0;const te=()=>{if(U=!1,M){if(P)return;F=L>=k;const he=performance.now(),Ce=he-G,ye=1e3/p.maxChunksPerSecond;let N=L-V>p.chunkSize||F;if(N&&!F&&p.forceChunking&&Ce<ye){window.setTimeout(()=>{U=!1,Ae()},ye-Ce);return}if(N){G=he,V+=p.chunkSize,P=V>=k,C||(C=new SplatBuffer(y,!1));const J=SplatBuffer.HeaderSizeBytes+SplatBuffer.SectionHeaderSizeBytes*x.maxSectionCount;let le=0,Se=0,Be=0;for(let ke=0;ke<x.maxSectionCount;ke++){const Ve=R[ke],Ge=le+Ve.partiallyFilledBucketCount*4+Ve.bucketStorageSizeBytes*Ve.bucketCount,We=J+Ge;if(V>=We){Se++;const Ke=V-We,Xe=SplatBuffer.CompressionLevels[x.compressionLevel].SphericalHarmonicsDegrees[Ve.sphericalHarmonicsDegree].BytesPerSplat;let Ye=Math.floor(Ke/Xe);Ye=Math.min(Ye,Ve.maxSplatCount),Be+=Ye,C.updateLoadedCounts(Se,Be),C.updateSectionLoadedCounts(ke,Ye)}else break;le+=Ve.storageSizeBytes}s(C,P);const Ne=V/k*100,je=Ne.toFixed(2)+"%";t&&t(Ne,je,LoaderStatus.Downloading),P?ee.resolve(C):window.setTimeout(()=>{U=!1,Ae()},p.renderDelay)}else window.setTimeout(()=>{U=!1,Ae()},100)}};window.setTimeout(te,p.renderDelay)};return fetchWithProgress(n,(te,he,Ce)=>{Ce&&(Q.push(Ce),y&&new Uint8Array(y,L,Ce.byteLength).set(new Uint8Array(Ce)),L+=Ce.byteLength),r?(de(),fe(),Ae()):t&&t(te,he,LoaderStatus.Downloading)},!r,a).then(te=>(t&&t(0,"0%",LoaderStatus.Processing),(r?ee.promise:Gn.loadFromFileData(te)).then(Ce=>(t&&t(100,"100%",LoaderStatus.Done),Ce))))}static loadFromFileData(n){return delayedExecute(()=>(Gn.checkVersion(n),new SplatBuffer(n)))}};xe(Gn,"downloadFile",(function(){let n;return function(t,r){const s=new Blob([t.bufferData],{type:"application/octet-stream"});n||(n=document.createElement("a"),document.body.appendChild(n)),n.download=r,n.href=URL.createObjectURL(s),n.click()}})());let KSplatLoader=Gn;const SceneFormat={Splat:0,KSplat:1,Ply:2,Spz:3},sceneFormatFromPath=g=>g.endsWith(".ply")?SceneFormat.Ply:g.endsWith(".splat")?SceneFormat.Splat:g.endsWith(".ksplat")?SceneFormat.KSplat:g.endsWith(".spz")?SceneFormat.Spz:null,_changeEvent={type:"change"},_startEvent={type:"start"},_endEvent={type:"end"},_ray=new Ray$1,_plane=new Plane,TILT_LIMIT=Math.cos(70*MathUtils.DEG2RAD);class OrbitControls extends EventDispatcher{constructor(n,t){super(),this.object=n,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Vector3$1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"KeyA",UP:"KeyW",RIGHT:"KeyD",BOTTOM:"KeyS"},this.mouseButtons={LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN},this.touches={ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(z){z.addEventListener("keydown",Ot),this._domElementKeyEvents=z},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Ot),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,this.clearDampedRotation(),this.clearDampedPan(),r.object.updateProjectionMatrix(),r.dispatchEvent(_changeEvent),r.update(),a=s.NONE},this.clearDampedRotation=function(){p.theta=0,p.phi=0},this.clearDampedPan=function(){C.set(0,0,0)},this.update=(function(){const z=new Vector3$1,me=new Quaternion$1().setFromUnitVectors(n.up,new Vector3$1(0,1,0)),De=me.clone().invert(),Pe=new Vector3$1,Je=new Quaternion$1,mt=new Vector3$1,xt=2*Math.PI;return function(){me.setFromUnitVectors(n.up,new Vector3$1(0,1,0)),De.copy(me).invert();const ge=r.object.position;z.copy(ge).sub(r.target),z.applyQuaternion(me),u.setFromVector3(z),r.autoRotate&&a===s.NONE&&ee(G()),r.enableDamping?(u.theta+=p.theta*r.dampingFactor,u.phi+=p.phi*r.dampingFactor):(u.theta+=p.theta,u.phi+=p.phi);let se=r.minAzimuthAngle,ve=r.maxAzimuthAngle;isFinite(se)&&isFinite(ve)&&(se<-Math.PI?se+=xt:se>Math.PI&&(se-=xt),ve<-Math.PI?ve+=xt:ve>Math.PI&&(ve-=xt),se<=ve?u.theta=Math.max(se,Math.min(ve,u.theta)):u.theta=u.theta>(se+ve)/2?Math.max(se,u.theta):Math.min(ve,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(C,r.dampingFactor):r.target.add(C),r.zoomToCursor&&F||r.object.isOrthographicCamera?u.radius=he(u.radius):u.radius=he(u.radius*y),z.setFromSpherical(u),z.applyQuaternion(De),ge.copy(r.target).add(z),r.object.lookAt(r.target),r.enableDamping===!0?(p.theta*=1-r.dampingFactor,p.phi*=1-r.dampingFactor,C.multiplyScalar(1-r.dampingFactor)):(p.set(0,0,0),C.set(0,0,0));let Ee=!1;if(r.zoomToCursor&&F){let He=null;if(r.object.isPerspectiveCamera){const Ze=z.length();He=he(Ze*y);const pt=Ze-He;r.object.position.addScaledVector(V,pt),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Ze=new Vector3$1(k.x,k.y,0);Ze.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/y)),r.object.updateProjectionMatrix(),Ee=!0;const pt=new Vector3$1(k.x,k.y,0);pt.unproject(r.object),r.object.position.sub(pt).add(Ze),r.object.updateMatrixWorld(),He=z.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;He!==null&&(this.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(He).add(r.object.position):(_ray.origin.copy(r.object.position),_ray.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(_ray.direction))<TILT_LIMIT?n.lookAt(r.target):(_plane.setFromNormalAndCoplanarPoint(r.object.up,r.target),_ray.intersectPlane(_plane,r.target))))}else r.object.isOrthographicCamera&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/y)),r.object.updateProjectionMatrix(),Ee=!0);return y=1,F=!1,Ee||Pe.distanceToSquared(r.object.position)>e||8*(1-Je.dot(r.object.quaternion))>e||mt.distanceToSquared(r.target)>0?(r.dispatchEvent(_changeEvent),Pe.copy(r.object.position),Je.copy(r.object.quaternion),mt.copy(r.target),Ee=!1,!0):!1}})(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",Vt),r.domElement.removeEventListener("pointerdown",Ye),r.domElement.removeEventListener("pointercancel",At),r.domElement.removeEventListener("wheel",Dt),r.domElement.removeEventListener("pointermove",ht),r.domElement.removeEventListener("pointerup",At),r._domElementKeyEvents!==null&&(r._domElementKeyEvents.removeEventListener("keydown",Ot),r._domElementKeyEvents=null)};const r=this,s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=s.NONE;const e=1e-6,u=new Spherical,p=new Spherical;let y=1;const C=new Vector3$1,b=new Vector2,x=new Vector2,w=new Vector2,E=new Vector2,I=new Vector2,R=new Vector2,M=new Vector2,T=new Vector2,L=new Vector2,V=new Vector3$1,k=new Vector2;let F=!1;const P=[],U={};function G(){return 2*Math.PI/60/60*r.autoRotateSpeed}function Q(){return Math.pow(.95,r.zoomSpeed)}function ee(z){p.theta-=z}function de(z){p.phi-=z}const ne=(function(){const z=new Vector3$1;return function(De,Pe){z.setFromMatrixColumn(Pe,0),z.multiplyScalar(-De),C.add(z)}})(),ae=(function(){const z=new Vector3$1;return function(De,Pe){r.screenSpacePanning===!0?z.setFromMatrixColumn(Pe,1):(z.setFromMatrixColumn(Pe,0),z.crossVectors(r.object.up,z)),z.multiplyScalar(De),C.add(z)}})(),fe=(function(){const z=new Vector3$1;return function(De,Pe){const Je=r.domElement;if(r.object.isPerspectiveCamera){const mt=r.object.position;z.copy(mt).sub(r.target);let xt=z.length();xt*=Math.tan(r.object.fov/2*Math.PI/180),ne(2*De*xt/Je.clientHeight,r.object.matrix),ae(2*Pe*xt/Je.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(ne(De*(r.object.right-r.object.left)/r.object.zoom/Je.clientWidth,r.object.matrix),ae(Pe*(r.object.top-r.object.bottom)/r.object.zoom/Je.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function Ae(z){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?y/=z:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function q(z){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?y*=z:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function te(z){if(!r.zoomToCursor)return;F=!0;const me=r.domElement.getBoundingClientRect(),De=z.clientX-me.left,Pe=z.clientY-me.top,Je=me.width,mt=me.height;k.x=De/Je*2-1,k.y=-(Pe/mt)*2+1,V.set(k.x,k.y,1).unproject(n).sub(n.position).normalize()}function he(z){return Math.max(r.minDistance,Math.min(r.maxDistance,z))}function Ce(z){b.set(z.clientX,z.clientY)}function ye(z){te(z),M.set(z.clientX,z.clientY)}function ce(z){E.set(z.clientX,z.clientY)}function N(z){x.set(z.clientX,z.clientY),w.subVectors(x,b).multiplyScalar(r.rotateSpeed);const me=r.domElement;ee(2*Math.PI*w.x/me.clientHeight),de(2*Math.PI*w.y/me.clientHeight),b.copy(x),r.update()}function J(z){T.set(z.clientX,z.clientY),L.subVectors(T,M),L.y>0?Ae(Q()):L.y<0&&q(Q()),M.copy(T),r.update()}function le(z){I.set(z.clientX,z.clientY),R.subVectors(I,E).multiplyScalar(r.panSpeed),fe(R.x,R.y),E.copy(I),r.update()}function Se(z){te(z),z.deltaY<0?q(Q()):z.deltaY>0&&Ae(Q()),r.update()}function Be(z){let me=!1;switch(z.code){case r.keys.UP:z.ctrlKey||z.metaKey||z.shiftKey?de(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):fe(0,r.keyPanSpeed),me=!0;break;case r.keys.BOTTOM:z.ctrlKey||z.metaKey||z.shiftKey?de(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):fe(0,-r.keyPanSpeed),me=!0;break;case r.keys.LEFT:z.ctrlKey||z.metaKey||z.shiftKey?ee(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):fe(r.keyPanSpeed,0),me=!0;break;case r.keys.RIGHT:z.ctrlKey||z.metaKey||z.shiftKey?ee(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):fe(-r.keyPanSpeed,0),me=!0;break}me&&(z.preventDefault(),r.update())}function Ne(){if(P.length===1)b.set(P[0].pageX,P[0].pageY);else{const z=.5*(P[0].pageX+P[1].pageX),me=.5*(P[0].pageY+P[1].pageY);b.set(z,me)}}function je(){if(P.length===1)E.set(P[0].pageX,P[0].pageY);else{const z=.5*(P[0].pageX+P[1].pageX),me=.5*(P[0].pageY+P[1].pageY);E.set(z,me)}}function ke(){const z=P[0].pageX-P[1].pageX,me=P[0].pageY-P[1].pageY,De=Math.sqrt(z*z+me*me);M.set(0,De)}function Ve(){r.enableZoom&&ke(),r.enablePan&&je()}function Ge(){r.enableZoom&&ke(),r.enableRotate&&Ne()}function We(z){if(P.length==1)x.set(z.pageX,z.pageY);else{const De=Ht(z),Pe=.5*(z.pageX+De.x),Je=.5*(z.pageY+De.y);x.set(Pe,Je)}w.subVectors(x,b).multiplyScalar(r.rotateSpeed);const me=r.domElement;ee(2*Math.PI*w.x/me.clientHeight),de(2*Math.PI*w.y/me.clientHeight),b.copy(x)}function Ke(z){if(P.length===1)I.set(z.pageX,z.pageY);else{const me=Ht(z),De=.5*(z.pageX+me.x),Pe=.5*(z.pageY+me.y);I.set(De,Pe)}R.subVectors(I,E).multiplyScalar(r.panSpeed),fe(R.x,R.y),E.copy(I)}function Oe(z){const me=Ht(z),De=z.pageX-me.x,Pe=z.pageY-me.y,Je=Math.sqrt(De*De+Pe*Pe);T.set(0,Je),L.set(0,Math.pow(T.y/M.y,r.zoomSpeed)),Ae(L.y),M.copy(T)}function qe(z){r.enableZoom&&Oe(z),r.enablePan&&Ke(z)}function Xe(z){r.enableZoom&&Oe(z),r.enableRotate&&We(z)}function Ye(z){r.enabled!==!1&&(P.length===0&&(r.domElement.setPointerCapture(z.pointerId),r.domElement.addEventListener("pointermove",ht),r.domElement.addEventListener("pointerup",At)),hn(z),z.pointerType==="touch"?pn(z):dn(z))}function ht(z){r.enabled!==!1&&(z.pointerType==="touch"?Bt(z):Ut(z))}function At(z){Kt(z),P.length===0&&(r.domElement.releasePointerCapture(z.pointerId),r.domElement.removeEventListener("pointermove",ht),r.domElement.removeEventListener("pointerup",At)),r.dispatchEvent(_endEvent),a=s.NONE}function dn(z){let me;switch(z.button){case 0:me=r.mouseButtons.LEFT;break;case 1:me=r.mouseButtons.MIDDLE;break;case 2:me=r.mouseButtons.RIGHT;break;default:me=-1}switch(me){case MOUSE.DOLLY:if(r.enableZoom===!1)return;ye(z),a=s.DOLLY;break;case MOUSE.ROTATE:if(z.ctrlKey||z.metaKey||z.shiftKey){if(r.enablePan===!1)return;ce(z),a=s.PAN}else{if(r.enableRotate===!1)return;Ce(z),a=s.ROTATE}break;case MOUSE.PAN:if(z.ctrlKey||z.metaKey||z.shiftKey){if(r.enableRotate===!1)return;Ce(z),a=s.ROTATE}else{if(r.enablePan===!1)return;ce(z),a=s.PAN}break;default:a=s.NONE}a!==s.NONE&&r.dispatchEvent(_startEvent)}function Ut(z){switch(a){case s.ROTATE:if(r.enableRotate===!1)return;N(z);break;case s.DOLLY:if(r.enableZoom===!1)return;J(z);break;case s.PAN:if(r.enablePan===!1)return;le(z);break}}function Dt(z){r.enabled===!1||r.enableZoom===!1||a!==s.NONE||(z.preventDefault(),r.dispatchEvent(_startEvent),Se(z),r.dispatchEvent(_endEvent))}function Ot(z){r.enabled===!1||r.enablePan===!1||Be(z)}function pn(z){switch(It(z),P.length){case 1:switch(r.touches.ONE){case TOUCH.ROTATE:if(r.enableRotate===!1)return;Ne(),a=s.TOUCH_ROTATE;break;case TOUCH.PAN:if(r.enablePan===!1)return;je(),a=s.TOUCH_PAN;break;default:a=s.NONE}break;case 2:switch(r.touches.TWO){case TOUCH.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ve(),a=s.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ge(),a=s.TOUCH_DOLLY_ROTATE;break;default:a=s.NONE}break;default:a=s.NONE}a!==s.NONE&&r.dispatchEvent(_startEvent)}function Bt(z){switch(It(z),a){case s.TOUCH_ROTATE:if(r.enableRotate===!1)return;We(z),r.update();break;case s.TOUCH_PAN:if(r.enablePan===!1)return;Ke(z),r.update();break;case s.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;qe(z),r.update();break;case s.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Xe(z),r.update();break;default:a=s.NONE}}function Vt(z){r.enabled!==!1&&z.preventDefault()}function hn(z){P.push(z)}function Kt(z){delete U[z.pointerId];for(let me=0;me<P.length;me++)if(P[me].pointerId==z.pointerId){P.splice(me,1);return}}function It(z){let me=U[z.pointerId];me===void 0&&(me=new Vector2,U[z.pointerId]=me),me.set(z.pageX,z.pageY)}function Ht(z){const me=z.pointerId===P[0].pointerId?P[1]:P[0];return U[me.pointerId]}r.domElement.addEventListener("contextmenu",Vt),r.domElement.addEventListener("pointerdown",Ye),r.domElement.addEventListener("pointercancel",At),r.domElement.addEventListener("wheel",Dt,{passive:!1}),this.update()}}const fadeElement=(g,n,t,r,s)=>{const a=performance.now();let e=g.style.display==="none"?0:parseFloat(g.style.opacity);isNaN(e)&&(e=1);const u=window.setInterval(()=>{const y=performance.now()-a;let C=Math.min(y/r,1);C>.999&&(C=1);let b;n?(b=(1-C)*e,b<1e-4&&(b=0)):b=(1-e)*C+e,b>0?(g.style.display=t,g.style.opacity=b):g.style.display="none",C>=1&&(s&&s(),window.clearInterval(u))},16);return u},STANDARD_FADE_DURATION=500,Cr=class Cr{constructor(n,t){this.taskIDGen=0,this.elementID=Cr.elementIDGen++,this.tasks=[],this.message=n||"Loading...",this.container=t||document.body,this.spinnerContainerOuter=document.createElement("div"),this.spinnerContainerOuter.className=`spinnerOuterContainer${this.elementID}`,this.spinnerContainerOuter.style.display="none",this.spinnerContainerPrimary=document.createElement("div"),this.spinnerContainerPrimary.className=`spinnerContainerPrimary${this.elementID}`,this.spinnerPrimary=document.createElement("div"),this.spinnerPrimary.classList.add(`spinner${this.elementID}`,`spinnerPrimary${this.elementID}`),this.messageContainerPrimary=document.createElement("div"),this.messageContainerPrimary.classList.add(`messageContainer${this.elementID}`,`messageContainerPrimary${this.elementID}`),this.messageContainerPrimary.innerHTML=this.message,this.spinnerContainerMin=document.createElement("div"),this.spinnerContainerMin.className=`spinnerContainerMin${this.elementID}`,this.spinnerMin=document.createElement("div"),this.spinnerMin.classList.add(`spinner${this.elementID}`,`spinnerMin${this.elementID}`),this.messageContainerMin=document.createElement("div"),this.messageContainerMin.classList.add(`messageContainer${this.elementID}`,`messageContainerMin${this.elementID}`),this.messageContainerMin.innerHTML=this.message,this.spinnerContainerPrimary.appendChild(this.spinnerPrimary),this.spinnerContainerPrimary.appendChild(this.messageContainerPrimary),this.spinnerContainerOuter.appendChild(this.spinnerContainerPrimary),this.spinnerContainerMin.appendChild(this.spinnerMin),this.spinnerContainerMin.appendChild(this.messageContainerMin),this.spinnerContainerOuter.appendChild(this.spinnerContainerMin);const r=document.createElement("style");r.innerHTML=`

            .spinnerOuterContainer${this.elementID} {
                width: 100%;
                height: 100%;
                margin: 0;
                top: 0;
                left: 0;
                position: absolute;
                pointer-events: none;
            }

            .messageContainer${this.elementID} {
                height: 20px;
                font-family: arial;
                font-size: 12pt;
                color: #ffffff;
                text-align: center;
                vertical-align: middle;
            }

            .spinner${this.elementID} {
                padding: 15px;
                background: #07e8d6;
                z-index:99999;
            
                aspect-ratio: 1;
                border-radius: 50%;
                --_m: 
                    conic-gradient(#0000,#000),
                    linear-gradient(#000 0 0) content-box;
                -webkit-mask: var(--_m);
                    mask: var(--_m);
                -webkit-mask-composite: source-out;
                    mask-composite: subtract;
                box-sizing: border-box;
                animation: load 1s linear infinite;
            }

            .spinnerContainerPrimary${this.elementID} {
                z-index:99999;
                background-color: rgba(128, 128, 128, 0.75);
                border: #666666 1px solid;
                border-radius: 5px;
                padding-top: 20px;
                padding-bottom: 10px;
                margin: 0;
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-80px, -80px);
                width: 180px;
                pointer-events: auto;
            }

            .spinnerPrimary${this.elementID} {
                width: 120px;
                margin-left: 30px;
            }

            .messageContainerPrimary${this.elementID} {
                padding-top: 15px;
            }

            .spinnerContainerMin${this.elementID} {
                z-index:99999;
                background-color: rgba(128, 128, 128, 0.75);
                border: #666666 1px solid;
                border-radius: 5px;
                padding-top: 20px;
                padding-bottom: 15px;
                margin: 0;
                position: absolute;
                bottom: 50px;
                left: 50%;
                transform: translate(-50%, 0);
                display: flex;
                flex-direction: left;
                pointer-events: auto;
                min-width: 250px;
            }

            .messageContainerMin${this.elementID} {
                margin-right: 15px;
            }

            .spinnerMin${this.elementID} {
                width: 50px;
                height: 50px;
                margin-left: 15px;
                margin-right: 25px;
            }

            .messageContainerMin${this.elementID} {
                padding-top: 15px;
            }
            
            @keyframes load {
                to{transform: rotate(1turn)}
            }

        `,this.spinnerContainerOuter.appendChild(r),this.container.appendChild(this.spinnerContainerOuter),this.setMinimized(!1,!0),this.fadeTransitions=[]}addTask(n){const t={message:n,id:this.taskIDGen++};return this.tasks.push(t),this.update(),t.id}removeTask(n){let t=0;for(let r of this.tasks){if(r.id===n){this.tasks.splice(t,1);break}t++}this.update()}removeAllTasks(){this.tasks=[],this.update()}setMessageForTask(n,t){for(let r of this.tasks)if(r.id===n){r.message=t;break}this.update()}update(){this.tasks.length>0?(this.show(),this.setMessage(this.tasks[this.tasks.length-1].message)):this.hide()}show(){this.spinnerContainerOuter.style.display="block",this.visible=!0}hide(){this.spinnerContainerOuter.style.display="none",this.visible=!1}setContainer(n){this.container&&this.spinnerContainerOuter.parentElement===this.container&&this.container.removeChild(this.spinnerContainerOuter),n&&(this.container=n,this.container.appendChild(this.spinnerContainerOuter),this.spinnerContainerOuter.style.zIndex=this.container.style.zIndex+1)}setMinimized(n,t){const r=(s,a,e,u,p)=>{e?s.style.display=a?u:"none":this.fadeTransitions[p]=fadeElement(s,!a,u,STANDARD_FADE_DURATION,()=>{this.fadeTransitions[p]=null})};r(this.spinnerContainerPrimary,!n,t,"block",0),r(this.spinnerContainerMin,n,t,"flex",1),this.minimized=n}setMessage(n){this.messageContainerPrimary.innerHTML=n,this.messageContainerMin.innerHTML=n}};xe(Cr,"elementIDGen",0);let LoadingSpinner=Cr;class LoadingProgressBar{constructor(n){this.idGen=0,this.tasks=[],this.container=n||document.body,this.progressBarContainerOuter=document.createElement("div"),this.progressBarContainerOuter.className="progressBarOuterContainer",this.progressBarContainerOuter.style.display="none",this.progressBarBox=document.createElement("div"),this.progressBarBox.className="progressBarBox",this.progressBarBackground=document.createElement("div"),this.progressBarBackground.className="progressBarBackground",this.progressBar=document.createElement("div"),this.progressBar.className="progressBar",this.progressBarBackground.appendChild(this.progressBar),this.progressBarBox.appendChild(this.progressBarBackground),this.progressBarContainerOuter.appendChild(this.progressBarBox);const t=document.createElement("style");t.innerHTML=`

            .progressBarOuterContainer {
                width: 100%;
                height: 100%;
                margin: 0;
                top: 0;
                left: 0;
                position: absolute;
                pointer-events: none;
            }

            .progressBarBox {
                z-index:99999;
                padding: 7px 9px 5px 7px;
                background-color: rgba(190, 190, 190, 0.75);
                border: #555555 1px solid;
                border-radius: 15px;
                margin: 0;
                position: absolute;
                bottom: 50px;
                left: 50%;
                transform: translate(-50%, 0);
                width: 180px;
                height: 30px;
                pointer-events: auto;
            }

            .progressBarBackground {
                width: 100%;
                height: 25px;
                border-radius:10px;
                background-color: rgba(128, 128, 128, 0.75);
                border: #444444 1px solid;
                box-shadow: inset 0 0 10px #333333;
            }

            .progressBar {
                height: 25px;
                width: 0px;
                border-radius:10px;
                background-color: rgba(0, 200, 0, 0.75);
                box-shadow: inset 0 0 10px #003300;
            }

        `,this.progressBarContainerOuter.appendChild(t),this.container.appendChild(this.progressBarContainerOuter)}show(){this.progressBarContainerOuter.style.display="block"}hide(){this.progressBarContainerOuter.style.display="none"}setProgress(n){this.progressBar.style.width=n+"%"}setContainer(n){this.container&&this.progressBarContainerOuter.parentElement===this.container&&this.container.removeChild(this.progressBarContainerOuter),n&&(this.container=n,this.container.appendChild(this.progressBarContainerOuter),this.progressBarContainerOuter.style.zIndex=this.container.style.zIndex+1)}}class InfoPanel{constructor(n){xe(this,"update",function(n,t,r,s,a,e,u,p,y,C,b,x,w,E){const I=`${t.x.toFixed(5)}, ${t.y.toFixed(5)}, ${t.z.toFixed(5)}`;if(this.infoCells.cameraPosition.innerHTML!==I&&(this.infoCells.cameraPosition.innerHTML=I),r){const M=r,T=`${M.x.toFixed(5)}, ${M.y.toFixed(5)}, ${M.z.toFixed(5)}`;this.infoCells.cameraLookAt.innerHTML!==T&&(this.infoCells.cameraLookAt.innerHTML=T)}const R=`${s.x.toFixed(5)}, ${s.y.toFixed(5)}, ${s.z.toFixed(5)}`;if(this.infoCells.cameraUp.innerHTML!==R&&(this.infoCells.cameraUp.innerHTML=R),this.infoCells.orthographicCamera.innerHTML=a?"Orthographic":"Perspective",e){const M=e,T=`${M.x.toFixed(5)}, ${M.y.toFixed(5)}, ${M.z.toFixed(5)}`;this.infoCells.cursorPosition.innerHTML=T}else this.infoCells.cursorPosition.innerHTML="N/A";this.infoCells.fps.innerHTML=u,this.infoCells.renderWindow.innerHTML=`${n.x} x ${n.y}`,this.infoCells.renderSplatCount.innerHTML=`${y} splats out of ${p} (${C.toFixed(2)}%)`,this.infoCells.sortTime.innerHTML=`${b.toFixed(3)} ms`,this.infoCells.focalAdjustment.innerHTML=`${x.toFixed(3)}`,this.infoCells.splatScale.innerHTML=`${w.toFixed(3)}`,this.infoCells.pointCloudMode.innerHTML=`${E}`});this.container=n||document.body,this.infoCells={};const t=[["Camera position","cameraPosition"],["Camera look-at","cameraLookAt"],["Camera up","cameraUp"],["Camera mode","orthographicCamera"],["Cursor position","cursorPosition"],["FPS","fps"],["Rendering:","renderSplatCount"],["Sort time","sortTime"],["Render window","renderWindow"],["Focal adjustment","focalAdjustment"],["Splat scale","splatScale"],["Point cloud mode","pointCloudMode"]];this.infoPanelContainer=document.createElement("div");const r=document.createElement("style");r.innerHTML=`

            .infoPanel {
                width: 430px;
                padding: 10px;
                background-color: rgba(50, 50, 50, 0.85);
                border: #555555 2px solid;
                color: #dddddd;
                border-radius: 10px;
                z-index: 9999;
                font-family: arial;
                font-size: 11pt;
                text-align: left;
                margin: 0;
                top: 10px;
                left:10px;
                position: absolute;
                pointer-events: auto;
            }

            .info-panel-cell {
                margin-bottom: 5px;
                padding-bottom: 2px;
            }

            .label-cell {
                font-weight: bold;
                font-size: 12pt;
                width: 140px;
            }

        `,this.infoPanelContainer.append(r),this.infoPanel=document.createElement("div"),this.infoPanel.className="infoPanel";const s=document.createElement("div");s.style.display="table";for(let a of t){const e=document.createElement("div");e.style.display="table-row",e.className="info-panel-row";const u=document.createElement("div");u.style.display="table-cell",u.innerHTML=`${a[0]}: `,u.classList.add("info-panel-cell","label-cell");const p=document.createElement("div");p.style.display="table-cell",p.style.width="10px",p.innerHTML=" ",p.className="info-panel-cell";const y=document.createElement("div");y.style.display="table-cell",y.innerHTML="",y.className="info-panel-cell",this.infoCells[a[1]]=y,e.appendChild(u),e.appendChild(p),e.appendChild(y),s.appendChild(e)}this.infoPanel.appendChild(s),this.infoPanelContainer.append(this.infoPanel),this.infoPanelContainer.style.display="none",this.container.appendChild(this.infoPanelContainer),this.visible=!1}setContainer(n){this.container&&this.infoPanelContainer.parentElement===this.container&&this.container.removeChild(this.infoPanelContainer),n&&(this.container=n,this.container.appendChild(this.infoPanelContainer),this.infoPanelContainer.style.zIndex=this.container.style.zIndex+1)}show(){this.infoPanelContainer.style.display="block",this.visible=!0}hide(){this.infoPanelContainer.style.display="none",this.visible=!1}}const _axis=new Vector3$1;class ArrowHelper extends Object3D{constructor(n=new Vector3$1(0,0,1),t=new Vector3$1(0,0,0),r=1,s=.1,a=16776960,e=r*.2,u=e*.2){super(),this.type="ArrowHelper";const p=new CylinderGeometry(s,s,r,32);p.translate(0,r/2,0);const y=new CylinderGeometry(0,u,e,32);y.translate(0,r,0),this.position.copy(t),this.line=new Mesh(p,new MeshBasicMaterial({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(y,new MeshBasicMaterial({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n)}setDirection(n){if(n.y>.99999)this.quaternion.set(0,0,0,1);else if(n.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(n.z,0,-n.x).normalize();const t=Math.acos(n.y);this.quaternion.setFromAxisAngle(_axis,t)}}setColor(n){this.line.material.color.set(n),this.cone.material.color.set(n)}copy(n){return super.copy(n,!1),this.line.copy(n.line),this.cone.copy(n.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class SceneHelper{constructor(n){xe(this,"updateFocusMarker",(function(){const n=new Vector3$1,t=new Matrix4,r=new Vector3$1;return function(s,a,e){t.copy(a.matrixWorld).invert(),n.copy(s).applyMatrix4(t),n.normalize().multiplyScalar(10),n.applyMatrix4(a.matrixWorld),r.copy(a.position).sub(s);const u=r.length();this.focusMarker.position.copy(s),this.focusMarker.scale.set(u,u,u),this.focusMarker.material.uniforms.realFocusPosition.value.copy(s),this.focusMarker.material.uniforms.viewport.value.copy(e),this.focusMarker.material.uniformsNeedUpdate=!0}})());xe(this,"positionAndOrientControlPlane",(function(){const n=new Quaternion$1,t=new Vector3$1(0,1,0);return function(r,s){n.setFromUnitVectors(t,s),this.controlPlane.position.copy(r),this.controlPlane.quaternion.copy(n)}})());this.threeScene=n,this.splatRenderTarget=null,this.renderTargetCopyQuad=null,this.renderTargetCopyCamera=null,this.meshCursor=null,this.focusMarker=null,this.controlPlane=null,this.debugRoot=null,this.secondaryDebugRoot=null}updateSplatRenderTargetForRenderDimensions(n,t){this.destroySplatRendertarget(),this.splatRenderTarget=new WebGLRenderTarget(n,t,{format:RGBAFormat,stencilBuffer:!1,depthBuffer:!0}),this.splatRenderTarget.depthTexture=new DepthTexture(n,t),this.splatRenderTarget.depthTexture.format=DepthFormat,this.splatRenderTarget.depthTexture.type=UnsignedIntType}destroySplatRendertarget(){this.splatRenderTarget&&(this.splatRenderTarget=null)}setupRenderTargetCopyObjects(){const n={sourceColorTexture:{type:"t",value:null},sourceDepthTexture:{type:"t",value:null}},t=new ShaderMaterial({vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = vec4( position.xy, 0.0, 1.0 );    
                }
            `,fragmentShader:`
                #include <common>
                #include <packing>
                varying vec2 vUv;
                uniform sampler2D sourceColorTexture;
                uniform sampler2D sourceDepthTexture;
                void main() {
                    vec4 color = texture2D(sourceColorTexture, vUv);
                    float fragDepth = texture2D(sourceDepthTexture, vUv).x;
                    gl_FragDepth = fragDepth;
                    gl_FragColor = vec4(color.rgb, color.a * 2.0);
              }
            `,uniforms:n,depthWrite:!1,depthTest:!1,transparent:!0,blending:CustomBlending,blendSrc:SrcAlphaFactor,blendSrcAlpha:SrcAlphaFactor,blendDst:OneMinusSrcAlphaFactor,blendDstAlpha:OneMinusSrcAlphaFactor});t.extensions.fragDepth=!0,this.renderTargetCopyQuad=new Mesh(new PlaneGeometry(2,2),t),this.renderTargetCopyCamera=new OrthographicCamera(-1,1,1,-1,0,1)}destroyRenderTargetCopyObjects(){this.renderTargetCopyQuad&&(disposeAllMeshes(this.renderTargetCopyQuad),this.renderTargetCopyQuad=null)}setupMeshCursor(){if(!this.meshCursor){const n=new ConeGeometry(.5,1.5,32),t=new MeshBasicMaterial({color:16777215}),r=new Mesh(n,t);r.rotation.set(0,0,Math.PI),r.position.set(0,1,0);const s=new Mesh(n,t);s.position.set(0,-1,0);const a=new Mesh(n,t);a.rotation.set(0,0,Math.PI/2),a.position.set(1,0,0);const e=new Mesh(n,t);e.rotation.set(0,0,-Math.PI/2),e.position.set(-1,0,0),this.meshCursor=new Object3D,this.meshCursor.add(r),this.meshCursor.add(s),this.meshCursor.add(a),this.meshCursor.add(e),this.meshCursor.scale.set(.1,.1,.1),this.threeScene.add(this.meshCursor),this.meshCursor.visible=!1}}destroyMeshCursor(){this.meshCursor&&(disposeAllMeshes(this.meshCursor),this.threeScene.remove(this.meshCursor),this.meshCursor=null)}setMeshCursorVisibility(n){this.meshCursor.visible=n}getMeschCursorVisibility(){return this.meshCursor.visible}setMeshCursorPosition(n){this.meshCursor.position.copy(n)}positionAndOrientMeshCursor(n,t){this.meshCursor.position.copy(n),this.meshCursor.up.copy(t.up),this.meshCursor.lookAt(t.position)}setupFocusMarker(){if(!this.focusMarker){const n=new SphereGeometry(.5,32,32),t=SceneHelper.buildFocusMarkerMaterial();t.depthTest=!1,t.depthWrite=!1,t.transparent=!0,this.focusMarker=new Mesh(n,t)}}destroyFocusMarker(){this.focusMarker&&(disposeAllMeshes(this.focusMarker),this.focusMarker=null)}setFocusMarkerVisibility(n){this.focusMarker.visible=n}setFocusMarkerOpacity(n){this.focusMarker.material.uniforms.opacity.value=n,this.focusMarker.material.uniformsNeedUpdate=!0}getFocusMarkerOpacity(){return this.focusMarker.material.uniforms.opacity.value}setupControlPlane(){if(!this.controlPlane){const n=new PlaneGeometry(1,1);n.rotateX(-Math.PI/2);const t=new MeshBasicMaterial({color:16777215});t.transparent=!0,t.opacity=.6,t.depthTest=!1,t.depthWrite=!1,t.side=DoubleSide;const r=new Mesh(n,t),s=new Vector3$1(0,1,0);s.normalize();const a=new Vector3$1(0,0,0),e=.5,u=.01,p=56576,y=new ArrowHelper(s,a,e,u,p,.1,.03);this.controlPlane=new Object3D,this.controlPlane.add(r),this.controlPlane.add(y)}}destroyControlPlane(){this.controlPlane&&(disposeAllMeshes(this.controlPlane),this.controlPlane=null)}setControlPlaneVisibility(n){this.controlPlane.visible=n}addDebugMeshes(){this.debugRoot=this.createDebugMeshes(),this.secondaryDebugRoot=this.createSecondaryDebugMeshes(),this.threeScene.add(this.debugRoot),this.threeScene.add(this.secondaryDebugRoot)}destroyDebugMeshes(){for(let n of[this.debugRoot,this.secondaryDebugRoot])n&&(disposeAllMeshes(n),this.threeScene.remove(n));this.debugRoot=null,this.secondaryDebugRoot=null}createDebugMeshes(n){const t=new SphereGeometry(1,32,32),r=new Object3D,s=(a,e)=>{let u=new Mesh(t,SceneHelper.buildDebugMaterial(a));u.renderOrder=n,r.add(u),u.position.fromArray(e)};return s(16711680,[-50,0,0]),s(16711680,[50,0,0]),s(65280,[0,0,-50]),s(65280,[0,0,50]),s(16755200,[5,0,5]),r}createSecondaryDebugMeshes(n){const t=new BoxGeometry(3,3,3),r=new Object3D;let s=12303291;const a=u=>{let p=new Mesh(t,SceneHelper.buildDebugMaterial(s));p.renderOrder=n,r.add(p),p.position.fromArray(u)};let e=10;return a([-e,0,-e]),a([-e,0,e]),a([e,0,-e]),a([e,0,e]),r}static buildDebugMaterial(n){const t=`
            #include <common>
            varying float ndcDepth;

            void main() {
                gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position.xyz, 1.0);
                ndcDepth = gl_Position.z / gl_Position.w;
                gl_Position.x = gl_Position.x / gl_Position.w;
                gl_Position.y = gl_Position.y / gl_Position.w;
                gl_Position.z = 0.0;
                gl_Position.w = 1.0;
    
            }
        `,r=`
            #include <common>
            uniform vec3 color;
            varying float ndcDepth;
            void main() {
                gl_FragDepth = (ndcDepth + 1.0) / 2.0;
                gl_FragColor = vec4(color.rgb, 0.0);
            }
        `,s={color:{type:"v3",value:new Color(n)}},a=new ShaderMaterial({uniforms:s,vertexShader:t,fragmentShader:r,transparent:!1,depthTest:!0,depthWrite:!0,side:FrontSide});return a.extensions.fragDepth=!0,a}static buildFocusMarkerMaterial(n){const t=`
            #include <common>

            uniform vec2 viewport;
            uniform vec3 realFocusPosition;

            varying vec4 ndcPosition;
            varying vec4 ndcCenter;
            varying vec4 ndcFocusPosition;

            void main() {
                float radius = 0.01;

                vec4 viewPosition = modelViewMatrix * vec4(position.xyz, 1.0);
                vec4 viewCenter = modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);

                vec4 viewFocusPosition = modelViewMatrix * vec4(realFocusPosition, 1.0);

                ndcPosition = projectionMatrix * viewPosition;
                ndcPosition = ndcPosition * vec4(1.0 / ndcPosition.w);
                ndcCenter = projectionMatrix * viewCenter;
                ndcCenter = ndcCenter * vec4(1.0 / ndcCenter.w);

                ndcFocusPosition = projectionMatrix * viewFocusPosition;
                ndcFocusPosition = ndcFocusPosition * vec4(1.0 / ndcFocusPosition.w);

                gl_Position = projectionMatrix * viewPosition;

            }
        `,r=`
            #include <common>
            uniform vec3 color;
            uniform vec2 viewport;
            uniform float opacity;

            varying vec4 ndcPosition;
            varying vec4 ndcCenter;
            varying vec4 ndcFocusPosition;

            void main() {
                vec2 screenPosition = vec2(ndcPosition) * viewport;
                vec2 screenCenter = vec2(ndcCenter) * viewport;

                vec2 screenVec = screenPosition - screenCenter;

                float projectedRadius = length(screenVec);

                float lineWidth = 0.0005 * viewport.y;
                float aaRange = 0.0025 * viewport.y;
                float radius = 0.06 * viewport.y;
                float radDiff = abs(projectedRadius - radius) - lineWidth;
                float alpha = 1.0 - clamp(radDiff / 5.0, 0.0, 1.0); 

                gl_FragColor = vec4(color.rgb, alpha * opacity);
            }
        `,s={color:{type:"v3",value:new Color(n)},realFocusPosition:{type:"v3",value:new Vector3$1},viewport:{type:"v2",value:new Vector2},opacity:{value:0}};return new ShaderMaterial({uniforms:s,vertexShader:t,fragmentShader:r,transparent:!0,depthTest:!1,depthWrite:!1,side:FrontSide})}dispose(){this.destroyMeshCursor(),this.destroyFocusMarker(),this.destroyDebugMeshes(),this.destroyControlPlane(),this.destroyRenderTargetCopyObjects(),this.destroySplatRendertarget()}}const VectorRight=new Vector3$1(1,0,0),VectorUp=new Vector3$1(0,1,0),VectorBackward=new Vector3$1(0,0,1);class Ray{constructor(n=new Vector3$1,t=new Vector3$1){xe(this,"intersectBox",(function(){const n=new Vector3$1,t=[],r=[],s=[];return function(a,e){if(r[0]=this.origin.x,r[1]=this.origin.y,r[2]=this.origin.z,s[0]=this.direction.x,s[1]=this.direction.y,s[2]=this.direction.z,this.boxContainsPoint(a,this.origin,1e-4))return e&&(e.origin.copy(this.origin),e.normal.set(0,0,0),e.distance=-1),!0;for(let u=0;u<3;u++){if(s[u]==0)continue;const p=u==0?VectorRight:u==1?VectorUp:VectorBackward,y=s[u]<0?a.max:a.min;let C=-Math.sign(s[u]);t[0]=u==0?y.x:u==1?y.y:y.z;let b=t[0]-r[u];if(b*C<0){const x=(u+1)%3,w=(u+2)%3;if(t[2]=s[x]/s[u]*b+r[x],t[1]=s[w]/s[u]*b+r[w],n.set(t[u],t[w],t[x]),this.boxContainsPoint(a,n,1e-4))return e&&(e.origin.copy(n),e.normal.copy(p).multiplyScalar(C),e.distance=n.sub(this.origin).length()),!0}}return!1}})());xe(this,"intersectSphere",(function(){const n=new Vector3$1;return function(t,r,s){n.copy(t).sub(this.origin);const a=n.dot(this.direction),e=a*a,p=n.dot(n)-e,y=r*r;if(p>y)return!1;const C=Math.sqrt(y-p),b=a-C,x=a+C;if(x<0)return!1;let w=b<0?x:b;return s&&(s.origin.copy(this.origin).addScaledVector(this.direction,w),s.normal.copy(s.origin).sub(t).normalize(),s.distance=w),!0}})());this.origin=new Vector3$1,this.direction=new Vector3$1,this.setParameters(n,t)}setParameters(n,t){this.origin.copy(n),this.direction.copy(t).normalize()}boxContainsPoint(n,t,r){return!(t.x<n.min.x-r||t.x>n.max.x+r||t.y<n.min.y-r||t.y>n.max.y+r||t.z<n.min.z-r||t.z>n.max.z+r)}}class Hit{constructor(){this.origin=new Vector3$1,this.normal=new Vector3$1,this.distance=0,this.splatIndex=0}set(n,t,r,s){this.origin.copy(n),this.normal.copy(t),this.distance=r,this.splatIndex=s}clone(){const n=new Hit;return n.origin.copy(this.origin),n.normal.copy(this.normal),n.distance=this.distance,n.splatIndex=this.splatIndex,n}}const SplatRenderMode={ThreeD:0,TwoD:1};class Raycaster{constructor(n,t,r=!1){xe(this,"setFromCameraAndScreenPosition",(function(){const n=new Vector2;return function(t,r,s){if(n.x=r.x/s.x*2-1,n.y=(s.y-r.y)/s.y*2-1,t.isPerspectiveCamera)this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(n.x,n.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t;else if(t.isOrthographicCamera)this.ray.origin.set(n.x,n.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t;else throw new Error("Raycaster::setFromCameraAndScreenPosition() -> Unsupported camera type")}})());xe(this,"intersectSplatMesh",(function(){const n=new Matrix4,t=new Matrix4,r=new Matrix4,s=new Ray,a=new Vector3$1;return function(e,u=[]){const p=e.getSplatTree();if(p){for(let y=0;y<p.subTrees.length;y++){const C=p.subTrees[y];t.copy(e.matrixWorld),e.dynamicMode&&(e.getSceneTransform(y,r),t.multiply(r)),n.copy(t).invert(),s.origin.copy(this.ray.origin).applyMatrix4(n),s.direction.copy(this.ray.origin).add(this.ray.direction),s.direction.applyMatrix4(n).sub(s.origin).normalize();const b=[];C.rootNode&&this.castRayAtSplatTreeNode(s,p,C.rootNode,b),b.forEach(x=>{x.origin.applyMatrix4(t),x.normal.applyMatrix4(t).normalize(),x.distance=a.copy(x.origin).sub(this.ray.origin).length()}),u.push(...b)}return u.sort((y,C)=>y.distance>C.distance?1:-1),u}}})());xe(this,"castRayAtSplatTreeNode",(function(){const n=new Vector4,t=new Vector3$1,r=new Vector3$1,s=new Quaternion$1,a=new Hit,e=1e-7,u=new Vector3$1(0,0,0),p=new Matrix4,y=new Matrix4,C=new Matrix4,b=new Matrix4,x=new Matrix4,w=new Ray;return function(E,I,R,M=[]){if(E.intersectBox(R.boundingBox)){if(R.data&&R.data.indexes&&R.data.indexes.length>0)for(let T=0;T<R.data.indexes.length;T++){const L=R.data.indexes[T],V=I.splatMesh.getSceneIndexForSplat(L);if(I.splatMesh.getScene(V).visible&&(I.splatMesh.getSplatColor(L,n),I.splatMesh.getSplatCenter(L,t),I.splatMesh.getSplatScaleAndRotation(L,r,s),!(r.x<=e||r.y<=e||I.splatMesh.splatRenderMode===SplatRenderMode.ThreeD&&r.z<=e)))if(this.raycastAgainstTrueSplatEllipsoid){y.makeScale(r.x,r.y,r.z),C.makeRotationFromQuaternion(s);const F=Math.log10(n.w)*2;if(p.makeScale(F,F,F),x.copy(p).multiply(C).multiply(y),b.copy(x).invert(),w.origin.copy(E.origin).sub(t).applyMatrix4(b),w.direction.copy(E.origin).add(E.direction).sub(t),w.direction.applyMatrix4(b).sub(w.origin).normalize(),w.intersectSphere(u,1,a)){const P=a.clone();P.splatIndex=L,P.origin.applyMatrix4(x).add(t),M.push(P)}}else{let F=r.x+r.y,P=2;if(I.splatMesh.splatRenderMode===SplatRenderMode.ThreeD&&(F+=r.z,P=3),F=F/P,E.intersectSphere(t,F,a)){const U=a.clone();U.splatIndex=L,M.push(U)}}}if(R.children&&R.children.length>0)for(let T of R.children)this.castRayAtSplatTreeNode(E,I,T,M);return M}}})());this.ray=new Ray(n,t),this.raycastAgainstTrueSplatEllipsoid=r}}class SplatMaterial{static buildVertexShaderBase(n=!1,t=!1,r=0,s=""){let a=`
        precision highp float;
        #include <common>

        attribute uint splatIndex;
        uniform highp usampler2D centersColorsTexture;
        uniform highp sampler2D sphericalHarmonicsTexture;
        uniform highp sampler2D sphericalHarmonicsTextureR;
        uniform highp sampler2D sphericalHarmonicsTextureG;
        uniform highp sampler2D sphericalHarmonicsTextureB;

        uniform highp usampler2D sceneIndexesTexture;
        uniform vec2 sceneIndexesTextureSize;
        uniform int sceneCount;
    `;return t&&(a+=`
            uniform float sceneOpacity[${Constants.MaxScenes}];
            uniform int sceneVisibility[${Constants.MaxScenes}];
        `),n&&(a+=`
            uniform highp mat4 transforms[${Constants.MaxScenes}];
        `),a+=`
        ${s}
        uniform vec2 focal;
        uniform float orthoZoom;
        uniform int orthographicMode;
        uniform int pointCloudModeEnabled;
        uniform float inverseFocalAdjustment;
        uniform vec2 viewport;
        uniform vec2 basisViewport;
        uniform vec2 centersColorsTextureSize;
        uniform int sphericalHarmonicsDegree;
        uniform vec2 sphericalHarmonicsTextureSize;
        uniform int sphericalHarmonics8BitMode;
        uniform int sphericalHarmonicsMultiTextureMode;
        uniform float visibleRegionRadius;
        uniform float visibleRegionFadeStartRadius;
        uniform float firstRenderTime;
        uniform float currentTime;
        uniform int fadeInComplete;
        uniform vec3 sceneCenter;
        uniform float splatScale;
        uniform float sphericalHarmonics8BitCompressionRangeMin[${Constants.MaxScenes}];
        uniform float sphericalHarmonics8BitCompressionRangeMax[${Constants.MaxScenes}];

        varying vec4 vColor;
        varying vec2 vUv;
        varying vec2 vPosition;

        mat3 quaternionToRotationMatrix(float x, float y, float z, float w) {
            float s = 1.0 / sqrt(w * w + x * x + y * y + z * z);
        
            return mat3(
                1. - 2. * (y * y + z * z),
                2. * (x * y + w * z),
                2. * (x * z - w * y),
                2. * (x * y - w * z),
                1. - 2. * (x * x + z * z),
                2. * (y * z + w * x),
                2. * (x * z + w * y),
                2. * (y * z - w * x),
                1. - 2. * (x * x + y * y)
            );
        }

        const float sqrt8 = sqrt(8.0);
        const float minAlpha = 1.0 / 255.0;

        const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
        const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
        const uvec4 shift4 = uvec4(0, 8, 16, 24);
        vec4 uintToRGBAVec (uint u) {
           uvec4 urgba = mask4 & u;
           urgba = urgba >> shift4;
           vec4 rgba = vec4(urgba) * encodeNorm4;
           return rgba;
        }

        vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getDataUVF(in uint sIndex, in float stride, in uint offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(float(sIndex) * stride) + offset) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        const float SH_C1 = 0.4886025119029199f;
        const float[5] SH_C2 = float[](1.0925484, -1.0925484, 0.3153916, -1.0925484, 0.5462742);

        void main () {

            uint oddOffset = splatIndex & uint(0x00000001);
            uint doubleOddOffset = oddOffset * uint(2);
            bool isEven = oddOffset == uint(0);
            uint nearestEvenIndex = splatIndex - oddOffset;
            float fOddOffset = float(oddOffset);

            uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
            vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));

            uint sceneIndex = uint(0);
            if (sceneCount > 1) {
                sceneIndex = texture(sceneIndexesTexture, getDataUV(1, 0, sceneIndexesTextureSize)).r;
            }
            `,t&&(a+=`
                float splatOpacityFromScene = sceneOpacity[sceneIndex];
                int sceneVisible = sceneVisibility[sceneIndex];
                if (splatOpacityFromScene <= 0.01 || sceneVisible == 0) {
                    gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                    return;
                }
            `),n?a+=`
                mat4 transform = transforms[sceneIndex];
                mat4 transformModelViewMatrix = viewMatrix * transform;
            `:a+="mat4 transformModelViewMatrix = modelViewMatrix;",a+=`
            float sh8BitCompressionRangeMinForScene = sphericalHarmonics8BitCompressionRangeMin[sceneIndex];
            float sh8BitCompressionRangeMaxForScene = sphericalHarmonics8BitCompressionRangeMax[sceneIndex];
            float sh8BitCompressionRangeForScene = sh8BitCompressionRangeMaxForScene - sh8BitCompressionRangeMinForScene;
            float sh8BitCompressionHalfRangeForScene = sh8BitCompressionRangeForScene / 2.0;
            vec3 vec8BitSHShift = vec3(sh8BitCompressionRangeMinForScene);

            vec4 viewCenter = transformModelViewMatrix * vec4(splatCenter, 1.0);

            vec4 clipCenter = projectionMatrix * viewCenter;

            float clip = 1.2 * clipCenter.w;
            if (clipCenter.z < -clip || clipCenter.x < -clip || clipCenter.x > clip || clipCenter.y < -clip || clipCenter.y > clip) {
                gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                return;
            }

            vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

            vPosition = position.xy;
            vColor = uintToRGBAVec(sampledCenterColor.r);
        `,r>=1&&(a+=`   
            if (sphericalHarmonicsDegree >= 1) {
            `,n?a+=`
                    vec3 worldViewDir = normalize(splatCenter - vec3(inverse(transform) * vec4(cameraPosition, 1.0)));
                `:a+=`
                    vec3 worldViewDir = normalize(splatCenter - cameraPosition);
                `,a+=`
                vec3 sh1;
                vec3 sh2;
                vec3 sh3;
            `,r>=2&&(a+=`
                    vec3 sh4;
                    vec3 sh5;
                    vec3 sh6;
                    vec3 sh7;
                    vec3 sh8;
                `),r===1?a+=`
                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        vec2 shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset, sphericalHarmonicsTextureSize);
                        vec4 sampledSH0123 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(1), sphericalHarmonicsTextureSize);
                        vec4 sampledSH4567 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(2), sphericalHarmonicsTextureSize);
                        vec4 sampledSH891011 = texture(sphericalHarmonicsTexture, shUV);
                        sh1 = vec3(sampledSH0123.rgb) * (1.0 - fOddOffset) + vec3(sampledSH0123.ba, sampledSH4567.r) * fOddOffset;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg) * (1.0 - fOddOffset) + vec3(sampledSH4567.gba) * fOddOffset;
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r) * (1.0 - fOddOffset) + vec3(sampledSH891011.rgb) * fOddOffset;
                    } else {
                        vec2 sampledSH01R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        sh1 = vec3(sampledSH01R.rg, sampledSH23R.r);
                        sh2 = vec3(sampledSH01G.rg, sampledSH23G.r);
                        sh3 = vec3(sampledSH01B.rg, sampledSH23B.r);
                    }
                `:r===2&&(a+=`
                    vec4 sampledSH0123;
                    vec4 sampledSH4567;
                    vec4 sampledSH891011;

                    vec4 sampledSH0123R;
                    vec4 sampledSH0123G;
                    vec4 sampledSH0123B;

                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        sampledSH0123 = texture(sphericalHarmonicsTexture, getDataUV(6, 0, sphericalHarmonicsTextureSize));
                        sampledSH4567 = texture(sphericalHarmonicsTexture, getDataUV(6, 1, sphericalHarmonicsTextureSize));
                        sampledSH891011 = texture(sphericalHarmonicsTexture, getDataUV(6, 2, sphericalHarmonicsTextureSize));
                        sh1 = sampledSH0123.rgb;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg);
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r);
                    } else {
                        sampledSH0123R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sh1 = vec3(sampledSH0123R.rgb);
                        sh2 = vec3(sampledSH0123G.rgb);
                        sh3 = vec3(sampledSH0123B.rgb);
                    }
                `),a+=`
                    if (sphericalHarmonics8BitMode == 1) {
                        sh1 = sh1 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh2 = sh2 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh3 = sh3 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                    }
                    float x = worldViewDir.x;
                    float y = worldViewDir.y;
                    float z = worldViewDir.z;
                    vColor.rgb += SH_C1 * (-sh1 * y + sh2 * z - sh3 * x);
            `,r>=2&&(a+=`
                    if (sphericalHarmonicsDegree >= 2) {
                        float xx = x * x;
                        float yy = y * y;
                        float zz = z * z;
                        float xy = x * y;
                        float yz = y * z;
                        float xz = x * z;
                `,r===2&&(a+=`
                        if (sphericalHarmonicsMultiTextureMode == 0) {
                            vec4 sampledSH12131415 = texture(sphericalHarmonicsTexture, getDataUV(6, 3, sphericalHarmonicsTextureSize));
                            vec4 sampledSH16171819 = texture(sphericalHarmonicsTexture, getDataUV(6, 4, sphericalHarmonicsTextureSize));
                            vec4 sampledSH20212223 = texture(sphericalHarmonicsTexture, getDataUV(6, 5, sphericalHarmonicsTextureSize));
                            sh4 = sampledSH891011.gba;
                            sh5 = sampledSH12131415.rgb;
                            sh6 = vec3(sampledSH12131415.a, sampledSH16171819.rg);
                            sh7 = vec3(sampledSH16171819.ba, sampledSH20212223.r);
                            sh8 = sampledSH20212223.gba;
                        } else {
                            vec4 sampledSH4567R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            sh4 = vec3(sampledSH0123R.a, sampledSH4567R.rg);
                            sh5 = vec3(sampledSH4567R.ba, sampledSH0123G.a);
                            sh6 = vec3(sampledSH4567G.rgb);
                            sh7 = vec3(sampledSH4567G.a, sampledSH0123B.a, sampledSH4567B.r);
                            sh8 = vec3(sampledSH4567B.gba);
                        }
                    `),a+=`
                        if (sphericalHarmonics8BitMode == 1) {
                            sh4 = sh4 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh5 = sh5 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh6 = sh6 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh7 = sh7 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh8 = sh8 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        }

                        vColor.rgb +=
                            (SH_C2[0] * xy) * sh4 +
                            (SH_C2[1] * yz) * sh5 +
                            (SH_C2[2] * (2.0 * zz - xx - yy)) * sh6 +
                            (SH_C2[3] * xz) * sh7 +
                            (SH_C2[4] * (xx - yy)) * sh8;
                    }
                `),a+=`

                vColor.rgb = clamp(vColor.rgb, vec3(0.), vec3(1.));

            }

            `),a}static getVertexShaderFadeIn(){return`
            if (fadeInComplete == 0) {
                float opacityAdjust = 1.0;
                float centerDist = length(splatCenter - sceneCenter);
                float renderTime = max(currentTime - firstRenderTime, 0.0);

                float fadeDistance = 0.75;
                float distanceLoadFadeInFactor = step(visibleRegionFadeStartRadius, centerDist);
                distanceLoadFadeInFactor = (1.0 - distanceLoadFadeInFactor) +
                                        (1.0 - clamp((centerDist - visibleRegionFadeStartRadius) / fadeDistance, 0.0, 1.0)) *
                                        distanceLoadFadeInFactor;
                opacityAdjust *= distanceLoadFadeInFactor;
                vColor.a *= opacityAdjust;
            }
        `}static getUniforms(n=!1,t=!1,r=0,s=1,a=!1){const e={sceneCenter:{type:"v3",value:new Vector3$1},fadeInComplete:{type:"i",value:0},orthographicMode:{type:"i",value:0},visibleRegionFadeStartRadius:{type:"f",value:0},visibleRegionRadius:{type:"f",value:0},currentTime:{type:"f",value:0},firstRenderTime:{type:"f",value:0},centersColorsTexture:{type:"t",value:null},sphericalHarmonicsTexture:{type:"t",value:null},sphericalHarmonicsTextureR:{type:"t",value:null},sphericalHarmonicsTextureG:{type:"t",value:null},sphericalHarmonicsTextureB:{type:"t",value:null},sphericalHarmonics8BitCompressionRangeMin:{type:"f",value:[]},sphericalHarmonics8BitCompressionRangeMax:{type:"f",value:[]},focal:{type:"v2",value:new Vector2},orthoZoom:{type:"f",value:1},inverseFocalAdjustment:{type:"f",value:1},viewport:{type:"v2",value:new Vector2},basisViewport:{type:"v2",value:new Vector2},debugColor:{type:"v3",value:new Color},centersColorsTextureSize:{type:"v2",value:new Vector2(1024,1024)},sphericalHarmonicsDegree:{type:"i",value:r},sphericalHarmonicsTextureSize:{type:"v2",value:new Vector2(1024,1024)},sphericalHarmonics8BitMode:{type:"i",value:0},sphericalHarmonicsMultiTextureMode:{type:"i",value:0},splatScale:{type:"f",value:s},pointCloudModeEnabled:{type:"i",value:a?1:0},sceneIndexesTexture:{type:"t",value:null},sceneIndexesTextureSize:{type:"v2",value:new Vector2(1024,1024)},sceneCount:{type:"i",value:1}};for(let u=0;u<Constants.MaxScenes;u++)e.sphericalHarmonics8BitCompressionRangeMin.value.push(-3/2),e.sphericalHarmonics8BitCompressionRangeMax.value.push(Constants.SphericalHarmonics8BitCompressionRange/2);if(t){const u=[];for(let y=0;y<Constants.MaxScenes;y++)u.push(1);e.sceneOpacity={type:"f",value:u};const p=[];for(let y=0;y<Constants.MaxScenes;y++)p.push(1);e.sceneVisibility={type:"i",value:p}}if(n){const u=[];for(let p=0;p<Constants.MaxScenes;p++)u.push(new Matrix4);e.transforms={type:"mat4",value:u}}return e}}class SplatMaterial3D{static build(n=!1,t=!1,r=!1,s=2048,a=1,e=!1,u=0,p=.3){let C=SplatMaterial.buildVertexShaderBase(n,t,u,`
            uniform vec2 covariancesTextureSize;
            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D covariancesTextureHalfFloat;
            uniform int covariancesAreHalfFloat;

            void fromCovarianceHalfFloatV4(uvec4 val, out vec4 first, out vec4 second) {
                vec2 r = unpackHalf2x16(val.r);
                vec2 g = unpackHalf2x16(val.g);
                vec2 b = unpackHalf2x16(val.b);

                first = vec4(r.x, r.y, g.x, g.y);
                second = vec4(b.x, b.y, 0.0, 0.0);
            }
        `);C+=SplatMaterial3D.buildVertexShaderProjection(r,t,s,p);const b=SplatMaterial3D.buildFragmentShader(),x=SplatMaterial.getUniforms(n,t,u,a,e);return x.covariancesTextureSize={type:"v2",value:new Vector2(1024,1024)},x.covariancesTexture={type:"t",value:null},x.covariancesTextureHalfFloat={type:"t",value:null},x.covariancesAreHalfFloat={type:"i",value:0},new ShaderMaterial({uniforms:x,vertexShader:C,fragmentShader:b,transparent:!0,alphaTest:1,blending:NormalBlending,depthTest:!0,depthWrite:!1,side:DoubleSide})}static buildVertexShaderProjection(n,t,r,s){let a=`

            vec4 sampledCovarianceA;
            vec4 sampledCovarianceB;
            vec3 cov3D_M11_M12_M13;
            vec3 cov3D_M22_M23_M33;
            if (covariancesAreHalfFloat == 0) {
                sampledCovarianceA = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset,
                                                                            covariancesTextureSize));
                sampledCovarianceB = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset + uint(1),
                                                                            covariancesTextureSize));

                cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rgb) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceA.ba, sampledCovarianceB.r) * fOddOffset;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceB.gba) * fOddOffset;
            } else {
                uvec4 sampledCovarianceU = texture(covariancesTextureHalfFloat, getDataUV(1, 0, covariancesTextureSize));
                fromCovarianceHalfFloatV4(sampledCovarianceU, sampledCovarianceA, sampledCovarianceB);
                cov3D_M11_M12_M13 = sampledCovarianceA.rgb;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg);
            }
        
            // Construct the 3D covariance matrix
            mat3 Vrk = mat3(
                cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
            );

            mat3 J;
            if (orthographicMode == 1) {
                // Since the projection is linear, we don't need an approximation
                J = transpose(mat3(orthoZoom, 0.0, 0.0,
                                0.0, orthoZoom, 0.0,
                                0.0, 0.0, 0.0));
            } else {
                // Construct the Jacobian of the affine approximation of the projection matrix. It will be used to transform the
                // 3D covariance matrix instead of using the actual projection matrix because that transformation would
                // require a non-linear component (perspective division) which would yield a non-gaussian result.
                float s = 1.0 / (viewCenter.z * viewCenter.z);
                J = mat3(
                    focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
                    0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
                    0., 0., 0.
                );
            }

            // Concatenate the projection approximation with the model-view transformation
            mat3 W = transpose(mat3(transformModelViewMatrix));
            mat3 T = W * J;

            // Transform the 3D covariance matrix (Vrk) to compute the 2D covariance matrix
            mat3 cov2Dm = transpose(T) * Vrk * T;
            `;return n?a+=`
                float detOrig = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                cov2Dm[0][0] += ${s};
                cov2Dm[1][1] += ${s};
                float detBlur = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                vColor.a *= sqrt(max(detOrig / detBlur, 0.0));
                if (vColor.a < minAlpha) return;
            `:a+=`
                cov2Dm[0][0] += ${s};
                cov2Dm[1][1] += ${s};
            `,a+=`

            // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
            // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
            // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
            // need cov2Dm[1][0] because it is a symetric matrix.
            vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

            // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
            // so that we can determine the 2D basis for the splat. This is done using the method described
            // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
            // After calculating the eigen-values and eigen-vectors, we calculate the basis for rendering the splat
            // by normalizing the eigen-vectors and then multiplying them by (sqrt(8) * sqrt(eigen-value)), which is
            // equal to scaling them by sqrt(8) standard deviations.
            //
            // This is a different approach than in the original work at INRIA. In that work they compute the
            // max extents of the projected splat in screen space to form a screen-space aligned bounding rectangle
            // which forms the geometry that is actually rasterized. The dimensions of that bounding box are 3.0
            // times the square root of the maximum eigen-value, or 3 standard deviations. They then use the inverse
            // 2D covariance matrix (called 'conic') in the CUDA rendering thread to determine fragment opacity by
            // calculating the full gaussian: exp(-0.5 * (X - mean) * conic * (X - mean)) * splat opacity
            float a = cov2Dv.x;
            float d = cov2Dv.z;
            float b = cov2Dv.y;
            float D = a * d - b * b;
            float trace = a + d;
            float traceOver2 = 0.5 * trace;
            float term2 = sqrt(max(0.1f, traceOver2 * traceOver2 - D));
            float eigenValue1 = traceOver2 + term2;
            float eigenValue2 = traceOver2 - term2;

            if (pointCloudModeEnabled == 1) {
                eigenValue1 = eigenValue2 = 0.2;
            }

            if (eigenValue2 <= 0.0) return;

            vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
            // since the eigen vectors are orthogonal, we derive the second one from the first
            vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);

            // We use sqrt(8) standard deviations instead of 3 to eliminate more of the splat with a very low opacity.
            vec2 basisVector1 = eigenVector1 * splatScale * min(sqrt8 * sqrt(eigenValue1), ${parseInt(r)}.0);
            vec2 basisVector2 = eigenVector2 * splatScale * min(sqrt8 * sqrt(eigenValue2), ${parseInt(r)}.0);
            `,t&&(a+=`
                vColor.a *= splatOpacityFromScene;
            `),a+=`
            vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) *
                             basisViewport * 2.0 * inverseFocalAdjustment;

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            // Scale the position data we send to the fragment shader
            vPosition *= sqrt8;
        `,a+=SplatMaterial.getVertexShaderFadeIn(),a+="}",a}static buildFragmentShader(){let n=`
            precision highp float;
            #include <common>
 
            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
        `;return n+=`
            void main () {
                // Compute the positional squared distance from the center of the splat to the current fragment.
                float A = dot(vPosition, vPosition);
                // Since the positional data in vPosition has been scaled by sqrt(8), the squared result will be
                // scaled by a factor of 8. If the squared result is larger than 8, it means it is outside the ellipse
                // defined by the rectangle formed by vPosition. It also means it's farther
                // away than sqrt(8) standard deviations from the mean.
                if (A > 8.0) discard;
                vec3 color = vColor.rgb;

                // Since the rendered splat is scaled by sqrt(8), the inverse covariance matrix that is part of
                // the gaussian formula becomes the identity matrix. We're then left with (X - mean) * (X - mean),
                // and since 'mean' is zero, we have X * X, which is the same as A:
                float opacity = exp(-0.5 * A) * vColor.a;

                gl_FragColor = vec4(color.rgb, opacity);
            }
        `,n}}class SplatMaterial2D{static build(n=!1,t=!1,r=1,s=!1,a=0){let u=SplatMaterial.buildVertexShaderBase(n,t,a,`
            uniform vec2 scaleRotationsTextureSize;
            uniform highp sampler2D scaleRotationsTexture;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;
        `);u+=SplatMaterial2D.buildVertexShaderProjection();const p=SplatMaterial2D.buildFragmentShader(),y=SplatMaterial.getUniforms(n,t,a,r,s);return y.scaleRotationsTexture={type:"t",value:null},y.scaleRotationsTextureSize={type:"v2",value:new Vector2(1024,1024)},new ShaderMaterial({uniforms:y,vertexShader:u,fragmentShader:p,transparent:!0,alphaTest:1,blending:NormalBlending,depthTest:!0,depthWrite:!1,side:DoubleSide})}static buildVertexShaderProjection(){let n=`

            vec4 scaleRotationA = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset, scaleRotationsTextureSize));
            vec4 scaleRotationB = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset + uint(1), scaleRotationsTextureSize));

            vec3 scaleRotation123 = vec3(scaleRotationA.rgb) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationA.ba, scaleRotationB.r) * fOddOffset;
            vec3 scaleRotation456 = vec3(scaleRotationA.a, scaleRotationB.rg) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationB.gba) * fOddOffset;

            float missingW = sqrt(1.0 - scaleRotation456.x * scaleRotation456.x - scaleRotation456.y *
                                    scaleRotation456.y - scaleRotation456.z * scaleRotation456.z);
            mat3 R = quaternionToRotationMatrix(scaleRotation456.r, scaleRotation456.g, scaleRotation456.b, missingW);
            mat3 S = mat3(scaleRotation123.r, 0.0, 0.0,
                            0.0, scaleRotation123.g, 0.0,
                            0.0, 0.0, scaleRotation123.b);
            
            mat3 L = R * S;

            mat3x4 splat2World = mat3x4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

            mat4 world2ndc = transpose(projectionMatrix * transformModelViewMatrix);

            mat3x4 ndc2pix = mat3x4(vec4(viewport.x / 2.0, 0.0, 0.0, (viewport.x - 1.0) / 2.0),
                                    vec4(0.0, viewport.y / 2.0, 0.0, (viewport.y - 1.0) / 2.0),
                                    vec4(0.0, 0.0, 0.0, 1.0));

            mat3 T = transpose(splat2World) * world2ndc * ndc2pix;
            vec3 normal = vec3(viewMatrix * vec4(L[0][2], L[1][2], L[2][2], 0.0));
        `;return n+=`

                mat4 splat2World4 = mat4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(L[2], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

                mat4 Tt = transpose(transpose(splat2World4) * world2ndc);

                vec4 tempPoint1 = Tt * vec4(1.0, 0.0, 0.0, 1.0);
                tempPoint1 /= tempPoint1.w;

                vec4 tempPoint2 = Tt * vec4(0.0, 1.0, 0.0, 1.0);
                tempPoint2 /= tempPoint2.w;

                vec4 center = Tt * vec4(0.0, 0.0, 0.0, 1.0);
                center /= center.w;

                vec2 basisVector1 = tempPoint1.xy - center.xy;
                vec2 basisVector2 = tempPoint2.xy - center.xy;

                vec2 basisVector1Screen = basisVector1 * 0.5 * viewport;
                vec2 basisVector2Screen = basisVector2 * 0.5 * viewport;

                const float minPix = 1.;
                if (length(basisVector1Screen) < minPix || length(basisVector2Screen) < minPix) {
                    
            vec3 T0 = vec3(T[0][0], T[0][1], T[0][2]);
            vec3 T1 = vec3(T[1][0], T[1][1], T[1][2]);
            vec3 T3 = vec3(T[2][0], T[2][1], T[2][2]);

            vec3 tempPoint = vec3(1.0, 1.0, -1.0);
            float distance = (T3.x * T3.x * tempPoint.x) + (T3.y * T3.y * tempPoint.y) + (T3.z * T3.z * tempPoint.z);
            vec3 f = (1.0 / distance) * tempPoint;
            if (abs(distance) < 0.00001) return;

            float pointImageX = (T0.x * T3.x * f.x) + (T0.y * T3.y * f.y) + (T0.z * T3.z * f.z);
            float pointImageY = (T1.x * T3.x * f.x) + (T1.y * T3.y * f.y) + (T1.z * T3.z * f.z);
            vec2 pointImage = vec2(pointImageX, pointImageY);

            float tempX = (T0.x * T0.x * f.x) + (T0.y * T0.y * f.y) + (T0.z * T0.z * f.z);
            float tempY = (T1.x * T1.x * f.x) + (T1.y * T1.y * f.y) + (T1.z * T1.z * f.z);
            vec2 temp = vec2(tempX, tempY);

            vec2 halfExtend = pointImage * pointImage - temp;
            vec2 extent = sqrt(max(vec2(0.0001), halfExtend));
            float radius = max(extent.x, extent.y);

            vec2 ndcOffset = ((position.xy * radius * 3.0) * basisViewport * 2.0);

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            vT = T;
            vQuadCenter = pointImage;
            vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
        
                } else {
                    vec2 ndcOffset = vec2(position.x * basisVector1 + position.y * basisVector2) * 3.0 * inverseFocalAdjustment;
                    vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
                    gl_Position = quadPos;

                    vT = T;
                    vQuadCenter = center.xy;
                    vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
                }
            `,n+=SplatMaterial.getVertexShaderFadeIn(),n+="}",n}static buildFragmentShader(){return`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;

            void main () {

                const float FilterInvSquare = 2.0;
                const float near_n = 0.2;
                const float T = 1.0;

                vec2 xy = vQuadCenter;
                vec3 Tu = vT[0];
                vec3 Tv = vT[1];
                vec3 Tw = vT[2];
                vec3 k = vFragCoord.x * Tw - Tu;
                vec3 l = vFragCoord.y * Tw - Tv;
                vec3 p = cross(k, l);
                if (p.z == 0.0) discard;
                vec2 s = vec2(p.x / p.z, p.y / p.z);
                float rho3d = (s.x * s.x + s.y * s.y); 
                vec2 d = vec2(xy.x - vFragCoord.x, xy.y - vFragCoord.y);
                float rho2d = FilterInvSquare * (d.x * d.x + d.y * d.y); 

                // compute intersection and depth
                float rho = min(rho3d, rho2d);
                float depth = (rho3d <= rho2d) ? (s.x * Tw.x + s.y * Tw.y) + Tw.z : Tw.z; 
                if (depth < near_n) discard;
                //  vec4 nor_o = collected_normal_opacity[j];
                //  float normal[3] = {nor_o.x, nor_o.y, nor_o.z};
                float opa = vColor.a;

                float power = -0.5f * rho;
                if (power > 0.0f) discard;

                // Eq. (2) from 3D Gaussian splatting paper.
                // Obtain alpha by multiplying with Gaussian opacity
                // and its exponential falloff from mean.
                // Avoid numerical instabilities (see paper appendix). 
                float alpha = min(0.99f, opa * exp(power));
                if (alpha < 1.0f / 255.0f) discard;
                float test_T = T * (1.0 - alpha);
                if (test_T < 0.0001)discard;

                float w = alpha * T;
                gl_FragColor = vec4(vColor.rgb, w);
            }
        `}}class SplatGeometry{static build(n){const t=new BufferGeometry;t.setIndex([0,1,2,0,2,3]);const r=new Float32Array(12),s=new BufferAttribute(r,3);t.setAttribute("position",s),s.setXYZ(0,-1,-1,0),s.setXYZ(1,-1,1,0),s.setXYZ(2,1,1,0),s.setXYZ(3,1,-1,0),s.needsUpdate=!0;const a=new InstancedBufferGeometry().copy(t),e=new Uint32Array(n),u=new InstancedBufferAttribute(e,1,!1);return u.setUsage(DynamicDrawUsage),a.setAttribute("splatIndex",u),a.instanceCount=0,a}}class SplatScene extends Object3D{constructor(n,t=new Vector3$1,r=new Quaternion$1,s=new Vector3$1(1,1,1),a=1,e=1,u=!0){super(),this.splatBuffer=n,this.position.copy(t),this.quaternion.copy(r),this.scale.copy(s),this.transform=new Matrix4,this.minimumAlpha=a,this.opacity=e,this.visible=u}copyTransformData(n){this.position.copy(n.position),this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),this.transform.copy(n.transform)}updateTransform(n){n?(this.matrixWorldAutoUpdate&&this.updateWorldMatrix(!0,!1),this.transform.copy(this.matrixWorld)):(this.matrixAutoUpdate&&this.updateMatrix(),this.transform.copy(this.matrix))}}const br=class br{constructor(n,t,r,s){this.min=new Vector3$1().copy(n),this.max=new Vector3$1().copy(t),this.boundingBox=new Box3(this.min,this.max),this.center=new Vector3$1().copy(this.max).sub(this.min).multiplyScalar(.5).add(this.min),this.depth=r,this.children=[],this.data=null,this.id=s||br.idGen++}};xe(br,"idGen",0);let SplatTreeNode=br;class SplatSubTree{constructor(n,t){this.maxDepth=n,this.maxCentersPerNode=t,this.sceneDimensions=new Vector3$1,this.sceneMin=new Vector3$1,this.sceneMax=new Vector3$1,this.rootNode=null,this.nodesWithIndexes=[],this.splatMesh=null}static convertWorkerSubTreeNode(n){const t=new Vector3$1().fromArray(n.min),r=new Vector3$1().fromArray(n.max),s=new SplatTreeNode(t,r,n.depth,n.id);if(n.data.indexes){s.data={indexes:[]};for(let a of n.data.indexes)s.data.indexes.push(a)}if(n.children)for(let a of n.children)s.children.push(SplatSubTree.convertWorkerSubTreeNode(a));return s}static convertWorkerSubTree(n,t){const r=new SplatSubTree(n.maxDepth,n.maxCentersPerNode);r.sceneMin=new Vector3$1().fromArray(n.sceneMin),r.sceneMax=new Vector3$1().fromArray(n.sceneMax),r.splatMesh=t,r.rootNode=SplatSubTree.convertWorkerSubTreeNode(n.rootNode);const s=(a,e)=>{a.children.length===0&&e(a);for(let u of a.children)s(u,e)};return r.nodesWithIndexes=[],s(r.rootNode,a=>{a.data&&a.data.indexes&&a.data.indexes.length>0&&r.nodesWithIndexes.push(a)}),r}}function createSplatTreeWorker(g){let n=0;class t{constructor(p,y){this.min=[p[0],p[1],p[2]],this.max=[y[0],y[1],y[2]]}containsPoint(p){return p[0]>=this.min[0]&&p[0]<=this.max[0]&&p[1]>=this.min[1]&&p[1]<=this.max[1]&&p[2]>=this.min[2]&&p[2]<=this.max[2]}}class r{constructor(p,y){this.maxDepth=p,this.maxCentersPerNode=y,this.sceneDimensions=[],this.sceneMin=[],this.sceneMax=[],this.rootNode=null,this.addedIndexes={},this.nodesWithIndexes=[],this.splatMesh=null,this.disposed=!1}}class s{constructor(p,y,C,b){this.min=[p[0],p[1],p[2]],this.max=[y[0],y[1],y[2]],this.center=[(y[0]-p[0])*.5+p[0],(y[1]-p[1])*.5+p[1],(y[2]-p[2])*.5+p[2]],this.depth=C,this.children=[],this.data=null,this.id=b||n++}}processSplatTreeNode=function(u,p,y,C){const b=p.data.indexes.length;if(b<u.maxCentersPerNode||p.depth>u.maxDepth){const T=[];for(let L=0;L<p.data.indexes.length;L++)u.addedIndexes[p.data.indexes[L]]||(T.push(p.data.indexes[L]),u.addedIndexes[p.data.indexes[L]]=!0);p.data.indexes=T,p.data.indexes.sort((L,V)=>L>V?1:-1),u.nodesWithIndexes.push(p);return}const x=[p.max[0]-p.min[0],p.max[1]-p.min[1],p.max[2]-p.min[2]],w=[x[0]*.5,x[1]*.5,x[2]*.5],E=[p.min[0]+w[0],p.min[1]+w[1],p.min[2]+w[2]],I=[new t([E[0]-w[0],E[1],E[2]-w[2]],[E[0],E[1]+w[1],E[2]]),new t([E[0],E[1],E[2]-w[2]],[E[0]+w[0],E[1]+w[1],E[2]]),new t([E[0],E[1],E[2]],[E[0]+w[0],E[1]+w[1],E[2]+w[2]]),new t([E[0]-w[0],E[1],E[2]],[E[0],E[1]+w[1],E[2]+w[2]]),new t([E[0]-w[0],E[1]-w[1],E[2]-w[2]],[E[0],E[1],E[2]]),new t([E[0],E[1]-w[1],E[2]-w[2]],[E[0]+w[0],E[1],E[2]]),new t([E[0],E[1]-w[1],E[2]],[E[0]+w[0],E[1],E[2]+w[2]]),new t([E[0]-w[0],E[1]-w[1],E[2]],[E[0],E[1],E[2]+w[2]])],R=[];for(let T=0;T<I.length;T++)R[T]=[];const M=[0,0,0];for(let T=0;T<b;T++){const L=p.data.indexes[T],V=y[L];M[0]=C[V],M[1]=C[V+1],M[2]=C[V+2];for(let k=0;k<I.length;k++)I[k].containsPoint(M)&&R[k].push(L)}for(let T=0;T<I.length;T++){const L=new s(I[T].min,I[T].max,p.depth+1);L.data={indexes:R[T]},p.children.push(L)}p.data={};for(let T of p.children)processSplatTreeNode(u,T,y,C)};const a=(u,p,y)=>{const C=[0,0,0],b=[0,0,0],x=[],w=Math.floor(u.length/4);for(let I=0;I<w;I++){const R=I*4,M=u[R],T=u[R+1],L=u[R+2],V=Math.round(u[R+3]);(I===0||M<C[0])&&(C[0]=M),(I===0||M>b[0])&&(b[0]=M),(I===0||T<C[1])&&(C[1]=T),(I===0||T>b[1])&&(b[1]=T),(I===0||L<C[2])&&(C[2]=L),(I===0||L>b[2])&&(b[2]=L),x.push(V)}const E=new r(p,y);return E.sceneMin=C,E.sceneMax=b,E.rootNode=new s(E.sceneMin,E.sceneMax,0),E.rootNode.data={indexes:x},E};function e(u,p,y){const C=[];for(let x of u){const w=Math.floor(x.length/4);for(let E=0;E<w;E++){const I=E*4,R=Math.round(x[I+3]);C[R]=I}}const b=[];for(let x of u){const w=a(x,p,y);b.push(w),processSplatTreeNode(w,w.rootNode,C,x)}g.postMessage({subTrees:b})}g.onmessage=u=>{u.data.process&&e(u.data.process.centers,u.data.process.maxDepth,u.data.process.maxCentersPerNode)}}function workerProcessCenters(g,n,t,r,s){g.postMessage({process:{centers:n,maxDepth:r,maxCentersPerNode:s}},t)}function checkAndCreateWorker(){return new Worker(URL.createObjectURL(new Blob(["(",createSplatTreeWorker.toString(),")(self)"],{type:"application/javascript"})))}class SplatTree{constructor(n,t){xe(this,"processSplatMesh",function(n,t=()=>!0,r,s){this.splatTreeWorker||(this.splatTreeWorker=checkAndCreateWorker()),this.splatMesh=n,this.subTrees=[];const a=new Vector3$1,e=(u,p)=>{const y=new Float32Array(p*4);let C=0;for(let b=0;b<p;b++){const x=b+u;if(t(x)){n.getSplatCenter(x,a);const w=C*4;y[w]=a.x,y[w+1]=a.y,y[w+2]=a.z,y[w+3]=x,C++}}return y};return new Promise(u=>{const p=()=>this.disposed?(this.diposeSplatTreeWorker(),u(),!0):!1;r&&r(!1),delayedExecute(()=>{if(p())return;const y=[];if(n.dynamicMode){let C=0;for(let b=0;b<n.scenes.length;b++){const w=n.getScene(b).splatBuffer.getSplatCount(),E=e(C,w);y.push(E),C+=w}}else{const C=e(0,n.getSplatCount());y.push(C)}this.splatTreeWorker.onmessage=C=>{p()||C.data.subTrees&&(s&&s(!1),delayedExecute(()=>{if(!p()){for(let b of C.data.subTrees){const x=SplatSubTree.convertWorkerSubTree(b,n);this.subTrees.push(x)}this.diposeSplatTreeWorker(),s&&s(!0),delayedExecute(()=>{u()})}}))},delayedExecute(()=>{if(p())return;r&&r(!0);const C=y.map(b=>b.buffer);workerProcessCenters(this.splatTreeWorker,y,C,this.maxDepth,this.maxCentersPerNode)})})})});this.maxDepth=n,this.maxCentersPerNode=t,this.subTrees=[],this.splatMesh=null}dispose(){this.diposeSplatTreeWorker(),this.disposed=!0}diposeSplatTreeWorker(){this.splatTreeWorker&&this.splatTreeWorker.terminate(),this.splatTreeWorker=null}countLeaves(){let n=0;return this.visitLeaves(()=>{n++}),n}visitLeaves(n){const t=(r,s)=>{r.children.length===0&&s(r);for(let a of r.children)t(a,s)};for(let r of this.subTrees)t(r.rootNode,n)}}function WebGLExtensions(g){const n={};function t(r){if(n[r]!==void 0)return n[r];let s;switch(r){case"WEBGL_depth_texture":s=g.getExtension("WEBGL_depth_texture")||g.getExtension("MOZ_WEBGL_depth_texture")||g.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=g.getExtension("EXT_texture_filter_anisotropic")||g.getExtension("MOZ_EXT_texture_filter_anisotropic")||g.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=g.getExtension("WEBGL_compressed_texture_s3tc")||g.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||g.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=g.getExtension("WEBGL_compressed_texture_pvrtc")||g.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=g.getExtension(r)}return n[r]=s,s}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const s=t(r);return s===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),s}}}function WebGLCapabilities(g,n,t){let r;function s(){if(r!==void 0)return r;if(n.has("EXT_texture_filter_anisotropic")===!0){const P=n.get("EXT_texture_filter_anisotropic");r=g.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(P){if(P==="highp"){if(g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.HIGH_FLOAT).precision>0&&g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&g.getShaderPrecisionFormat(g.VERTEX_SHADER,g.MEDIUM_FLOAT).precision>0&&g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,g.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const e=typeof WebGL2RenderingContext<"u"&&g.constructor.name==="WebGL2RenderingContext";let u=t.precision!==void 0?t.precision:"highp";const p=a(u);p!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",p,"instead."),u=p);const y=e||n.has("WEBGL_draw_buffers"),C=t.logarithmicDepthBuffer===!0,b=g.getParameter(g.MAX_TEXTURE_IMAGE_UNITS),x=g.getParameter(g.MAX_VERTEX_TEXTURE_IMAGE_UNITS),w=g.getParameter(g.MAX_TEXTURE_SIZE),E=g.getParameter(g.MAX_CUBE_MAP_TEXTURE_SIZE),I=g.getParameter(g.MAX_VERTEX_ATTRIBS),R=g.getParameter(g.MAX_VERTEX_UNIFORM_VECTORS),M=g.getParameter(g.MAX_VARYING_VECTORS),T=g.getParameter(g.MAX_FRAGMENT_UNIFORM_VECTORS),L=x>0,V=e||n.has("OES_texture_float"),k=L&&V,F=e?g.getParameter(g.MAX_SAMPLES):0;return{isWebGL2:e,drawBuffers:y,getMaxAnisotropy:s,getMaxPrecision:a,precision:u,logarithmicDepthBuffer:C,maxTextures:b,maxVertexTextures:x,maxTextureSize:w,maxCubemapSize:E,maxAttributes:I,maxVertexUniforms:R,maxVaryings:M,maxFragmentUniforms:T,vertexTextures:L,floatFragmentTextures:V,floatVertexTextures:k,maxSamples:F}}const SceneRevealMode={Default:0,Instant:2},LogLevel={None:0,Info:3},dummyGeometry=new BufferGeometry,dummyMaterial=new MeshBasicMaterial,COVARIANCES_ELEMENTS_PER_SPLAT=6,CENTER_COLORS_ELEMENTS_PER_SPLAT=4,COVARIANCES_ELEMENTS_PER_TEXEL_STORED=4,COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED=4,COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED=6,COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED=8,SCALES_ROTATIONS_ELEMENTS_PER_TEXEL=4,CENTER_COLORS_ELEMENTS_PER_TEXEL=4,SCENE_INDEXES_ELEMENTS_PER_TEXEL=1,SCENE_FADEIN_RATE_FAST=.012,SCENE_FADEIN_RATE_GRADUAL=.003,VISIBLE_REGION_EXPANSION_DELTA=1,MAX_TEXTURE_TEXELS=16777216;class SplatMesh extends Mesh{constructor(t=SplatRenderMode.ThreeD,r=!1,s=!1,a=!1,e=1,u=!0,p=!1,y=!1,C=1024,b=LogLevel.None,x=0,w=1,E=.3){super(dummyGeometry,dummyMaterial);xe(this,"buildSplatTree",function(t=[],r,s){return new Promise(a=>{this.disposeSplatTree(),this.baseSplatTree=new SplatTree(8,1e3);const e=performance.now(),u=new Vector4;this.baseSplatTree.processSplatMesh(this,p=>{this.getSplatColor(p,u);const y=this.getSceneIndexForSplat(p),C=t[y]||1;return u.w>=C},r,s).then(()=>{const p=performance.now()-e;if(this.logLevel>=LogLevel.Info&&console.log("SplatTree build: "+p+" ms"),this.disposed)a();else{this.splatTree=this.baseSplatTree,this.baseSplatTree=null;let y=0,C=0,b=0;this.splatTree.visitLeaves(x=>{const w=x.data.indexes.length;w>0&&(C+=w,b++,y++)}),this.logLevel>=LogLevel.Info&&(console.log(`SplatTree leaves: ${this.splatTree.countLeaves()}`),console.log(`SplatTree leaves with splats:${y}`),C=C/b,console.log(`Avg splat count per node: ${C}`),console.log(`Total splat count: ${this.getSplatCount()}`)),a()}})})});xe(this,"updateUniforms",(function(){const t=new Vector2;return function(r,s,a,e,u,p){if(this.getSplatCount()>0){if(t.set(r.x*this.devicePixelRatio,r.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(t),this.material.uniforms.basisViewport.value.set(1/t.x,1/t.y),this.material.uniforms.focal.value.set(s,a),this.material.uniforms.orthographicMode.value=e?1:0,this.material.uniforms.orthoZoom.value=u,this.material.uniforms.inverseFocalAdjustment.value=p,this.dynamicMode)for(let C=0;C<this.scenes.length;C++)this.material.uniforms.transforms.value[C].copy(this.getScene(C).transform);if(this.enableOptionalEffects)for(let C=0;C<this.scenes.length;C++)this.material.uniforms.sceneOpacity.value[C]=clamp(this.getScene(C).opacity,0,1),this.material.uniforms.sceneVisibility.value[C]=this.getScene(C).visible?1:0,this.material.uniformsNeedUpdate=!0;this.material.uniformsNeedUpdate=!0}}})());xe(this,"setupDistancesComputationTransformFeedback",(function(){let t;return function(){const r=this.getMaxSplatCount();if(!this.renderer)return;const s=this.lastRenderer!==this.renderer,a=t!==r;if(!s&&!a)return;s?this.disposeDistancesComputationGPUResources():a&&this.disposeDistancesComputationGPUBufferResources();const e=this.renderer.getContext(),u=(w,E,I)=>{const R=w.createShader(E);if(!R)return console.error("Fatal error: gl could not create a shader object."),null;if(w.shaderSource(R,I),w.compileShader(R),!w.getShaderParameter(R,w.COMPILE_STATUS)){let T="unknown";E===w.VERTEX_SHADER?T="vertex shader":E===w.FRAGMENT_SHADER&&(T="fragement shader");const L=w.getShaderInfoLog(R);return console.error("Failed to compile "+T+" with these errors:"+L),w.deleteShader(R),null}return R};let p;this.integerBasedDistancesComputation?(p=`#version 300 es
                in ivec4 center;
                flat out int distance;`,this.dynamicMode?p+=`
                        in uint sceneIndex;
                        uniform ivec4 transforms[${Constants.MaxScenes}];
                        void main(void) {
                            ivec4 transform = transforms[sceneIndex];
                            distance = center.x * transform.x + center.y * transform.y + center.z * transform.z + transform.w * center.w;
                        }
                    `:p+=`
                        uniform ivec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `):(p=`#version 300 es
                in vec4 center;
                flat out float distance;`,this.dynamicMode?p+=`
                        in uint sceneIndex;
                        uniform mat4 transforms[${Constants.MaxScenes}];
                        void main(void) {
                            vec4 transformedCenter = transforms[sceneIndex] * vec4(center.xyz, 1.0);
                            distance = transformedCenter.z;
                        }
                    `:p+=`
                        uniform vec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `);const y=`#version 300 es
                precision lowp float;
                out vec4 fragColor;
                void main(){}
            `,C=e.getParameter(e.VERTEX_ARRAY_BINDING),b=e.getParameter(e.CURRENT_PROGRAM),x=b?e.getProgramParameter(b,e.DELETE_STATUS):!1;if(s&&(this.distancesTransformFeedback.vao=e.createVertexArray()),e.bindVertexArray(this.distancesTransformFeedback.vao),s){const w=e.createProgram(),E=u(e,e.VERTEX_SHADER,p),I=u(e,e.FRAGMENT_SHADER,y);if(!E||!I)throw new Error("Could not compile shaders for distances computation on GPU.");if(e.attachShader(w,E),e.attachShader(w,I),e.transformFeedbackVaryings(w,["distance"],e.SEPARATE_ATTRIBS),e.linkProgram(w),!e.getProgramParameter(w,e.LINK_STATUS)){const M=e.getProgramInfoLog(w);throw console.error("Fatal error: Failed to link program: "+M),e.deleteProgram(w),e.deleteShader(I),e.deleteShader(E),new Error("Could not link shaders for distances computation on GPU.")}this.distancesTransformFeedback.program=w,this.distancesTransformFeedback.vertexShader=E,this.distancesTransformFeedback.vertexShader=I}if(e.useProgram(this.distancesTransformFeedback.program),this.distancesTransformFeedback.centersLoc=e.getAttribLocation(this.distancesTransformFeedback.program,"center"),this.dynamicMode){this.distancesTransformFeedback.sceneIndexesLoc=e.getAttribLocation(this.distancesTransformFeedback.program,"sceneIndex");for(let w=0;w<this.scenes.length;w++)this.distancesTransformFeedback.transformsLocs[w]=e.getUniformLocation(this.distancesTransformFeedback.program,`transforms[${w}]`)}else this.distancesTransformFeedback.modelViewProjLoc=e.getUniformLocation(this.distancesTransformFeedback.program,"modelViewProj");(s||a)&&(this.distancesTransformFeedback.centersBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),e.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc),this.integerBasedDistancesComputation?e.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc,4,e.INT,0,0):e.vertexAttribPointer(this.distancesTransformFeedback.centersLoc,4,e.FLOAT,!1,0,0),this.dynamicMode&&(this.distancesTransformFeedback.sceneIndexesBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),e.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc),e.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc,1,e.UNSIGNED_INT,0,0))),(s||a)&&(this.distancesTransformFeedback.outDistancesBuffer=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,this.distancesTransformFeedback.outDistancesBuffer),e.bufferData(e.ARRAY_BUFFER,r*4,e.STATIC_READ),s&&(this.distancesTransformFeedback.id=e.createTransformFeedback()),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,this.distancesTransformFeedback.id),e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,0,this.distancesTransformFeedback.outDistancesBuffer),b&&x!==!0&&e.useProgram(b),C&&e.bindVertexArray(C),this.lastRenderer=this.renderer,t=r}})());xe(this,"fillTransformsArray",(function(){const t=[];return function(r){t.length!==r.length&&(t.length=r.length);for(let s=0;s<this.scenes.length;s++){const e=this.getScene(s).transform.elements;for(let u=0;u<16;u++)t[s*16+u]=e[u]}r.set(t)}})());xe(this,"computeDistancesOnGPU",(function(){const t=new Matrix4;return function(r,s){if(!this.renderer)return;const a=this.renderer.getContext(),e=a.getParameter(a.VERTEX_ARRAY_BINDING),u=a.getParameter(a.CURRENT_PROGRAM),p=u?a.getProgramParameter(u,a.DELETE_STATUS):!1;if(a.bindVertexArray(this.distancesTransformFeedback.vao),a.useProgram(this.distancesTransformFeedback.program),a.enable(a.RASTERIZER_DISCARD),this.dynamicMode)for(let b=0;b<this.scenes.length;b++)if(t.copy(this.getScene(b).transform),t.premultiply(r),this.integerBasedDistancesComputation){const x=SplatMesh.getIntegerMatrixArray(t),w=[x[2],x[6],x[10],x[14]];a.uniform4i(this.distancesTransformFeedback.transformsLocs[b],w[0],w[1],w[2],w[3])}else a.uniformMatrix4fv(this.distancesTransformFeedback.transformsLocs[b],!1,t.elements);else if(this.integerBasedDistancesComputation){const b=SplatMesh.getIntegerMatrixArray(r),x=[b[2],b[6],b[10]];a.uniform3i(this.distancesTransformFeedback.modelViewProjLoc,x[0],x[1],x[2])}else{const b=[r.elements[2],r.elements[6],r.elements[10]];a.uniform3f(this.distancesTransformFeedback.modelViewProjLoc,b[0],b[1],b[2])}a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),a.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc),this.integerBasedDistancesComputation?a.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc,4,a.INT,0,0):a.vertexAttribPointer(this.distancesTransformFeedback.centersLoc,4,a.FLOAT,!1,0,0),this.dynamicMode&&(a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),a.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc),a.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc,1,a.UNSIGNED_INT,0,0)),a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,this.distancesTransformFeedback.id),a.bindBufferBase(a.TRANSFORM_FEEDBACK_BUFFER,0,this.distancesTransformFeedback.outDistancesBuffer),a.beginTransformFeedback(a.POINTS),a.drawArrays(a.POINTS,0,this.getSplatCount()),a.endTransformFeedback(),a.bindBufferBase(a.TRANSFORM_FEEDBACK_BUFFER,0,null),a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,null),a.disable(a.RASTERIZER_DISCARD);const y=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);a.flush();const C=new Promise(b=>{const x=()=>{if(this.disposed)b();else switch(a.clientWaitSync(y,0,0)){case a.TIMEOUT_EXPIRED:return this.computeDistancesOnGPUSyncTimeout=setTimeout(x),this.computeDistancesOnGPUSyncTimeout;case a.WAIT_FAILED:throw new Error("should never get here");default:this.computeDistancesOnGPUSyncTimeout=null,a.deleteSync(y);const R=a.getParameter(a.VERTEX_ARRAY_BINDING);a.bindVertexArray(this.distancesTransformFeedback.vao),a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.outDistancesBuffer),a.getBufferSubData(a.ARRAY_BUFFER,0,s),a.bindBuffer(a.ARRAY_BUFFER,null),R&&a.bindVertexArray(R),b()}};this.computeDistancesOnGPUSyncTimeout=setTimeout(x)});return u&&p!==!0&&a.useProgram(u),e&&a.bindVertexArray(e),C}})());xe(this,"getSplatCenter",(function(){const t={};return function(r,s,a){this.getLocalSplatParameters(r,t,a),t.splatBuffer.getSplatCenter(t.localIndex,s,t.sceneTransform)}})());xe(this,"getSplatScaleAndRotation",(function(){const t={},r=new Vector3$1;return function(s,a,e,u){this.getLocalSplatParameters(s,t,u),r.x=void 0,r.y=void 0,r.z=void 0,this.splatRenderMode===SplatRenderMode.TwoD&&(r.z=0),t.splatBuffer.getSplatScaleAndRotation(t.localIndex,a,e,t.sceneTransform,r)}})());xe(this,"getSplatColor",(function(){const t={};return function(r,s){this.getLocalSplatParameters(r,t),t.splatBuffer.getSplatColor(t.localIndex,s)}})());this.renderer=void 0,this.splatRenderMode=t,this.dynamicMode=r,this.enableOptionalEffects=s,this.halfPrecisionCovariancesOnGPU=a,this.devicePixelRatio=e,this.enableDistancesComputationOnGPU=u,this.integerBasedDistancesComputation=p,this.antialiased=y,this.kernel2DSize=E,this.maxScreenSpaceSplatSize=C,this.logLevel=b,this.sphericalHarmonicsDegree=x,this.minSphericalHarmonicsDegree=0,this.sceneFadeInRateMultiplier=w,this.scenes=[],this.splatTree=null,this.baseSplatTree=null,this.splatDataTextures={},this.distancesTransformFeedback={id:null,vertexShader:null,fragmentShader:null,program:null,centersBuffer:null,sceneIndexesBuffer:null,outDistancesBuffer:null,centersLoc:-1,modelViewProjLoc:-1,sceneIndexesLoc:-1,transformsLocs:[]},this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSceneIndexMap=[],this.lastBuildSplatCount=0,this.lastBuildScenes=[],this.lastBuildMaxSplatCount=0,this.lastBuildSceneCount=0,this.firstRenderTime=-1,this.finalBuild=!1,this.webGLUtils=null,this.boundingBox=new Box3,this.calculatedSceneCenter=new Vector3$1,this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.visibleRegionChanging=!1,this.splatScale=1,this.pointCloudModeEnabled=!1,this.disposed=!1,this.lastRenderer=null,this.visible=!1}static buildScenes(t,r,s){const a=[];a.length=r.length;for(let e=0;e<r.length;e++){const u=r[e],p=s[e]||{};let y=p.position||[0,0,0],C=p.rotation||[0,0,0,1],b=p.scale||[1,1,1];const x=new Vector3$1().fromArray(y),w=new Quaternion$1().fromArray(C),E=new Vector3$1().fromArray(b),I=SplatMesh.createScene(u,x,w,E,p.splatAlphaRemovalThreshold||1,p.opacity,p.visible);t.add(I),a[e]=I}return a}static createScene(t,r,s,a,e,u=1,p=!0){return new SplatScene(t,r,s,a,e,u,p)}static buildSplatIndexMaps(t){const r=[],s=[];let a=0;for(let e=0;e<t.length;e++){const p=t[e].getMaxSplatCount();for(let y=0;y<p;y++)r[a]=y,s[a]=e,a++}return{localSplatIndexMap:r,sceneIndexMap:s}}build(t,r,s=!0,a=!1,e,u,p=!0){this.sceneOptions=r,this.finalBuild=a;const y=SplatMesh.getTotalMaxSplatCountForSplatBuffers(t),C=SplatMesh.buildScenes(this,t,r);if(s)for(let R=0;R<this.scenes.length&&R<C.length;R++){const M=C[R],T=this.getScene(R);M.copyTransformData(T)}this.scenes=C;let b=3;for(let R of t){const M=R.getMinSphericalHarmonicsDegree();M<b&&(b=M)}this.minSphericalHarmonicsDegree=Math.min(b,this.sphericalHarmonicsDegree);let x=!1;if(t.length!==this.lastBuildScenes.length)x=!0;else for(let R=0;R<t.length;R++)if(t[R]!==this.lastBuildScenes[R].splatBuffer){x=!0;break}let w=!0;if((this.scenes.length!==1||this.lastBuildSceneCount!==this.scenes.length||this.lastBuildMaxSplatCount!==y||x)&&(w=!1),!w){this.boundingBox=new Box3,p||(this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.firstRenderTime=-1),this.lastBuildScenes=[],this.lastBuildSplatCount=0,this.lastBuildMaxSplatCount=0,this.disposeMeshData(),this.geometry=SplatGeometry.build(y),this.splatRenderMode===SplatRenderMode.ThreeD?this.material=SplatMaterial3D.build(this.dynamicMode,this.enableOptionalEffects,this.antialiased,this.maxScreenSpaceSplatSize,this.splatScale,this.pointCloudModeEnabled,this.minSphericalHarmonicsDegree,this.kernel2DSize):this.material=SplatMaterial2D.build(this.dynamicMode,this.enableOptionalEffects,this.splatScale,this.pointCloudModeEnabled,this.minSphericalHarmonicsDegree);const R=SplatMesh.buildSplatIndexMaps(t);this.globalSplatIndexToLocalSplatIndexMap=R.localSplatIndexMap,this.globalSplatIndexToSceneIndexMap=R.sceneIndexMap}const E=this.getSplatCount(!0);this.enableDistancesComputationOnGPU&&this.setupDistancesComputationTransformFeedback();const I=this.refreshGPUDataFromSplatBuffers(w);for(let R=0;R<this.scenes.length;R++)this.lastBuildScenes[R]=this.scenes[R];return this.lastBuildSplatCount=E,this.lastBuildMaxSplatCount=this.getMaxSplatCount(),this.lastBuildSceneCount=this.scenes.length,a&&this.scenes.length>0&&this.buildSplatTree(r.map(R=>R.splatAlphaRemovalThreshold||1),e,u).then(()=>{this.onSplatTreeReadyCallback&&this.onSplatTreeReadyCallback(this.splatTree),this.onSplatTreeReadyCallback=null}),this.visible=this.scenes.length>0,I}freeIntermediateSplatData(){const t=r=>{delete r.source.data,delete r.image,r.onUpdate=null};delete this.splatDataTextures.baseData.covariances,delete this.splatDataTextures.baseData.centers,delete this.splatDataTextures.baseData.colors,delete this.splatDataTextures.baseData.sphericalHarmonics,delete this.splatDataTextures.centerColors.data,delete this.splatDataTextures.covariances.data,this.splatDataTextures.sphericalHarmonics&&delete this.splatDataTextures.sphericalHarmonics.data,this.splatDataTextures.sceneIndexes&&delete this.splatDataTextures.sceneIndexes.data,this.splatDataTextures.centerColors.texture.needsUpdate=!0,this.splatDataTextures.centerColors.texture.onUpdate=()=>{t(this.splatDataTextures.centerColors.texture)},this.splatDataTextures.covariances.texture.needsUpdate=!0,this.splatDataTextures.covariances.texture.onUpdate=()=>{t(this.splatDataTextures.covariances.texture)},this.splatDataTextures.sphericalHarmonics&&(this.splatDataTextures.sphericalHarmonics.texture?(this.splatDataTextures.sphericalHarmonics.texture.needsUpdate=!0,this.splatDataTextures.sphericalHarmonics.texture.onUpdate=()=>{t(this.splatDataTextures.sphericalHarmonics.texture)}):this.splatDataTextures.sphericalHarmonics.textures.forEach(r=>{r.needsUpdate=!0,r.onUpdate=()=>{t(r)}})),this.splatDataTextures.sceneIndexes&&(this.splatDataTextures.sceneIndexes.texture.needsUpdate=!0,this.splatDataTextures.sceneIndexes.texture.onUpdate=()=>{t(this.splatDataTextures.sceneIndexes.texture)})}dispose(){this.disposeMeshData(),this.disposeTextures(),this.disposeSplatTree(),this.enableDistancesComputationOnGPU&&(this.computeDistancesOnGPUSyncTimeout&&(clearTimeout(this.computeDistancesOnGPUSyncTimeout),this.computeDistancesOnGPUSyncTimeout=null),this.disposeDistancesComputationGPUResources()),this.scenes=[],this.distancesTransformFeedback={id:null,vertexShader:null,fragmentShader:null,program:null,centersBuffer:null,sceneIndexesBuffer:null,outDistancesBuffer:null,centersLoc:-1,modelViewProjLoc:-1,sceneIndexesLoc:-1,transformsLocs:[]},this.renderer=null,this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSceneIndexMap=[],this.lastBuildSplatCount=0,this.lastBuildScenes=[],this.lastBuildMaxSplatCount=0,this.lastBuildSceneCount=0,this.firstRenderTime=-1,this.finalBuild=!1,this.webGLUtils=null,this.boundingBox=new Box3,this.calculatedSceneCenter=new Vector3$1,this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.visibleRegionChanging=!1,this.splatScale=1,this.pointCloudModeEnabled=!1,this.disposed=!0,this.lastRenderer=null,this.visible=!1}disposeMeshData(){this.geometry&&this.geometry!==dummyGeometry&&(this.geometry.dispose(),this.geometry=null),this.material&&(this.material.dispose(),this.material=null)}disposeTextures(){for(let t in this.splatDataTextures)if(this.splatDataTextures.hasOwnProperty(t)){const r=this.splatDataTextures[t];r.texture&&(r.texture.dispose(),r.texture=null)}this.splatDataTextures=null}disposeSplatTree(){this.splatTree&&(this.splatTree.dispose(),this.splatTree=null),this.baseSplatTree&&(this.baseSplatTree.dispose(),this.baseSplatTree=null)}getSplatTree(){return this.splatTree}onSplatTreeReady(t){this.onSplatTreeReadyCallback=t}getDataForDistancesComputation(t,r){const s=this.integerBasedDistancesComputation?this.getIntegerCenters(t,r,!0):this.getFloatCenters(t,r,!0),a=this.getSceneIndexes(t,r);return{centers:s,sceneIndexes:a}}refreshGPUDataFromSplatBuffers(t){const r=this.getSplatCount(!0);this.refreshDataTexturesFromSplatBuffers(t);const s=t?this.lastBuildSplatCount:0,{centers:a,sceneIndexes:e}=this.getDataForDistancesComputation(s,r-1);return this.enableDistancesComputationOnGPU&&this.refreshGPUBuffersForDistancesComputation(a,e,t),{from:s,to:r-1,count:r-s,centers:a,sceneIndexes:e}}refreshGPUBuffersForDistancesComputation(t,r,s=!1){const a=s?this.lastBuildSplatCount:0;this.updateGPUCentersBufferForDistancesComputation(s,t,a),this.updateGPUTransformIndexesBufferForDistancesComputation(s,r,a)}refreshDataTexturesFromSplatBuffers(t){const r=this.getSplatCount(!0),s=this.lastBuildSplatCount,a=r-1;t?this.updateBaseDataFromSplatBuffers(s,a):(this.setupDataTextures(),this.updateBaseDataFromSplatBuffers()),this.updateDataTexturesFromBaseData(s,a),this.updateVisibleRegion(t)}setupDataTextures(){const t=this.getMaxSplatCount(),r=this.getSplatCount(!0);this.disposeTextures();const s=(U,G)=>{const Q=new Vector2(4096,1024);for(;Q.x*Q.y*U<t*G;)Q.y*=2;return Q},a=U=>U>=1?COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED:COVARIANCES_ELEMENTS_PER_TEXEL_STORED,e=U=>{const G=a(U),Q=s(G,6);return{elementsPerTexelStored:G,texSize:Q}};let u=this.getTargetCovarianceCompressionLevel();const p=0,y=this.getTargetSphericalHarmonicsCompressionLevel();let C,b,x;if(this.splatRenderMode===SplatRenderMode.ThreeD){const U=e(u);U.texSize.x*U.texSize.y>MAX_TEXTURE_TEXELS&&u===0&&(u=1),C=new Float32Array(t*COVARIANCES_ELEMENTS_PER_SPLAT)}else b=new Float32Array(t*3),x=new Float32Array(t*4);const w=new Float32Array(t*3),E=new Uint8Array(t*4);let I=Float32Array;y===1?I=Uint16Array:y===2&&(I=Uint8Array);const R=getSphericalHarmonicsComponentCountForDegree(this.minSphericalHarmonicsDegree),M=this.minSphericalHarmonicsDegree?new I(t*R):void 0,T=s(CENTER_COLORS_ELEMENTS_PER_TEXEL,4),L=new Uint32Array(T.x*T.y*CENTER_COLORS_ELEMENTS_PER_TEXEL);SplatMesh.updateCenterColorsPaddedData(0,r-1,w,E,L);const V=new DataTexture(L,T.x,T.y,RGBAIntegerFormat,UnsignedIntType);if(V.internalFormat="RGBA32UI",V.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=V,this.material.uniforms.centersColorsTextureSize.value.copy(T),this.material.uniformsNeedUpdate=!0,this.splatDataTextures={baseData:{covariances:C,scales:b,rotations:x,centers:w,colors:E,sphericalHarmonics:M},centerColors:{data:L,texture:V,size:T}},this.splatRenderMode===SplatRenderMode.ThreeD){const U=e(u),G=U.elementsPerTexelStored,Q=U.texSize;let ee=u>=1?Uint32Array:Float32Array;const de=u>=1?COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED:COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED,ne=new ee(Q.x*Q.y*de);u===0?ne.set(C):SplatMesh.updatePaddedCompressedCovariancesTextureData(C,ne,0,0,C.length);let ae;if(u>=1)ae=new DataTexture(ne,Q.x,Q.y,RGBAIntegerFormat,UnsignedIntType),ae.internalFormat="RGBA32UI",this.material.uniforms.covariancesTextureHalfFloat.value=ae;else{ae=new DataTexture(ne,Q.x,Q.y,RGBAFormat,FloatType),this.material.uniforms.covariancesTexture.value=ae;const fe=new DataTexture(new Uint32Array(32),2,2,RGBAIntegerFormat,UnsignedIntType);fe.internalFormat="RGBA32UI",this.material.uniforms.covariancesTextureHalfFloat.value=fe,fe.needsUpdate=!0}ae.needsUpdate=!0,this.material.uniforms.covariancesAreHalfFloat.value=u>=1?1:0,this.material.uniforms.covariancesTextureSize.value.copy(Q),this.splatDataTextures.covariances={data:ne,texture:ae,size:Q,compressionLevel:u,elementsPerTexelStored:G,elementsPerTexelAllocated:de}}else{const G=s(SCALES_ROTATIONS_ELEMENTS_PER_TEXEL,6);let Q=Float32Array,ee=FloatType;const de=new Q(G.x*G.y*SCALES_ROTATIONS_ELEMENTS_PER_TEXEL);SplatMesh.updateScaleRotationsPaddedData(0,r-1,b,x,de);const ne=new DataTexture(de,G.x,G.y,RGBAFormat,ee);ne.needsUpdate=!0,this.material.uniforms.scaleRotationsTexture.value=ne,this.material.uniforms.scaleRotationsTextureSize.value.copy(G),this.splatDataTextures.scaleRotations={data:de,texture:ne,size:G,compressionLevel:p}}if(M){const U=y===2?UnsignedByteType:HalfFloatType;let G=R;G%2!==0&&G++;const Q=4,ee=RGBAFormat;let de=s(Q,G);if(de.x*de.y<=MAX_TEXTURE_TEXELS){const ne=de.x*de.y*Q,ae=new I(ne);for(let Ae=0;Ae<r;Ae++){const q=R*Ae,te=G*Ae;for(let he=0;he<R;he++)ae[te+he]=M[q+he]}const fe=new DataTexture(ae,de.x,de.y,ee,U);fe.needsUpdate=!0,this.material.uniforms.sphericalHarmonicsTexture.value=fe,this.splatDataTextures.sphericalHarmonics={componentCount:R,paddedComponentCount:G,data:ae,textureCount:1,texture:fe,size:de,compressionLevel:y,elementsPerTexel:Q}}else{const ne=R/3;G=ne,G%2!==0&&G++,de=s(Q,G);const ae=de.x*de.y*Q,fe=[this.material.uniforms.sphericalHarmonicsTextureR,this.material.uniforms.sphericalHarmonicsTextureG,this.material.uniforms.sphericalHarmonicsTextureB],Ae=[],q=[];for(let te=0;te<3;te++){const he=new I(ae);Ae.push(he);for(let ye=0;ye<r;ye++){const ce=R*ye,N=G*ye;if(ne>=3){for(let J=0;J<3;J++)he[N+J]=M[ce+te*3+J];if(ne>=8)for(let J=0;J<5;J++)he[N+3+J]=M[ce+9+te*5+J]}}const Ce=new DataTexture(he,de.x,de.y,ee,U);q.push(Ce),Ce.needsUpdate=!0,fe[te].value=Ce}this.material.uniforms.sphericalHarmonicsMultiTextureMode.value=1,this.splatDataTextures.sphericalHarmonics={componentCount:R,componentCountPerChannel:ne,paddedComponentCount:G,data:Ae,textureCount:3,textures:q,size:de,compressionLevel:y,elementsPerTexel:Q}}this.material.uniforms.sphericalHarmonicsTextureSize.value.copy(de),this.material.uniforms.sphericalHarmonics8BitMode.value=y===2?1:0;for(let ne=0;ne<this.scenes.length;ne++){const ae=this.scenes[ne].splatBuffer;this.material.uniforms.sphericalHarmonics8BitCompressionRangeMin.value[ne]=ae.minSphericalHarmonicsCoeff,this.material.uniforms.sphericalHarmonics8BitCompressionRangeMax.value[ne]=ae.maxSphericalHarmonicsCoeff}this.material.uniformsNeedUpdate=!0}const k=s(SCENE_INDEXES_ELEMENTS_PER_TEXEL,4),F=new Uint32Array(k.x*k.y*SCENE_INDEXES_ELEMENTS_PER_TEXEL);for(let U=0;U<r;U++)F[U]=this.globalSplatIndexToSceneIndexMap[U];const P=new DataTexture(F,k.x,k.y,RedIntegerFormat,UnsignedIntType);P.internalFormat="R32UI",P.needsUpdate=!0,this.material.uniforms.sceneIndexesTexture.value=P,this.material.uniforms.sceneIndexesTextureSize.value.copy(k),this.material.uniformsNeedUpdate=!0,this.splatDataTextures.sceneIndexes={data:F,texture:P,size:k},this.material.uniforms.sceneCount.value=this.scenes.length}updateBaseDataFromSplatBuffers(t,r){const s=this.splatDataTextures.covariances,a=s?s.compressionLevel:void 0,e=this.splatDataTextures.scaleRotations,u=e?e.compressionLevel:void 0,p=this.splatDataTextures.sphericalHarmonics,y=p?p.compressionLevel:0;this.fillSplatDataArrays(this.splatDataTextures.baseData.covariances,this.splatDataTextures.baseData.scales,this.splatDataTextures.baseData.rotations,this.splatDataTextures.baseData.centers,this.splatDataTextures.baseData.colors,this.splatDataTextures.baseData.sphericalHarmonics,void 0,a,u,y,t,r,t)}updateDataTexturesFromBaseData(t,r){const s=this.splatDataTextures.covariances,a=s?s.compressionLevel:void 0,e=this.splatDataTextures.scaleRotations,u=e?e.compressionLevel:void 0,p=this.splatDataTextures.sphericalHarmonics,y=p?p.compressionLevel:0,C=this.splatDataTextures.centerColors,b=C.data,x=C.texture;SplatMesh.updateCenterColorsPaddedData(t,r,this.splatDataTextures.baseData.centers,this.splatDataTextures.baseData.colors,b);const w=this.renderer?this.renderer.properties.get(x):null;if(!w||!w.__webglTexture?x.needsUpdate=!0:this.updateDataTexture(b,C.texture,C.size,w,CENTER_COLORS_ELEMENTS_PER_TEXEL,CENTER_COLORS_ELEMENTS_PER_SPLAT,4,t,r),s){const L=s.texture,V=t*COVARIANCES_ELEMENTS_PER_SPLAT,k=r*COVARIANCES_ELEMENTS_PER_SPLAT;if(a===0)for(let P=V;P<=k;P++){const U=this.splatDataTextures.baseData.covariances[P];s.data[P]=U}else SplatMesh.updatePaddedCompressedCovariancesTextureData(this.splatDataTextures.baseData.covariances,s.data,t*s.elementsPerTexelAllocated,V,k);const F=this.renderer?this.renderer.properties.get(L):null;!F||!F.__webglTexture?L.needsUpdate=!0:a===0?this.updateDataTexture(s.data,s.texture,s.size,F,s.elementsPerTexelStored,COVARIANCES_ELEMENTS_PER_SPLAT,4,t,r):this.updateDataTexture(s.data,s.texture,s.size,F,s.elementsPerTexelAllocated,s.elementsPerTexelAllocated,2,t,r)}if(e){const L=e.data,V=e.texture,k=6,F=u===0?4:2;SplatMesh.updateScaleRotationsPaddedData(t,r,this.splatDataTextures.baseData.scales,this.splatDataTextures.baseData.rotations,L);const P=this.renderer?this.renderer.properties.get(V):null;!P||!P.__webglTexture?V.needsUpdate=!0:this.updateDataTexture(L,e.texture,e.size,P,SCALES_ROTATIONS_ELEMENTS_PER_TEXEL,k,F,t,r)}const E=this.splatDataTextures.baseData.sphericalHarmonics;if(E){let L=4;y===1?L=2:y===2&&(L=1);const V=(P,U,G,Q,ee)=>{const de=this.renderer?this.renderer.properties.get(P):null;!de||!de.__webglTexture?P.needsUpdate=!0:this.updateDataTexture(Q,P,U,de,G,ee,L,t,r)},k=p.componentCount,F=p.paddedComponentCount;if(p.textureCount===1){const P=p.data;for(let U=t;U<=r;U++){const G=k*U,Q=F*U;for(let ee=0;ee<k;ee++)P[Q+ee]=E[G+ee]}V(p.texture,p.size,p.elementsPerTexel,P,F)}else{const P=p.componentCountPerChannel;for(let U=0;U<3;U++){const G=p.data[U];for(let Q=t;Q<=r;Q++){const ee=k*Q,de=F*Q;if(P>=3){for(let ne=0;ne<3;ne++)G[de+ne]=E[ee+U*3+ne];if(P>=8)for(let ne=0;ne<5;ne++)G[de+3+ne]=E[ee+9+U*5+ne]}}V(p.textures[U],p.size,p.elementsPerTexel,G,F)}}}const I=this.splatDataTextures.sceneIndexes,R=I.data;for(let L=this.lastBuildSplatCount;L<=r;L++)R[L]=this.globalSplatIndexToSceneIndexMap[L];const M=I.texture,T=this.renderer?this.renderer.properties.get(M):null;!T||!T.__webglTexture?M.needsUpdate=!0:this.updateDataTexture(R,I.texture,I.size,T,1,1,1,this.lastBuildSplatCount,r)}getTargetCovarianceCompressionLevel(){return this.halfPrecisionCovariancesOnGPU?1:0}getTargetSphericalHarmonicsCompressionLevel(){return Math.max(1,this.getMaximumSplatBufferCompressionLevel())}getMaximumSplatBufferCompressionLevel(){let t;for(let r=0;r<this.scenes.length;r++){const a=this.getScene(r).splatBuffer;(r===0||a.compressionLevel>t)&&(t=a.compressionLevel)}return t}getMinimumSplatBufferCompressionLevel(){let t;for(let r=0;r<this.scenes.length;r++){const a=this.getScene(r).splatBuffer;(r===0||a.compressionLevel<t)&&(t=a.compressionLevel)}return t}static computeTextureUpdateRegion(t,r,s,a,e){const u=e/a,p=t*u,y=Math.floor(p/s),C=y*s*a,b=r*u,x=Math.floor(b/s),w=x*s*a+s*a;return{dataStart:C,dataEnd:w,startRow:y,endRow:x}}updateDataTexture(t,r,s,a,e,u,p,y,C){const b=this.renderer.getContext(),x=SplatMesh.computeTextureUpdateRegion(y,C,s.x,e,u),w=x.dataEnd-x.dataStart,E=new t.constructor(t.buffer,x.dataStart*p,w),I=x.endRow-x.startRow+1,R=this.webGLUtils.convert(r.type),M=this.webGLUtils.convert(r.format,r.colorSpace),T=b.getParameter(b.TEXTURE_BINDING_2D);b.bindTexture(b.TEXTURE_2D,a.__webglTexture),b.texSubImage2D(b.TEXTURE_2D,0,0,x.startRow,s.x,I,M,R,E),b.bindTexture(b.TEXTURE_2D,T)}static updatePaddedCompressedCovariancesTextureData(t,r,s,a,e){let u=new DataView(r.buffer),p=s,y=0;for(let C=a;C<=e;C+=2)u.setUint16(p*2,t[C],!0),u.setUint16(p*2+2,t[C+1],!0),p+=2,y++,y>=3&&(p+=2,y=0)}static updateCenterColorsPaddedData(t,r,s,a,e){for(let u=t;u<=r;u++){const p=u*4,y=u*3,C=u*4;e[C]=rgbaArrayToInteger(a,p),e[C+1]=uintEncodedFloat(s[y]),e[C+2]=uintEncodedFloat(s[y+1]),e[C+3]=uintEncodedFloat(s[y+2])}}static updateScaleRotationsPaddedData(t,r,s,a,e){for(let p=t;p<=r;p++){const y=p*3,C=p*4,b=p*6;e[b]=s[y],e[b+1]=s[y+1],e[b+2]=s[y+2],e[b+3]=a[C],e[b+4]=a[C+1],e[b+5]=a[C+2]}}updateVisibleRegion(t){const r=this.getSplatCount(!0),s=new Vector3$1;if(!t){const e=new Vector3$1;this.scenes.forEach(u=>{e.add(u.splatBuffer.sceneCenter)}),e.multiplyScalar(1/this.scenes.length),this.calculatedSceneCenter.copy(e),this.material.uniforms.sceneCenter.value.copy(this.calculatedSceneCenter),this.material.uniformsNeedUpdate=!0}const a=t?this.lastBuildSplatCount:0;for(let e=a;e<r;e++){this.getSplatCenter(e,s,!0);const u=s.sub(this.calculatedSceneCenter).length();u>this.maxSplatDistanceFromSceneCenter&&(this.maxSplatDistanceFromSceneCenter=u)}this.maxSplatDistanceFromSceneCenter-this.visibleRegionBufferRadius>VISIBLE_REGION_EXPANSION_DELTA&&(this.visibleRegionBufferRadius=this.maxSplatDistanceFromSceneCenter,this.visibleRegionRadius=Math.max(this.visibleRegionBufferRadius-VISIBLE_REGION_EXPANSION_DELTA,0)),this.finalBuild&&(this.visibleRegionRadius=this.visibleRegionBufferRadius=this.maxSplatDistanceFromSceneCenter),this.updateVisibleRegionFadeDistance()}updateVisibleRegionFadeDistance(t=SceneRevealMode.Default){const r=SCENE_FADEIN_RATE_FAST*this.sceneFadeInRateMultiplier,s=SCENE_FADEIN_RATE_GRADUAL*this.sceneFadeInRateMultiplier,a=this.finalBuild?r:s,e=t===SceneRevealMode.Default?a:s;this.visibleRegionFadeStartRadius=(this.visibleRegionRadius-this.visibleRegionFadeStartRadius)*e+this.visibleRegionFadeStartRadius;const p=(this.visibleRegionBufferRadius>0?this.visibleRegionFadeStartRadius/this.visibleRegionBufferRadius:0)>.99,y=p||t===SceneRevealMode.Instant?1:0;this.material.uniforms.visibleRegionFadeStartRadius.value=this.visibleRegionFadeStartRadius,this.material.uniforms.visibleRegionRadius.value=this.visibleRegionRadius,this.material.uniforms.firstRenderTime.value=this.firstRenderTime,this.material.uniforms.currentTime.value=performance.now(),this.material.uniforms.fadeInComplete.value=y,this.material.uniformsNeedUpdate=!0,this.visibleRegionChanging=!p}updateRenderIndexes(t,r){const s=this.geometry;s.attributes.splatIndex.set(t),s.attributes.splatIndex.needsUpdate=!0,r>0&&this.firstRenderTime===-1&&(this.firstRenderTime=performance.now()),s.instanceCount=r,s.setDrawRange(0,r)}updateTransforms(){for(let t=0;t<this.scenes.length;t++)this.getScene(t).updateTransform(this.dynamicMode)}setSplatScale(t=1){this.splatScale=t,this.material.uniforms.splatScale.value=t,this.material.uniformsNeedUpdate=!0}getSplatScale(){return this.splatScale}setPointCloudModeEnabled(t){this.pointCloudModeEnabled=t,this.material.uniforms.pointCloudModeEnabled.value=t?1:0,this.material.uniformsNeedUpdate=!0}getPointCloudModeEnabled(){return this.pointCloudModeEnabled}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(t=!1){return t?SplatMesh.getTotalSplatCountForScenes(this.scenes):this.lastBuildSplatCount}static getTotalSplatCountForScenes(t){let r=0;for(let s of t)s&&s.splatBuffer&&(r+=s.splatBuffer.getSplatCount());return r}static getTotalSplatCountForSplatBuffers(t){let r=0;for(let s of t)r+=s.getSplatCount();return r}getMaxSplatCount(){return SplatMesh.getTotalMaxSplatCountForScenes(this.scenes)}static getTotalMaxSplatCountForScenes(t){let r=0;for(let s of t)s&&s.splatBuffer&&(r+=s.splatBuffer.getMaxSplatCount());return r}static getTotalMaxSplatCountForSplatBuffers(t){let r=0;for(let s of t)r+=s.getMaxSplatCount();return r}disposeDistancesComputationGPUResources(){if(!this.renderer)return;const t=this.renderer.getContext();this.distancesTransformFeedback.vao&&(t.deleteVertexArray(this.distancesTransformFeedback.vao),this.distancesTransformFeedback.vao=null),this.distancesTransformFeedback.program&&(t.deleteProgram(this.distancesTransformFeedback.program),t.deleteShader(this.distancesTransformFeedback.vertexShader),t.deleteShader(this.distancesTransformFeedback.fragmentShader),this.distancesTransformFeedback.program=null,this.distancesTransformFeedback.vertexShader=null,this.distancesTransformFeedback.fragmentShader=null),this.disposeDistancesComputationGPUBufferResources(),this.distancesTransformFeedback.id&&(t.deleteTransformFeedback(this.distancesTransformFeedback.id),this.distancesTransformFeedback.id=null)}disposeDistancesComputationGPUBufferResources(){if(!this.renderer)return;const t=this.renderer.getContext();this.distancesTransformFeedback.centersBuffer&&(this.distancesTransformFeedback.centersBuffer=null,t.deleteBuffer(this.distancesTransformFeedback.centersBuffer)),this.distancesTransformFeedback.outDistancesBuffer&&(t.deleteBuffer(this.distancesTransformFeedback.outDistancesBuffer),this.distancesTransformFeedback.outDistancesBuffer=null)}setRenderer(t){if(t!==this.renderer){this.renderer=t;const r=this.renderer.getContext(),s=new WebGLExtensions(r),a=new WebGLCapabilities(r,s,{});if(s.init(a),this.webGLUtils=new WebGLUtils(r,s,a),this.enableDistancesComputationOnGPU&&this.getSplatCount()>0){this.setupDistancesComputationTransformFeedback();const{centers:e,sceneIndexes:u}=this.getDataForDistancesComputation(0,this.getSplatCount()-1);this.refreshGPUBuffersForDistancesComputation(e,u)}}}updateGPUCentersBufferForDistancesComputation(t,r,s){if(!this.renderer)return;const a=this.renderer.getContext(),e=a.getParameter(a.VERTEX_ARRAY_BINDING);a.bindVertexArray(this.distancesTransformFeedback.vao);const u=this.integerBasedDistancesComputation?Uint32Array:Float32Array,p=16,y=s*p;if(a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),t)a.bufferSubData(a.ARRAY_BUFFER,y,r);else{const C=new u(this.getMaxSplatCount()*p);C.set(r),a.bufferData(a.ARRAY_BUFFER,C,a.STATIC_DRAW)}a.bindBuffer(a.ARRAY_BUFFER,null),e&&a.bindVertexArray(e)}updateGPUTransformIndexesBufferForDistancesComputation(t,r,s){if(!this.renderer||!this.dynamicMode)return;const a=this.renderer.getContext(),e=a.getParameter(a.VERTEX_ARRAY_BINDING);a.bindVertexArray(this.distancesTransformFeedback.vao);const u=s*4;if(a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),t)a.bufferSubData(a.ARRAY_BUFFER,u,r);else{const p=new Uint32Array(this.getMaxSplatCount()*4);p.set(r),a.bufferData(a.ARRAY_BUFFER,p,a.STATIC_DRAW)}a.bindBuffer(a.ARRAY_BUFFER,null),e&&a.bindVertexArray(e)}getSceneIndexes(t,r){let s;const a=r-t+1;s=new Uint32Array(a);for(let e=t;e<=r;e++)s[e]=this.globalSplatIndexToSceneIndexMap[e];return s}getLocalSplatParameters(t,r,s){s==null&&(s=!this.dynamicMode),r.splatBuffer=this.getSplatBufferForSplat(t),r.localIndex=this.getSplatLocalIndex(t),r.sceneTransform=s?this.getSceneTransformForSplat(t):null}fillSplatDataArrays(t,r,s,a,e,u,p,y=0,C=0,b=1,x,w,E=0,I){const R=new Vector3$1;R.x=void 0,R.y=void 0,this.splatRenderMode===SplatRenderMode.ThreeD?R.z=void 0:R.z=1;const M=new Matrix4;let T=0,L=this.scenes.length-1;I!=null&&I>=0&&I<=this.scenes.length&&(T=I,L=I);for(let V=T;V<=L;V++){p==null&&(p=!this.dynamicMode);const k=this.getScene(V),F=k.splatBuffer;let P;if(p&&(this.getSceneTransform(V,M),P=M),t&&F.fillSplatCovarianceArray(t,P,x,w,E,y),r||s){if(!r||!s)throw new Error('SplatMesh::fillSplatDataArrays() -> "scales" and "rotations" must both be valid.');F.fillSplatScaleRotationArray(r,s,P,x,w,E,C,R)}a&&F.fillSplatCenterArray(a,P,x,w,E),e&&F.fillSplatColorArray(e,k.minimumAlpha,x,w,E),u&&F.fillSphericalHarmonicsArray(u,this.minSphericalHarmonicsDegree,P,x,w,E,b),E+=F.getSplatCount()}}getIntegerCenters(t,r,s=!1){const a=r-t+1,e=new Float32Array(a*3);this.fillSplatDataArrays(null,null,null,e,null,null,void 0,void 0,void 0,void 0,t);let u,p=s?4:3;u=new Int32Array(a*p);for(let y=0;y<a;y++){for(let C=0;C<3;C++)u[y*p+C]=Math.round(e[y*3+C]*1e3);s&&(u[y*p+3]=1e3)}return u}getFloatCenters(t,r,s=!1){const a=r-t+1,e=new Float32Array(a*3);if(this.fillSplatDataArrays(null,null,null,e,null,null,void 0,void 0,void 0,void 0,t),!s)return e;let u=new Float32Array(a*4);for(let p=0;p<a;p++){for(let y=0;y<3;y++)u[p*4+y]=e[p*3+y];u[p*4+3]=1}return u}getSceneTransform(t,r){const s=this.getScene(t);s.updateTransform(this.dynamicMode),r.copy(s.transform)}getScene(t){if(t<0||t>=this.scenes.length)throw new Error("SplatMesh::getScene() -> Invalid scene index.");return this.scenes[t]}getSceneCount(){return this.scenes.length}getSplatBufferForSplat(t){return this.getScene(this.globalSplatIndexToSceneIndexMap[t]).splatBuffer}getSceneIndexForSplat(t){return this.globalSplatIndexToSceneIndexMap[t]}getSceneTransformForSplat(t){return this.getScene(this.globalSplatIndexToSceneIndexMap[t]).transform}getSplatLocalIndex(t){return this.globalSplatIndexToLocalSplatIndexMap[t]}static getIntegerMatrixArray(t){const r=t.elements,s=[];for(let a=0;a<16;a++)s[a]=Math.round(r[a]*1e3);return s}computeBoundingBox(t=!1,r){let s=this.getSplatCount();if(r!=null){if(r<0||r>=this.scenes.length)throw new Error("SplatMesh::computeBoundingBox() -> Invalid scene index.");s=this.scenes[r].splatBuffer.getSplatCount()}const a=new Float32Array(s*3);this.fillSplatDataArrays(null,null,null,a,null,null,t,void 0,void 0,void 0,void 0,r);const e=new Vector3$1,u=new Vector3$1;for(let p=0;p<s;p++){const y=p*3,C=a[y],b=a[y+1],x=a[y+2];(p===0||C<e.x)&&(e.x=C),(p===0||b<e.y)&&(e.y=b),(p===0||x<e.z)&&(e.z=x),(p===0||C>u.x)&&(u.x=C),(p===0||b>u.y)&&(u.y=b),(p===0||x>u.z)&&(u.z=x)}return new Box3(e,u)}}var SorterWasm="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEbA2AAAGAQf39/f39/f39/f39/f39/fwBgAAF/AhIBA2VudgZtZW1vcnkCAwCAgAQDBAMAAQIHVAQRX193YXNtX2NhbGxfY3RvcnMAABhfX3dhc21fYXBwbHlfZGF0YV9yZWxvY3MAAAtzb3J0SW5kZXhlcwABE2Vtc2NyaXB0ZW5fdGxzX2luaXQAAgqWEAMDAAELihAEAXwDewN/A30gCyAKayEMAkACQCAOBEAgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQMgDCEBA0AgAyABQQJ0IgVqIAIgACAFaigCAEECdGooAgAiBTYCACAFIAogBSAKSBshCiAFIA0gBSANShshDSABQQFqIgEgC0cNAAsMAwsgDwRAIAsgDE0NAkF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiFWooAgAiFkECdGooAgAiFEcEQAJ/IAX9CQI4IAggFEEGdGoiDv0JAgwgDioCHP0gASAOKgIs/SACIA4qAjz9IAP95gEgBf0JAiggDv0JAgggDioCGP0gASAOKgIo/SACIA4qAjj9IAP95gEgBf0JAgggDv0JAgAgDioCEP0gASAOKgIg/SACIA4qAjD9IAP95gEgBf0JAhggDv0JAgQgDioCFP0gASAOKgIk/SACIA4qAjT9IAP95gH95AH95AH95AEiEf1f/QwAAAAAAECPQAAAAAAAQI9AIhL98gEiE/0hASIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshDgJ/IBP9IQAiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgL/REgDv0cAQJ/IBEgEf0NCAkKCwwNDg8AAAAAAAAAAP1fIBL98gEiEf0hACIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAv9HAICfyAR/SEBIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4C/0cAyESIBQhDwsgAyAVaiABIBZBBHRq/QAAACAS/bUBIhH9GwAgEf0bAWogEf0bAmogEf0bA2oiDjYCACAOIAogCiAOShshCiAOIA0gDSAOSBshDSACQQFqIgIgC0cNAAsMAwsCfyAFKgIIu/0UIAUqAhi7/SIB/QwAAAAAAECPQAAAAAAAQI9A/fIBIhH9IQEiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIQ4CfyAR/SEAIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyECAn8gBSoCKLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEFQfj///8HIQpBiICAgHghDSALIAxNDQIgAv0RIA79HAEgBf0cAiESIAwhBQNAIAMgBUECdCICaiABIAAgAmooAgBBBHRq/QAAACAS/bUBIhH9GwAgEf0bAWogEf0bAmoiAjYCACACIAogAiAKSBshCiACIA0gAiANShshDSAFQQFqIgUgC0cNAAsMAgsgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQIgDCEBA0AgAyABQQJ0IgVqAn8gAiAAIAVqKAIAQQJ0aioCALtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAFBAWoiASALRw0ACwwCCyAPRQRAIAsgDE0NASAFKgIoIRcgBSoCGCEYIAUqAgghGUH4////ByEKQYiAgIB4IQ0gDCEFA0ACfyAXIAEgACAFQQJ0IgdqKAIAQQR0aiICKgIIlCAZIAIqAgCUIBggAioCBJSSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOIAMgB2ogDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgCyAMTQ0AQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIUaigCAEECdCIVaigCACIORwRAIAX9CQI4IAggDkEGdGoiD/0JAgwgDyoCHP0gASAPKgIs/SACIA8qAjz9IAP95gEgBf0JAiggD/0JAgggDyoCGP0gASAPKgIo/SACIA8qAjj9IAP95gEgBf0JAgggD/0JAgAgDyoCEP0gASAPKgIg/SACIA8qAjD9IAP95gEgBf0JAhggD/0JAgQgDyoCFP0gASAPKgIk/SACIA8qAjT9IAP95gH95AH95AH95AEhESAOIQ8LIAMgFGoCfyAR/R8DIAEgFUECdCIOQQxyaioCAJQgEf0fAiABIA5BCHJqKgIAlCAR/R8AIAEgDmoqAgCUIBH9HwEgASAOQQRyaioCAJSSkpK7RAAAAAAAALBAoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAsiDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSACQQFqIgIgC0cNAAsMAQtBiICAgHghDUH4////ByEKCyALIAxLBEAgCUEBa7MgDbIgCrKTlSEXIAwhDQNAAn8gFyADIA1BAnRqIgEoAgAgCmuylCIYi0MAAABPXQRAIBioDAELQYCAgIB4CyEOIAEgDjYCACAEIA5BAnRqIgEgASgCAEEBajYCACANQQFqIg0gC0cNAAsLIAlBAk8EQCAEKAIAIQ1BASEKA0AgBCAKQQJ0aiIBIAEoAgAgDWoiDTYCACAKQQFqIgogCUcNAAsLIAxBAEoEQCAMIQoDQCAGIApBAWsiAUECdCICaiAAIAJqKAIANgIAIApBAUshAiABIQogAg0ACwsgCyAMSgRAIAshCgNAIAYgCyAEIAMgCkEBayIKQQJ0IgFqKAIAQQJ0aiICKAIAIgVrQQJ0aiAAIAFqKAIANgIAIAIgBUEBazYCACAKIAxKDQALCwsEAEEACw==",SorterWasmNoSIMD="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEXAmAAAGAQf39/f39/f39/f39/f39/fwACEgEDZW52Bm1lbW9yeQIDAICABAMDAgABBz4DEV9fd2FzbV9jYWxsX2N0b3JzAAAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAALc29ydEluZGV4ZXMAAQqiDwICAAucDwMBfAd9Bn8gCyAKayEMAkACQCAOBEAgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQMgDCEFA0AgAyAFQQJ0IgFqIAIgACABaigCAEECdGooAgAiATYCACABIAogASAKSBshCiABIA0gASANShshDSAFQQFqIgUgC0cNAAsMAwsgDwRAIAsgDE0NAkF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiGmooAgBBAnQiG2ooAgAiDkcEQAJ/IAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRgCfyARIA8qAiyUIBIgDyoCKJQgEyAPKgIglCAUIA8qAiSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRkCfyARIA8qAhyUIBIgDyoCGJQgEyAPKgIQlCAUIA8qAhSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRwCfyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIR0gDiEPCyADIBpqIAEgG0ECdGoiDigCBCAcbCAOKAIAIB1saiAOKAIIIBlsaiAOKAIMIBhsaiIONgIAIA4gCiAKIA5KGyEKIA4gDSANIA5IGyENIAJBAWoiAiALRw0ACwwDCwJ/IAUqAii7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshAgJ/IAUqAhi7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshByALIAxNAn8gBSoCCLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEPQfj///8HIQpBiICAgHghDQ0CIAwhBQNAIAMgBUECdCIIaiABIAAgCGooAgBBBHRqIggoAgQgB2wgCCgCACAPbGogCCgCCCACbGoiCDYCACAIIAogCCAKSBshCiAIIA0gCCANShshDSAFQQFqIgUgC0cNAAsMAgsgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQIgDCEFA0AgAyAFQQJ0IgFqAn8gAiAAIAFqKAIAQQJ0aioCALtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAVBAWoiBSALRw0ACwwCCyAPRQRAIAsgDE0NASAFKgIoIREgBSoCGCESIAUqAgghE0H4////ByEKQYiAgIB4IQ0gDCEFA0ACfyARIAEgACAFQQJ0IgdqKAIAQQR0aiICKgIIlCATIAIqAgCUIBIgAioCBJSSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOIAMgB2ogDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgCyAMTQ0AQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIYaigCAEECdCIZaigCACIORwRAIAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSIRUgESAPKgIslCASIA8qAiiUIBMgDyoCIJQgFCAPKgIklJKSkiEWIBEgDyoCHJQgEiAPKgIYlCATIA8qAhCUIBQgDyoCFJSSkpIhFyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSIREgDiEPCyADIBhqAn8gFSABIBlBAnRqIg4qAgyUIBYgDioCCJQgESAOKgIAlCAXIA4qAgSUkpKSu0QAAAAAAACwQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIg42AgAgCiAOIAogDkgbIQogDSAOIA0gDkobIQ0gAkEBaiICIAtHDQALDAELQYiAgIB4IQ1B+P///wchCgsgCyAMSwRAIAlBAWuzIA2yIAqyk5UhESAMIQ0DQAJ/IBEgAyANQQJ0aiIBKAIAIAprspQiEotDAAAAT10EQCASqAwBC0GAgICAeAshDiABIA42AgAgBCAOQQJ0aiIBIAEoAgBBAWo2AgAgDUEBaiINIAtHDQALCyAJQQJPBEAgBCgCACENQQEhCgNAIAQgCkECdGoiASABKAIAIA1qIg02AgAgCkEBaiIKIAlHDQALCyAMQQBKBEAgDCEKA0AgBiAKQQFrIgFBAnQiAmogACACaigCADYCACAKQQFLIAEhCg0ACwsgCyAMSgRAIAshCgNAIAYgCyAEIAMgCkEBayIKQQJ0IgFqKAIAQQJ0aiICKAIAIgVrQQJ0aiAAIAFqKAIANgIAIAIgBUEBazYCACAKIAxKDQALCws=",SorterWasmNonShared="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEXAmAAAGAQf39/f39/f39/f39/f39/fwACDwEDZW52Bm1lbW9yeQIAAAMDAgABBz4DEV9fd2FzbV9jYWxsX2N0b3JzAAAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAALc29ydEluZGV4ZXMAAQrrDwICAAvlDwQBfAN7B30DfyALIAprIQwCQAJAIA4EQCANBEBB+P///wchCkGIgICAeCENIAsgDE0NAyAMIQUDQCADIAVBAnQiAWogAiAAIAFqKAIAQQJ0aigCACIBNgIAIAEgCiABIApIGyEKIAEgDSABIA1KGyENIAVBAWoiBSALRw0ACwwDCyAPBEAgCyAMTQ0CQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIcaigCACIdQQJ0aigCACIbRwRAAn8gBf0JAjggCCAbQQZ0aiIO/QkCDCAOKgIc/SABIA4qAiz9IAIgDioCPP0gA/3mASAF/QkCKCAO/QkCCCAOKgIY/SABIA4qAij9IAIgDioCOP0gA/3mASAF/QkCCCAO/QkCACAOKgIQ/SABIA4qAiD9IAIgDioCMP0gA/3mASAF/QkCGCAO/QkCBCAOKgIU/SABIA4qAiT9IAIgDioCNP0gA/3mAf3kAf3kAf3kASIR/V/9DAAAAAAAQI9AAAAAAABAj0AiEv3yASIT/SEBIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOAn8gE/0hACIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAv9ESAO/RwBAn8gESAR/Q0ICQoLDA0ODwABAgMAAQID/V8gEv3yASIR/SEAIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4C/0cAgJ/IBH9IQEiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgL/RwDIRIgGyEPCyADIBxqIAEgHUEEdGr9AAAAIBL9tQEiEf0bACAR/RsBaiAR/RsCaiAR/RsDaiIONgIAIA4gCiAKIA5KGyEKIA4gDSANIA5IGyENIAJBAWoiAiALRw0ACwwDCwJ/IAUqAgi7/RQgBSoCGLv9IgH9DAAAAAAAQI9AAAAAAABAj0D98gEiEf0hASIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshDgJ/IBH9IQAiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLAn8gBSoCKLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEFQfj///8HIQpBiICAgHghDSALIAxNDQL9ESAO/RwBIAX9HAIhEiAMIQUDQCADIAVBAnQiAmogASAAIAJqKAIAQQR0av0AAAAgEv21ASIR/RsAIBH9GwFqIBH9GwJqIgI2AgAgAiAKIAIgCkgbIQogAiANIAIgDUobIQ0gBUEBaiIFIAtHDQALDAILIA0EQEH4////ByEKQYiAgIB4IQ0gCyAMTQ0CIAwhBQNAIAMgBUECdCIBagJ/IAIgACABaigCAEECdGoqAgC7RAAAAAAAALBAoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAsiDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgD0UEQCALIAxNDQEgBSoCKCEUIAUqAhghFSAFKgIIIRZB+P///wchCkGIgICAeCENIAwhBQNAAn8gFCABIAAgBUECdCIHaigCAEEEdGoiAioCCJQgFiACKgIAlCAVIAIqAgSUkpK7RAAAAAAAALBAoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshDiADIAdqIA42AgAgCiAOIAogDkgbIQogDSAOIA0gDkobIQ0gBUEBaiIFIAtHDQALDAILIAsgDE0NAEF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiG2ooAgBBAnQiHGooAgAiDkcEQCAFKgI4IhQgCCAOQQZ0aiIPKgI8lCAFKgIoIhUgDyoCOJQgBSoCCCIWIA8qAjCUIAUqAhgiFyAPKgI0lJKSkiEYIBQgDyoCLJQgFSAPKgIolCAWIA8qAiCUIBcgDyoCJJSSkpIhGSAUIA8qAhyUIBUgDyoCGJQgFiAPKgIQlCAXIA8qAhSUkpKSIRogFCAPKgIMlCAVIA8qAgiUIBYgDyoCAJQgFyAPKgIElJKSkiEUIA4hDwsgAyAbagJ/IBggASAcQQJ0aiIOKgIMlCAZIA4qAgiUIBQgDioCAJQgGiAOKgIElJKSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAJBAWoiAiALRw0ACwwBC0GIgICAeCENQfj///8HIQoLIAsgDEsEQCAJQQFrsyANsiAKspOVIRQgDCENA0ACfyAUIAMgDUECdGoiASgCACAKa7KUIhWLQwAAAE9dBEAgFagMAQtBgICAgHgLIQ4gASAONgIAIAQgDkECdGoiASABKAIAQQFqNgIAIA1BAWoiDSALRw0ACwsgCUECTwRAIAQoAgAhDUEBIQoDQCAEIApBAnRqIgEgASgCACANaiINNgIAIApBAWoiCiAJRw0ACwsgDEEASgRAIAwhCgNAIAYgCkEBayIBQQJ0IgJqIAAgAmooAgA2AgAgCkEBSyABIQoNAAsLIAsgDEoEQCALIQoDQCAGIAsgBCADIApBAWsiCkECdCIBaigCAEECdGoiAigCACIFa0ECdGogACABaigCADYCACACIAVBAWs2AgAgCiAMSg0ACwsL",SorterWasmNoSIMDNonShared="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEXAmAAAGAQf39/f39/f39/f39/f39/fwACDwEDZW52Bm1lbW9yeQIAAAMDAgABBz4DEV9fd2FzbV9jYWxsX2N0b3JzAAAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAALc29ydEluZGV4ZXMAAQqiDwICAAucDwMBfAd9Bn8gCyAKayEMAkACQCAOBEAgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQMgDCEFA0AgAyAFQQJ0IgFqIAIgACABaigCAEECdGooAgAiATYCACABIAogASAKSBshCiABIA0gASANShshDSAFQQFqIgUgC0cNAAsMAwsgDwRAIAsgDE0NAkF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiGmooAgBBAnQiG2ooAgAiDkcEQAJ/IAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRgCfyARIA8qAiyUIBIgDyoCKJQgEyAPKgIglCAUIA8qAiSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRkCfyARIA8qAhyUIBIgDyoCGJQgEyAPKgIQlCAUIA8qAhSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRwCfyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIR0gDiEPCyADIBpqIAEgG0ECdGoiDigCBCAcbCAOKAIAIB1saiAOKAIIIBlsaiAOKAIMIBhsaiIONgIAIA4gCiAKIA5KGyEKIA4gDSANIA5IGyENIAJBAWoiAiALRw0ACwwDCwJ/IAUqAii7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshAgJ/IAUqAhi7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshByALIAxNAn8gBSoCCLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEPQfj///8HIQpBiICAgHghDQ0CIAwhBQNAIAMgBUECdCIIaiABIAAgCGooAgBBBHRqIggoAgQgB2wgCCgCACAPbGogCCgCCCACbGoiCDYCACAIIAogCCAKSBshCiAIIA0gCCANShshDSAFQQFqIgUgC0cNAAsMAgsgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQIgDCEFA0AgAyAFQQJ0IgFqAn8gAiAAIAFqKAIAQQJ0aioCALtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAVBAWoiBSALRw0ACwwCCyAPRQRAIAsgDE0NASAFKgIoIREgBSoCGCESIAUqAgghE0H4////ByEKQYiAgIB4IQ0gDCEFA0ACfyARIAEgACAFQQJ0IgdqKAIAQQR0aiICKgIIlCATIAIqAgCUIBIgAioCBJSSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOIAMgB2ogDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgCyAMTQ0AQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIYaigCAEECdCIZaigCACIORwRAIAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSIRUgESAPKgIslCASIA8qAiiUIBMgDyoCIJQgFCAPKgIklJKSkiEWIBEgDyoCHJQgEiAPKgIYlCATIA8qAhCUIBQgDyoCFJSSkpIhFyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSIREgDiEPCyADIBhqAn8gFSABIBlBAnRqIg4qAgyUIBYgDioCCJQgESAOKgIAlCAXIA4qAgSUkpKSu0QAAAAAAACwQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIg42AgAgCiAOIAogDkgbIQogDSAOIA0gDkobIQ0gAkEBaiICIAtHDQALDAELQYiAgIB4IQ1B+P///wchCgsgCyAMSwRAIAlBAWuzIA2yIAqyk5UhESAMIQ0DQAJ/IBEgAyANQQJ0aiIBKAIAIAprspQiEotDAAAAT10EQCASqAwBC0GAgICAeAshDiABIA42AgAgBCAOQQJ0aiIBIAEoAgBBAWo2AgAgDUEBaiINIAtHDQALCyAJQQJPBEAgBCgCACENQQEhCgNAIAQgCkECdGoiASABKAIAIA1qIg02AgAgCkEBaiIKIAlHDQALCyAMQQBKBEAgDCEKA0AgBiAKQQFrIgFBAnQiAmogACACaigCADYCACAKQQFLIAEhCg0ACwsgCyAMSgRAIAshCgNAIAYgCyAEIAMgCkEBayIKQQJ0IgFqKAIAQQJ0aiICKAIAIgVrQQJ0aiAAIAFqKAIANgIAIAIgBUEBazYCACAKIAxKDQALCws=";function sortWorker(g){let n,t,r,s,a,e,u,p,y,C,b,x,w,E,I,R,M,T,L,V;function k(F,P,U,G,Q,ee,de){const ne=performance.now();if(!r&&(new Uint32Array(t,u,Q.byteLength/V.BytesPerInt).set(Q),new Float32Array(t,C,de.byteLength/V.BytesPerFloat).set(de),G)){let te;s?te=new Int32Array(t,b,ee.byteLength/V.BytesPerInt):te=new Float32Array(t,b,ee.byteLength/V.BytesPerFloat),te.set(ee)}R||(R=new Uint32Array(T)),new Float32Array(t,I,16).set(U),new Uint32Array(t,w,T).set(R),n.exports.sortIndexes(u,E,b,x,w,I,p,y,C,T,F,P,e,G,s,a);const ae={sortDone:!0,splatSortCount:F,splatRenderCount:P,sortTime:0};if(!r){const Ae=new Uint32Array(t,p,P);(!M||M.length<P)&&(M=new Uint32Array(P)),M.set(Ae),ae.sortedIndexes=M}const fe=performance.now();ae.sortTime=fe-ne,g.postMessage(ae)}g.onmessage=F=>{if(F.data.centers)centers=F.data.centers,sceneIndexes=F.data.sceneIndexes,s?new Int32Array(t,E+F.data.range.from*V.BytesPerInt*4,F.data.range.count*4).set(new Int32Array(centers)):new Float32Array(t,E+F.data.range.from*V.BytesPerFloat*4,F.data.range.count*4).set(new Float32Array(centers)),a&&new Uint32Array(t,y+F.data.range.from*4,F.data.range.count).set(new Uint32Array(sceneIndexes)),L=F.data.range.from+F.data.range.count;else if(F.data.sort){const P=Math.min(F.data.sort.splatRenderCount||0,L),U=Math.min(F.data.sort.splatSortCount||0,L),G=F.data.sort.usePrecomputedDistances;let Q,ee,de;r||(Q=F.data.sort.indexesToSort,de=F.data.sort.transforms,G&&(ee=F.data.sort.precomputedDistances)),k(U,P,F.data.sort.modelViewProj,G,Q,ee,de)}else if(F.data.init){V=F.data.init.Constants,e=F.data.init.splatCount,r=F.data.init.useSharedMemory,s=F.data.init.integerBasedSort,a=F.data.init.dynamicMode,T=F.data.init.distanceMapRange,L=0;const P=s?V.BytesPerInt*4:V.BytesPerFloat*4,U=new Uint8Array(F.data.init.sorterWasmBytes),G=16*V.BytesPerFloat,Q=e*V.BytesPerInt,ee=e*P,de=G,ne=s?e*V.BytesPerInt:e*V.BytesPerFloat,ae=e*V.BytesPerInt,fe=e*V.BytesPerInt,Ae=s?T*V.BytesPerInt*2:T*V.BytesPerFloat*2,q=a?e*V.BytesPerInt:0,te=a?V.MaxScenes*G:0,he=V.MemoryPageSize*32,Ce=Q+ee+de+ne+ae+Ae+fe+q+te+he,ye=Math.floor(Ce/V.MemoryPageSize)+1,ce={module:{},env:{memory:new WebAssembly.Memory({initial:ye,maximum:ye,shared:!0})}};WebAssembly.compile(U).then(N=>WebAssembly.instantiate(N,ce)).then(N=>{n=N,u=0,E=u+Q,I=E+ee,b=I+de,x=b+ne,w=x+ae,p=w+Ae,y=p+fe,C=y+q,t=ce.env.memory.buffer,r?g.postMessage({sortSetupPhase1Complete:!0,indexesToSortBuffer:t,indexesToSortOffset:u,sortedIndexesBuffer:t,sortedIndexesOffset:p,precomputedDistancesBuffer:t,precomputedDistancesOffset:b,transformsBuffer:t,transformsOffset:C}):g.postMessage({sortSetupPhase1Complete:!0})})}}}function createSortWorker(g,n,t,r,s,a=Constants.DefaultSplatSortDistanceMapPrecision){const e=new Worker(URL.createObjectURL(new Blob(["(",sortWorker.toString(),")(self)"],{type:"application/javascript"})));let u=SorterWasm;const p=isIOS()?getIOSSemever():null;!t&&!n?(u=SorterWasmNoSIMD,p&&p.major<=16&&p.minor<4&&(u=SorterWasmNoSIMDNonShared)):t?n||p&&p.major<=16&&p.minor<4&&(u=SorterWasmNonShared):u=SorterWasmNoSIMD;const y=atob(u),C=new Uint8Array(y.length);for(let b=0;b<y.length;b++)C[b]=y.charCodeAt(b);return e.postMessage({init:{sorterWasmBytes:C.buffer,splatCount:g,useSharedMemory:n,integerBasedSort:r,dynamicMode:s,distanceMapRange:1<<a,Constants:{BytesPerFloat:Constants.BytesPerFloat,BytesPerInt:Constants.BytesPerInt,MemoryPageSize:Constants.MemoryPageSize,MaxScenes:Constants.MaxScenes}}}),e}const WebXRMode={None:0,VR:1,AR:2};class VRButton{static createButton(n,t={}){const r=document.createElement("button");function s(){let y=null;async function C(w){w.addEventListener("end",b),await n.xr.setSession(w),r.textContent="EXIT VR",y=w}function b(){y.removeEventListener("end",b),r.textContent="ENTER VR",y=null}r.style.display="",r.style.cursor="pointer",r.style.left="calc(50% - 50px)",r.style.width="100px",r.textContent="ENTER VR";const x={...t,optionalFeatures:["local-floor","bounded-floor","layers",...t.optionalFeatures||[]]};r.onmouseenter=function(){r.style.opacity="1.0"},r.onmouseleave=function(){r.style.opacity="0.5"},r.onclick=function(){y===null?navigator.xr.requestSession("immersive-vr",x).then(C):(y.end(),navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-vr",x).then(C).catch(w=>{console.warn(w)}))},navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-vr",x).then(C).catch(w=>{console.warn(w)})}function a(){r.style.display="",r.style.cursor="auto",r.style.left="calc(50% - 75px)",r.style.width="150px",r.onmouseenter=null,r.onmouseleave=null,r.onclick=null}function e(){a(),r.textContent="VR NOT SUPPORTED"}function u(y){a(),console.warn("Exception when trying to call xr.isSessionSupported",y),r.textContent="VR NOT ALLOWED"}function p(y){y.style.position="absolute",y.style.bottom="20px",y.style.padding="12px 6px",y.style.border="1px solid #fff",y.style.borderRadius="4px",y.style.background="rgba(0,0,0,0.1)",y.style.color="#fff",y.style.font="normal 13px sans-serif",y.style.textAlign="center",y.style.opacity="0.5",y.style.outline="none",y.style.zIndex="999"}if("xr"in navigator)return r.id="VRButton",r.style.display="none",p(r),navigator.xr.isSessionSupported("immersive-vr").then(function(y){y?s():e(),y&&VRButton.xrSessionIsGranted&&r.click()}).catch(u),r;{const y=document.createElement("a");return window.isSecureContext===!1?(y.href=document.location.href.replace(/^http:/,"https:"),y.innerHTML="WEBXR NEEDS HTTPS"):(y.href="https://immersiveweb.dev/",y.innerHTML="WEBXR NOT AVAILABLE"),y.style.left="calc(50% - 90px)",y.style.width="180px",y.style.textDecoration="none",p(y),y}}static registerSessionGrantedListener(){if(typeof navigator<"u"&&"xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",()=>{VRButton.xrSessionIsGranted=!0})}}}VRButton.xrSessionIsGranted=!1;VRButton.registerSessionGrantedListener();class ARButton{static createButton(n,t={}){const r=document.createElement("button");function s(){if(t.domOverlay===void 0){const x=document.createElement("div");x.style.display="none",document.body.appendChild(x);const w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.setAttribute("width",38),w.setAttribute("height",38),w.style.position="absolute",w.style.right="20px",w.style.top="20px",w.addEventListener("click",function(){y.end()}),x.appendChild(w);const E=document.createElementNS("http://www.w3.org/2000/svg","path");E.setAttribute("d","M 12,12 L 28,28 M 28,12 12,28"),E.setAttribute("stroke","#fff"),E.setAttribute("stroke-width",2),w.appendChild(E),t.optionalFeatures===void 0&&(t.optionalFeatures=[]),t.optionalFeatures.push("dom-overlay"),t.domOverlay={root:x}}let y=null;async function C(x){x.addEventListener("end",b),n.xr.setReferenceSpaceType("local"),await n.xr.setSession(x),r.textContent="STOP AR",t.domOverlay.root.style.display="",y=x}function b(){y.removeEventListener("end",b),r.textContent="START AR",t.domOverlay.root.style.display="none",y=null}r.style.display="",r.style.cursor="pointer",r.style.left="calc(50% - 50px)",r.style.width="100px",r.textContent="START AR",r.onmouseenter=function(){r.style.opacity="1.0"},r.onmouseleave=function(){r.style.opacity="0.5"},r.onclick=function(){y===null?navigator.xr.requestSession("immersive-ar",t).then(C):(y.end(),navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-ar",t).then(C).catch(x=>{console.warn(x)}))},navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-ar",t).then(C).catch(x=>{console.warn(x)})}function a(){r.style.display="",r.style.cursor="auto",r.style.left="calc(50% - 75px)",r.style.width="150px",r.onmouseenter=null,r.onmouseleave=null,r.onclick=null}function e(){a(),r.textContent="AR NOT SUPPORTED"}function u(y){a(),console.warn("Exception when trying to call xr.isSessionSupported",y),r.textContent="AR NOT ALLOWED"}function p(y){y.style.position="absolute",y.style.bottom="20px",y.style.padding="12px 6px",y.style.border="1px solid #fff",y.style.borderRadius="4px",y.style.background="rgba(0,0,0,0.1)",y.style.color="#fff",y.style.font="normal 13px sans-serif",y.style.textAlign="center",y.style.opacity="0.5",y.style.outline="none",y.style.zIndex="999"}if("xr"in navigator)return r.id="ARButton",r.style.display="none",p(r),navigator.xr.isSessionSupported("immersive-ar").then(function(y){y?s():e()}).catch(u),r;{const y=document.createElement("a");return window.isSecureContext===!1?(y.href=document.location.href.replace(/^http:/,"https:"),y.innerHTML="WEBXR NEEDS HTTPS"):(y.href="https://immersiveweb.dev/",y.innerHTML="WEBXR NOT AVAILABLE"),y.style.left="calc(50% - 90px)",y.style.width="180px",y.style.textDecoration="none",p(y),y}}}const RenderMode={Always:0,Never:2},THREE_CAMERA_FOV=50,MINIMUM_DISTANCE_TO_NEW_FOCAL_POINT=.75,MIN_SPLAT_COUNT_TO_SHOW_SPLAT_TREE_LOADING_SPINNER=15e5,FOCUS_MARKER_FADE_IN_SPEED=10,FOCUS_MARKER_FADE_OUT_SPEED=2.5,CONSECUTIVE_RENDERED_FRAMES_FOR_FPS_CALCULATION=60,Bn=class Bn{constructor(n={}){xe(this,"onKeyDown",(function(){const n=new Vector3$1,t=new Matrix4,r=new Matrix4;return function(s){switch(n.set(0,0,-1),n.transformDirection(this.camera.matrixWorld),t.makeRotationAxis(n,Math.PI/128),r.makeRotationAxis(n,-Math.PI/128),s.code){case"KeyG":this.focalAdjustment+=.02,this.forceRenderNextFrame();break;case"KeyF":this.focalAdjustment-=.02,this.forceRenderNextFrame();break;case"ArrowLeft":this.camera.up.transformDirection(t);break;case"ArrowRight":this.camera.up.transformDirection(r);break;case"KeyC":this.showMeshCursor=!this.showMeshCursor;break;case"KeyU":this.showControlPlane=!this.showControlPlane;break;case"KeyI":this.showInfo=!this.showInfo,this.showInfo?this.infoPanel.show():this.infoPanel.hide();break;case"KeyO":this.usingExternalCamera||this.setOrthographicMode(!this.camera.isOrthographicCamera);break;case"KeyP":this.usingExternalCamera||this.splatMesh.setPointCloudModeEnabled(!this.splatMesh.getPointCloudModeEnabled());break;case"Equal":this.usingExternalCamera||this.splatMesh.setSplatScale(this.splatMesh.getSplatScale()+.05);break;case"Minus":this.usingExternalCamera||this.splatMesh.setSplatScale(Math.max(this.splatMesh.getSplatScale()-.05,0));break}}})());xe(this,"onMouseUp",(function(){const n=new Vector2;return function(t){n.copy(this.mousePosition).sub(this.mouseDownPosition),getCurrentTime()-this.mouseDownTime<.5&&n.length()<2&&this.onMouseClick(t)}})());xe(this,"checkForFocalPointChange",(function(){const n=new Vector2,t=new Vector3$1,r=[];return function(){if(!this.transitioningCameraTarget&&(this.getRenderDimensions(n),r.length=0,this.raycaster.setFromCameraAndScreenPosition(this.camera,this.mousePosition,n),this.raycaster.intersectSplatMesh(this.splatMesh,r),r.length>0)){const a=r[0].origin;t.copy(a).sub(this.camera.position),t.length()>MINIMUM_DISTANCE_TO_NEW_FOCAL_POINT&&(this.previousCameraTarget.copy(this.controls.target),this.nextCameraTarget.copy(a),this.transitioningCameraTarget=!0,this.transitioningCameraTargetStartTime=getCurrentTime())}}})());xe(this,"updateSplatMesh",(function(){const n=new Vector2;return function(){if(!this.splatMesh)return;if(this.splatMesh.getSplatCount()>0){this.splatMesh.updateVisibleRegionFadeDistance(this.sceneRevealMode),this.splatMesh.updateTransforms(),this.getRenderDimensions(n);const r=this.camera.projectionMatrix.elements[0]*.5*this.devicePixelRatio*n.x,s=this.camera.projectionMatrix.elements[5]*.5*this.devicePixelRatio*n.y,a=this.camera.isOrthographicCamera?1/this.devicePixelRatio:1,e=this.focalAdjustment*a,u=1/e;this.adjustForWebXRStereo(n),this.splatMesh.updateUniforms(n,r*e,s*e,this.camera.isOrthographicCamera,this.camera.zoom||1,u)}}})());xe(this,"addSplatBuffers",(function(){return function(n,t=[],r=!0,s=!0,a=!0,e=!1,u=!1,p=!0){if(this.isDisposingOrDisposed())return Promise.resolve();let y=null;const C=()=>{y!==null&&(this.loadingSpinner.removeTask(y),y=null)};return this.splatRenderReady=!1,new Promise(b=>{s&&(y=this.loadingSpinner.addTask("Processing splats...")),delayedExecute(()=>{if(this.isDisposingOrDisposed())b();else{const x=this.addSplatBuffersToMesh(n,t,r,a,e,p),w=this.splatMesh.getMaxSplatCount();this.sortWorker&&this.sortWorker.maxSplatCount!==w&&this.disposeSortWorker(),this.gpuAcceleratedSort||this.preSortMessages.push({centers:x.centers.buffer,sceneIndexes:x.sceneIndexes.buffer,range:{from:x.from,to:x.to,count:x.count}}),(!this.sortWorker&&w>0?this.setupSortWorker(this.splatMesh):Promise.resolve()).then(()=>{this.isDisposingOrDisposed()||this.runSplatSort(!0,!0).then(I=>{!this.sortWorker||!I?(this.splatRenderReady=!0,C(),b()):(u?this.splatRenderReady=!0:this.runAfterNextSort.push(()=>{this.splatRenderReady=!0}),this.runAfterNextSort.push(()=>{C(),b()}))})})}},!0)})}})());xe(this,"addSplatBuffersToMesh",(function(){let n;return function(t,r,s=!0,a=!1,e=!1,u=!0){if(this.isDisposingOrDisposed())return;let p=[],y=[];e||(p=this.splatMesh.scenes.map(w=>w.splatBuffer)||[],y=this.splatMesh.sceneOptions?this.splatMesh.sceneOptions.map(w=>w):[]),p.push(...t),y.push(...r),this.renderer&&this.splatMesh.setRenderer(this.renderer);const C=w=>{if(this.isDisposingOrDisposed())return;const E=this.splatMesh.getSplatCount();a&&E>=MIN_SPLAT_COUNT_TO_SHOW_SPLAT_TREE_LOADING_SPINNER&&!w&&!n&&(this.loadingSpinner.setMinimized(!0,!0),n=this.loadingSpinner.addTask("Optimizing data structures..."))},b=w=>{this.isDisposingOrDisposed()||w&&n&&(this.loadingSpinner.removeTask(n),n=null)},x=this.splatMesh.build(p,y,!0,s,C,b,u);return s&&this.freeIntermediateSplatData&&this.splatMesh.freeIntermediateSplatData(),x}})());xe(this,"shouldRender",(function(){let n=0;const t=new Vector3$1,r=new Quaternion$1,s=1e-4;return function(){if(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())return!1;let a=!1,e=!1;if(this.camera){const u=this.camera.position,p=this.camera.quaternion;e=Math.abs(u.x-t.x)>s||Math.abs(u.y-t.y)>s||Math.abs(u.z-t.z)>s||Math.abs(p.x-r.x)>s||Math.abs(p.y-r.y)>s||Math.abs(p.z-r.z)>s||Math.abs(p.w-r.w)>s}return a=this.renderMode!==RenderMode.Never&&(n===0||this.splatMesh.visibleRegionChanging||e||this.renderMode===RenderMode.Always||this.dynamicMode===!0||this.renderNextFrame),this.camera&&(t.copy(this.camera.position),r.copy(this.camera.quaternion)),n++,a}})());xe(this,"render",(function(){return function(){if(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())return;const n=r=>{for(let s of r.children)if(s.visible)return!0;return!1},t=this.renderer.autoClear;n(this.threeScene)&&(this.renderer.render(this.threeScene,this.camera),this.renderer.autoClear=!1),this.renderer.render(this.splatMesh,this.camera),this.renderer.autoClear=!1,this.sceneHelper.getFocusMarkerOpacity()>0&&this.renderer.render(this.sceneHelper.focusMarker,this.camera),this.showControlPlane&&this.renderer.render(this.sceneHelper.controlPlane,this.camera),this.renderer.autoClear=t}})());xe(this,"updateFPS",(function(){let n=getCurrentTime(),t=0;return function(){if(this.consecutiveRenderFrames>CONSECUTIVE_RENDERED_FRAMES_FOR_FPS_CALCULATION){const r=getCurrentTime();r-n>=1?(this.currentFPS=t,t=0,n=r):t++}else this.currentFPS=null}})());xe(this,"updateForRendererSizeChanges",(function(){const n=new Vector2,t=new Vector2;let r;return function(){this.usingExternalCamera||(this.renderer.getSize(t),(r===void 0||r!==this.camera.isOrthographicCamera||t.x!==n.x||t.y!==n.y)&&(this.camera.isOrthographicCamera?(this.camera.left=-t.x/2,this.camera.right=t.x/2,this.camera.top=t.y/2,this.camera.bottom=-t.y/2):this.camera.aspect=t.x/t.y,this.camera.updateProjectionMatrix(),n.copy(t),r=this.camera.isOrthographicCamera))}})());xe(this,"timingSensitiveUpdates",(function(){let n;return function(){const t=getCurrentTime();n||(n=t);const r=t-n;this.updateCameraTransition(t),this.updateFocusMarker(r),n=t}})());xe(this,"updateCameraTransition",(function(){let n=new Vector3$1,t=new Vector3$1,r=new Vector3$1;return function(s){if(this.transitioningCameraTarget){t.copy(this.previousCameraTarget).sub(this.camera.position).normalize(),r.copy(this.nextCameraTarget).sub(this.camera.position).normalize();const a=Math.acos(t.dot(r)),u=(a/(Math.PI/3)*.65+.3)/a*(s-this.transitioningCameraTargetStartTime);n.copy(this.previousCameraTarget).lerp(this.nextCameraTarget,u),this.camera.lookAt(n),this.controls.target.copy(n),u>=1&&(this.transitioningCameraTarget=!1)}}})());xe(this,"updateFocusMarker",(function(){const n=new Vector2;let t=!1;return function(r){if(this.getRenderDimensions(n),this.transitioningCameraTarget){this.sceneHelper.setFocusMarkerVisibility(!0);const s=Math.max(this.sceneHelper.getFocusMarkerOpacity(),0);let a=Math.min(s+FOCUS_MARKER_FADE_IN_SPEED*r,1);this.sceneHelper.setFocusMarkerOpacity(a),this.sceneHelper.updateFocusMarker(this.nextCameraTarget,this.camera,n),t=!0,this.forceRenderNextFrame()}else{let s;if(t?s=1:s=Math.min(this.sceneHelper.getFocusMarkerOpacity(),1),s>0){this.sceneHelper.updateFocusMarker(this.nextCameraTarget,this.camera,n);let a=Math.max(s-FOCUS_MARKER_FADE_OUT_SPEED*r,0);this.sceneHelper.setFocusMarkerOpacity(a),a===0&&this.sceneHelper.setFocusMarkerVisibility(!1)}s>0&&this.forceRenderNextFrame(),t=!1}}})());xe(this,"updateMeshCursor",(function(){const n=[],t=new Vector2;return function(){this.showMeshCursor?(this.forceRenderNextFrame(),this.getRenderDimensions(t),n.length=0,this.raycaster.setFromCameraAndScreenPosition(this.camera,this.mousePosition,t),this.raycaster.intersectSplatMesh(this.splatMesh,n),n.length>0?(this.sceneHelper.setMeshCursorVisibility(!0),this.sceneHelper.positionAndOrientMeshCursor(n[0].origin,this.camera)):this.sceneHelper.setMeshCursorVisibility(!1)):(this.sceneHelper.getMeschCursorVisibility()&&this.forceRenderNextFrame(),this.sceneHelper.setMeshCursorVisibility(!1))}})());xe(this,"updateInfoPanel",(function(){const n=new Vector2;return function(){if(!this.showInfo)return;const t=this.splatMesh.getSplatCount();this.getRenderDimensions(n);const r=this.controls?this.controls.target:null,s=this.showMeshCursor?this.sceneHelper.meshCursor.position:null,a=t>0?this.splatRenderCount/t*100:0;this.infoPanel.update(n,this.camera.position,r,this.camera.up,this.camera.isOrthographicCamera,s,this.currentFPS||"N/A",t,this.splatRenderCount,a,this.lastSortTime,this.focalAdjustment,this.splatMesh.getSplatScale(),this.splatMesh.getPointCloudModeEnabled())}})());xe(this,"runSplatSort",(function(){const n=new Matrix4,t=[],r=new Vector3$1(0,0,-1),s=new Vector3$1(0,0,-1),a=new Vector3$1,e=new Vector3$1,u=[],p=[{angleThreshold:.55,sortFractions:[.125,.33333,.75]},{angleThreshold:.65,sortFractions:[.33333,.66667]},{angleThreshold:.8,sortFractions:[.5]}];return function(y=!1,C=!1){if(!this.initialized)return Promise.resolve(!1);if(this.sortRunning)return Promise.resolve(!0);if(this.splatMesh.getSplatCount()<=0)return this.splatRenderCount=0,Promise.resolve(!1);let b=0,x=0,w=!1,E=!1;if(s.set(0,0,-1).applyQuaternion(this.camera.quaternion),b=s.dot(r),x=e.copy(this.camera.position).sub(a).length(),!y&&!this.splatMesh.dynamicMode&&u.length===0&&(b<=.99&&(w=!0),x>=1&&(E=!0),!w&&!E))return Promise.resolve(!1);this.sortRunning=!0;let{splatRenderCount:I,shouldSortAll:R}=this.gatherSceneNodesForSort();R=R||C,this.splatRenderCount=I,n.copy(this.camera.matrixWorld).invert();const M=this.perspectiveCamera||this.camera;n.premultiply(M.projectionMatrix),this.splatMesh.dynamicMode||n.multiply(this.splatMesh.matrixWorld);let T=Promise.resolve(!0);return this.gpuAcceleratedSort&&(u.length<=1||u.length%2===0)&&(T=this.splatMesh.computeDistancesOnGPU(n,this.sortWorkerPrecomputedDistances)),T.then(()=>{if(u.length===0)if(this.splatMesh.dynamicMode||R)u.push(this.splatRenderCount);else{for(let k of p)if(b<k.angleThreshold){for(let F of k.sortFractions)u.push(Math.floor(this.splatRenderCount*F));break}u.push(this.splatRenderCount)}let L=Math.min(u.shift(),this.splatRenderCount);this.splatSortCount=L,t[0]=this.camera.position.x,t[1]=this.camera.position.y,t[2]=this.camera.position.z;const V={modelViewProj:n.elements,cameraPosition:t,splatRenderCount:this.splatRenderCount,splatSortCount:L,usePrecomputedDistances:this.gpuAcceleratedSort};return this.splatMesh.dynamicMode&&this.splatMesh.fillTransformsArray(this.sortWorkerTransforms),this.sharedMemoryForWorkers||(V.indexesToSort=this.sortWorkerIndexesToSort,V.transforms=this.sortWorkerTransforms,this.gpuAcceleratedSort&&(V.precomputedDistances=this.sortWorkerPrecomputedDistances)),this.sortPromise=new Promise(k=>{this.sortPromiseResolver=k}),this.preSortMessages.length>0&&(this.preSortMessages.forEach(k=>{this.sortWorker.postMessage(k)}),this.preSortMessages=[]),this.sortWorker.postMessage({sort:V}),u.length===0&&(a.copy(this.camera.position),r.copy(s)),!0}),T}})());xe(this,"gatherSceneNodesForSort",(function(){const n=[];let t=null;const r=new Vector3$1,s=new Vector3$1,a=new Vector3$1,e=new Matrix4,u=new Matrix4,p=new Matrix4,y=new Vector3$1,C=new Vector3$1(0,0,-1),b=new Vector3$1,x=w=>b.copy(w.max).sub(w.min).length();return function(w=!1){this.getRenderDimensions(y);const E=y.y/2/Math.tan(this.camera.fov/2*MathUtils.DEG2RAD),I=Math.atan(y.x/2/E),R=Math.atan(y.y/2/E),M=Math.cos(I),T=Math.cos(R),L=this.splatMesh.getSplatTree();if(L){u.copy(this.camera.matrixWorld).invert(),this.splatMesh.dynamicMode||u.multiply(this.splatMesh.matrixWorld);let V=0,k=0;for(let P=0;P<L.subTrees.length;P++){const U=L.subTrees[P];e.copy(u),this.splatMesh.dynamicMode&&(this.splatMesh.getSceneTransform(P,p),e.multiply(p));const G=U.nodesWithIndexes.length;for(let Q=0;Q<G;Q++){const ee=U.nodesWithIndexes[Q];if(!ee.data||!ee.data.indexes||ee.data.indexes.length===0)continue;a.copy(ee.center).applyMatrix4(e);const de=a.length();a.normalize(),r.copy(a).setX(0).normalize(),s.copy(a).setY(0).normalize();const ne=C.dot(s),ae=C.dot(r),fe=x(ee),Ae=ae<T-.6,q=ne<M-.6;!w&&(q||Ae)&&de>fe||(k+=ee.data.indexes.length,n[V]=ee,ee.data.distanceToNode=de,V++)}}n.length=V,n.sort((P,U)=>P.data.distanceToNode<U.data.distanceToNode?-1:1);let F=k*Constants.BytesPerInt;for(let P=0;P<V;P++){const U=n[P],G=U.data.indexes.length,Q=G*Constants.BytesPerInt;new Uint32Array(this.sortWorkerIndexesToSort.buffer,F-Q,G).set(U.data.indexes),F-=Q}return{splatRenderCount:k,shouldSortAll:!1}}else{const V=this.splatMesh.getSplatCount();if(!t||t.length!==V){t=new Uint32Array(V);for(let k=0;k<V;k++)t[k]=k}return this.sortWorkerIndexesToSort.set(t),{splatRenderCount:V,shouldSortAll:!0}}}})());if(n.cameraUp||(n.cameraUp=[0,1,0]),this.cameraUp=new Vector3$1().fromArray(n.cameraUp),n.initialCameraPosition||(n.initialCameraPosition=[0,10,15]),this.initialCameraPosition=new Vector3$1().fromArray(n.initialCameraPosition),n.initialCameraLookAt||(n.initialCameraLookAt=[0,0,0]),this.initialCameraLookAt=new Vector3$1().fromArray(n.initialCameraLookAt),this.dropInMode=n.dropInMode||!1,(n.selfDrivenMode===void 0||n.selfDrivenMode===null)&&(n.selfDrivenMode=!0),this.selfDrivenMode=n.selfDrivenMode&&!this.dropInMode,this.selfDrivenUpdateFunc=this.selfDrivenUpdate.bind(this),n.useBuiltInControls===void 0&&(n.useBuiltInControls=!0),this.useBuiltInControls=n.useBuiltInControls,this.rootElement=n.rootElement,this.ignoreDevicePixelRatio=n.ignoreDevicePixelRatio||!1,this.devicePixelRatio=this.ignoreDevicePixelRatio?1:window.devicePixelRatio||1,this.halfPrecisionCovariancesOnGPU=n.halfPrecisionCovariancesOnGPU||!1,this.threeScene=n.threeScene,this.renderer=n.renderer,this.camera=n.camera,this.gpuAcceleratedSort=n.gpuAcceleratedSort||!1,(n.integerBasedSort===void 0||n.integerBasedSort===null)&&(n.integerBasedSort=!0),this.integerBasedSort=n.integerBasedSort,(n.sharedMemoryForWorkers===void 0||n.sharedMemoryForWorkers===null)&&(n.sharedMemoryForWorkers=!0),this.sharedMemoryForWorkers=n.sharedMemoryForWorkers,this.dynamicScene=!!n.dynamicScene,this.antialiased=n.antialiased||!1,this.kernel2DSize=n.kernel2DSize===void 0?.3:n.kernel2DSize,this.webXRMode=n.webXRMode||WebXRMode.None,this.webXRMode!==WebXRMode.None&&(this.gpuAcceleratedSort=!1),this.webXRActive=!1,this.webXRSessionInit=n.webXRSessionInit||{},this.renderMode=n.renderMode||RenderMode.Always,this.sceneRevealMode=n.sceneRevealMode||SceneRevealMode.Default,this.focalAdjustment=n.focalAdjustment||1,this.maxScreenSpaceSplatSize=n.maxScreenSpaceSplatSize||1024,this.logLevel=n.logLevel||LogLevel.None,this.sphericalHarmonicsDegree=n.sphericalHarmonicsDegree||0,this.enableOptionalEffects=n.enableOptionalEffects||!1,(n.enableSIMDInSort===void 0||n.enableSIMDInSort===null)&&(n.enableSIMDInSort=!0),this.enableSIMDInSort=n.enableSIMDInSort,(n.inMemoryCompressionLevel===void 0||n.inMemoryCompressionLevel===null)&&(n.inMemoryCompressionLevel=0),this.inMemoryCompressionLevel=n.inMemoryCompressionLevel,(n.optimizeSplatData===void 0||n.optimizeSplatData===null)&&(n.optimizeSplatData=!0),this.optimizeSplatData=n.optimizeSplatData,(n.freeIntermediateSplatData===void 0||n.freeIntermediateSplatData===null)&&(n.freeIntermediateSplatData=!1),this.freeIntermediateSplatData=n.freeIntermediateSplatData,isIOS()){const r=getIOSSemever();r.major<17&&(this.enableSIMDInSort=!1),r.major<16&&(this.sharedMemoryForWorkers=!1)}(n.splatRenderMode===void 0||n.splatRenderMode===null)&&(n.splatRenderMode=SplatRenderMode.ThreeD),this.splatRenderMode=n.splatRenderMode,this.sceneFadeInRateMultiplier=n.sceneFadeInRateMultiplier||1,this.splatSortDistanceMapPrecision=n.splatSortDistanceMapPrecision||Constants.DefaultSplatSortDistanceMapPrecision;const t=this.integerBasedSort?20:24;this.splatSortDistanceMapPrecision=clamp(this.splatSortDistanceMapPrecision,10,t),this.onSplatMeshChangedCallback=null,this.createSplatMesh(),this.controls=null,this.perspectiveControls=null,this.orthographicControls=null,this.orthographicCamera=null,this.perspectiveCamera=null,this.showMeshCursor=!1,this.showControlPlane=!1,this.showInfo=!1,this.sceneHelper=null,this.sortWorker=null,this.sortRunning=!1,this.splatRenderCount=0,this.splatSortCount=0,this.lastSplatSortCount=0,this.sortWorkerIndexesToSort=null,this.sortWorkerSortedIndexes=null,this.sortWorkerPrecomputedDistances=null,this.sortWorkerTransforms=null,this.preSortMessages=[],this.runAfterNextSort=[],this.selfDrivenModeRunning=!1,this.splatRenderReady=!1,this.raycaster=new Raycaster,this.infoPanel=null,this.startInOrthographicMode=!1,this.currentFPS=0,this.lastSortTime=0,this.consecutiveRenderFrames=0,this.previousCameraTarget=new Vector3$1,this.nextCameraTarget=new Vector3$1,this.mousePosition=new Vector2,this.mouseDownPosition=new Vector2,this.mouseDownTime=null,this.resizeObserver=null,this.mouseMoveListener=null,this.mouseDownListener=null,this.mouseUpListener=null,this.keyDownListener=null,this.sortPromise=null,this.sortPromiseResolver=null,this.splatSceneDownloadPromises={},this.splatSceneDownloadAndBuildPromise=null,this.splatSceneRemovalPromise=null,this.loadingSpinner=new LoadingSpinner(null,this.rootElement||document.body),this.loadingSpinner.hide(),this.loadingProgressBar=new LoadingProgressBar(this.rootElement||document.body),this.loadingProgressBar.hide(),this.infoPanel=new InfoPanel(this.rootElement||document.body),this.infoPanel.hide(),this.usingExternalCamera=!!(this.dropInMode||this.camera),this.usingExternalRenderer=!!(this.dropInMode||this.renderer),this.initialized=!1,this.disposing=!1,this.disposed=!1,this.disposePromise=null,this.dropInMode||this.init()}createSplatMesh(){this.splatMesh=new SplatMesh(this.splatRenderMode,this.dynamicScene,this.enableOptionalEffects,this.halfPrecisionCovariancesOnGPU,this.devicePixelRatio,this.gpuAcceleratedSort,this.integerBasedSort,this.antialiased,this.maxScreenSpaceSplatSize,this.logLevel,this.sphericalHarmonicsDegree,this.sceneFadeInRateMultiplier,this.kernel2DSize),this.splatMesh.frustumCulled=!1,this.onSplatMeshChangedCallback&&this.onSplatMeshChangedCallback()}init(){this.initialized||(this.rootElement||(this.usingExternalRenderer?this.rootElement=this.renderer.domElement||document.body:(this.rootElement=document.createElement("div"),this.rootElement.style.width="100%",this.rootElement.style.height="100%",this.rootElement.style.position="absolute",document.body.appendChild(this.rootElement))),this.setupCamera(),this.setupRenderer(),this.setupWebXR(this.webXRSessionInit),this.setupControls(),this.setupEventHandlers(),this.threeScene=this.threeScene||new Scene,this.sceneHelper=new SceneHelper(this.threeScene),this.sceneHelper.setupMeshCursor(),this.sceneHelper.setupFocusMarker(),this.sceneHelper.setupControlPlane(),this.loadingProgressBar.setContainer(this.rootElement),this.loadingSpinner.setContainer(this.rootElement),this.infoPanel.setContainer(this.rootElement),this.initialized=!0)}setupCamera(){if(!this.usingExternalCamera){const n=new Vector2;this.getRenderDimensions(n),this.perspectiveCamera=new PerspectiveCamera(THREE_CAMERA_FOV,n.x/n.y,.1,1e3),this.orthographicCamera=new OrthographicCamera(n.x/-2,n.x/2,n.y/2,n.y/-2,.1,1e3),this.camera=this.startInOrthographicMode?this.orthographicCamera:this.perspectiveCamera,this.camera.position.copy(this.initialCameraPosition),this.camera.up.copy(this.cameraUp).normalize(),this.camera.lookAt(this.initialCameraLookAt)}}setupRenderer(){if(!this.usingExternalRenderer){const n=new Vector2;this.getRenderDimensions(n),this.renderer=new WebGLRenderer({antialias:!1,precision:"highp"}),this.renderer.setPixelRatio(this.devicePixelRatio),this.renderer.autoClear=!0,this.renderer.setClearColor(new Color(0),0),this.renderer.setSize(n.x,n.y),this.resizeObserver=new ResizeObserver(()=>{this.getRenderDimensions(n),this.renderer.setSize(n.x,n.y),this.forceRenderNextFrame()}),this.resizeObserver.observe(this.rootElement),this.rootElement.appendChild(this.renderer.domElement)}}setupWebXR(n){this.webXRMode&&(this.webXRMode===WebXRMode.VR?this.rootElement.appendChild(VRButton.createButton(this.renderer,n)):this.webXRMode===WebXRMode.AR&&this.rootElement.appendChild(ARButton.createButton(this.renderer,n)),this.renderer.xr.addEventListener("sessionstart",t=>{this.webXRActive=!0}),this.renderer.xr.addEventListener("sessionend",t=>{this.webXRActive=!1}),this.renderer.xr.enabled=!0,this.camera.position.copy(this.initialCameraPosition),this.camera.up.copy(this.cameraUp).normalize(),this.camera.lookAt(this.initialCameraLookAt))}setupControls(){if(this.useBuiltInControls&&this.webXRMode===WebXRMode.None){this.usingExternalCamera?this.camera.isOrthographicCamera?this.orthographicControls=new OrbitControls(this.camera,this.renderer.domElement):this.perspectiveControls=new OrbitControls(this.camera,this.renderer.domElement):(this.perspectiveControls=new OrbitControls(this.perspectiveCamera,this.renderer.domElement),this.orthographicControls=new OrbitControls(this.orthographicCamera,this.renderer.domElement));for(let n of[this.orthographicControls,this.perspectiveControls])n&&(n.listenToKeyEvents(window),n.rotateSpeed=.5,n.maxPolarAngle=Math.PI*.75,n.minPolarAngle=.1,n.enableDamping=!0,n.dampingFactor=.05,n.target.copy(this.initialCameraLookAt),n.update());this.controls=this.camera.isOrthographicCamera?this.orthographicControls:this.perspectiveControls,this.controls.update()}}setupEventHandlers(){this.useBuiltInControls&&this.webXRMode===WebXRMode.None&&(this.mouseMoveListener=this.onMouseMove.bind(this),this.renderer.domElement.addEventListener("pointermove",this.mouseMoveListener,!1),this.mouseDownListener=this.onMouseDown.bind(this),this.renderer.domElement.addEventListener("pointerdown",this.mouseDownListener,!1),this.mouseUpListener=this.onMouseUp.bind(this),this.renderer.domElement.addEventListener("pointerup",this.mouseUpListener,!1),this.keyDownListener=this.onKeyDown.bind(this),window.addEventListener("keydown",this.keyDownListener,!1))}removeEventHandlers(){this.useBuiltInControls&&(this.renderer.domElement.removeEventListener("pointermove",this.mouseMoveListener),this.mouseMoveListener=null,this.renderer.domElement.removeEventListener("pointerdown",this.mouseDownListener),this.mouseDownListener=null,this.renderer.domElement.removeEventListener("pointerup",this.mouseUpListener),this.mouseUpListener=null,window.removeEventListener("keydown",this.keyDownListener),this.keyDownListener=null)}setRenderMode(n){this.renderMode=n}setActiveSphericalHarmonicsDegrees(n){this.splatMesh.material.uniforms.sphericalHarmonicsDegree.value=n,this.splatMesh.material.uniformsNeedUpdate=!0}onSplatMeshChanged(n){this.onSplatMeshChangedCallback=n}onMouseMove(n){this.mousePosition.set(n.offsetX,n.offsetY)}onMouseDown(){this.mouseDownPosition.copy(this.mousePosition),this.mouseDownTime=getCurrentTime()}onMouseClick(n){this.mousePosition.set(n.offsetX,n.offsetY),this.checkForFocalPointChange()}getRenderDimensions(n){this.rootElement?(n.x=this.rootElement.offsetWidth,n.y=this.rootElement.offsetHeight):this.renderer.getSize(n)}setOrthographicMode(n){if(n===this.camera.isOrthographicCamera)return;const t=this.camera,r=n?this.orthographicCamera:this.perspectiveCamera;if(r.position.copy(t.position),r.up.copy(t.up),r.rotation.copy(t.rotation),r.quaternion.copy(t.quaternion),r.matrix.copy(t.matrix),this.camera=r,this.controls){const s=u=>{u.saveState(),u.reset()},a=this.controls,e=n?this.orthographicControls:this.perspectiveControls;s(e),s(a),e.target.copy(a.target),n?Bn.setCameraZoomFromPosition(r,t,a):Bn.setCameraPositionFromZoom(r,t,e),this.controls=e,this.camera.lookAt(this.controls.target)}}adjustForWebXRStereo(n){if(this.camera&&this.webXRActive){const r=this.renderer.xr.getCamera().projectionMatrix.elements[0],s=this.camera.projectionMatrix.elements[0];n.x*=s/r}}isLoadingOrUnloading(){return Object.keys(this.splatSceneDownloadPromises).length>0||this.splatSceneDownloadAndBuildPromise!==null||this.splatSceneRemovalPromise!==null}isDisposingOrDisposed(){return this.disposing||this.disposed}addSplatSceneDownloadPromise(n){this.splatSceneDownloadPromises[n.id]=n}removeSplatSceneDownloadPromise(n){delete this.splatSceneDownloadPromises[n.id]}setSplatSceneDownloadAndBuildPromise(n){this.splatSceneDownloadAndBuildPromise=n}clearSplatSceneDownloadAndBuildPromise(){this.splatSceneDownloadAndBuildPromise=null}addSplatScene(n,t={}){if(this.isLoadingOrUnloading())throw new Error("Cannot add splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot add splat scene after dispose() is called.");t.progressiveLoad&&this.splatMesh.scenes&&this.splatMesh.scenes.length>0&&(console.log('addSplatScene(): "progressiveLoad" option ignore because there are multiple splat scenes'),t.progressiveLoad=!1);const r=t.format!==void 0&&t.format!==null?t.format:sceneFormatFromPath(n),s=Bn.isProgressivelyLoadable(r)&&t.progressiveLoad,a=t.showLoadingUI!==void 0&&t.showLoadingUI!==null?t.showLoadingUI:!0;let e=null;a&&(this.loadingSpinner.removeAllTasks(),e=this.loadingSpinner.addTask("Downloading..."));const u=()=>{this.loadingProgressBar.hide(),this.loadingSpinner.removeAllTasks()},p=(I,R,M)=>{if(a)if(M===LoaderStatus.Downloading)if(I==100)this.loadingSpinner.setMessageForTask(e,"Download complete!");else if(s)this.loadingSpinner.setMessageForTask(e,"Downloading splats...");else{const T=R?`: ${R}`:"...";this.loadingSpinner.setMessageForTask(e,`Downloading${T}`)}else M===LoaderStatus.Processing&&this.loadingSpinner.setMessageForTask(e,"Processing splats...")};let y=!1,C=0;const b=(I,R)=>{a&&((I&&s||R&&!s)&&(this.loadingSpinner.removeTask(e),!R&&!y&&this.loadingProgressBar.show()),s&&(R?(y=!0,this.loadingProgressBar.hide()):this.loadingProgressBar.setProgress(C)))},x=(I,R,M)=>{C=I,p(I,R,M),t.onProgress&&t.onProgress(I,R,M)},w=(I,R,M)=>{!s&&t.onProgress&&t.onProgress(0,"0%",LoaderStatus.Processing);const T={rotation:t.rotation||t.orientation,position:t.position,scale:t.scale,splatAlphaRemovalThreshold:t.splatAlphaRemovalThreshold};return this.addSplatBuffers([I],[T],M,R&&a,a,s,s).then(()=>{!s&&t.onProgress&&t.onProgress(100,"100%",LoaderStatus.Processing),b(R,M)})};return(s?this.downloadAndBuildSingleSplatSceneProgressiveLoad.bind(this):this.downloadAndBuildSingleSplatSceneStandardLoad.bind(this))(n,r,t.splatAlphaRemovalThreshold,w.bind(this),x,u.bind(this),t.headers)}downloadAndBuildSingleSplatSceneStandardLoad(n,t,r,s,a,e,u){const p=this.downloadSplatSceneToSplatBuffer(n,r,a,!1,void 0,t,u),y=abortablePromiseWithExtractedComponents(p.abortHandler);return p.then(C=>(this.removeSplatSceneDownloadPromise(p),s(C,!0,!0).then(()=>{y.resolve(),this.clearSplatSceneDownloadAndBuildPromise()}))).catch(C=>{e&&e(),this.clearSplatSceneDownloadAndBuildPromise(),this.removeSplatSceneDownloadPromise(p),y.reject(this.updateError(C,`Viewer::addSplatScene -> Could not load file ${n}`))}),this.addSplatSceneDownloadPromise(p),this.setSplatSceneDownloadAndBuildPromise(y.promise),y.promise}downloadAndBuildSingleSplatSceneProgressiveLoad(n,t,r,s,a,e,u){let p=0,y=!1;const C=[],b=()=>{if(C.length>0&&!y&&!this.isDisposingOrDisposed()){y=!0;const R=C.shift();s(R.splatBuffer,R.firstBuild,R.finalBuild).then(()=>{y=!1,R.firstBuild?E.resolve():R.finalBuild&&(I.resolve(),this.clearSplatSceneDownloadAndBuildPromise()),C.length>0&&delayedExecute(()=>b())})}},x=(R,M)=>{this.isDisposingOrDisposed()||(M||C.length===0||R.getSplatCount()>C[0].splatBuffer.getSplatCount())&&(C.push({splatBuffer:R,firstBuild:p===0,finalBuild:M}),p++,b())},w=this.downloadSplatSceneToSplatBuffer(n,r,a,!0,x,t,u),E=abortablePromiseWithExtractedComponents(w.abortHandler),I=abortablePromiseWithExtractedComponents();return this.addSplatSceneDownloadPromise(w),this.setSplatSceneDownloadAndBuildPromise(I.promise),w.then(()=>{this.removeSplatSceneDownloadPromise(w)}).catch(R=>{this.clearSplatSceneDownloadAndBuildPromise(),this.removeSplatSceneDownloadPromise(w);const M=this.updateError(R,"Viewer::addSplatScene -> Could not load one or more scenes");E.reject(M),e&&e(M)}),E.promise}addSplatScenes(n,t=!0,r=void 0){if(this.isLoadingOrUnloading())throw new Error("Cannot add splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot add splat scene after dispose() is called.");const s=n.length,a=[];let e;t&&(this.loadingSpinner.removeAllTasks(),e=this.loadingSpinner.addTask("Downloading..."));const u=(b,x,w,E)=>{a[b]=x;let I=0;for(let R=0;R<s;R++)I+=a[R]||0;I=I/s,w=`${I.toFixed(2)}%`,t&&E===LoaderStatus.Downloading&&this.loadingSpinner.setMessageForTask(e,I==100?"Download complete!":`Downloading: ${w}`),r&&r(I,w,E)},p=[],y=[];for(let b=0;b<n.length;b++){const x=n[b],w=x.format!==void 0&&x.format!==null?x.format:sceneFormatFromPath(x.path),E=this.downloadSplatSceneToSplatBuffer(x.path,x.splatAlphaRemovalThreshold,u.bind(this,b),!1,void 0,w,x.headers);p.push(E),y.push(E.promise)}const C=new AbortablePromise((b,x)=>{Promise.all(y).then(w=>{t&&this.loadingSpinner.removeTask(e),r&&r(0,"0%",LoaderStatus.Processing),this.addSplatBuffers(w,n,!0,t,t,!1,!1).then(()=>{r&&r(100,"100%",LoaderStatus.Processing),this.clearSplatSceneDownloadAndBuildPromise(),b()})}).catch(w=>{t&&this.loadingSpinner.removeTask(e),this.clearSplatSceneDownloadAndBuildPromise(),x(this.updateError(w,"Viewer::addSplatScenes -> Could not load one or more splat scenes."))}).finally(()=>{this.removeSplatSceneDownloadPromise(C)})},b=>{for(let x of p)x.abort(b)});return this.addSplatSceneDownloadPromise(C),this.setSplatSceneDownloadAndBuildPromise(C),C}downloadSplatSceneToSplatBuffer(n,t=1,r=void 0,s=!1,a=void 0,e,u){try{if(e===SceneFormat.Splat||e===SceneFormat.KSplat||e===SceneFormat.Ply){const p=s?!1:this.optimizeSplatData;if(e===SceneFormat.Splat)return SplatLoader.loadFromURL(n,r,s,a,t,this.inMemoryCompressionLevel,p,u);if(e===SceneFormat.KSplat)return KSplatLoader.loadFromURL(n,r,s,a,u);if(e===SceneFormat.Ply)return PlyLoader.loadFromURL(n,r,s,a,t,this.inMemoryCompressionLevel,p,this.sphericalHarmonicsDegree,u)}else if(e===SceneFormat.Spz)return SpzLoader.loadFromURL(n,r,t,this.inMemoryCompressionLevel,this.optimizeSplatData,this.sphericalHarmonicsDegree,u)}catch(p){throw this.updateError(p,null)}throw new Error(`Viewer::downloadSplatSceneToSplatBuffer -> File format not supported: ${n}`)}static isProgressivelyLoadable(n){return n===SceneFormat.Splat||n===SceneFormat.KSplat||n===SceneFormat.Ply}setupSortWorker(n){if(!this.isDisposingOrDisposed())return new Promise(t=>{const r=this.integerBasedSort?Int32Array:Float32Array,s=n.getSplatCount(),a=n.getMaxSplatCount();this.sortWorker=createSortWorker(a,this.sharedMemoryForWorkers,this.enableSIMDInSort,this.integerBasedSort,this.splatMesh.dynamicMode,this.splatSortDistanceMapPrecision),this.sortWorker.onmessage=e=>{if(e.data.sortDone){if(this.sortRunning=!1,this.sharedMemoryForWorkers)this.splatMesh.updateRenderIndexes(this.sortWorkerSortedIndexes,e.data.splatRenderCount);else{const u=new Uint32Array(e.data.sortedIndexes.buffer,0,e.data.splatRenderCount);this.splatMesh.updateRenderIndexes(u,e.data.splatRenderCount)}this.lastSplatSortCount=this.splatSortCount,this.lastSortTime=e.data.sortTime,this.sortPromiseResolver(),this.sortPromiseResolver=null,this.forceRenderNextFrame(),this.runAfterNextSort.length>0&&(this.runAfterNextSort.forEach(u=>{u()}),this.runAfterNextSort.length=0)}else if(e.data.sortCanceled)this.sortRunning=!1;else if(e.data.sortSetupPhase1Complete){this.logLevel>=LogLevel.Info&&console.log("Sorting web worker WASM setup complete."),this.sharedMemoryForWorkers?(this.sortWorkerSortedIndexes=new Uint32Array(e.data.sortedIndexesBuffer,e.data.sortedIndexesOffset,a),this.sortWorkerIndexesToSort=new Uint32Array(e.data.indexesToSortBuffer,e.data.indexesToSortOffset,a),this.sortWorkerPrecomputedDistances=new r(e.data.precomputedDistancesBuffer,e.data.precomputedDistancesOffset,a),this.sortWorkerTransforms=new Float32Array(e.data.transformsBuffer,e.data.transformsOffset,Constants.MaxScenes*16)):(this.sortWorkerIndexesToSort=new Uint32Array(a),this.sortWorkerPrecomputedDistances=new r(a),this.sortWorkerTransforms=new Float32Array(Constants.MaxScenes*16));for(let u=0;u<s;u++)this.sortWorkerIndexesToSort[u]=u;if(this.sortWorker.maxSplatCount=a,this.logLevel>=LogLevel.Info){console.log("Sorting web worker ready.");const u=this.splatMesh.getSplatDataTextures(),p=u.covariances.size,y=u.centerColors.size;console.log("Covariances texture size: "+p.x+" x "+p.y),console.log("Centers/colors texture size: "+y.x+" x "+y.y)}t()}}})}updateError(n,t){return n instanceof AbortedPromiseError?n:n instanceof DirectLoadError?new Error("File type or server does not support progressive loading."):t?new Error(t):n}disposeSortWorker(){this.sortWorker&&this.sortWorker.terminate(),this.sortWorker=null,this.sortPromise=null,this.sortPromiseResolver&&(this.sortPromiseResolver(),this.sortPromiseResolver=null),this.preSortMessages=[],this.sortRunning=!1}removeSplatScene(n,t=!0){return this.removeSplatScenes([n],t)}removeSplatScenes(n,t=!0){if(this.isLoadingOrUnloading())throw new Error("Cannot remove splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot remove splat scene after dispose() is called.");let r;return this.splatSceneRemovalPromise=new Promise((s,a)=>{let e;t&&(this.loadingSpinner.removeAllTasks(),this.loadingSpinner.show(),e=this.loadingSpinner.addTask("Removing splat scene..."));const u=()=>{t&&(this.loadingSpinner.hide(),this.loadingSpinner.removeTask(e))},p=C=>{u(),this.splatSceneRemovalPromise=null,C?a(C):s()},y=()=>this.isDisposingOrDisposed()?(p(),!0):!1;r=this.sortPromise||Promise.resolve(),r.then(()=>{if(y())return;const C=[],b=[],x=[];for(let w=0;w<this.splatMesh.scenes.length;w++){let E=!1;for(let I of n)if(I===w){E=!0;break}if(!E){const I=this.splatMesh.scenes[w];C.push(I.splatBuffer),b.push(this.splatMesh.sceneOptions[w]),x.push({position:I.position.clone(),quaternion:I.quaternion.clone(),scale:I.scale.clone()})}}this.disposeSortWorker(),this.splatMesh.dispose(),this.sceneRevealMode=SceneRevealMode.Instant,this.createSplatMesh(),this.addSplatBuffers(C,b,!0,!1,!0).then(()=>{y()||(u(),this.splatMesh.scenes.forEach((w,E)=>{w.position.copy(x[E].position),w.quaternion.copy(x[E].quaternion),w.scale.copy(x[E].scale)}),this.splatMesh.updateTransforms(),this.splatRenderReady=!1,this.runSplatSort(!0).then(()=>{if(y()){this.splatRenderReady=!0;return}r=this.sortPromise||Promise.resolve(),r.then(()=>{this.splatRenderReady=!0,p()})}))}).catch(w=>{p(w)})})}),this.splatSceneRemovalPromise}start(){if(this.selfDrivenMode)this.webXRMode?this.renderer.setAnimationLoop(this.selfDrivenUpdateFunc):this.requestFrameId=requestAnimationFrame(this.selfDrivenUpdateFunc),this.selfDrivenModeRunning=!0;else throw new Error("Cannot start viewer unless it is in self driven mode.")}stop(){this.selfDrivenMode&&this.selfDrivenModeRunning&&(this.webXRMode?this.renderer.setAnimationLoop(null):cancelAnimationFrame(this.requestFrameId),this.selfDrivenModeRunning=!1)}async dispose(){if(this.isDisposingOrDisposed())return this.disposePromise;let n=[],t=[];for(let r in this.splatSceneDownloadPromises)if(this.splatSceneDownloadPromises.hasOwnProperty(r)){const s=this.splatSceneDownloadPromises[r];t.push(s),n.push(s.promise)}return this.sortPromise&&n.push(this.sortPromise),this.disposing=!0,this.disposePromise=Promise.all(n).finally(()=>{this.stop(),this.orthographicControls&&(this.orthographicControls.dispose(),this.orthographicControls=null),this.perspectiveControls&&(this.perspectiveControls.dispose(),this.perspectiveControls=null),this.controls=null,this.splatMesh&&(this.splatMesh.dispose(),this.splatMesh=null),this.sceneHelper&&(this.sceneHelper.dispose(),this.sceneHelper=null),this.resizeObserver&&(this.resizeObserver.unobserve(this.rootElement),this.resizeObserver=null),this.disposeSortWorker(),this.removeEventHandlers(),this.loadingSpinner.removeAllTasks(),this.loadingSpinner.setContainer(null),this.loadingProgressBar.hide(),this.loadingProgressBar.setContainer(null),this.infoPanel.setContainer(null),this.camera=null,this.threeScene=null,this.splatRenderReady=!1,this.initialized=!1,this.renderer&&(this.usingExternalRenderer||(this.rootElement.removeChild(this.renderer.domElement),this.renderer.dispose()),this.renderer=null),this.usingExternalRenderer||document.body.removeChild(this.rootElement),this.sortWorkerSortedIndexes=null,this.sortWorkerIndexesToSort=null,this.sortWorkerPrecomputedDistances=null,this.sortWorkerTransforms=null,this.disposed=!0,this.disposing=!1,this.disposePromise=null}),t.forEach(r=>{r.abort("Scene disposed")}),this.disposePromise}selfDrivenUpdate(){this.selfDrivenMode&&!this.webXRMode&&(this.requestFrameId=requestAnimationFrame(this.selfDrivenUpdateFunc)),this.update(),this.shouldRender()?(this.render(),this.consecutiveRenderFrames++):this.consecutiveRenderFrames=0,this.renderNextFrame=!1}forceRenderNextFrame(){this.renderNextFrame=!0}update(n,t){this.dropInMode&&this.updateForDropInMode(n,t),!(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())&&(this.controls&&(this.controls.update(),this.camera.isOrthographicCamera&&!this.usingExternalCamera&&Bn.setCameraPositionFromZoom(this.camera,this.camera,this.controls)),this.runSplatSort(),this.updateForRendererSizeChanges(),this.updateSplatMesh(),this.updateMeshCursor(),this.updateFPS(),this.timingSensitiveUpdates(),this.updateInfoPanel(),this.updateControlPlane())}updateForDropInMode(n,t){this.renderer=n,this.splatMesh&&this.splatMesh.setRenderer(this.renderer),this.camera=t,this.controls&&(this.controls.object=t),this.init()}updateControlPlane(){this.showControlPlane?(this.sceneHelper.setControlPlaneVisibility(!0),this.sceneHelper.positionAndOrientControlPlane(this.controls.target,this.camera.up)):this.sceneHelper.setControlPlaneVisibility(!1)}getSplatMesh(){return this.splatMesh}getSplatScene(n){return this.splatMesh.getScene(n)}getSceneCount(){return this.splatMesh.getSceneCount()}isMobile(){return navigator.userAgent.includes("Mobi")}};xe(Bn,"setCameraPositionFromZoom",(function(){const n=new Vector3$1;return function(t,r,s){const a=1/(r.zoom*.001);n.copy(s.target).sub(t.position).normalize().multiplyScalar(a).negate(),t.position.copy(s.target).add(n)}})()),xe(Bn,"setCameraZoomFromPosition",(function(){const n=new Vector3$1;return function(t,r,s){const a=n.copy(s.target).sub(r.position).length();t.zoom=1/(a*.001)}})());let Viewer=Bn;function getRotationMatrix(g){if((g==null?void 0:g.length)!==3)return;const[n,t,r]=g,s=new Euler(MathUtils$1.degToRad(n),MathUtils$1.degToRad(t),MathUtils$1.degToRad(r),"XYZ"),a=new Quaternion;return a.setFromEuler(s),[a.x,a.y,a.z,a.w]}function getElementSize(g){return{width:g.clientWidth,height:g.clientHeight}}function isWeixin(){return console.log("isWeixin===",navigator.userAgent),/micromessenger/i.test(navigator.userAgent)}function loadWxJsSdk(){return new Promise((g,n)=>{if(window.wx)return g(window.wx);const t=document.createElement("script");t.type="text/javascript",t.src="./jweixin.js",t.async=!0,t.onload=()=>g(window.wx),t.onerror=r=>n(r),document.head.appendChild(t)})}function degreesToRadians(g){return!Array.isArray(g)||g.length!==3?(console.warn("degreesToRadians: å‚æ•°å¿…é¡»æ˜¯åŒ…å«3ä¸ªå…ƒç´ çš„æ•°ç»„"),[0,0,0]):g.map(n=>MathUtils$1.degToRad(n))}class GsRenderController{constructor(n){this.viewer=null,this.splatConfigs=[],this.sceneController=n,this.renderer=this.sceneController.getRenderer(),this.camera=this.sceneController.getCamera(),this.scene=this.sceneController.getScene()}async render(n,t,r=void 0){}animate(){}onWindowResize(){}dispose(){}async loadMesh(n){var t,r;console.log("loadMesh",n),n.meshName?await this.loadSceneMesh(n.meshName,n.scale):this.createFloor({size:[1e3,1e3],position:[0,0,0],rotation:[-90,0,8],color:"#ffffff",opacity:1,isCollision:!0,visible:!1}),((t=n.customMesh)==null?void 0:t.length)!==0&&((r=n.customMesh)==null||r.forEach(s=>{this.createFloor(s)}))}loadSceneMesh(n,t){return console.log("addMesh",n,"scale",t),n?new Promise((r,s)=>{const a=this,e=new GLTFLoader;n.startsWith("http")||e.setPath("./models/"),e.load(n,u=>{const p=u.scene;return p.rotation.y=Math.PI,t&&Array.isArray(t)&&t.length===3&&(p.scale.set(t[0],t[1],t[2]),console.log("è®¾ç½®æ¨¡åž‹ç¼©æ”¾:",t)),p.traverse(y=>{y.isMesh&&(y.castShadow=!0,y.receiveShadow=!0)}),a.sceneController.getScene().add(p),a.debugMesh=p,a.sceneController.getWorldOctree().fromGraphNode(a.debugMesh),r()})}):(console.warn("meshName is not exist"),Promise.reject("mesh name is not exist"))}createFloor(n){console.log("createFloor",n);const t=new PlaneGeometry$1(n.size[0],n.size[1]),r=new MeshLambertMaterial({color:new Color$1(n.color),transparent:!0,opacity:n.opacity}),s=new Mesh$1(t,r);s.rotation.x=n.rotation[0]*Math.PI/180,s.rotation.y=n.rotation[1]*Math.PI/180,s.rotation.z=n.rotation[2]*Math.PI/180,s.position.x=n.position[0],s.position.y=n.position[1],s.position.z=n.position[2],n.isCollision&&(this.sceneController.getWorldOctree().fromGraphNode(s),s.receiveShadow=!0),s.visible=n.visible?n.visible:!1,this.scene.add(s)}setInfoPanelVisible(n){}getConfig(n){var r,s,a,e,u;let t=[];return n.url instanceof Array?t=n.url.map(p=>{var y,C,b,x;return{url:p.path,show:!1,position:p.position||((y=n==null?void 0:n.splashInfo)==null?void 0:y.position)||[0,0,0],rotation:getRotationMatrix(p==null?void 0:p.rotation)||[0,0,-1,0],scale:p.scale||((C=n==null?void 0:n.splashInfo)==null?void 0:C.scale)||[1,1,1],meshName:(b=n==null?void 0:n.splashInfo)==null?void 0:b.meshName,rendererScale:(n==null?void 0:n.rendererScale)||1,customMesh:((x=n==null?void 0:n.splashInfo)==null?void 0:x.customMesh)||[]}}):t=[{url:n.url,show:!1,position:((r=n==null?void 0:n.splashInfo)==null?void 0:r.position)||[0,0,0],rotation:getRotationMatrix((s=n==null?void 0:n.splashInfo)==null?void 0:s.rotation)||[0,0,-1,0],scale:((a=n==null?void 0:n.splashInfo)==null?void 0:a.scale)||[1,1,1],meshName:(e=n==null?void 0:n.splashInfo)==null?void 0:e.meshName,rendererScale:(n==null?void 0:n.rendererScale)||1,customMesh:((u=n==null?void 0:n.splashInfo)==null?void 0:u.customMesh)||[]}],t}setRenderScale(n,t,r){n.style.transform=`scale(${1/t})`,n.style.transformOrigin="0 0";const s=getElementSize(r||document.body),a=s.width*t,e=s.height*t;this.renderer.setSize(a,e)}}let camera,renderer,resizeObserver;function resizeEventListener(g,n,t,r=1){camera=g,renderer=n,resizeObserver=new ResizeObserver(()=>{const s=getElementSize(document.body);console.log("resize",s,t),camera.aspect=s.width/s.height,camera.updateProjectionMatrix(),t.style.transform=`scale(${1/r})`;const a=s.width*r,e=s.height*r;renderer.setSize(a,e),renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))}),resizeObserver.observe(document.body)}class SparkRenderController extends GsRenderController{async render(n,t,r){console.log("init3DGS using spark render",n,t,r);const s=this.getConfig(n);for(const a of s)a.rendererScale!==1&&this.setRenderScale(t,a.rendererScale,r),resizeEventListener(this.camera,this.renderer,t,a.rendererScale),this.loadMesh(a),this.spark=new SparkRenderer({renderer:this.renderer,autoUpdate:!1}),await this.loadSplatFile(a)}async loadSplatFile(n){console.log("loadSplatFile ",n);const t=new PackedSplats({url:n.url}),r=new SplatMesh$1({packedSplats:t});r.rotateX(Math.PI),r.rotateY(Math.PI),n.position&&r.position.set(n.position[0],n.position[1],n.position[2]),n.scale&&r.scale.set(n.scale[0],n.scale[1],n.scale[2]),this.scene.add(r)}getUrls(){return this.splatConfigs}animate(){var n;(n=this.spark)==null||n.update({scene:this.scene})}onWindowResize(){super.onWindowResize(),window.location.reload()}dispose(){}}class GS3dRenderController extends GsRenderController{async render(n,t,r=void 0){console.log("init3DGS using GaussianSplats3D render ",n,t,r);const s=this.getConfig(n);console.log("splatConfigs",s),this.splatConfigs=s;for(const a of s){console.log("handle config",a),a.rendererScale!==1&&this.setRenderScale(t,a.rendererScale,r),resizeEventListener(this.camera,this.renderer,t,a.rendererScale),await this.loadMesh(a);const e={sphericalHarmonicsDegree:(a==null?void 0:a.sphericalHarmonicsDegree)>=0?a.sphericalHarmonicsDegree:2,sharedMemoryForWorkers:!1,renderer:this.renderer,camera:this.camera,useBuiltInControls:!1,threeScene:this.scene,selfDrivenMode:!1,...a==null?void 0:a.gaussianSplats3DOption};e.rootElement=t,console.log("viewerOptions",e),this.viewer=new Viewer(e),console.log("addSplatScene",a.url,a),a.showLoadingUI=!1,a.progressiveLoad=!0,await this.viewer.addSplatScene(a.url,a),this.changeUrlState(a.url,!0)}}async add(n){return await this.viewer.addSplatScene(this.splatConfigs[n].url,{progressiveLoad:!0,position:this.splatConfigs[n].position,rotation:this.splatConfigs[n].rotation,scale:this.splatConfigs[n].scale,showLoadingUI:!1}),this.changeUrlState(this.splatConfigs[n].url,!0),this.viewer.update(),this.viewer.render(),this.splatConfigs}remove(n){let t=-1;for(let r=0;r<=n&&r<this.splatConfigs.length;r++)this.splatConfigs[r].show===!0&&(t+=1);this.viewer.removeSplatScene(t,!0),this.changeUrlState(this.splatConfigs[n].url,!1)}changeUrlState(n,t){const r=this.splatConfigs.find(s=>s.url===n);r.show=t}showInfoPanel(n){console.log("model-controller",n),this.viewer.showInfo=n;const t=document.querySelector(".infoPanel"),r=document.getElementById("app");this.viewer.infoPanel.show(),n?(t.style.display="",r.appendChild(t),t.style.marginTop="100px"):t.style.display="none"}animate(){var n,t;(n=this.viewer)==null||n.update(),(t=this.viewer)==null||t.render()}onWindowResize(){}}function getGaussianSplattingRender(g){const n=localStorage.getItem("engine");switch(console.log("get model controller ",n),localStorage.removeItem("engine"),n){case EngineConfig.Spark:return new SparkRenderController(g);case EngineConfig.GaussianSplats3D:return new GS3dRenderController(g);default:return new GS3dRenderController(g)}}class SceneController{constructor(n){this.container=n,this.scene=null,this.frameCount=0,this.camera=null,this.renderer=null,this.orbitControl=null,this.worldOctree=null,this.cameraTarget=new Vector3,this.cameraOffset=new Vector3,this.smoothFactor=.1,this.isFollowingPlayer=!0,this.isOrbiting=!1,this.orbitRadius=4,this.orbitAngle=0,this.orbitSpeed=.002,this.orbitCenter=new Vector3,this.orbitHeight=0,this.savedCameraPosition=null,this.savedCameraTarget=null,this.lastPlayerPosition=new Vector3,this.isMobile=isMobile(),this.offset=this.isMobileVerticalScreen()?1:0}async initScene(n){var r,s,a,e,u,p,y,C,b,x,w,E,I,R,M,T,L,V,k,F;this.config=n,this.scene=new Scene$1,this.scene.background=new Color$1(11067120),this.worldOctree=new Octree,this.camera=new PerspectiveCamera$1(45,window.innerWidth/window.innerHeight,.1,300),this.camera.position.y=5,this.camera.position.z=5,this.camera.position.x=0,this.camera.position.set(0,2,10),this.renderer=new WebGLRenderer$1({antialias:!1,powerPreference:"high-performance"}),this.renderer.setSize(window.innerWidth,window.innerHeight);const t=this.isMobile?Math.min(1.5,window.devicePixelRatio):window.devicePixelRatio;this.renderer.setPixelRatio(t),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=PCFSoftShadowMap,this.container.appendChild(this.renderer.domElement),this.orbitControl=new OrbitControls$1(this.camera,this.renderer.domElement),this.orbitControl.enableDamping=!0,this.orbitControl.minDistance=4+this.offset,this.orbitControl.maxDistance=4+this.offset,this.orbitControl.enablePan=!1,this.orbitControl.maxPolarAngle=Math.PI/2+.8,this.orbitControl.update(),this.addLights(),this.gsRender=getGaussianSplattingRender(this),await this.gsRender.render(this.config,this.container),(s=(r=this.config)==null?void 0:r.avatarInfo)!=null&&s.camera&&(this.camera.position.set((u=(e=(a=this.config)==null?void 0:a.avatarInfo)==null?void 0:e.camera)==null?void 0:u.position.x,(C=(y=(p=this.config)==null?void 0:p.avatarInfo)==null?void 0:y.camera)==null?void 0:C.position.y,(w=(x=(b=this.config)==null?void 0:b.avatarInfo)==null?void 0:x.camera)==null?void 0:w.position.z),this.camera.lookAt((R=(I=(E=this.config)==null?void 0:E.avatarInfo)==null?void 0:I.camera)==null?void 0:R.target.x,(L=(T=(M=this.config)==null?void 0:M.avatarInfo)==null?void 0:T.camera)==null?void 0:L.target.y,(F=(k=(V=this.config)==null?void 0:V.avatarInfo)==null?void 0:k.camera)==null?void 0:F.target.z)),window.addEventListener("resize",this.onWindowResize.bind(this))}addLights(){const n=new AmbientLight(6719692,.6);this.scene.add(n);const t=new DirectionalLight(16777215,1.2);t.position.set(-5,25,-1),t.castShadow=!0,this.isMobile?(t.shadow.mapSize.width=512,t.shadow.mapSize.height=512,t.shadow.radius=2):(t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048,t.shadow.radius=3),t.shadow.camera.near=.1,t.shadow.camera.far=500,t.shadow.camera.right=30,t.shadow.camera.left=-30,t.shadow.camera.top=30,t.shadow.camera.bottom=-30,t.shadow.bias=-1e-4,this.scene.add(t)}onWindowResize(){this.gsRender.onWindowResize()}animate(){this.updateOrbiting(),this.adjustCameraDistance(),this.frameCount+=1,this.frameCount%2===0&&(this.renderer.render(this.scene,this.camera),this.gsRender.animate())}adjustCameraDistance(){if(!this.orbitControl)return;const n=this.orbitControl.getPolarAngle(),t=Math.PI/2,r=Math.PI/2+.8;let s;if(n<=t)s=4;else{const e=n-t,u=r-t,p=Math.min(1,e/u),y=2,C=4+this.offset;s=C-(C-y)*p}if(this.orbitControl.maxDistance=MathUtils$1.lerp(this.orbitControl.maxDistance,s,.1),this.orbitControl.getDistance()>this.orbitControl.maxDistance){const e=this.camera.position.clone().sub(this.orbitControl.target).normalize();this.camera.position.copy(this.orbitControl.target).add(e.multiplyScalar(this.orbitControl.maxDistance))}}isMobileVerticalScreen(){return this.isMobile&&window.innerHeight>window.innerWidth}getScene(){return this.scene}getCamera(){return this.camera}getRenderer(){return this.renderer}getOrbitControl(){return this.orbitControl}getWorldOctree(){return this.worldOctree}initializeCameraTarget(n){this.cameraTarget.copy(n),this.cameraTarget.y+=1.7,this.lastPlayerPosition.copy(n),this.orbitControl.target=this.cameraTarget}updateCamera(n){if(!this.isFollowingPlayer)return;const t=n.clone().sub(this.lastPlayerPosition);this.camera.position.add(t),this.cameraTarget.copy(n),this.cameraTarget.y+=1.7,this.orbitControl.target=this.cameraTarget,this.lastPlayerPosition.copy(n)}setCameraAndOribitControl(n){this.getCamera().position.set(n.position.x,n.position.y,n.position.z);const r=this.getOrbitControl();r.target.set(n.target.x,n.target.y,n.target.z),r.azimuthalAngle=n.azimuthalAngle,r.polarAngle=n.distance,r.distance=n.polarAngle,r.update()}smoothUpdateCamera(n,t){if(!this.isFollowingPlayer)return;const r=n.clone();r.add(this.cameraOffset),this.camera.position.lerp(r,this.smoothFactor),this.cameraTarget.copy(n),this.cameraTarget.y+=1.7,this.orbitControl.target.lerp(this.cameraTarget,this.smoothFactor)}setCameraOffset(n){this.cameraOffset.copy(n)}setFollowPlayer(n){this.isFollowingPlayer=n}setSmoothFactor(n){this.smoothFactor=Math.max(0,Math.min(1,n))}enableOrbitControls(){this.orbitControl.enabled=!0}disableOrbitControls(){this.orbitControl.enabled=!1}startOrbiting(n){this.isOrbiting=!0,this.orbitCenter.copy(n),this.orbitCenter.y+=1.7,this.savedCameraPosition=this.camera.position.clone(),this.savedCameraTarget=this.orbitControl.target.clone();const t=this.camera.position.clone().sub(this.orbitCenter);this.orbitAngle=Math.atan2(t.x,t.z),this.orbitRadius=Math.sqrt(t.x*t.x+t.z*t.z),this.orbitHeight=this.camera.position.y,this.disableOrbitControls()}stopOrbiting(){this.isOrbiting=!1,this.savedCameraTarget&&this.orbitControl.target.copy(this.savedCameraTarget),this.enableOrbitControls(),this.orbitControl.update()}updateOrbiting(){if(!this.isOrbiting)return;this.orbitAngle+=this.orbitSpeed;const n=this.orbitCenter.x+Math.sin(this.orbitAngle)*this.orbitRadius,t=this.orbitCenter.z+Math.cos(this.orbitAngle)*this.orbitRadius;this.camera.position.set(n,this.orbitHeight,t),this.camera.lookAt(this.orbitCenter)}resetCamera(n){this.initializeCameraTarget(n)}showInfoPanel(n){this.gsRender.showInfoPanel(n)}updateLighting(n){}updateEnvironment(n){}}/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.20.0
 * @author George Michael Brower
 * @license MIT
 */class Controller{constructor(n,t,r,s,a="div"){this.parent=n,this.object=t,this.property=r,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement(a),this.domElement.classList.add("controller"),this.domElement.classList.add(s),this.$name=document.createElement("div"),this.$name.classList.add("name"),Controller.nextNameID=Controller.nextNameID||0,this.$name.id=`lil-gui-name-${++Controller.nextNameID}`,this.$widget=document.createElement("div"),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",e=>e.stopPropagation()),this.domElement.addEventListener("keyup",e=>e.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(r)}name(n){return this._name=n,this.$name.textContent=n,this}onChange(n){return this._onChange=n,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(n){return this._onFinishChange=n,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(n=!0){return this.disable(!n)}disable(n=!0){return n===this._disabled?this:(this._disabled=n,this.domElement.classList.toggle("disabled",n),this.$disable.toggleAttribute("disabled",n),this)}show(n=!0){return this._hidden=!n,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(n){const t=this.parent.add(this.object,this.property,n);return t.name(this._name),this.destroy(),t}min(n){return this}max(n){return this}step(n){return this}decimals(n){return this}listen(n=!0){return this._listening=n,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const n=this.save();n!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=n}getValue(){return this.object[this.property]}setValue(n){return this.getValue()!==n&&(this.object[this.property]=n,this._callOnChange(),this.updateDisplay()),this}updateDisplay(){return this}load(n){return this.setValue(n),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class BooleanController extends Controller{constructor(n,t,r){super(n,t,r,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function normalizeColorString(g){let n,t;return(n=g.match(/(#|0x)?([a-f0-9]{6})/i))?t=n[2]:(n=g.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?t=parseInt(n[1]).toString(16).padStart(2,0)+parseInt(n[2]).toString(16).padStart(2,0)+parseInt(n[3]).toString(16).padStart(2,0):(n=g.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(t=n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),t?"#"+t:!1}const STRING={isPrimitive:!0,match:g=>typeof g=="string",fromHexString:normalizeColorString,toHexString:normalizeColorString},INT={isPrimitive:!0,match:g=>typeof g=="number",fromHexString:g=>parseInt(g.substring(1),16),toHexString:g=>"#"+g.toString(16).padStart(6,0)},ARRAY={isPrimitive:!1,match:g=>Array.isArray(g),fromHexString(g,n,t=1){const r=INT.fromHexString(g);n[0]=(r>>16&255)/255*t,n[1]=(r>>8&255)/255*t,n[2]=(r&255)/255*t},toHexString([g,n,t],r=1){r=255/r;const s=g*r<<16^n*r<<8^t*r<<0;return INT.toHexString(s)}},OBJECT={isPrimitive:!1,match:g=>Object(g)===g,fromHexString(g,n,t=1){const r=INT.fromHexString(g);n.r=(r>>16&255)/255*t,n.g=(r>>8&255)/255*t,n.b=(r&255)/255*t},toHexString({r:g,g:n,b:t},r=1){r=255/r;const s=g*r<<16^n*r<<8^t*r<<0;return INT.toHexString(s)}},FORMATS=[STRING,INT,ARRAY,OBJECT];function getColorFormat(g){return FORMATS.find(n=>n.match(g))}class ColorController extends Controller{constructor(n,t,r,s){super(n,t,r,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=getColorFormat(this.initialValue),this._rgbScale=s,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const a=normalizeColorString(this.$text.value);a&&this._setValueFromHexString(a)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(n){if(this._format.isPrimitive){const t=this._format.fromHexString(n);this.setValue(t)}else this._format.fromHexString(n,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(n){return this._setValueFromHexString(n),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class FunctionController extends Controller{constructor(n,t,r){super(n,t,r,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",s=>{s.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class NumberController extends Controller{constructor(n,t,r,s,a,e){super(n,t,r,"number"),this._initInput(),this.min(s),this.max(a);const u=e!==void 0;this.step(u?e:this._getImplicitStep(),u),this.updateDisplay()}decimals(n){return this._decimals=n,this.updateDisplay(),this}min(n){return this._min=n,this._onUpdateMinMax(),this}max(n){return this._max=n,this._onUpdateMinMax(),this}step(n,t=!0){return this._step=n,this._stepExplicit=t,this}updateDisplay(){const n=this.getValue();if(this._hasSlider){let t=(n-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=t*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?n:n.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const t=()=>{let T=parseFloat(this.$input.value);isNaN(T)||(this._stepExplicit&&(T=this._snap(T)),this.setValue(this._clamp(T)))},r=T=>{const L=parseFloat(this.$input.value);isNaN(L)||(this._snapClampSetValue(L+T),this.$input.value=this.getValue())},s=T=>{T.key==="Enter"&&this.$input.blur(),T.code==="ArrowUp"&&(T.preventDefault(),r(this._step*this._arrowKeyMultiplier(T))),T.code==="ArrowDown"&&(T.preventDefault(),r(this._step*this._arrowKeyMultiplier(T)*-1))},a=T=>{this._inputFocused&&(T.preventDefault(),r(this._step*this._normalizeMouseWheel(T)))};let e=!1,u,p,y,C,b;const x=5,w=T=>{u=T.clientX,p=y=T.clientY,e=!0,C=this.getValue(),b=0,window.addEventListener("mousemove",E),window.addEventListener("mouseup",I)},E=T=>{if(e){const L=T.clientX-u,V=T.clientY-p;Math.abs(V)>x?(T.preventDefault(),this.$input.blur(),e=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(L)>x&&I()}if(!e){const L=T.clientY-y;b-=L*this._step*this._arrowKeyMultiplier(T),C+b>this._max?b=this._max-C:C+b<this._min&&(b=this._min-C),this._snapClampSetValue(C+b)}y=T.clientY},I=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",I)},R=()=>{this._inputFocused=!0},M=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",t),this.$input.addEventListener("keydown",s),this.$input.addEventListener("wheel",a,{passive:!1}),this.$input.addEventListener("mousedown",w),this.$input.addEventListener("focus",R),this.$input.addEventListener("blur",M)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const n=(M,T,L,V,k)=>(M-T)/(L-T)*(k-V)+V,t=M=>{const T=this.$slider.getBoundingClientRect();let L=n(M,T.left,T.right,this._min,this._max);this._snapClampSetValue(L)},r=M=>{this._setDraggingStyle(!0),t(M.clientX),window.addEventListener("mousemove",s),window.addEventListener("mouseup",a)},s=M=>{t(M.clientX)},a=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",a)};let e=!1,u,p;const y=M=>{M.preventDefault(),this._setDraggingStyle(!0),t(M.touches[0].clientX),e=!1},C=M=>{M.touches.length>1||(this._hasScrollBar?(u=M.touches[0].clientX,p=M.touches[0].clientY,e=!0):y(M),window.addEventListener("touchmove",b,{passive:!1}),window.addEventListener("touchend",x))},b=M=>{if(e){const T=M.touches[0].clientX-u,L=M.touches[0].clientY-p;Math.abs(T)>Math.abs(L)?y(M):(window.removeEventListener("touchmove",b),window.removeEventListener("touchend",x))}else M.preventDefault(),t(M.touches[0].clientX)},x=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",b),window.removeEventListener("touchend",x)},w=this._callOnFinishChange.bind(this),E=400;let I;const R=M=>{if(Math.abs(M.deltaX)<Math.abs(M.deltaY)&&this._hasScrollBar)return;M.preventDefault();const L=this._normalizeMouseWheel(M)*this._step;this._snapClampSetValue(this.getValue()+L),this.$input.value=this.getValue(),clearTimeout(I),I=setTimeout(w,E)};this.$slider.addEventListener("mousedown",r),this.$slider.addEventListener("touchstart",C,{passive:!1}),this.$slider.addEventListener("wheel",R,{passive:!1})}_setDraggingStyle(n,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",n),document.body.classList.toggle("lil-gui-dragging",n),document.body.classList.toggle(`lil-gui-${t}`,n)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(n){let{deltaX:t,deltaY:r}=n;return Math.floor(n.deltaY)!==n.deltaY&&n.wheelDelta&&(t=0,r=-n.wheelDelta/120,r*=this._stepExplicit?1:10),t+-r}_arrowKeyMultiplier(n){let t=this._stepExplicit?1:10;return n.shiftKey?t*=10:n.altKey&&(t/=10),t}_snap(n){let t=0;return this._hasMin?t=this._min:this._hasMax&&(t=this._max),n-=t,n=Math.round(n/this._step)*this._step,n+=t,n=parseFloat(n.toPrecision(15)),n}_clamp(n){return n<this._min&&(n=this._min),n>this._max&&(n=this._max),n}_snapClampSetValue(n){this.setValue(this._clamp(this._snap(n)))}get _hasScrollBar(){const n=this.parent.root.$children;return n.scrollHeight>n.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class OptionController extends Controller{constructor(n,t,r,s){super(n,t,r,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.options(s)}options(n){return this._values=Array.isArray(n)?n:Object.values(n),this._names=Array.isArray(n)?n:Object.keys(n),this.$select.replaceChildren(),this._names.forEach(t=>{const r=document.createElement("option");r.textContent=t,this.$select.appendChild(r)}),this.updateDisplay(),this}updateDisplay(){const n=this.getValue(),t=this._values.indexOf(n);return this.$select.selectedIndex=t,this.$display.textContent=t===-1?n:this._names[t],this}}class StringController extends Controller{constructor(n,t,r){super(n,t,r,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("spellcheck","false"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",s=>{s.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}var stylesheet=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
  background: var(--background-color);
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "â†•";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  height: var(--title-height);
  font-weight: 600;
  padding: 0 var(--padding);
  width: 100%;
  text-align: left;
  background: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "â–¾";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "â–¸";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui label, .lil-gui input, .lil-gui button {
  -webkit-tap-highlight-color: transparent;
}
.lil-gui input {
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
  -moz-appearance: textfield;
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input[type=checkbox] {
  appearance: none;
  width: var(--checkbox-size);
  height: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "âœ“";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  border: none;
}
.lil-gui .controller button {
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
}
@media (hover: hover) {
  .lil-gui .controller button:hover {
    background: var(--hover-color);
  }
  .lil-gui .controller button:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui .controller button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function _injectStyles(g){const n=document.createElement("style");n.innerHTML=g;const t=document.querySelector("head link[rel=stylesheet], head style");t?document.head.insertBefore(n,t):document.head.appendChild(n)}let stylesInjected=!1;class GUI{constructor({parent:n,autoPlace:t=n===void 0,container:r,width:s,title:a="Controls",closeFolders:e=!1,injectStyles:u=!0,touchStyles:p=!0}={}){if(this.parent=n,this.root=n?n.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("button"),this.$title.classList.add("title"),this.$title.setAttribute("aria-expanded",!0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(a),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),p&&this.domElement.classList.add("allow-touch-styles"),!stylesInjected&&u&&(_injectStyles(stylesheet),stylesInjected=!0),r?r.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),s&&this.domElement.style.setProperty("--width",s+"px"),this._closeFolders=e}add(n,t,r,s,a){if(Object(r)===r)return new OptionController(this,n,t,r);const e=n[t];switch(typeof e){case"number":return new NumberController(this,n,t,r,s,a);case"boolean":return new BooleanController(this,n,t);case"string":return new StringController(this,n,t);case"function":return new FunctionController(this,n,t)}console.error(`gui.add failed
	property:`,t,`
	object:`,n,`
	value:`,e)}addColor(n,t,r=1){return new ColorController(this,n,t,r)}addFolder(n){const t=new GUI({parent:this,title:n});return this.root._closeFolders&&t.close(),t}load(n,t=!0){return n.controllers&&this.controllers.forEach(r=>{r instanceof FunctionController||r._name in n.controllers&&r.load(n.controllers[r._name])}),t&&n.folders&&this.folders.forEach(r=>{r._title in n.folders&&r.load(n.folders[r._title])}),this}save(n=!0){const t={controllers:{},folders:{}};return this.controllers.forEach(r=>{if(!(r instanceof FunctionController)){if(r._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${r._name}"`);t.controllers[r._name]=r.save()}}),n&&this.folders.forEach(r=>{if(r._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${r._title}"`);t.folders[r._title]=r.save()}),t}open(n=!0){return this._setClosed(!n),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(n){this._closed!==n&&(this._closed=n,this._callOnOpenClose(this))}show(n=!0){return this._hidden=!n,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(n=!0){return this._setClosed(!n),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const t=this.$children.clientHeight;this.$children.style.height=t+"px",this.domElement.classList.add("transition");const r=a=>{a.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",r))};this.$children.addEventListener("transitionend",r);const s=n?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!n),requestAnimationFrame(()=>{this.$children.style.height=s+"px"})}),this}title(n){return this._title=n,this.$title.textContent=n,this}reset(n=!0){return(n?this.controllersRecursive():this.controllers).forEach(r=>r.reset()),this}onChange(n){return this._onChange=n,this}_callOnChange(n){this.parent&&this.parent._callOnChange(n),this._onChange!==void 0&&this._onChange.call(this,{object:n.object,property:n.property,value:n.getValue(),controller:n})}onFinishChange(n){return this._onFinishChange=n,this}_callOnFinishChange(n){this.parent&&this.parent._callOnFinishChange(n),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:n.object,property:n.property,value:n.getValue(),controller:n})}onOpenClose(n){return this._onOpenClose=n,this}_callOnOpenClose(n){this.parent&&this.parent._callOnOpenClose(n),this._onOpenClose!==void 0&&this._onOpenClose.call(this,n)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(n=>n.destroy())}controllersRecursive(){let n=Array.from(this.controllers);return this.folders.forEach(t=>{n=n.concat(t.controllersRecursive())}),n}foldersRecursive(){let n=Array.from(this.folders);return this.folders.forEach(t=>{n=n.concat(t.foldersRecursive())}),n}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var vconsole_min$1={exports:{}};/*!
 * vConsole v3.15.1 (https://github.com/Tencent/vConsole)
 *
 * Tencent is pleased to support the open source community by making vConsole available.
 * Copyright (C) 2017 THL A29 Limited, a Tencent company. All rights reserved.
 * Licensed under the MIT License (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at
 * http://opensource.org/licenses/MIT
 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
 */var vconsole_min=vconsole_min$1.exports,hasRequiredVconsole_min;function requireVconsole_min(){return hasRequiredVconsole_min||(hasRequiredVconsole_min=1,(function(module,exports){(function(g,n){module.exports=n()})(vconsole_min||self,(function(){return(function(){var __webpack_modules__={4264:function(g,n,t){g.exports=t(7588)},5036:function(g,n,t){t(1719),t(5677),t(6394),t(5334),t(6969),t(2021),t(8328),t(2129);var r=t(1287);g.exports=r.Promise},2582:function(g,n,t){t(1646),t(6394),t(2004),t(462),t(8407),t(2429),t(1172),t(8288),t(1274),t(8201),t(6626),t(3211),t(9952),t(15),t(9831),t(7521),t(2972),t(6956),t(5222),t(2257);var r=t(1287);g.exports=r.Symbol},8257:function(g,n,t){var r=t(7583),s=t(9212),a=t(5637),e=r.TypeError;g.exports=function(u){if(s(u))return u;throw e(a(u)+" is not a function")}},1186:function(g,n,t){var r=t(7583),s=t(2097),a=t(5637),e=r.TypeError;g.exports=function(u){if(s(u))return u;throw e(a(u)+" is not a constructor")}},9882:function(g,n,t){var r=t(7583),s=t(9212),a=r.String,e=r.TypeError;g.exports=function(u){if(typeof u=="object"||s(u))return u;throw e("Can't set "+a(u)+" as a prototype")}},6288:function(g,n,t){var r=t(3649),s=t(3590),a=t(4615),e=r("unscopables"),u=Array.prototype;u[e]==null&&a.f(u,e,{configurable:!0,value:s(null)}),g.exports=function(p){u[e][p]=!0}},4761:function(g,n,t){var r=t(7583),s=t(2447),a=r.TypeError;g.exports=function(e,u){if(s(u,e))return e;throw a("Incorrect invocation")}},2569:function(g,n,t){var r=t(7583),s=t(794),a=r.String,e=r.TypeError;g.exports=function(u){if(s(u))return u;throw e(a(u)+" is not an object")}},5766:function(g,n,t){var r=t(2977),s=t(6782),a=t(1825),e=function(u){return function(p,y,C){var b,x=r(p),w=a(x),E=s(C,w);if(u&&y!=y){for(;w>E;)if((b=x[E++])!=b)return!0}else for(;w>E;E++)if((u||E in x)&&x[E]===y)return u||E||0;return!u&&-1}};g.exports={includes:e(!0),indexOf:e(!1)}},4805:function(g,n,t){var r=t(2938),s=t(7386),a=t(5044),e=t(1324),u=t(1825),p=t(4822),y=s([].push),C=function(b){var x=b==1,w=b==2,E=b==3,I=b==4,R=b==6,M=b==7,T=b==5||R;return function(L,V,k,F){for(var P,U,G=e(L),Q=a(G),ee=r(V,k),de=u(Q),ne=0,ae=F||p,fe=x?ae(L,de):w||M?ae(L,0):void 0;de>ne;ne++)if((T||ne in Q)&&(U=ee(P=Q[ne],ne,G),b))if(x)fe[ne]=U;else if(U)switch(b){case 3:return!0;case 5:return P;case 6:return ne;case 2:y(fe,P)}else switch(b){case 4:return!1;case 7:y(fe,P)}return R?-1:E||I?I:fe}};g.exports={forEach:C(0),map:C(1),filter:C(2),some:C(3),every:C(4),find:C(5),findIndex:C(6),filterReject:C(7)}},9269:function(g,n,t){var r=t(6544),s=t(3649),a=t(4061),e=s("species");g.exports=function(u){return a>=51||!r((function(){var p=[];return(p.constructor={})[e]=function(){return{foo:1}},p[u](Boolean).foo!==1}))}},4546:function(g,n,t){var r=t(7583),s=t(6782),a=t(1825),e=t(5999),u=r.Array,p=Math.max;g.exports=function(y,C,b){for(var x=a(y),w=s(C,x),E=s(b===void 0?x:b,x),I=u(p(E-w,0)),R=0;w<E;w++,R++)e(I,R,y[w]);return I.length=R,I}},6917:function(g,n,t){var r=t(7386);g.exports=r([].slice)},5289:function(g,n,t){var r=t(7583),s=t(4521),a=t(2097),e=t(794),u=t(3649)("species"),p=r.Array;g.exports=function(y){var C;return s(y)&&(C=y.constructor,(a(C)&&(C===p||s(C.prototype))||e(C)&&(C=C[u])===null)&&(C=void 0)),C===void 0?p:C}},4822:function(g,n,t){var r=t(5289);g.exports=function(s,a){return new(r(s))(a===0?0:a)}},3616:function(g,n,t){var r=t(3649)("iterator"),s=!1;try{var a=0,e={next:function(){return{done:!!a++}},return:function(){s=!0}};e[r]=function(){return this},Array.from(e,(function(){throw 2}))}catch{}g.exports=function(u,p){if(!p&&!s)return!1;var y=!1;try{var C={};C[r]=function(){return{next:function(){return{done:y=!0}}}},u(C)}catch{}return y}},9624:function(g,n,t){var r=t(7386),s=r({}.toString),a=r("".slice);g.exports=function(e){return a(s(e),8,-1)}},3058:function(g,n,t){var r=t(7583),s=t(8191),a=t(9212),e=t(9624),u=t(3649)("toStringTag"),p=r.Object,y=e((function(){return arguments})())=="Arguments";g.exports=s?e:function(C){var b,x,w;return C===void 0?"Undefined":C===null?"Null":typeof(x=(function(E,I){try{return E[I]}catch{}})(b=p(C),u))=="string"?x:y?e(b):(w=e(b))=="Object"&&a(b.callee)?"Arguments":w}},1509:function(g,n,t){var r=t(7386)("".replace),s=String(Error("zxcasd").stack),a=/\n\s*at [^:]*:[^\n]*/,e=a.test(s);g.exports=function(u,p){if(e&&typeof u=="string")for(;p--;)u=r(u,a,"");return u}},3478:function(g,n,t){var r=t(2870),s=t(929),a=t(6683),e=t(4615);g.exports=function(u,p,y){for(var C=s(p),b=e.f,x=a.f,w=0;w<C.length;w++){var E=C[w];r(u,E)||y&&r(y,E)||b(u,E,x(p,E))}}},926:function(g,n,t){var r=t(6544);g.exports=!r((function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype}))},4683:function(g,n,t){var r=t(2365).IteratorPrototype,s=t(3590),a=t(4677),e=t(8821),u=t(339),p=function(){return this};g.exports=function(y,C,b,x){var w=C+" Iterator";return y.prototype=s(r,{next:a(+!x,b)}),e(y,w,!1,!0),u[w]=p,y}},57:function(g,n,t){var r=t(8494),s=t(4615),a=t(4677);g.exports=r?function(e,u,p){return s.f(e,u,a(1,p))}:function(e,u,p){return e[u]=p,e}},4677:function(g){g.exports=function(n,t){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:t}}},5999:function(g,n,t){var r=t(8734),s=t(4615),a=t(4677);g.exports=function(e,u,p){var y=r(u);y in e?s.f(e,y,a(0,p)):e[y]=p}},9012:function(g,n,t){var r=t(7263),s=t(8262),a=t(6268),e=t(4340),u=t(9212),p=t(4683),y=t(729),C=t(7496),b=t(8821),x=t(57),w=t(1270),E=t(3649),I=t(339),R=t(2365),M=e.PROPER,T=e.CONFIGURABLE,L=R.IteratorPrototype,V=R.BUGGY_SAFARI_ITERATORS,k=E("iterator"),F="keys",P="values",U="entries",G=function(){return this};g.exports=function(Q,ee,de,ne,ae,fe,Ae){p(de,ee,ne);var q,te,he,Ce=function(Be){if(Be===ae&&le)return le;if(!V&&Be in N)return N[Be];switch(Be){case F:case P:case U:return function(){return new de(this,Be)}}return function(){return new de(this)}},ye=ee+" Iterator",ce=!1,N=Q.prototype,J=N[k]||N["@@iterator"]||ae&&N[ae],le=!V&&J||Ce(ae),Se=ee=="Array"&&N.entries||J;if(Se&&(q=y(Se.call(new Q)))!==Object.prototype&&q.next&&(a||y(q)===L||(C?C(q,L):u(q[k])||w(q,k,G)),b(q,ye,!0,!0),a&&(I[ye]=G)),M&&ae==P&&J&&J.name!==P&&(!a&&T?x(N,"name",P):(ce=!0,le=function(){return s(J,this)})),ae)if(te={values:Ce(P),keys:fe?le:Ce(F),entries:Ce(U)},Ae)for(he in te)(V||ce||!(he in N))&&w(N,he,te[he]);else r({target:ee,proto:!0,forced:V||ce},te);return a&&!Ae||N[k]===le||w(N,k,le,{name:ae}),I[ee]=le,te}},2219:function(g,n,t){var r=t(1287),s=t(2870),a=t(491),e=t(4615).f;g.exports=function(u){var p=r.Symbol||(r.Symbol={});s(p,u)||e(p,u,{value:a.f(u)})}},8494:function(g,n,t){var r=t(6544);g.exports=!r((function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}))},6668:function(g,n,t){var r=t(7583),s=t(794),a=r.document,e=s(a)&&s(a.createElement);g.exports=function(u){return e?a.createElement(u):{}}},6778:function(g){g.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},9307:function(g,n,t){var r=t(6668)("span").classList,s=r&&r.constructor&&r.constructor.prototype;g.exports=s===Object.prototype?void 0:s},2274:function(g){g.exports=typeof window=="object"},3256:function(g,n,t){var r=t(6918),s=t(7583);g.exports=/ipad|iphone|ipod/i.test(r)&&s.Pebble!==void 0},7020:function(g,n,t){var r=t(6918);g.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},5354:function(g,n,t){var r=t(9624),s=t(7583);g.exports=r(s.process)=="process"},6846:function(g,n,t){var r=t(6918);g.exports=/web0s(?!.*chrome)/i.test(r)},6918:function(g,n,t){var r=t(5897);g.exports=r("navigator","userAgent")||""},4061:function(g,n,t){var r,s,a=t(7583),e=t(6918),u=a.process,p=a.Deno,y=u&&u.versions||p&&p.version,C=y&&y.v8;C&&(s=(r=C.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!s&&e&&(!(r=e.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=e.match(/Chrome\/(\d+)/))&&(s=+r[1]),g.exports=s},5690:function(g){g.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1178:function(g,n,t){var r=t(6544),s=t(4677);g.exports=!r((function(){var a=Error("a");return!("stack"in a)||(Object.defineProperty(a,"stack",s(1,7)),a.stack!==7)}))},7263:function(g,n,t){var r=t(7583),s=t(6683).f,a=t(57),e=t(1270),u=t(460),p=t(3478),y=t(4451);g.exports=function(C,b){var x,w,E,I,R,M=C.target,T=C.global,L=C.stat;if(x=T?r:L?r[M]||u(M,{}):(r[M]||{}).prototype)for(w in b){if(I=b[w],E=C.noTargetGet?(R=s(x,w))&&R.value:x[w],!y(T?w:M+(L?".":"#")+w,C.forced)&&E!==void 0){if(typeof I==typeof E)continue;p(I,E)}(C.sham||E&&E.sham)&&a(I,"sham",!0),e(x,w,I,C)}}},6544:function(g){g.exports=function(n){try{return!!n()}catch{return!0}}},1611:function(g,n,t){var r=t(8987),s=Function.prototype,a=s.apply,e=s.call;g.exports=typeof Reflect=="object"&&Reflect.apply||(r?e.bind(a):function(){return e.apply(a,arguments)})},2938:function(g,n,t){var r=t(7386),s=t(8257),a=t(8987),e=r(r.bind);g.exports=function(u,p){return s(u),p===void 0?u:a?e(u,p):function(){return u.apply(p,arguments)}}},8987:function(g,n,t){var r=t(6544);g.exports=!r((function(){var s=(function(){}).bind();return typeof s!="function"||s.hasOwnProperty("prototype")}))},8262:function(g,n,t){var r=t(8987),s=Function.prototype.call;g.exports=r?s.bind(s):function(){return s.apply(s,arguments)}},4340:function(g,n,t){var r=t(8494),s=t(2870),a=Function.prototype,e=r&&Object.getOwnPropertyDescriptor,u=s(a,"name"),p=u&&(function(){}).name==="something",y=u&&(!r||r&&e(a,"name").configurable);g.exports={EXISTS:u,PROPER:p,CONFIGURABLE:y}},7386:function(g,n,t){var r=t(8987),s=Function.prototype,a=s.bind,e=s.call,u=r&&a.bind(e,e);g.exports=r?function(p){return p&&u(p)}:function(p){return p&&function(){return e.apply(p,arguments)}}},5897:function(g,n,t){var r=t(7583),s=t(9212),a=function(e){return s(e)?e:void 0};g.exports=function(e,u){return arguments.length<2?a(r[e]):r[e]&&r[e][u]}},8272:function(g,n,t){var r=t(3058),s=t(911),a=t(339),e=t(3649)("iterator");g.exports=function(u){if(u!=null)return s(u,e)||s(u,"@@iterator")||a[r(u)]}},6307:function(g,n,t){var r=t(7583),s=t(8262),a=t(8257),e=t(2569),u=t(5637),p=t(8272),y=r.TypeError;g.exports=function(C,b){var x=arguments.length<2?p(C):b;if(a(x))return e(s(x,C));throw y(u(C)+" is not iterable")}},911:function(g,n,t){var r=t(8257);g.exports=function(s,a){var e=s[a];return e==null?void 0:r(e)}},7583:function(g,n,t){var r=function(s){return s&&s.Math==Math&&s};g.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof t.g=="object"&&t.g)||(function(){return this})()||Function("return this")()},2870:function(g,n,t){var r=t(7386),s=t(1324),a=r({}.hasOwnProperty);g.exports=Object.hasOwn||function(e,u){return a(s(e),u)}},4639:function(g){g.exports={}},2716:function(g,n,t){var r=t(7583);g.exports=function(s,a){var e=r.console;e&&e.error&&(arguments.length==1?e.error(s):e.error(s,a))}},482:function(g,n,t){var r=t(5897);g.exports=r("document","documentElement")},275:function(g,n,t){var r=t(8494),s=t(6544),a=t(6668);g.exports=!r&&!s((function(){return Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a!=7}))},5044:function(g,n,t){var r=t(7583),s=t(7386),a=t(6544),e=t(9624),u=r.Object,p=s("".split);g.exports=a((function(){return!u("z").propertyIsEnumerable(0)}))?function(y){return e(y)=="String"?p(y,""):u(y)}:u},9734:function(g,n,t){var r=t(7386),s=t(9212),a=t(1314),e=r(Function.toString);s(a.inspectSource)||(a.inspectSource=function(u){return e(u)}),g.exports=a.inspectSource},4402:function(g,n,t){var r=t(794),s=t(57);g.exports=function(a,e){r(e)&&"cause"in e&&s(a,"cause",e.cause)}},2743:function(g,n,t){var r,s,a,e=t(9491),u=t(7583),p=t(7386),y=t(794),C=t(57),b=t(2870),x=t(1314),w=t(9137),E=t(4639),I="Object already initialized",R=u.TypeError,M=u.WeakMap;if(e||x.state){var T=x.state||(x.state=new M),L=p(T.get),V=p(T.has),k=p(T.set);r=function(P,U){if(V(T,P))throw new R(I);return U.facade=P,k(T,P,U),U},s=function(P){return L(T,P)||{}},a=function(P){return V(T,P)}}else{var F=w("state");E[F]=!0,r=function(P,U){if(b(P,F))throw new R(I);return U.facade=P,C(P,F,U),U},s=function(P){return b(P,F)?P[F]:{}},a=function(P){return b(P,F)}}g.exports={set:r,get:s,has:a,enforce:function(P){return a(P)?s(P):r(P,{})},getterFor:function(P){return function(U){var G;if(!y(U)||(G=s(U)).type!==P)throw R("Incompatible receiver, "+P+" required");return G}}}},114:function(g,n,t){var r=t(3649),s=t(339),a=r("iterator"),e=Array.prototype;g.exports=function(u){return u!==void 0&&(s.Array===u||e[a]===u)}},4521:function(g,n,t){var r=t(9624);g.exports=Array.isArray||function(s){return r(s)=="Array"}},9212:function(g){g.exports=function(n){return typeof n=="function"}},2097:function(g,n,t){var r=t(7386),s=t(6544),a=t(9212),e=t(3058),u=t(5897),p=t(9734),y=function(){},C=[],b=u("Reflect","construct"),x=/^\s*(?:class|function)\b/,w=r(x.exec),E=!x.exec(y),I=function(M){if(!a(M))return!1;try{return b(y,C,M),!0}catch{return!1}},R=function(M){if(!a(M))return!1;switch(e(M)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return E||!!w(x,p(M))}catch{return!0}};R.sham=!0,g.exports=!b||s((function(){var M;return I(I.call)||!I(Object)||!I((function(){M=!0}))||M}))?R:I},4451:function(g,n,t){var r=t(6544),s=t(9212),a=/#|\.prototype\./,e=function(b,x){var w=p[u(b)];return w==C||w!=y&&(s(x)?r(x):!!x)},u=e.normalize=function(b){return String(b).replace(a,".").toLowerCase()},p=e.data={},y=e.NATIVE="N",C=e.POLYFILL="P";g.exports=e},794:function(g,n,t){var r=t(9212);g.exports=function(s){return typeof s=="object"?s!==null:r(s)}},6268:function(g){g.exports=!1},5871:function(g,n,t){var r=t(7583),s=t(5897),a=t(9212),e=t(2447),u=t(7786),p=r.Object;g.exports=u?function(y){return typeof y=="symbol"}:function(y){var C=s("Symbol");return a(C)&&e(C.prototype,p(y))}},4026:function(g,n,t){var r=t(7583),s=t(2938),a=t(8262),e=t(2569),u=t(5637),p=t(114),y=t(1825),C=t(2447),b=t(6307),x=t(8272),w=t(7093),E=r.TypeError,I=function(M,T){this.stopped=M,this.result=T},R=I.prototype;g.exports=function(M,T,L){var V,k,F,P,U,G,Q,ee=L&&L.that,de=!(!L||!L.AS_ENTRIES),ne=!(!L||!L.IS_ITERATOR),ae=!(!L||!L.INTERRUPTED),fe=s(T,ee),Ae=function(te){return V&&w(V,"normal",te),new I(!0,te)},q=function(te){return de?(e(te),ae?fe(te[0],te[1],Ae):fe(te[0],te[1])):ae?fe(te,Ae):fe(te)};if(ne)V=M;else{if(!(k=x(M)))throw E(u(M)+" is not iterable");if(p(k)){for(F=0,P=y(M);P>F;F++)if((U=q(M[F]))&&C(R,U))return U;return new I(!1)}V=b(M,k)}for(G=V.next;!(Q=a(G,V)).done;){try{U=q(Q.value)}catch(te){w(V,"throw",te)}if(typeof U=="object"&&U&&C(R,U))return U}return new I(!1)}},7093:function(g,n,t){var r=t(8262),s=t(2569),a=t(911);g.exports=function(e,u,p){var y,C;s(e);try{if(!(y=a(e,"return"))){if(u==="throw")throw p;return p}y=r(y,e)}catch(b){C=!0,y=b}if(u==="throw")throw p;if(C)throw y;return s(y),p}},2365:function(g,n,t){var r,s,a,e=t(6544),u=t(9212),p=t(3590),y=t(729),C=t(1270),b=t(3649),x=t(6268),w=b("iterator"),E=!1;[].keys&&("next"in(a=[].keys())?(s=y(y(a)))!==Object.prototype&&(r=s):E=!0),r==null||e((function(){var I={};return r[w].call(I)!==I}))?r={}:x&&(r=p(r)),u(r[w])||C(r,w,(function(){return this})),g.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:E}},339:function(g){g.exports={}},1825:function(g,n,t){var r=t(97);g.exports=function(s){return r(s.length)}},2095:function(g,n,t){var r,s,a,e,u,p,y,C,b=t(7583),x=t(2938),w=t(6683).f,E=t(8117).set,I=t(7020),R=t(3256),M=t(6846),T=t(5354),L=b.MutationObserver||b.WebKitMutationObserver,V=b.document,k=b.process,F=b.Promise,P=w(b,"queueMicrotask"),U=P&&P.value;U||(r=function(){var G,Q;for(T&&(G=k.domain)&&G.exit();s;){Q=s.fn,s=s.next;try{Q()}catch(ee){throw s?e():a=void 0,ee}}a=void 0,G&&G.enter()},I||T||M||!L||!V?!R&&F&&F.resolve?((y=F.resolve(void 0)).constructor=F,C=x(y.then,y),e=function(){C(r)}):T?e=function(){k.nextTick(r)}:(E=x(E,b),e=function(){E(r)}):(u=!0,p=V.createTextNode(""),new L(r).observe(p,{characterData:!0}),e=function(){p.data=u=!u})),g.exports=U||function(G){var Q={fn:G,next:void 0};a&&(a.next=Q),s||(s=Q,e()),a=Q}},783:function(g,n,t){var r=t(7583);g.exports=r.Promise},8640:function(g,n,t){var r=t(4061),s=t(6544);g.exports=!!Object.getOwnPropertySymbols&&!s((function(){var a=Symbol();return!String(a)||!(Object(a)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},9491:function(g,n,t){var r=t(7583),s=t(9212),a=t(9734),e=r.WeakMap;g.exports=s(e)&&/native code/.test(a(e))},5084:function(g,n,t){var r=t(8257),s=function(a){var e,u;this.promise=new a((function(p,y){if(e!==void 0||u!==void 0)throw TypeError("Bad Promise constructor");e=p,u=y})),this.resolve=r(e),this.reject=r(u)};g.exports.f=function(a){return new s(a)}},2764:function(g,n,t){var r=t(8320);g.exports=function(s,a){return s===void 0?arguments.length<2?"":a:r(s)}},3590:function(g,n,t){var r,s=t(2569),a=t(8728),e=t(5690),u=t(4639),p=t(482),y=t(6668),C=t(9137),b=C("IE_PROTO"),x=function(){},w=function(R){return"<script>"+R+"<\/script>"},E=function(R){R.write(w("")),R.close();var M=R.parentWindow.Object;return R=null,M},I=function(){try{r=new ActiveXObject("htmlfile")}catch{}var R,M;I=typeof document<"u"?document.domain&&r?E(r):((M=y("iframe")).style.display="none",p.appendChild(M),M.src="javascript:",(R=M.contentWindow.document).open(),R.write(w("document.F=Object")),R.close(),R.F):E(r);for(var T=e.length;T--;)delete I.prototype[e[T]];return I()};u[b]=!0,g.exports=Object.create||function(R,M){var T;return R!==null?(x.prototype=s(R),T=new x,x.prototype=null,T[b]=R):T=I(),M===void 0?T:a.f(T,M)}},8728:function(g,n,t){var r=t(8494),s=t(7670),a=t(4615),e=t(2569),u=t(2977),p=t(5432);n.f=r&&!s?Object.defineProperties:function(y,C){e(y);for(var b,x=u(C),w=p(C),E=w.length,I=0;E>I;)a.f(y,b=w[I++],x[b]);return y}},4615:function(g,n,t){var r=t(7583),s=t(8494),a=t(275),e=t(7670),u=t(2569),p=t(8734),y=r.TypeError,C=Object.defineProperty,b=Object.getOwnPropertyDescriptor,x="enumerable",w="configurable",E="writable";n.f=s?e?function(I,R,M){if(u(I),R=p(R),u(M),typeof I=="function"&&R==="prototype"&&"value"in M&&E in M&&!M.writable){var T=b(I,R);T&&T.writable&&(I[R]=M.value,M={configurable:w in M?M.configurable:T.configurable,enumerable:x in M?M.enumerable:T.enumerable,writable:!1})}return C(I,R,M)}:C:function(I,R,M){if(u(I),R=p(R),u(M),a)try{return C(I,R,M)}catch{}if("get"in M||"set"in M)throw y("Accessors not supported");return"value"in M&&(I[R]=M.value),I}},6683:function(g,n,t){var r=t(8494),s=t(8262),a=t(112),e=t(4677),u=t(2977),p=t(8734),y=t(2870),C=t(275),b=Object.getOwnPropertyDescriptor;n.f=r?b:function(x,w){if(x=u(x),w=p(w),C)try{return b(x,w)}catch{}if(y(x,w))return e(!s(a.f,x,w),x[w])}},3130:function(g,n,t){var r=t(9624),s=t(2977),a=t(9275).f,e=t(4546),u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];g.exports.f=function(p){return u&&r(p)=="Window"?(function(y){try{return a(y)}catch{return e(u)}})(p):a(s(p))}},9275:function(g,n,t){var r=t(8356),s=t(5690).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(a){return r(a,s)}},4012:function(g,n){n.f=Object.getOwnPropertySymbols},729:function(g,n,t){var r=t(7583),s=t(2870),a=t(9212),e=t(1324),u=t(9137),p=t(926),y=u("IE_PROTO"),C=r.Object,b=C.prototype;g.exports=p?C.getPrototypeOf:function(x){var w=e(x);if(s(w,y))return w[y];var E=w.constructor;return a(E)&&w instanceof E?E.prototype:w instanceof C?b:null}},2447:function(g,n,t){var r=t(7386);g.exports=r({}.isPrototypeOf)},8356:function(g,n,t){var r=t(7386),s=t(2870),a=t(2977),e=t(5766).indexOf,u=t(4639),p=r([].push);g.exports=function(y,C){var b,x=a(y),w=0,E=[];for(b in x)!s(u,b)&&s(x,b)&&p(E,b);for(;C.length>w;)s(x,b=C[w++])&&(~e(E,b)||p(E,b));return E}},5432:function(g,n,t){var r=t(8356),s=t(5690);g.exports=Object.keys||function(a){return r(a,s)}},112:function(g,n){var t={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,s=r&&!t.call({1:2},1);n.f=s?function(a){var e=r(this,a);return!!e&&e.enumerable}:t},7496:function(g,n,t){var r=t(7386),s=t(2569),a=t(9882);g.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var e,u=!1,p={};try{(e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(p,[]),u=p instanceof Array}catch{}return function(y,C){return s(y),a(C),u?e(y,C):y.__proto__=C,y}})():void 0)},3060:function(g,n,t){var r=t(8191),s=t(3058);g.exports=r?{}.toString:function(){return"[object "+s(this)+"]"}},6252:function(g,n,t){var r=t(7583),s=t(8262),a=t(9212),e=t(794),u=r.TypeError;g.exports=function(p,y){var C,b;if(y==="string"&&a(C=p.toString)&&!e(b=s(C,p))||a(C=p.valueOf)&&!e(b=s(C,p))||y!=="string"&&a(C=p.toString)&&!e(b=s(C,p)))return b;throw u("Can't convert object to primitive value")}},929:function(g,n,t){var r=t(5897),s=t(7386),a=t(9275),e=t(4012),u=t(2569),p=s([].concat);g.exports=r("Reflect","ownKeys")||function(y){var C=a.f(u(y)),b=e.f;return b?p(C,b(y)):C}},1287:function(g,n,t){var r=t(7583);g.exports=r},544:function(g){g.exports=function(n){try{return{error:!1,value:n()}}catch(t){return{error:!0,value:t}}}},5732:function(g,n,t){var r=t(2569),s=t(794),a=t(5084);g.exports=function(e,u){if(r(e),s(u)&&u.constructor===e)return u;var p=a.f(e);return(0,p.resolve)(u),p.promise}},2723:function(g){var n=function(){this.head=null,this.tail=null};n.prototype={add:function(t){var r={item:t,next:null};this.head?this.tail.next=r:this.head=r,this.tail=r},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},g.exports=n},6893:function(g,n,t){var r=t(1270);g.exports=function(s,a,e){for(var u in a)r(s,u,a[u],e);return s}},1270:function(g,n,t){var r=t(7583),s=t(9212),a=t(2870),e=t(57),u=t(460),p=t(9734),y=t(2743),C=t(4340).CONFIGURABLE,b=y.get,x=y.enforce,w=String(String).split("String");(g.exports=function(E,I,R,M){var T,L=!!M&&!!M.unsafe,V=!!M&&!!M.enumerable,k=!!M&&!!M.noTargetGet,F=M&&M.name!==void 0?M.name:I;s(R)&&(String(F).slice(0,7)==="Symbol("&&(F="["+String(F).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!a(R,"name")||C&&R.name!==F)&&e(R,"name",F),(T=x(R)).source||(T.source=w.join(typeof F=="string"?F:""))),E!==r?(L?!k&&E[I]&&(V=!0):delete E[I],V?E[I]=R:e(E,I,R)):V?E[I]=R:u(I,R)})(Function.prototype,"toString",(function(){return s(this)&&b(this).source||p(this)}))},3955:function(g,n,t){var r=t(7583).TypeError;g.exports=function(s){if(s==null)throw r("Can't call method on "+s);return s}},460:function(g,n,t){var r=t(7583),s=Object.defineProperty;g.exports=function(a,e){try{s(r,a,{value:e,configurable:!0,writable:!0})}catch{r[a]=e}return e}},7730:function(g,n,t){var r=t(5897),s=t(4615),a=t(3649),e=t(8494),u=a("species");g.exports=function(p){var y=r(p),C=s.f;e&&y&&!y[u]&&C(y,u,{configurable:!0,get:function(){return this}})}},8821:function(g,n,t){var r=t(4615).f,s=t(2870),a=t(3649)("toStringTag");g.exports=function(e,u,p){e&&!p&&(e=e.prototype),e&&!s(e,a)&&r(e,a,{configurable:!0,value:u})}},9137:function(g,n,t){var r=t(7836),s=t(8284),a=r("keys");g.exports=function(e){return a[e]||(a[e]=s(e))}},1314:function(g,n,t){var r=t(7583),s=t(460),a="__core-js_shared__",e=r[a]||s(a,{});g.exports=e},7836:function(g,n,t){var r=t(6268),s=t(1314);(g.exports=function(a,e){return s[a]||(s[a]=e!==void 0?e:{})})("versions",[]).push({version:"3.21.1",mode:r?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},564:function(g,n,t){var r=t(2569),s=t(1186),a=t(3649)("species");g.exports=function(e,u){var p,y=r(e).constructor;return y===void 0||(p=r(y)[a])==null?u:s(p)}},6389:function(g,n,t){var r=t(7386),s=t(7486),a=t(8320),e=t(3955),u=r("".charAt),p=r("".charCodeAt),y=r("".slice),C=function(b){return function(x,w){var E,I,R=a(e(x)),M=s(w),T=R.length;return M<0||M>=T?b?"":void 0:(E=p(R,M))<55296||E>56319||M+1===T||(I=p(R,M+1))<56320||I>57343?b?u(R,M):E:b?y(R,M,M+2):I-56320+(E-55296<<10)+65536}};g.exports={codeAt:C(!1),charAt:C(!0)}},8117:function(g,n,t){var r,s,a,e,u=t(7583),p=t(1611),y=t(2938),C=t(9212),b=t(2870),x=t(6544),w=t(482),E=t(6917),I=t(6668),R=t(7520),M=t(7020),T=t(5354),L=u.setImmediate,V=u.clearImmediate,k=u.process,F=u.Dispatch,P=u.Function,U=u.MessageChannel,G=u.String,Q=0,ee={},de="onreadystatechange";try{r=u.location}catch{}var ne=function(q){if(b(ee,q)){var te=ee[q];delete ee[q],te()}},ae=function(q){return function(){ne(q)}},fe=function(q){ne(q.data)},Ae=function(q){u.postMessage(G(q),r.protocol+"//"+r.host)};L&&V||(L=function(q){R(arguments.length,1);var te=C(q)?q:P(q),he=E(arguments,1);return ee[++Q]=function(){p(te,void 0,he)},s(Q),Q},V=function(q){delete ee[q]},T?s=function(q){k.nextTick(ae(q))}:F&&F.now?s=function(q){F.now(ae(q))}:U&&!M?(e=(a=new U).port2,a.port1.onmessage=fe,s=y(e.postMessage,e)):u.addEventListener&&C(u.postMessage)&&!u.importScripts&&r&&r.protocol!=="file:"&&!x(Ae)?(s=Ae,u.addEventListener("message",fe,!1)):s=de in I("script")?function(q){w.appendChild(I("script")).onreadystatechange=function(){w.removeChild(this),ne(q)}}:function(q){setTimeout(ae(q),0)}),g.exports={set:L,clear:V}},6782:function(g,n,t){var r=t(7486),s=Math.max,a=Math.min;g.exports=function(e,u){var p=r(e);return p<0?s(p+u,0):a(p,u)}},2977:function(g,n,t){var r=t(5044),s=t(3955);g.exports=function(a){return r(s(a))}},7486:function(g){var n=Math.ceil,t=Math.floor;g.exports=function(r){var s=+r;return s!=s||s===0?0:(s>0?t:n)(s)}},97:function(g,n,t){var r=t(7486),s=Math.min;g.exports=function(a){return a>0?s(r(a),9007199254740991):0}},1324:function(g,n,t){var r=t(7583),s=t(3955),a=r.Object;g.exports=function(e){return a(s(e))}},2670:function(g,n,t){var r=t(7583),s=t(8262),a=t(794),e=t(5871),u=t(911),p=t(6252),y=t(3649),C=r.TypeError,b=y("toPrimitive");g.exports=function(x,w){if(!a(x)||e(x))return x;var E,I=u(x,b);if(I){if(w===void 0&&(w="default"),E=s(I,x,w),!a(E)||e(E))return E;throw C("Can't convert object to primitive value")}return w===void 0&&(w="number"),p(x,w)}},8734:function(g,n,t){var r=t(2670),s=t(5871);g.exports=function(a){var e=r(a,"string");return s(e)?e:e+""}},8191:function(g,n,t){var r={};r[t(3649)("toStringTag")]="z",g.exports=String(r)==="[object z]"},8320:function(g,n,t){var r=t(7583),s=t(3058),a=r.String;g.exports=function(e){if(s(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return a(e)}},5637:function(g,n,t){var r=t(7583).String;g.exports=function(s){try{return r(s)}catch{return"Object"}}},8284:function(g,n,t){var r=t(7386),s=0,a=Math.random(),e=r(1 .toString);g.exports=function(u){return"Symbol("+(u===void 0?"":u)+")_"+e(++s+a,36)}},7786:function(g,n,t){var r=t(8640);g.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},7670:function(g,n,t){var r=t(8494),s=t(6544);g.exports=r&&s((function(){return Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype!=42}))},7520:function(g,n,t){var r=t(7583).TypeError;g.exports=function(s,a){if(s<a)throw r("Not enough arguments");return s}},491:function(g,n,t){var r=t(3649);n.f=r},3649:function(g,n,t){var r=t(7583),s=t(7836),a=t(2870),e=t(8284),u=t(8640),p=t(7786),y=s("wks"),C=r.Symbol,b=C&&C.for,x=p?C:C&&C.withoutSetter||e;g.exports=function(w){if(!a(y,w)||!u&&typeof y[w]!="string"){var E="Symbol."+w;u&&a(C,w)?y[w]=C[w]:y[w]=p&&b?b(E):x(E)}return y[w]}},1719:function(g,n,t){var r=t(7263),s=t(7583),a=t(2447),e=t(729),u=t(7496),p=t(3478),y=t(3590),C=t(57),b=t(4677),x=t(1509),w=t(4402),E=t(4026),I=t(2764),R=t(3649),M=t(1178),T=R("toStringTag"),L=s.Error,V=[].push,k=function(P,U){var G,Q=arguments.length>2?arguments[2]:void 0,ee=a(F,this);u?G=u(new L,ee?e(this):F):(G=ee?this:y(F),C(G,T,"Error")),U!==void 0&&C(G,"message",I(U)),M&&C(G,"stack",x(G.stack,1)),w(G,Q);var de=[];return E(P,V,{that:de}),C(G,"errors",de),G};u?u(k,L):p(k,L,{name:!0});var F=k.prototype=y(L.prototype,{constructor:b(1,k),message:b(1,""),name:b(1,"AggregateError")});r({global:!0},{AggregateError:k})},1646:function(g,n,t){var r=t(7263),s=t(7583),a=t(6544),e=t(4521),u=t(794),p=t(1324),y=t(1825),C=t(5999),b=t(4822),x=t(9269),w=t(3649),E=t(4061),I=w("isConcatSpreadable"),R=9007199254740991,M="Maximum allowed index exceeded",T=s.TypeError,L=E>=51||!a((function(){var F=[];return F[I]=!1,F.concat()[0]!==F})),V=x("concat"),k=function(F){if(!u(F))return!1;var P=F[I];return P!==void 0?!!P:e(F)};r({target:"Array",proto:!0,forced:!L||!V},{concat:function(F){var P,U,G,Q,ee,de=p(this),ne=b(de,0),ae=0;for(P=-1,G=arguments.length;P<G;P++)if(k(ee=P===-1?de:arguments[P])){if(ae+(Q=y(ee))>R)throw T(M);for(U=0;U<Q;U++,ae++)U in ee&&C(ne,ae,ee[U])}else{if(ae>=R)throw T(M);C(ne,ae++,ee)}return ne.length=ae,ne}})},5677:function(g,n,t){var r=t(2977),s=t(6288),a=t(339),e=t(2743),u=t(4615).f,p=t(9012),y=t(6268),C=t(8494),b="Array Iterator",x=e.set,w=e.getterFor(b);g.exports=p(Array,"Array",(function(I,R){x(this,{type:b,target:r(I),index:0,kind:R})}),(function(){var I=w(this),R=I.target,M=I.kind,T=I.index++;return!R||T>=R.length?(I.target=void 0,{value:void 0,done:!0}):M=="keys"?{value:T,done:!1}:M=="values"?{value:R[T],done:!1}:{value:[T,R[T]],done:!1}}),"values");var E=a.Arguments=a.Array;if(s("keys"),s("values"),s("entries"),!y&&C&&E.name!=="values")try{u(E,"name",{value:"values"})}catch{}},6956:function(g,n,t){var r=t(7583);t(8821)(r.JSON,"JSON",!0)},5222:function(g,n,t){t(8821)(Math,"Math",!0)},6394:function(g,n,t){var r=t(8191),s=t(1270),a=t(3060);r||s(Object.prototype,"toString",a,{unsafe:!0})},6969:function(g,n,t){var r=t(7263),s=t(8262),a=t(8257),e=t(5084),u=t(544),p=t(4026);r({target:"Promise",stat:!0},{allSettled:function(y){var C=this,b=e.f(C),x=b.resolve,w=b.reject,E=u((function(){var I=a(C.resolve),R=[],M=0,T=1;p(y,(function(L){var V=M++,k=!1;T++,s(I,C,L).then((function(F){k||(k=!0,R[V]={status:"fulfilled",value:F},--T||x(R))}),(function(F){k||(k=!0,R[V]={status:"rejected",reason:F},--T||x(R))}))})),--T||x(R)}));return E.error&&w(E.value),b.promise}})},2021:function(g,n,t){var r=t(7263),s=t(8257),a=t(5897),e=t(8262),u=t(5084),p=t(544),y=t(4026),C="No one promise resolved";r({target:"Promise",stat:!0},{any:function(b){var x=this,w=a("AggregateError"),E=u.f(x),I=E.resolve,R=E.reject,M=p((function(){var T=s(x.resolve),L=[],V=0,k=1,F=!1;y(b,(function(P){var U=V++,G=!1;k++,e(T,x,P).then((function(Q){G||F||(F=!0,I(Q))}),(function(Q){G||F||(G=!0,L[U]=Q,--k||R(new w(L,C)))}))})),--k||R(new w(L,C))}));return M.error&&R(M.value),E.promise}})},8328:function(g,n,t){var r=t(7263),s=t(6268),a=t(783),e=t(6544),u=t(5897),p=t(9212),y=t(564),C=t(5732),b=t(1270);if(r({target:"Promise",proto:!0,real:!0,forced:!!a&&e((function(){a.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(w){var E=y(this,u("Promise")),I=p(w);return this.then(I?function(R){return C(E,w()).then((function(){return R}))}:w,I?function(R){return C(E,w()).then((function(){throw R}))}:w)}}),!s&&p(a)){var x=u("Promise").prototype.finally;a.prototype.finally!==x&&b(a.prototype,"finally",x,{unsafe:!0})}},5334:function(g,n,t){var r,s,a,e,u=t(7263),p=t(6268),y=t(7583),C=t(5897),b=t(8262),x=t(783),w=t(1270),E=t(6893),I=t(7496),R=t(8821),M=t(7730),T=t(8257),L=t(9212),V=t(794),k=t(4761),F=t(9734),P=t(4026),U=t(3616),G=t(564),Q=t(8117).set,ee=t(2095),de=t(5732),ne=t(2716),ae=t(5084),fe=t(544),Ae=t(2723),q=t(2743),te=t(4451),he=t(3649),Ce=t(2274),ye=t(5354),ce=t(4061),N=he("species"),J="Promise",le=q.getterFor(J),Se=q.set,Be=q.getterFor(J),Ne=x&&x.prototype,je=x,ke=Ne,Ve=y.TypeError,Ge=y.document,We=y.process,Ke=ae.f,Oe=Ke,qe=!!(Ge&&Ge.createEvent&&y.dispatchEvent),Xe=L(y.PromiseRejectionEvent),Ye="unhandledrejection",ht=!1,At=te(J,(function(){var z=F(je),me=z!==String(je);if(!me&&ce===66||p&&!ke.finally)return!0;if(ce>=51&&/native code/.test(z))return!1;var De=new je((function(Je){Je(1)})),Pe=function(Je){Je((function(){}),(function(){}))};return(De.constructor={})[N]=Pe,!(ht=De.then((function(){}))instanceof Pe)||!me&&Ce&&!Xe})),dn=At||!U((function(z){je.all(z).catch((function(){}))})),Ut=function(z){var me;return!(!V(z)||!L(me=z.then))&&me},Dt=function(z,me){var De,Pe,Je,mt=me.value,xt=me.state==1,oe=xt?z.ok:z.fail,ge=z.resolve,se=z.reject,ve=z.domain;try{oe?(xt||(me.rejection===2&&hn(me),me.rejection=1),oe===!0?De=mt:(ve&&ve.enter(),De=oe(mt),ve&&(ve.exit(),Je=!0)),De===z.promise?se(Ve("Promise-chain cycle")):(Pe=Ut(De))?b(Pe,De,ge,se):ge(De)):se(mt)}catch(Ee){ve&&!Je&&ve.exit(),se(Ee)}},Ot=function(z,me){z.notified||(z.notified=!0,ee((function(){for(var De,Pe=z.reactions;De=Pe.get();)Dt(De,z);z.notified=!1,me&&!z.rejection&&Bt(z)})))},pn=function(z,me,De){var Pe,Je;qe?((Pe=Ge.createEvent("Event")).promise=me,Pe.reason=De,Pe.initEvent(z,!1,!0),y.dispatchEvent(Pe)):Pe={promise:me,reason:De},!Xe&&(Je=y["on"+z])?Je(Pe):z===Ye&&ne("Unhandled promise rejection",De)},Bt=function(z){b(Q,y,(function(){var me,De=z.facade,Pe=z.value;if(Vt(z)&&(me=fe((function(){ye?We.emit("unhandledRejection",Pe,De):pn(Ye,De,Pe)})),z.rejection=ye||Vt(z)?2:1,me.error))throw me.value}))},Vt=function(z){return z.rejection!==1&&!z.parent},hn=function(z){b(Q,y,(function(){var me=z.facade;ye?We.emit("rejectionHandled",me):pn("rejectionhandled",me,z.value)}))},Kt=function(z,me,De){return function(Pe){z(me,Pe,De)}},It=function(z,me,De){z.done||(z.done=!0,De&&(z=De),z.value=me,z.state=2,Ot(z,!0))},Ht=function z(me,De,Pe){if(!me.done){me.done=!0,Pe&&(me=Pe);try{if(me.facade===De)throw Ve("Promise can't be resolved itself");var Je=Ut(De);Je?ee((function(){var mt={done:!1};try{b(Je,De,Kt(z,mt,me),Kt(It,mt,me))}catch(xt){It(mt,xt,me)}})):(me.value=De,me.state=1,Ot(me,!1))}catch(mt){It({done:!1},mt,me)}}};if(At&&(ke=(je=function(z){k(this,ke),T(z),b(r,this);var me=le(this);try{z(Kt(Ht,me),Kt(It,me))}catch(De){It(me,De)}}).prototype,(r=function(z){Se(this,{type:J,done:!1,notified:!1,parent:!1,reactions:new Ae,rejection:!1,state:0,value:void 0})}).prototype=E(ke,{then:function(z,me){var De=Be(this),Pe=Ke(G(this,je));return De.parent=!0,Pe.ok=!L(z)||z,Pe.fail=L(me)&&me,Pe.domain=ye?We.domain:void 0,De.state==0?De.reactions.add(Pe):ee((function(){Dt(Pe,De)})),Pe.promise},catch:function(z){return this.then(void 0,z)}}),s=function(){var z=new r,me=le(z);this.promise=z,this.resolve=Kt(Ht,me),this.reject=Kt(It,me)},ae.f=Ke=function(z){return z===je||z===a?new s(z):Oe(z)},!p&&L(x)&&Ne!==Object.prototype)){e=Ne.then,ht||(w(Ne,"then",(function(z,me){var De=this;return new je((function(Pe,Je){b(e,De,Pe,Je)})).then(z,me)}),{unsafe:!0}),w(Ne,"catch",ke.catch,{unsafe:!0}));try{delete Ne.constructor}catch{}I&&I(Ne,ke)}u({global:!0,wrap:!0,forced:At},{Promise:je}),R(je,J,!1,!0),M(J),a=C(J),u({target:J,stat:!0,forced:At},{reject:function(z){var me=Ke(this);return b(me.reject,void 0,z),me.promise}}),u({target:J,stat:!0,forced:p||At},{resolve:function(z){return de(p&&this===a?je:this,z)}}),u({target:J,stat:!0,forced:dn},{all:function(z){var me=this,De=Ke(me),Pe=De.resolve,Je=De.reject,mt=fe((function(){var xt=T(me.resolve),oe=[],ge=0,se=1;P(z,(function(ve){var Ee=ge++,He=!1;se++,b(xt,me,ve).then((function(Ze){He||(He=!0,oe[Ee]=Ze,--se||Pe(oe))}),Je)})),--se||Pe(oe)}));return mt.error&&Je(mt.value),De.promise},race:function(z){var me=this,De=Ke(me),Pe=De.reject,Je=fe((function(){var mt=T(me.resolve);P(z,(function(xt){b(mt,me,xt).then(De.resolve,Pe)}))}));return Je.error&&Pe(Je.value),De.promise}})},2257:function(g,n,t){var r=t(7263),s=t(7583),a=t(8821);r({global:!0},{Reflect:{}}),a(s.Reflect,"Reflect",!0)},2129:function(g,n,t){var r=t(6389).charAt,s=t(8320),a=t(2743),e=t(9012),u="String Iterator",p=a.set,y=a.getterFor(u);e(String,"String",(function(C){p(this,{type:u,string:s(C),index:0})}),(function(){var C,b=y(this),x=b.string,w=b.index;return w>=x.length?{value:void 0,done:!0}:(C=r(x,w),b.index+=C.length,{value:C,done:!1})}))},462:function(g,n,t){t(2219)("asyncIterator")},8407:function(g,n,t){var r=t(7263),s=t(8494),a=t(7583),e=t(7386),u=t(2870),p=t(9212),y=t(2447),C=t(8320),b=t(4615).f,x=t(3478),w=a.Symbol,E=w&&w.prototype;if(s&&p(w)&&(!("description"in E)||w().description!==void 0)){var I={},R=function(){var P=arguments.length<1||arguments[0]===void 0?void 0:C(arguments[0]),U=y(E,this)?new w(P):P===void 0?w():w(P);return P===""&&(I[U]=!0),U};x(R,w),R.prototype=E,E.constructor=R;var M=String(w("test"))=="Symbol(test)",T=e(E.toString),L=e(E.valueOf),V=/^Symbol\((.*)\)[^)]+$/,k=e("".replace),F=e("".slice);b(E,"description",{configurable:!0,get:function(){var P=L(this),U=T(P);if(u(I,P))return"";var G=M?F(U,7,-1):k(U,V,"$1");return G===""?void 0:G}}),r({global:!0,forced:!0},{Symbol:R})}},2429:function(g,n,t){t(2219)("hasInstance")},1172:function(g,n,t){t(2219)("isConcatSpreadable")},8288:function(g,n,t){t(2219)("iterator")},2004:function(g,n,t){var r=t(7263),s=t(7583),a=t(5897),e=t(1611),u=t(8262),p=t(7386),y=t(6268),C=t(8494),b=t(8640),x=t(6544),w=t(2870),E=t(4521),I=t(9212),R=t(794),M=t(2447),T=t(5871),L=t(2569),V=t(1324),k=t(2977),F=t(8734),P=t(8320),U=t(4677),G=t(3590),Q=t(5432),ee=t(9275),de=t(3130),ne=t(4012),ae=t(6683),fe=t(4615),Ae=t(8728),q=t(112),te=t(6917),he=t(1270),Ce=t(7836),ye=t(9137),ce=t(4639),N=t(8284),J=t(3649),le=t(491),Se=t(2219),Be=t(8821),Ne=t(2743),je=t(4805).forEach,ke=ye("hidden"),Ve="Symbol",Ge=J("toPrimitive"),We=Ne.set,Ke=Ne.getterFor(Ve),Oe=Object.prototype,qe=s.Symbol,Xe=qe&&qe.prototype,Ye=s.TypeError,ht=s.QObject,At=a("JSON","stringify"),dn=ae.f,Ut=fe.f,Dt=de.f,Ot=q.f,pn=p([].push),Bt=Ce("symbols"),Vt=Ce("op-symbols"),hn=Ce("string-to-symbol-registry"),Kt=Ce("symbol-to-string-registry"),It=Ce("wks"),Ht=!ht||!ht.prototype||!ht.prototype.findChild,z=C&&x((function(){return G(Ut({},"a",{get:function(){return Ut(this,"a",{value:7}).a}})).a!=7}))?function(se,ve,Ee){var He=dn(Oe,ve);He&&delete Oe[ve],Ut(se,ve,Ee),He&&se!==Oe&&Ut(Oe,ve,He)}:Ut,me=function(se,ve){var Ee=Bt[se]=G(Xe);return We(Ee,{type:Ve,tag:se,description:ve}),C||(Ee.description=ve),Ee},De=function(se,ve,Ee){se===Oe&&De(Vt,ve,Ee),L(se);var He=F(ve);return L(Ee),w(Bt,He)?(Ee.enumerable?(w(se,ke)&&se[ke][He]&&(se[ke][He]=!1),Ee=G(Ee,{enumerable:U(0,!1)})):(w(se,ke)||Ut(se,ke,U(1,{})),se[ke][He]=!0),z(se,He,Ee)):Ut(se,He,Ee)},Pe=function(se,ve){L(se);var Ee=k(ve),He=Q(Ee).concat(oe(Ee));return je(He,(function(Ze){C&&!u(Je,Ee,Ze)||De(se,Ze,Ee[Ze])})),se},Je=function(se){var ve=F(se),Ee=u(Ot,this,ve);return!(this===Oe&&w(Bt,ve)&&!w(Vt,ve))&&(!(Ee||!w(this,ve)||!w(Bt,ve)||w(this,ke)&&this[ke][ve])||Ee)},mt=function(se,ve){var Ee=k(se),He=F(ve);if(Ee!==Oe||!w(Bt,He)||w(Vt,He)){var Ze=dn(Ee,He);return!Ze||!w(Bt,He)||w(Ee,ke)&&Ee[ke][He]||(Ze.enumerable=!0),Ze}},xt=function(se){var ve=Dt(k(se)),Ee=[];return je(ve,(function(He){w(Bt,He)||w(ce,He)||pn(Ee,He)})),Ee},oe=function(se){var ve=se===Oe,Ee=Dt(ve?Vt:k(se)),He=[];return je(Ee,(function(Ze){!w(Bt,Ze)||ve&&!w(Oe,Ze)||pn(He,Bt[Ze])})),He};if(b||(qe=function(){if(M(Xe,this))throw Ye("Symbol is not a constructor");var se=arguments.length&&arguments[0]!==void 0?P(arguments[0]):void 0,ve=N(se),Ee=function He(Ze){this===Oe&&u(He,Vt,Ze),w(this,ke)&&w(this[ke],ve)&&(this[ke][ve]=!1),z(this,ve,U(1,Ze))};return C&&Ht&&z(Oe,ve,{configurable:!0,set:Ee}),me(ve,se)},he(Xe=qe.prototype,"toString",(function(){return Ke(this).tag})),he(qe,"withoutSetter",(function(se){return me(N(se),se)})),q.f=Je,fe.f=De,Ae.f=Pe,ae.f=mt,ee.f=de.f=xt,ne.f=oe,le.f=function(se){return me(J(se),se)},C&&(Ut(Xe,"description",{configurable:!0,get:function(){return Ke(this).description}}),y||he(Oe,"propertyIsEnumerable",Je,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!b,sham:!b},{Symbol:qe}),je(Q(It),(function(se){Se(se)})),r({target:Ve,stat:!0,forced:!b},{for:function(se){var ve=P(se);if(w(hn,ve))return hn[ve];var Ee=qe(ve);return hn[ve]=Ee,Kt[Ee]=ve,Ee},keyFor:function(se){if(!T(se))throw Ye(se+" is not a symbol");if(w(Kt,se))return Kt[se]},useSetter:function(){Ht=!0},useSimple:function(){Ht=!1}}),r({target:"Object",stat:!0,forced:!b,sham:!C},{create:function(se,ve){return ve===void 0?G(se):Pe(G(se),ve)},defineProperty:De,defineProperties:Pe,getOwnPropertyDescriptor:mt}),r({target:"Object",stat:!0,forced:!b},{getOwnPropertyNames:xt,getOwnPropertySymbols:oe}),r({target:"Object",stat:!0,forced:x((function(){ne.f(1)}))},{getOwnPropertySymbols:function(se){return ne.f(V(se))}}),At&&r({target:"JSON",stat:!0,forced:!b||x((function(){var se=qe();return At([se])!="[null]"||At({a:se})!="{}"||At(Object(se))!="{}"}))},{stringify:function(se,ve,Ee){var He=te(arguments),Ze=ve;if((R(ve)||se!==void 0)&&!T(se))return E(ve)||(ve=function(pt,Nt){if(I(Ze)&&(Nt=u(Ze,this,pt,Nt)),!T(Nt))return Nt}),He[1]=ve,e(At,null,He)}}),!Xe[Ge]){var ge=Xe.valueOf;he(Xe,Ge,(function(se){return u(ge,this)}))}Be(qe,Ve),ce[ke]=!0},8201:function(g,n,t){t(2219)("matchAll")},1274:function(g,n,t){t(2219)("match")},6626:function(g,n,t){t(2219)("replace")},3211:function(g,n,t){t(2219)("search")},9952:function(g,n,t){t(2219)("species")},15:function(g,n,t){t(2219)("split")},9831:function(g,n,t){t(2219)("toPrimitive")},7521:function(g,n,t){t(2219)("toStringTag")},2972:function(g,n,t){t(2219)("unscopables")},4655:function(g,n,t){var r=t(7583),s=t(6778),a=t(9307),e=t(5677),u=t(57),p=t(3649),y=p("iterator"),C=p("toStringTag"),b=e.values,x=function(E,I){if(E){if(E[y]!==b)try{u(E,y,b)}catch{E[y]=b}if(E[C]||u(E,C,I),s[I]){for(var R in e)if(E[R]!==e[R])try{u(E,R,e[R])}catch{E[R]=e[R]}}}};for(var w in s)x(r[w]&&r[w].prototype,w);x(a,"DOMTokenList")},8765:function(g,n,t){var r=t(5036);t(4655),g.exports=r},5441:function(g,n,t){var r=t(2582);t(4655),g.exports=r},7705:function(g){g.exports=function(n){var t=[];return t.toString=function(){return this.map((function(r){var s="",a=r[5]!==void 0;return r[4]&&(s+="@supports (".concat(r[4],") {")),r[2]&&(s+="@media ".concat(r[2]," {")),a&&(s+="@layer".concat(r[5].length>0?" ".concat(r[5]):""," {")),s+=n(r),a&&(s+="}"),r[2]&&(s+="}"),r[4]&&(s+="}"),s})).join("")},t.i=function(r,s,a,e,u){typeof r=="string"&&(r=[[null,r,void 0]]);var p={};if(a)for(var y=0;y<this.length;y++){var C=this[y][0];C!=null&&(p[C]=!0)}for(var b=0;b<r.length;b++){var x=[].concat(r[b]);a&&p[x[0]]||(u!==void 0&&(x[5]===void 0||(x[1]="@layer".concat(x[5].length>0?" ".concat(x[5]):""," {").concat(x[1],"}")),x[5]=u),s&&(x[2]&&(x[1]="@media ".concat(x[2]," {").concat(x[1],"}")),x[2]=s),e&&(x[4]?(x[1]="@supports (".concat(x[4],") {").concat(x[1],"}"),x[4]=e):x[4]="".concat(e)),t.push(x))}},t}},6738:function(g){g.exports=function(n){return n[1]}},8679:function(g){var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,t=window.WeakMap;if(t===void 0){var r=Object.defineProperty,s=Date.now()%1e9;(t=function(){this.name="__st"+(1e9*Math.random()>>>0)+s+++"__"}).prototype={set:function(F,P){var U=F[this.name];return U&&U[0]===F?U[1]=P:r(F,this.name,{value:[F,P],writable:!0}),this},get:function(F){var P;return(P=F[this.name])&&P[0]===F?P[1]:void 0},delete:function(F){var P=F[this.name];if(!P)return!1;var U=P[0]===F;return P[0]=P[1]=void 0,U},has:function(F){var P=F[this.name];return!!P&&P[0]===F}}}var a=new t,e=window.msSetImmediate;if(!e){var u=[],p=String(Math.random());window.addEventListener("message",(function(F){if(F.data===p){var P=u;u=[],P.forEach((function(U){U()}))}})),e=function(F){u.push(F),window.postMessage(p,"*")}}var y=!1,C=[];function b(){y=!1;var F=C;C=[],F.sort((function(U,G){return U.uid_-G.uid_}));var P=!1;F.forEach((function(U){var G=U.takeRecords();(function(Q){Q.nodes_.forEach((function(ee){var de=a.get(ee);de&&de.forEach((function(ne){ne.observer===Q&&ne.removeTransientObservers()}))}))})(U),G.length&&(U.callback_(G,U),P=!0)})),P&&b()}function x(F,P){for(var U=F;U;U=U.parentNode){var G=a.get(U);if(G)for(var Q=0;Q<G.length;Q++){var ee=G[Q],de=ee.options;if(U===F||de.subtree){var ne=P(de);ne&&ee.enqueue(ne)}}}}var w,E,I=0;function R(F){this.callback_=F,this.nodes_=[],this.records_=[],this.uid_=++I}function M(F,P){this.type=F,this.target=P,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function T(F,P){return w=new M(F,P)}function L(F){return E||((U=new M((P=w).type,P.target)).addedNodes=P.addedNodes.slice(),U.removedNodes=P.removedNodes.slice(),U.previousSibling=P.previousSibling,U.nextSibling=P.nextSibling,U.attributeName=P.attributeName,U.attributeNamespace=P.attributeNamespace,U.oldValue=P.oldValue,(E=U).oldValue=F,E);var P,U}function V(F,P){return F===P?F:E&&((U=F)===E||U===w)?E:null;var U}function k(F,P,U){this.observer=F,this.target=P,this.options=U,this.transientObservedNodes=[]}R.prototype={observe:function(F,P){var U;if(U=F,F=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(U)||U,!P.childList&&!P.attributes&&!P.characterData||P.attributeOldValue&&!P.attributes||P.attributeFilter&&P.attributeFilter.length&&!P.attributes||P.characterDataOldValue&&!P.characterData)throw new SyntaxError;var G,Q=a.get(F);Q||a.set(F,Q=[]);for(var ee=0;ee<Q.length;ee++)if(Q[ee].observer===this){(G=Q[ee]).removeListeners(),G.options=P;break}G||(G=new k(this,F,P),Q.push(G),this.nodes_.push(F)),G.addListeners()},disconnect:function(){this.nodes_.forEach((function(F){for(var P=a.get(F),U=0;U<P.length;U++){var G=P[U];if(G.observer===this){G.removeListeners(),P.splice(U,1);break}}}),this),this.records_=[]},takeRecords:function(){var F=this.records_;return this.records_=[],F}},k.prototype={enqueue:function(F){var P,U=this.observer.records_,G=U.length;if(U.length>0){var Q=V(U[G-1],F);if(Q)return void(U[G-1]=Q)}else P=this.observer,C.push(P),y||(y=!0,e(b));U[G]=F},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(F){var P=this.options;P.attributes&&F.addEventListener("DOMAttrModified",this,!0),P.characterData&&F.addEventListener("DOMCharacterDataModified",this,!0),P.childList&&F.addEventListener("DOMNodeInserted",this,!0),(P.childList||P.subtree)&&F.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(F){var P=this.options;P.attributes&&F.removeEventListener("DOMAttrModified",this,!0),P.characterData&&F.removeEventListener("DOMCharacterDataModified",this,!0),P.childList&&F.removeEventListener("DOMNodeInserted",this,!0),(P.childList||P.subtree)&&F.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(F){if(F!==this.target){this.addListeners_(F),this.transientObservedNodes.push(F);var P=a.get(F);P||a.set(F,P=[]),P.push(this)}},removeTransientObservers:function(){var F=this.transientObservedNodes;this.transientObservedNodes=[],F.forEach((function(P){this.removeListeners_(P);for(var U=a.get(P),G=0;G<U.length;G++)if(U[G]===this){U.splice(G,1);break}}),this)},handleEvent:function(F){switch(F.stopImmediatePropagation(),F.type){case"DOMAttrModified":var P=F.attrName,U=F.relatedNode.namespaceURI,G=F.target;(ee=new T("attributes",G)).attributeName=P,ee.attributeNamespace=U;var Q=null;typeof MutationEvent<"u"&&F.attrChange===MutationEvent.ADDITION||(Q=F.prevValue),x(G,(function(q){if(q.attributes&&(!q.attributeFilter||!q.attributeFilter.length||q.attributeFilter.indexOf(P)!==-1||q.attributeFilter.indexOf(U)!==-1))return q.attributeOldValue?L(Q):ee}));break;case"DOMCharacterDataModified":var ee=T("characterData",G=F.target);Q=F.prevValue,x(G,(function(q){if(q.characterData)return q.characterDataOldValue?L(Q):ee}));break;case"DOMNodeRemoved":this.addTransientObserver(F.target);case"DOMNodeInserted":G=F.relatedNode;var de,ne,ae=F.target;F.type==="DOMNodeInserted"?(de=[ae],ne=[]):(de=[],ne=[ae]);var fe=ae.previousSibling,Ae=ae.nextSibling;(ee=T("childList",G)).addedNodes=de,ee.removedNodes=ne,ee.previousSibling=fe,ee.nextSibling=Ae,x(G,(function(q){if(q.childList)return ee}))}w=E=void 0}},n||(n=R),g.exports=n},7588:function(g){var n=(function(t){var r,s=Object.prototype,a=s.hasOwnProperty,e=typeof Symbol=="function"?Symbol:{},u=e.iterator||"@@iterator",p=e.asyncIterator||"@@asyncIterator",y=e.toStringTag||"@@toStringTag";function C(q,te,he){return Object.defineProperty(q,te,{value:he,enumerable:!0,configurable:!0,writable:!0}),q[te]}try{C({},"")}catch{C=function(te,he,Ce){return te[he]=Ce}}function b(q,te,he,Ce){var ye=te&&te.prototype instanceof T?te:T,ce=Object.create(ye.prototype),N=new ae(Ce||[]);return ce._invoke=(function(J,le,Se){var Be=w;return function(Ne,je){if(Be===I)throw new Error("Generator is already running");if(Be===R){if(Ne==="throw")throw je;return Ae()}for(Se.method=Ne,Se.arg=je;;){var ke=Se.delegate;if(ke){var Ve=ee(ke,Se);if(Ve){if(Ve===M)continue;return Ve}}if(Se.method==="next")Se.sent=Se._sent=Se.arg;else if(Se.method==="throw"){if(Be===w)throw Be=R,Se.arg;Se.dispatchException(Se.arg)}else Se.method==="return"&&Se.abrupt("return",Se.arg);Be=I;var Ge=x(J,le,Se);if(Ge.type==="normal"){if(Be=Se.done?R:E,Ge.arg===M)continue;return{value:Ge.arg,done:Se.done}}Ge.type==="throw"&&(Be=R,Se.method="throw",Se.arg=Ge.arg)}}})(q,he,N),ce}function x(q,te,he){try{return{type:"normal",arg:q.call(te,he)}}catch(Ce){return{type:"throw",arg:Ce}}}t.wrap=b;var w="suspendedStart",E="suspendedYield",I="executing",R="completed",M={};function T(){}function L(){}function V(){}var k={};C(k,u,(function(){return this}));var F=Object.getPrototypeOf,P=F&&F(F(fe([])));P&&P!==s&&a.call(P,u)&&(k=P);var U=V.prototype=T.prototype=Object.create(k);function G(q){["next","throw","return"].forEach((function(te){C(q,te,(function(he){return this._invoke(te,he)}))}))}function Q(q,te){function he(ye,ce,N,J){var le=x(q[ye],q,ce);if(le.type!=="throw"){var Se=le.arg,Be=Se.value;return Be&&typeof Be=="object"&&a.call(Be,"__await")?te.resolve(Be.__await).then((function(Ne){he("next",Ne,N,J)}),(function(Ne){he("throw",Ne,N,J)})):te.resolve(Be).then((function(Ne){Se.value=Ne,N(Se)}),(function(Ne){return he("throw",Ne,N,J)}))}J(le.arg)}var Ce;this._invoke=function(ye,ce){function N(){return new te((function(J,le){he(ye,ce,J,le)}))}return Ce=Ce?Ce.then(N,N):N()}}function ee(q,te){var he=q.iterator[te.method];if(he===r){if(te.delegate=null,te.method==="throw"){if(q.iterator.return&&(te.method="return",te.arg=r,ee(q,te),te.method==="throw"))return M;te.method="throw",te.arg=new TypeError("The iterator does not provide a 'throw' method")}return M}var Ce=x(he,q.iterator,te.arg);if(Ce.type==="throw")return te.method="throw",te.arg=Ce.arg,te.delegate=null,M;var ye=Ce.arg;return ye?ye.done?(te[q.resultName]=ye.value,te.next=q.nextLoc,te.method!=="return"&&(te.method="next",te.arg=r),te.delegate=null,M):ye:(te.method="throw",te.arg=new TypeError("iterator result is not an object"),te.delegate=null,M)}function de(q){var te={tryLoc:q[0]};1 in q&&(te.catchLoc=q[1]),2 in q&&(te.finallyLoc=q[2],te.afterLoc=q[3]),this.tryEntries.push(te)}function ne(q){var te=q.completion||{};te.type="normal",delete te.arg,q.completion=te}function ae(q){this.tryEntries=[{tryLoc:"root"}],q.forEach(de,this),this.reset(!0)}function fe(q){if(q){var te=q[u];if(te)return te.call(q);if(typeof q.next=="function")return q;if(!isNaN(q.length)){var he=-1,Ce=function ye(){for(;++he<q.length;)if(a.call(q,he))return ye.value=q[he],ye.done=!1,ye;return ye.value=r,ye.done=!0,ye};return Ce.next=Ce}}return{next:Ae}}function Ae(){return{value:r,done:!0}}return L.prototype=V,C(U,"constructor",V),C(V,"constructor",L),L.displayName=C(V,y,"GeneratorFunction"),t.isGeneratorFunction=function(q){var te=typeof q=="function"&&q.constructor;return!!te&&(te===L||(te.displayName||te.name)==="GeneratorFunction")},t.mark=function(q){return Object.setPrototypeOf?Object.setPrototypeOf(q,V):(q.__proto__=V,C(q,y,"GeneratorFunction")),q.prototype=Object.create(U),q},t.awrap=function(q){return{__await:q}},G(Q.prototype),C(Q.prototype,p,(function(){return this})),t.AsyncIterator=Q,t.async=function(q,te,he,Ce,ye){ye===void 0&&(ye=Promise);var ce=new Q(b(q,te,he,Ce),ye);return t.isGeneratorFunction(te)?ce:ce.next().then((function(N){return N.done?N.value:ce.next()}))},G(U),C(U,y,"Generator"),C(U,u,(function(){return this})),C(U,"toString",(function(){return"[object Generator]"})),t.keys=function(q){var te=[];for(var he in q)te.push(he);return te.reverse(),function Ce(){for(;te.length;){var ye=te.pop();if(ye in q)return Ce.value=ye,Ce.done=!1,Ce}return Ce.done=!0,Ce}},t.values=fe,ae.prototype={constructor:ae,reset:function(q){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(ne),!q)for(var te in this)te.charAt(0)==="t"&&a.call(this,te)&&!isNaN(+te.slice(1))&&(this[te]=r)},stop:function(){this.done=!0;var q=this.tryEntries[0].completion;if(q.type==="throw")throw q.arg;return this.rval},dispatchException:function(q){if(this.done)throw q;var te=this;function he(le,Se){return ce.type="throw",ce.arg=q,te.next=le,Se&&(te.method="next",te.arg=r),!!Se}for(var Ce=this.tryEntries.length-1;Ce>=0;--Ce){var ye=this.tryEntries[Ce],ce=ye.completion;if(ye.tryLoc==="root")return he("end");if(ye.tryLoc<=this.prev){var N=a.call(ye,"catchLoc"),J=a.call(ye,"finallyLoc");if(N&&J){if(this.prev<ye.catchLoc)return he(ye.catchLoc,!0);if(this.prev<ye.finallyLoc)return he(ye.finallyLoc)}else if(N){if(this.prev<ye.catchLoc)return he(ye.catchLoc,!0)}else{if(!J)throw new Error("try statement without catch or finally");if(this.prev<ye.finallyLoc)return he(ye.finallyLoc)}}}},abrupt:function(q,te){for(var he=this.tryEntries.length-1;he>=0;--he){var Ce=this.tryEntries[he];if(Ce.tryLoc<=this.prev&&a.call(Ce,"finallyLoc")&&this.prev<Ce.finallyLoc){var ye=Ce;break}}ye&&(q==="break"||q==="continue")&&ye.tryLoc<=te&&te<=ye.finallyLoc&&(ye=null);var ce=ye?ye.completion:{};return ce.type=q,ce.arg=te,ye?(this.method="next",this.next=ye.finallyLoc,M):this.complete(ce)},complete:function(q,te){if(q.type==="throw")throw q.arg;return q.type==="break"||q.type==="continue"?this.next=q.arg:q.type==="return"?(this.rval=this.arg=q.arg,this.method="return",this.next="end"):q.type==="normal"&&te&&(this.next=te),M},finish:function(q){for(var te=this.tryEntries.length-1;te>=0;--te){var he=this.tryEntries[te];if(he.finallyLoc===q)return this.complete(he.completion,he.afterLoc),ne(he),M}},catch:function(q){for(var te=this.tryEntries.length-1;te>=0;--te){var he=this.tryEntries[te];if(he.tryLoc===q){var Ce=he.completion;if(Ce.type==="throw"){var ye=Ce.arg;ne(he)}return ye}}throw new Error("illegal catch attempt")},delegateYield:function(q,te,he){return this.delegate={iterator:fe(q),resultName:te,nextLoc:he},this.method==="next"&&(this.arg=r),M}},t})(g.exports);try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},8702:function(g,n,t){t.d(n,{Z:function(){return Ce}});var r=t(4296),s=t(6464),a=t(6881),e=t(2942),u=t(7003),p=t(3379),y=t.n(p),C=t(7795),b=t.n(C),x=t(569),w=t.n(x),E=t(3565),I=t.n(E),R=t(9216),M=t.n(R),T=t(4589),L=t.n(T),V=t(5313),k={};V.Z&&V.Z.locals&&(k.locals=V.Z.locals);var F,P=0,U={};U.styleTagTransform=L(),U.setAttributes=I(),U.insert=w().bind(null,"head"),U.domAPI=b(),U.insertStyleElement=M(),k.use=function(ye){return U.options=ye||{},P++||(F=y()(V.Z,U)),k},k.unuse=function(){P>0&&!--P&&(F(),F=null)};var G=k;function Q(ye){var ce,N;return{c:function(){ce=(0,e.bi5)("svg"),N=(0,e.bi5)("path"),(0,e.Ljt)(N,"d","M599.99999 832.000004h47.999999a24 24 0 0 0 23.999999-24V376.000013a24 24 0 0 0-23.999999-24h-47.999999a24 24 0 0 0-24 24v431.999991a24 24 0 0 0 24 24zM927.999983 160.000017h-164.819997l-67.999998-113.399998A95.999998 95.999998 0 0 0 612.819989 0.00002H411.179993a95.999998 95.999998 0 0 0-82.319998 46.599999L260.819996 160.000017H95.999999A31.999999 31.999999 0 0 0 64 192.000016v32a31.999999 31.999999 0 0 0 31.999999 31.999999h32v671.999987a95.999998 95.999998 0 0 0 95.999998 95.999998h575.999989a95.999998 95.999998 0 0 0 95.999998-95.999998V256.000015h31.999999a31.999999 31.999999 0 0 0 32-31.999999V192.000016a31.999999 31.999999 0 0 0-32-31.999999zM407.679993 101.820018A12 12 0 0 1 417.999993 96.000018h187.999996a12 12 0 0 1 10.3 5.82L651.219989 160.000017H372.779994zM799.999986 928.000002H223.999997V256.000015h575.999989z m-423.999992-95.999998h47.999999a24 24 0 0 0 24-24V376.000013a24 24 0 0 0-24-24h-47.999999a24 24 0 0 0-24 24v431.999991a24 24 0 0 0 24 24z"),(0,e.Ljt)(ce,"class","vc-icon-delete"),(0,e.Ljt)(ce,"viewBox","0 0 1024 1024"),(0,e.Ljt)(ce,"width","200"),(0,e.Ljt)(ce,"height","200")},m:function(J,le){(0,e.$Tr)(J,ce,le),(0,e.R3I)(ce,N)},d:function(J){J&&(0,e.ogt)(ce)}}}function ee(ye){var ce,N,J;return{c:function(){ce=(0,e.bi5)("svg"),N=(0,e.bi5)("path"),J=(0,e.bi5)("path"),(0,e.Ljt)(N,"d","M874.154197 150.116875A511.970373 511.970373 0 1 0 1023.993986 511.991687a511.927744 511.927744 0 0 0-149.839789-361.874812z m-75.324866 648.382129A405.398688 405.398688 0 1 1 917.422301 511.991687a405.313431 405.313431 0 0 1-118.59297 286.507317z"),(0,e.Ljt)(J,"d","M725.039096 299.274605a54.351559 54.351559 0 0 0-76.731613 0l-135.431297 135.431297L377.274375 299.274605a54.436817 54.436817 0 0 0-76.944756 76.987385l135.388668 135.431297-135.388668 135.473925a54.436817 54.436817 0 0 0 76.944756 76.987385l135.388668-135.431297 135.431297 135.473926a54.436817 54.436817 0 0 0 76.731613-76.987385l-135.388668-135.473926 135.388668-135.431296a54.479445 54.479445 0 0 0 0.213143-77.030014z"),(0,e.Ljt)(ce,"viewBox","0 0 1024 1024"),(0,e.Ljt)(ce,"width","200"),(0,e.Ljt)(ce,"height","200")},m:function(le,Se){(0,e.$Tr)(le,ce,Se),(0,e.R3I)(ce,N),(0,e.R3I)(ce,J)},d:function(le){le&&(0,e.ogt)(ce)}}}function de(ye){var ce,N;return{c:function(){ce=(0,e.bi5)("svg"),N=(0,e.bi5)("path"),(0,e.Ljt)(N,"fill-rule","evenodd"),(0,e.Ljt)(N,"d","M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"),(0,e.Ljt)(ce,"class","vc-icon-copy"),(0,e.Ljt)(ce,"viewBox","0 0 16 16")},m:function(J,le){(0,e.$Tr)(J,ce,le),(0,e.R3I)(ce,N)},d:function(J){J&&(0,e.ogt)(ce)}}}function ne(ye){var ce,N;return{c:function(){ce=(0,e.bi5)("svg"),N=(0,e.bi5)("path"),(0,e.Ljt)(N,"fill-rule","evenodd"),(0,e.Ljt)(N,"d","M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"),(0,e.Ljt)(ce,"class","vc-icon-suc"),(0,e.Ljt)(ce,"viewBox","0 0 16 16")},m:function(J,le){(0,e.$Tr)(J,ce,le),(0,e.R3I)(ce,N)},d:function(J){J&&(0,e.ogt)(ce)}}}function ae(ye){var ce,N,J;return{c:function(){ce=(0,e.bi5)("svg"),N=(0,e.bi5)("path"),J=(0,e.bi5)("path"),(0,e.Ljt)(N,"d","M776.533333 1024 162.133333 1024C72.533333 1024 0 951.466667 0 861.866667L0 247.466667C0 157.866667 72.533333 85.333333 162.133333 85.333333L469.333333 85.333333c25.6 0 42.666667 17.066667 42.666667 42.666667s-17.066667 42.666667-42.666667 42.666667L162.133333 170.666667C119.466667 170.666667 85.333333 204.8 85.333333 247.466667l0 610.133333c0 42.666667 34.133333 76.8 76.8 76.8l610.133333 0c42.666667 0 76.8-34.133333 76.8-76.8L849.066667 554.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 307.2C938.666667 951.466667 866.133333 1024 776.533333 1024z"),(0,e.Ljt)(J,"d","M256 810.666667c-12.8 0-21.333333-4.266667-29.866667-12.8C217.6 789.333333 213.333333 772.266667 213.333333 759.466667l42.666667-213.333333c0-8.533333 4.266667-17.066667 12.8-21.333333l512-512c17.066667-17.066667 42.666667-17.066667 59.733333 0l170.666667 170.666667c17.066667 17.066667 17.066667 42.666667 0 59.733333l-512 512c-4.266667 4.266667-12.8 8.533333-21.333333 12.8l-213.333333 42.666667C260.266667 810.666667 260.266667 810.666667 256 810.666667zM337.066667 576l-25.6 136.533333 136.533333-25.6L921.6 213.333333 810.666667 102.4 337.066667 576z"),(0,e.Ljt)(ce,"class","vc-icon-edit"),(0,e.Ljt)(ce,"viewBox","0 0 1024 1024"),(0,e.Ljt)(ce,"width","200"),(0,e.Ljt)(ce,"height","200")},m:function(le,Se){(0,e.$Tr)(le,ce,Se),(0,e.R3I)(ce,N),(0,e.R3I)(ce,J)},d:function(le){le&&(0,e.ogt)(ce)}}}function fe(ye){var ce,N;return{c:function(){ce=(0,e.bi5)("svg"),N=(0,e.bi5)("path"),(0,e.Ljt)(N,"d","M581.338005 987.646578c-2.867097 4.095853-4.573702 8.669555-8.191705 12.287558a83.214071 83.214071 0 0 1-60.959939 24.029001 83.214071 83.214071 0 0 1-61.028203-24.029001c-3.618003-3.618003-5.324608-8.191705-8.123441-12.15103L24.370323 569.050448a83.418864 83.418864 0 0 1 117.892289-117.89229l369.923749 369.92375L1308.829682 24.438587A83.418864 83.418864 0 0 1 1426.721971 142.194348L581.338005 987.646578z"),(0,e.Ljt)(ce,"class","vc-icon-don"),(0,e.Ljt)(ce,"viewBox","0 0 1501 1024"),(0,e.Ljt)(ce,"width","200"),(0,e.Ljt)(ce,"height","200")},m:function(J,le){(0,e.$Tr)(J,ce,le),(0,e.R3I)(ce,N)},d:function(J){J&&(0,e.ogt)(ce)}}}function Ae(ye){var ce,N;return{c:function(){ce=(0,e.bi5)("svg"),N=(0,e.bi5)("path"),(0,e.Ljt)(N,"d","M894.976 574.464q0 78.848-29.696 148.48t-81.408 123.392-121.856 88.064-151.04 41.472q-5.12 1.024-9.216 1.536t-9.216 0.512l-177.152 0q-17.408 0-34.304-6.144t-30.208-16.896-22.016-25.088-8.704-29.696 8.192-29.696 21.504-24.576 29.696-16.384 33.792-6.144l158.72 1.024q54.272 0 102.4-19.968t83.968-53.76 56.32-79.36 20.48-97.792q0-49.152-18.432-92.16t-50.688-76.8-75.264-54.784-93.184-26.112q-2.048 0-2.56 0.512t-2.56 0.512l-162.816 0 0 80.896q0 17.408-13.824 25.6t-44.544-10.24q-8.192-5.12-26.112-17.92t-41.984-30.208-50.688-36.864l-51.2-38.912q-15.36-12.288-26.624-22.016t-11.264-24.064q0-12.288 12.8-25.6t29.184-26.624q18.432-15.36 44.032-35.84t50.688-39.936 45.056-35.328 28.16-22.016q24.576-17.408 39.936-7.168t16.384 30.72l0 81.92 162.816 0q5.12 0 10.752 1.024t10.752 2.048q79.872 8.192 149.504 41.984t121.344 87.552 80.896 123.392 29.184 147.456z"),(0,e.Ljt)(ce,"class","vc-icon-cancel"),(0,e.Ljt)(ce,"viewBox","0 0 1024 1024"),(0,e.Ljt)(ce,"width","200"),(0,e.Ljt)(ce,"height","200")},m:function(J,le){(0,e.$Tr)(J,ce,le),(0,e.R3I)(ce,N)},d:function(J){J&&(0,e.ogt)(ce)}}}function q(ye){var ce,N,J,le,Se,Be,Ne,je,ke,Ve=ye[0]==="delete"&&Q(),Ge=ye[0]==="clear"&&ee(),We=ye[0]==="copy"&&de(),Ke=ye[0]==="success"&&ne(),Oe=ye[0]==="edit"&&ae(),qe=ye[0]==="done"&&fe(),Xe=ye[0]==="cancel"&&Ae();return{c:function(){ce=(0,e.bGB)("i"),Ve&&Ve.c(),N=(0,e.DhX)(),Ge&&Ge.c(),J=(0,e.DhX)(),We&&We.c(),le=(0,e.DhX)(),Ke&&Ke.c(),Se=(0,e.DhX)(),Oe&&Oe.c(),Be=(0,e.DhX)(),qe&&qe.c(),Ne=(0,e.DhX)(),Xe&&Xe.c(),(0,e.Ljt)(ce,"class","vc-icon")},m:function(Ye,ht){(0,e.$Tr)(Ye,ce,ht),Ve&&Ve.m(ce,null),(0,e.R3I)(ce,N),Ge&&Ge.m(ce,null),(0,e.R3I)(ce,J),We&&We.m(ce,null),(0,e.R3I)(ce,le),Ke&&Ke.m(ce,null),(0,e.R3I)(ce,Se),Oe&&Oe.m(ce,null),(0,e.R3I)(ce,Be),qe&&qe.m(ce,null),(0,e.R3I)(ce,Ne),Xe&&Xe.m(ce,null),je||(ke=(0,e.oLt)(ce,"click",ye[1]),je=!0)},p:function(Ye,ht){ht[0],Ye[0]==="delete"?Ve||((Ve=Q()).c(),Ve.m(ce,N)):Ve&&(Ve.d(1),Ve=null),Ye[0]==="clear"?Ge||((Ge=ee()).c(),Ge.m(ce,J)):Ge&&(Ge.d(1),Ge=null),Ye[0]==="copy"?We||((We=de()).c(),We.m(ce,le)):We&&(We.d(1),We=null),Ye[0]==="success"?Ke||((Ke=ne()).c(),Ke.m(ce,Se)):Ke&&(Ke.d(1),Ke=null),Ye[0]==="edit"?Oe||((Oe=ae()).c(),Oe.m(ce,Be)):Oe&&(Oe.d(1),Oe=null),Ye[0]==="done"?qe||((qe=fe()).c(),qe.m(ce,Ne)):qe&&(qe.d(1),qe=null),Ye[0]==="cancel"?Xe||((Xe=Ae()).c(),Xe.m(ce,null)):Xe&&(Xe.d(1),Xe=null)},i:e.ZTd,o:e.ZTd,d:function(Ye){Ye&&(0,e.ogt)(ce),Ve&&Ve.d(),Ge&&Ge.d(),We&&We.d(),Ke&&Ke.d(),Oe&&Oe.d(),qe&&qe.d(),Xe&&Xe.d(),je=!1,ke()}}}function te(ye,ce,N){var J=ce.name;return(0,u.H3)((function(){G.use()})),(0,u.ev)((function(){G.unuse()})),ye.$$set=function(le){"name"in le&&N(0,J=le.name)},[J,function(le){e.cKT.call(this,ye,le)}]}var he=(function(ye){function ce(N){var J;return J=ye.call(this)||this,(0,e.S1n)((0,s.Z)(J),N,te,q,e.N8,{name:0}),J}return(0,a.Z)(ce,ye),(0,r.Z)(ce,[{key:"name",get:function(){return this.$$.ctx[0]},set:function(N){this.$$set({name:N}),(0,e.yl1)()}}]),ce})(e.f_C),Ce=he},3903:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(6464),_babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6881),svelte_internal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2942),svelte__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7003),_component_icon_icon_svelte__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8702),_logTool__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8665),_log_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5629),_logCommand_less__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3411);function get_each_context(g,n,t){var r=g.slice();return r[28]=n[t],r}function create_if_block_2(g){var n,t,r;return{c:function(){(n=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("li")).textContent="Close",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(n,"class","vc-cmd-prompted-hide")},m:function(s,a){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(s,n,a),t||(r=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(n,"click",g[5]),t=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZTd,d:function(s){s&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(n),t=!1,r()}}}function create_else_block(g){var n;return{c:function(){(n=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("li")).textContent="No Prompted"},m:function(t,r){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(t,n,r)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZTd,d:function(t){t&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(n)}}}function create_each_block(g){var n,t,r,s,a=g[28].text+"";function e(){return g[14](g[28])}return{c:function(){n=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("li"),t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.fLW)(a)},m:function(u,p){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(u,n,p),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(n,t),r||(s=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(n,"click",e),r=!0)},p:function(u,p){g=u,8&p&&a!==(a=g[28].text+"")&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.rTO)(t,a)},d:function(u){u&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(n),r=!1,s()}}}function create_if_block_1(g){var n,t,r,s,a;return t=new _component_icon_icon_svelte__WEBPACK_IMPORTED_MODULE_2__.Z({props:{name:"clear"}}),{c:function(){n=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("div"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YCL)(t.$$.fragment),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(n,"class","vc-cmd-clear-btn")},m:function(e,u){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(e,n,u),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.yef)(t,n,null),r=!0,s||(a=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(n,"click",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT7)(g[17])),s=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZTd,i:function(e){r||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(t.$$.fragment,e),r=!0)},o:function(e){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(t.$$.fragment,e),r=!1},d:function(e){e&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(n),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vpE)(t),s=!1,a()}}}function create_if_block(g){var n,t,r,s,a;return t=new _component_icon_icon_svelte__WEBPACK_IMPORTED_MODULE_2__.Z({props:{name:"clear"}}),{c:function(){n=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("div"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YCL)(t.$$.fragment),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(n,"class","vc-cmd-clear-btn")},m:function(e,u){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(e,n,u),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.yef)(t,n,null),r=!0,s||(a=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(n,"click",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT7)(g[19])),s=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZTd,i:function(e){r||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(t.$$.fragment,e),r=!0)},o:function(e){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(t.$$.fragment,e),r=!1},d:function(e){e&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(n),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vpE)(t),s=!1,a()}}}function create_fragment(g){for(var n,t,r,s,a,e,u,p,y,C,b,x,w,E,I,R,M,T,L,V,k,F=g[3].length>0&&create_if_block_2(g),P=g[3],U=[],G=0;G<P.length;G+=1)U[G]=create_each_block(get_each_context(g,P,G));var Q=null;P.length||(Q=create_else_block());var ee=g[1].length>0&&create_if_block_1(g),de=g[4].length>0&&create_if_block(g);return{c:function(){n=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("form"),t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("ul"),F&&F.c(),r=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)();for(var ne=0;ne<U.length;ne+=1)U[ne].c();Q&&Q.c(),s=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),a=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("div"),e=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("textarea"),u=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),ee&&ee.c(),p=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),(y=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("button")).textContent="OK",C=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),b=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("form"),x=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("ul"),w=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),E=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("div"),I=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("textarea"),R=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),de&&de.c(),M=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),(T=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("button")).textContent="Filter",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(t,"class","vc-cmd-prompted"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(t,"style",g[2]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(e,"class","vc-cmd-input"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(e,"placeholder","command..."),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(a,"class","vc-cmd-input-wrap"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(y,"class","vc-cmd-btn"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(y,"type","submit"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(n,"class","vc-cmd"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(x,"class","vc-cmd-prompted"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(I,"class","vc-cmd-input"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(I,"placeholder","filter..."),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(E,"class","vc-cmd-input-wrap"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(T,"class","vc-cmd-btn"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(T,"type","submit"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(b,"class","vc-cmd vc-filter")},m:function(ne,ae){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(ne,n,ae),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(n,t),F&&F.m(t,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(t,r);for(var fe=0;fe<U.length;fe+=1)U[fe].m(t,null);Q&&Q.m(t,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(n,s),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(n,a),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(a,e),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.BmG)(e,g[1]),g[16](e),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(a,u),ee&&ee.m(a,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(n,p),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(n,y),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(ne,C,ae),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(ne,b,ae),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(b,x),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(b,w),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(b,E),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(E,I),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.BmG)(I,g[4]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(E,R),de&&de.m(E,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(b,M),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(b,T),L=!0,V||(k=[(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(e,"input",g[15]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(e,"keydown",g[10]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(e,"keyup",g[11]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(e,"focus",g[8]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(e,"blur",g[9]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(n,"submit",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT7)(g[12])),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(I,"input",g[18]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(b,"submit",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT7)(g[13]))],V=!0)},p:function(ne,ae){var fe=ae[0];if(ne[3].length>0?F?F.p(ne,fe):((F=create_if_block_2(ne)).c(),F.m(t,r)):F&&(F.d(1),F=null),136&fe){var Ae;for(P=ne[3],Ae=0;Ae<P.length;Ae+=1){var q=get_each_context(ne,P,Ae);U[Ae]?U[Ae].p(q,fe):(U[Ae]=create_each_block(q),U[Ae].c(),U[Ae].m(t,null))}for(;Ae<U.length;Ae+=1)U[Ae].d(1);U.length=P.length,!P.length&&Q?Q.p(ne,fe):P.length?Q&&(Q.d(1),Q=null):((Q=create_else_block()).c(),Q.m(t,null))}(!L||4&fe)&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(t,"style",ne[2]),2&fe&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.BmG)(e,ne[1]),ne[1].length>0?ee?(ee.p(ne,fe),2&fe&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(ee,1)):((ee=create_if_block_1(ne)).c(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(ee,1),ee.m(a,null)):ee&&((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.dvw)(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(ee,1,1,(function(){ee=null})),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gbL)()),16&fe&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.BmG)(I,ne[4]),ne[4].length>0?de?(de.p(ne,fe),16&fe&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(de,1)):((de=create_if_block(ne)).c(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(de,1),de.m(E,null)):de&&((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.dvw)(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(de,1,1,(function(){de=null})),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gbL)())},i:function(ne){L||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(ee),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(de),L=!0)},o:function(ne){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(ee),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(de),L=!1},d:function(ne){ne&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(n),F&&F.d(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.RMB)(U,ne),Q&&Q.d(),g[16](null),ee&&ee.d(),ne&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(C),ne&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(b),de&&de.d(),V=!1,(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.j7q)(k)}}}function instance($$self,$$props,$$invalidate){var module=_log_model__WEBPACK_IMPORTED_MODULE_3__.W.getSingleton(_log_model__WEBPACK_IMPORTED_MODULE_3__.W,"VConsoleLogModel"),cachedObjKeys={},dispatch=(0,svelte__WEBPACK_IMPORTED_MODULE_1__.x)(),cmdElement,cmdValue="",promptedStyle="",promptedList=[],filterValue="";(0,svelte__WEBPACK_IMPORTED_MODULE_1__.H3)((function(){_logCommand_less__WEBPACK_IMPORTED_MODULE_4__.Z.use()})),(0,svelte__WEBPACK_IMPORTED_MODULE_1__.ev)((function(){_logCommand_less__WEBPACK_IMPORTED_MODULE_4__.Z.unuse()}));var evalCommand=function(g){module.evalCommand(g)},moveCursorToPos=function(g,n){g.setSelectionRange&&setTimeout((function(){g.setSelectionRange(n,n)}),1)},clearPromptedList=function(){$$invalidate(2,promptedStyle="display: none;"),$$invalidate(3,promptedList=[])},updatePromptedList=function updatePromptedList(identifier){if(cmdValue!==""){identifier||(identifier=(0,_logTool__WEBPACK_IMPORTED_MODULE_5__.oj)(cmdValue));var objName="window",keyName=cmdValue;if(identifier.front.text!=="."&&identifier.front.text!=="["||(objName=identifier.front.before,keyName=identifier.back.text!==""?identifier.back.before:identifier.front.after),keyName=keyName.replace(/(^['"]+)|(['"']+$)/g,""),!cachedObjKeys[objName])try{cachedObjKeys[objName]=Object.getOwnPropertyNames(eval("("+objName+")")).sort()}catch(g){}try{if(cachedObjKeys[objName])for(var i=0;i<cachedObjKeys[objName].length&&!(promptedList.length>=100);i++){var key=String(cachedObjKeys[objName][i]),keyPattern=new RegExp("^"+keyName,"i");if(keyPattern.test(key)){var completeCmd=objName;identifier.front.text==="."||identifier.front.text===""?completeCmd+="."+key:identifier.front.text==="["&&(completeCmd+="['"+key+"']"),promptedList.push({text:key,value:completeCmd})}}}catch(g){}if(promptedList.length>0){var m=Math.min(200,31*(promptedList.length+1));$$invalidate(2,promptedStyle="display: block; height: "+m+"px; margin-top: "+(-m-2)+"px;"),$$invalidate(3,promptedList)}else clearPromptedList()}else clearPromptedList()},autoCompleteBrackets=function(g,n){if(!(n===8||n===46)&&g.front.after==="")switch(g.front.text){case"[":return $$invalidate(1,cmdValue+="]"),void moveCursorToPos(cmdElement,cmdValue.length-1);case"(":return $$invalidate(1,cmdValue+=")"),void moveCursorToPos(cmdElement,cmdValue.length-1);case"{":return $$invalidate(1,cmdValue+="}"),void moveCursorToPos(cmdElement,cmdValue.length-1)}},dispatchFilterEvent=function(){dispatch("filterText",{filterText:filterValue})},onTapClearText=function(g){g==="cmd"?($$invalidate(1,cmdValue=""),clearPromptedList()):g==="filter"&&($$invalidate(4,filterValue=""),dispatchFilterEvent())},onTapPromptedItem=function onTapPromptedItem(item){var type="";try{type=eval("typeof "+item.value)}catch(g){}$$invalidate(1,cmdValue=item.value+(type==="function"?"()":"")),clearPromptedList()},onCmdFocus=function(){updatePromptedList()},onCmdBlur=function(){},onCmdKeyDown=function(g){g.keyCode===13&&(g.preventDefault(),onCmdSubmit())},onCmdKeyUp=function(g){$$invalidate(3,promptedList=[]);var n=(0,_logTool__WEBPACK_IMPORTED_MODULE_5__.oj)(g.target.value);autoCompleteBrackets(n,g.keyCode),updatePromptedList(n)},onCmdSubmit=function(){cmdValue!==""&&evalCommand(cmdValue),clearPromptedList()},onFilterSubmit=function(g){dispatchFilterEvent()},click_handler=function(g){return onTapPromptedItem(g)};function textarea0_input_handler(){cmdValue=this.value,$$invalidate(1,cmdValue)}function textarea0_binding(g){svelte_internal__WEBPACK_IMPORTED_MODULE_0__.VnY[g?"unshift":"push"]((function(){$$invalidate(0,cmdElement=g)}))}var click_handler_1=function(){return onTapClearText("cmd")};function textarea1_input_handler(){filterValue=this.value,$$invalidate(4,filterValue)}var click_handler_2=function(){return onTapClearText("filter")};return[cmdElement,cmdValue,promptedStyle,promptedList,filterValue,clearPromptedList,onTapClearText,onTapPromptedItem,onCmdFocus,onCmdBlur,onCmdKeyDown,onCmdKeyUp,onCmdSubmit,onFilterSubmit,click_handler,textarea0_input_handler,textarea0_binding,click_handler_1,textarea1_input_handler,click_handler_2]}var LogCommand=(function(g){function n(t){var r;return r=g.call(this)||this,(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.S1n)((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.Z)(r),t,instance,create_fragment,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.N8,{}),r}return(0,_babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_6__.Z)(n,g),n})(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.f_C);__webpack_exports__.Z=LogCommand},4687:function(g,n,t){t.d(n,{x:function(){return s}});var r=t(3313),s=(function(){var a=(0,r.fZ)({updateTime:0}),e=a.subscribe,u=a.set,p=a.update;return{subscribe:e,set:u,update:p,updateTime:function(){p((function(y){return y.updateTime=Date.now(),y}))}}})()},643:function(g,n,t){t.d(n,{N:function(){return r}});var r=(function(){function s(){this._onDataUpdateCallbacks=[]}return s.getSingleton=function(a,e){return e||(e=a.toString()),s.singleton[e]||(s.singleton[e]=new a),s.singleton[e]},s})();r.singleton={}},5103:function(g,n,t){function r(N){var J=N>0?new Date(N):new Date,le=J.getDate()<10?"0"+J.getDate():J.getDate(),Se=J.getMonth()<9?"0"+(J.getMonth()+1):J.getMonth()+1,Be=J.getFullYear(),Ne=J.getHours()<10?"0"+J.getHours():J.getHours(),je=J.getMinutes()<10?"0"+J.getMinutes():J.getMinutes(),ke=J.getSeconds()<10?"0"+J.getSeconds():J.getSeconds(),Ve=J.getMilliseconds()<10?"0"+J.getMilliseconds():J.getMilliseconds();return Ve<100&&(Ve="0"+Ve),{time:+J,year:Be,month:Se,day:le,hour:Ne,minute:je,second:ke,millisecond:Ve}}function s(N){return Object.prototype.toString.call(N)==="[object Number]"}function a(N){return typeof N=="bigint"}function e(N){return typeof N=="string"}function u(N){return Object.prototype.toString.call(N)==="[object Array]"}function p(N){return typeof N=="boolean"}function y(N){return N===void 0}function C(N){return N===null}function b(N){return typeof N=="symbol"}function x(N){return!(Object.prototype.toString.call(N)!=="[object Object]"&&(s(N)||a(N)||e(N)||p(N)||u(N)||C(N)||w(N)||y(N)||b(N)))}function w(N){return typeof N=="function"}function E(N){return typeof HTMLElement=="object"?N instanceof HTMLElement:N&&typeof N=="object"&&N!==null&&N.nodeType===1&&typeof N.nodeName=="string"}function I(N){var J=Object.prototype.toString.call(N);return J==="[object Window]"||J==="[object DOMWindow]"||J==="[object global]"}function R(N){return N!=null&&typeof N!="string"&&typeof N!="boolean"&&typeof N!="number"&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="bigint"&&typeof Symbol<"u"&&typeof N[Symbol.iterator]=="function"}function M(N){return Object.prototype.toString.call(N).replace(/\[object (.*)\]/,"$1")}t.d(n,{C4:function(){return a},DV:function(){return L},FJ:function(){return I},Ft:function(){return C},HD:function(){return e},H_:function(){return ye},KL:function(){return ee},Kn:function(){return x},MH:function(){return fe},PO:function(){return V},QI:function(){return Ce},QK:function(){return Ae},TW:function(){return R},_3:function(){return r},_D:function(){return q},cF:function(){return he},hZ:function(){return Q},hj:function(){return s},id:function(){return de},jn:function(){return p},kJ:function(){return u},kK:function(){return E},mf:function(){return w},o8:function(){return y},po:function(){return te},qr:function(){return ae},qt:function(){return ce},rE:function(){return P},yk:function(){return b},zl:function(){return M}});var T=/(function|class) ([^ \{\()}]{1,})[\(| ]/;function L(N){var J;if(N==null)return"";var le=T.exec((N==null||(J=N.constructor)==null?void 0:J.toString())||"");return le&&le.length>1?le[2]:""}function V(N){var J,le=Object.prototype.hasOwnProperty;if(!N||typeof N!="object"||N.nodeType||I(N))return!1;try{if(N.constructor&&!le.call(N,"constructor")&&!le.call(N.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}for(J in N);return J===void 0||le.call(N,J)}var k=/[\n\t]/g,F=function(N){return{"\n":"\\n","	":"\\t"}[N]};function P(N){return typeof N!="string"?N:String(N).replace(k,F)}var U=function(N,J){J===void 0&&(J=0);var le="";return e(N)?(J>0&&(N=de(N,J)),le+='"'+P(N)+'"'):b(N)?le+=String(N).replace(/^Symbol\((.*)\)$/i,'Symbol("$1")'):w(N)?le+=(N.name||"function")+"()":a(N)?le+=String(N)+"n":le+=String(N),le},G=function N(J,le,Se){if(Se===void 0&&(Se=0),x(J)||u(J))if(le.circularFinder(J)){var Be="";if(u(J))Be="(Circular Array)";else if(x(J)){var Ne;Be="(Circular "+(((Ne=J.constructor)==null?void 0:Ne.name)||"Object")+")"}le.ret+=le.standardJSON?'"'+Be+'"':Be}else{var je="",ke="";if(le.pretty){for(var Ve=0;Ve<=Se;Ve++)je+="  ";ke=`
`}var Ge="{",We="}";u(J)&&(Ge="[",We="]"),le.ret+=Ge+ke;for(var Ke=fe(J),Oe=0;Oe<Ke.length;Oe++){var qe=Ke[Oe];le.ret+=je;try{u(J)||(x(qe)||u(qe)||b(qe)?le.ret+=Object.prototype.toString.call(qe):e(qe)&&le.standardJSON?le.ret+='"'+qe+'"':le.ret+=qe,le.ret+=": ")}catch{continue}try{var Xe=J[qe];if(u(Xe))le.maxDepth>-1&&Se>=le.maxDepth?le.ret+="Array("+Xe.length+")":N(Xe,le,Se+1);else if(x(Xe)){var Ye;le.maxDepth>-1&&Se>=le.maxDepth?le.ret+=(((Ye=Xe.constructor)==null?void 0:Ye.name)||"Object")+" {}":N(Xe,le,Se+1)}else le.ret+=U(Xe,le.keyMaxLen)}catch{le.ret+=le.standardJSON?'"(PARSE_ERROR)"':"(PARSE_ERROR)"}if(le.keyMaxLen>0&&le.ret.length>=10*le.keyMaxLen){le.ret+=", (...)";break}Oe<Ke.length-1&&(le.ret+=", "),le.ret+=ke}le.ret+=je.substring(0,je.length-2)+We}else le.ret+=U(J,le.keyMaxLen)};function Q(N,J){J===void 0&&(J={maxDepth:-1,keyMaxLen:-1,pretty:!1,standardJSON:!1});var le,Se=Object.assign({ret:"",maxDepth:-1,keyMaxLen:-1,pretty:!1,standardJSON:!1,circularFinder:(le=new WeakSet,function(Be){if(typeof Be=="object"&&Be!==null){if(le.has(Be))return!0;le.add(Be)}return!1})},J);return G(N,Se),Se.ret}function ee(N){return N<=0?"":N>=1e6?(N/1e3/1e3).toFixed(1)+" MB":N>=1e3?(N/1e3).toFixed(1)+" KB":N+" B"}function de(N,J){return N.length>J&&(N=N.substring(0,J)+"...("+ee((function(le){try{return encodeURI(le).split(/%(?:u[0-9A-F]{2})?[0-9A-F]{2}|./).length-1}catch{return 0}})(N))+")"),N}var ne=function(N,J){return String(N).localeCompare(String(J),void 0,{numeric:!0,sensitivity:"base"})};function ae(N){return N.sort(ne)}function fe(N){return x(N)||u(N)?Object.keys(N):[]}function Ae(N){var J=fe(N),le=(function(Se){return x(Se)||u(Se)?Object.getOwnPropertyNames(Se):[]})(N);return le.filter((function(Se){return J.indexOf(Se)===-1}))}function q(N){return x(N)||u(N)?Object.getOwnPropertySymbols(N):[]}function te(N,J){window.localStorage&&(N="vConsole_"+N,localStorage.setItem(N,J))}function he(N){if(window.localStorage)return N="vConsole_"+N,localStorage.getItem(N)}function Ce(N){return N===void 0&&(N=""),"__vc_"+N+Math.random().toString(36).substring(2,8)}function ye(){return typeof window<"u"&&!!window.__wxConfig&&!!window.wx&&!!window.__virtualDOM__}function ce(N){if(ye()&&typeof window.wx[N]=="function")try{for(var J,le=arguments.length,Se=new Array(le>1?le-1:0),Be=1;Be<le;Be++)Se[Be-1]=arguments[Be];var Ne=(J=window.wx[N]).call.apply(J,[window.wx].concat(Se));return Ne}catch(je){return void console.debug("[vConsole] Fail to call wx."+N+"():",je)}}},5629:function(g,n,t){t.d(n,{W:function(){return E}});var r=t(8270),s=t(6881),a=t(5103),e=t(643),u=t(4687),p=t(8665),y=t(9923);function C(I,R){var M=Object.keys(I);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(I);R&&(T=T.filter((function(L){return Object.getOwnPropertyDescriptor(I,L).enumerable}))),M.push.apply(M,T)}return M}function b(I){for(var R=1;R<arguments.length;R++){var M=arguments[R]!=null?arguments[R]:{};R%2?C(Object(M),!0).forEach((function(T){(0,r.Z)(I,T,M[T])})):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(M)):C(Object(M)).forEach((function(T){Object.defineProperty(I,T,Object.getOwnPropertyDescriptor(M,T))}))}return I}function x(I,R){var M=typeof Symbol<"u"&&I[Symbol.iterator]||I["@@iterator"];if(M)return(M=M.call(I)).next.bind(M);if(Array.isArray(I)||(M=(function(L,V){if(L){if(typeof L=="string")return w(L,V);var k=Object.prototype.toString.call(L).slice(8,-1);if(k==="Object"&&L.constructor&&(k=L.constructor.name),k==="Map"||k==="Set")return Array.from(L);if(k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return w(L,V)}})(I))||R){M&&(I=M);var T=0;return function(){return T>=I.length?{done:!0}:{done:!1,value:I[T++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w(I,R){(R==null||R>I.length)&&(R=I.length);for(var M=0,T=new Array(R);M<R;M++)T[M]=I[M];return T}var E=(function(I){function R(){for(var T,L=arguments.length,V=new Array(L),k=0;k<L;k++)V[k]=arguments[k];return(T=I.call.apply(I,[this].concat(V))||this).LOG_METHODS=["log","info","warn","debug","error"],T.ADDED_LOG_PLUGIN_ID=[],T.maxLogNumber=1e3,T.logCounter=0,T.groupLevel=0,T.groupLabelCollapsedStack=[],T.pluginPattern=void 0,T.logQueue=[],T.flushLogScheduled=!1,T.origConsole={},T}(0,s.Z)(R,I);var M=R.prototype;return M.bindPlugin=function(T){return!(this.ADDED_LOG_PLUGIN_ID.indexOf(T)>-1)&&(this.ADDED_LOG_PLUGIN_ID.length===0&&this.mockConsole(),y.O.create(T),this.ADDED_LOG_PLUGIN_ID.push(T),this.pluginPattern=new RegExp("^\\[("+this.ADDED_LOG_PLUGIN_ID.join("|")+")\\]$","i"),!0)},M.unbindPlugin=function(T){var L=this.ADDED_LOG_PLUGIN_ID.indexOf(T);return L!==-1&&(this.ADDED_LOG_PLUGIN_ID.splice(L,1),y.O.delete(T),this.ADDED_LOG_PLUGIN_ID.length===0&&this.unmockConsole(),!0)},M.mockConsole=function(){var T=this;typeof this.origConsole.log!="function"&&(window.console?(this.LOG_METHODS.map((function(L){T.origConsole[L]=window.console[L]})),this.origConsole.time=window.console.time,this.origConsole.timeEnd=window.console.timeEnd,this.origConsole.clear=window.console.clear,this.origConsole.group=window.console.group,this.origConsole.groupCollapsed=window.console.groupCollapsed,this.origConsole.groupEnd=window.console.groupEnd):window.console={},this._mockConsoleLog(),this._mockConsoleTime(),this._mockConsoleGroup(),this._mockConsoleClear(),window._vcOrigConsole=this.origConsole)},M._mockConsoleLog=function(){var T=this;this.LOG_METHODS.map((function(L){window.console[L]=(function(){for(var V=arguments.length,k=new Array(V),F=0;F<V;F++)k[F]=arguments[F];T.addLog({type:L,origData:k||[]})}).bind(window.console)}))},M._mockConsoleTime=function(){var T=this,L={};window.console.time=(function(V){V===void 0&&(V=""),L[V]=Date.now()}).bind(window.console),window.console.timeEnd=(function(V){V===void 0&&(V="");var k=L[V],F=0;k&&(F=Date.now()-k,delete L[V]),T.addLog({type:"log",origData:[V+": "+F+"ms"]})}).bind(window.console)},M._mockConsoleGroup=function(){var T=this,L=function(V){return(function(k){k===void 0&&(k="console.group");var F=Symbol(k);T.groupLabelCollapsedStack.push({label:F,collapsed:V}),T.addLog({type:"log",origData:[k],isGroupHeader:V?2:1,isGroupCollapsed:!1},{noOrig:!0}),T.groupLevel++,V?T.origConsole.groupCollapsed(k):T.origConsole.group(k)}).bind(window.console)};window.console.group=L(!1),window.console.groupCollapsed=L(!0),window.console.groupEnd=(function(){T.groupLabelCollapsedStack.pop(),T.groupLevel=Math.max(0,T.groupLevel-1),T.origConsole.groupEnd()}).bind(window.console)},M._mockConsoleClear=function(){var T=this;window.console.clear=(function(){T.resetGroup(),T.clearLog();for(var L=arguments.length,V=new Array(L),k=0;k<L;k++)V[k]=arguments[k];T.callOriginalConsole.apply(T,["clear"].concat(V))}).bind(window.console)},M.unmockConsole=function(){for(var T in this.origConsole)window.console[T]=this.origConsole[T],delete this.origConsole[T];window._vcOrigConsole&&delete window._vcOrigConsole},M.callOriginalConsole=function(T){if(typeof this.origConsole[T]=="function"){for(var L=arguments.length,V=new Array(L>1?L-1:0),k=1;k<L;k++)V[k-1]=arguments[k];this.origConsole[T].apply(window.console,V)}},M.resetGroup=function(){for(;this.groupLevel>0;)console.groupEnd()},M.clearLog=function(){var T=y.O.getAll();for(var L in T)this.clearPluginLog(L)},M.clearPluginLog=function(T){var L=this.logQueue;this.logQueue=[];for(var V,k=x(L);!(V=k()).done;){var F=V.value;this._extractPluginIdByLog(F)!==T&&this.logQueue.push(F)}y.O.get(T).update((function(P){return P.logList.length=0,P})),u.x.updateTime()},M.addLog=function(T,L){T===void 0&&(T={type:"log",origData:[],isGroupHeader:0,isGroupCollapsed:!1});var V=this.groupLabelCollapsedStack[this.groupLabelCollapsedStack.length-2],k=this.groupLabelCollapsedStack[this.groupLabelCollapsedStack.length-1],F={_id:a.QI(),type:T.type,cmdType:L==null?void 0:L.cmdType,toggle:{},date:Date.now(),data:(0,p.b1)(T.origData||[]),repeated:0,groupLabel:k==null?void 0:k.label,groupLevel:this.groupLevel,groupHeader:T.isGroupHeader,groupCollapsed:T.isGroupHeader?!(V==null||!V.collapsed):!(k==null||!k.collapsed)};this._signalLog(F),L!=null&&L.noOrig||this.callOriginalConsole.apply(this,[T.type].concat(T.origData))},M.evalCommand=function(T){this.addLog({type:"log",origData:[T]},{cmdType:"input"});var L=void 0;try{L=eval.call(window,"("+T+")")}catch{try{L=eval.call(window,T)}catch{}}this.addLog({type:"log",origData:[L]},{cmdType:"output"})},M._signalLog=function(T){var L=this;this.flushLogScheduled||(this.flushLogScheduled=!0,window.requestAnimationFrame((function(){L.flushLogScheduled=!1,L._flushLogs()}))),this.logQueue.push(T)},M._flushLogs=function(){var T=this,L=this.logQueue;this.logQueue=[];for(var V,k={},F=x(L);!(V=F()).done;){var P=V.value,U=this._extractPluginIdByLog(P);(k[U]=k[U]||[]).push(P)}for(var G=function(de){var ne=k[de];y.O.get(de).update((function(ae){for(var fe,Ae=[].concat(ae.logList),q=x(ne);!(fe=q()).done;){var te=fe.value;T._isRepeatedLog(Ae,te)?T._updateLastLogRepeated(Ae):Ae.push(te)}return{logList:Ae=T._limitLogListLength(Ae)}}))},Q=0,ee=Object.keys(k);Q<ee.length;Q++)G(ee[Q]);u.x.updateTime()},M._extractPluginIdByLog=function(T){var L,V="default",k=(L=T.data[0])==null?void 0:L.origData;if(a.HD(k)){var F=k.match(this.pluginPattern);if(F!==null&&F.length>1){var P=F[1].toLowerCase();this.ADDED_LOG_PLUGIN_ID.indexOf(P)>-1&&(V=P,T.data.shift())}}return V},M._isRepeatedLog=function(T,L){var V=T[T.length-1];if(!V)return!1;var k=!1;if(L.type===V.type&&L.cmdType===V.cmdType&&L.data.length===V.data.length){k=!0;for(var F=0;F<L.data.length;F++)if(L.data[F].origData!==V.data[F].origData){k=!1;break}}return k},M._updateLastLogRepeated=function(T){var L=T[T.length-1],V=L.repeated?L.repeated+1:2;return T[T.length-1]=b(b({},L),{},{repeated:V}),T},M._limitLogListLength=function(T){var L=T.length,V=this.maxLogNumber;return L>V?T.slice(L-V,L):T},R})(e.N)},9923:function(g,n,t){t.d(n,{O:function(){return s}});var r=t(3313),s=(function(){function a(){}return a.create=function(e){return this.storeMap[e]||(this.storeMap[e]=(0,r.fZ)({logList:[]})),this.storeMap[e]},a.delete=function(e){this.storeMap[e]&&delete this.storeMap[e]},a.get=function(e){return this.storeMap[e]},a.getRaw=function(e){return(0,r.U2)(this.storeMap[e])},a.getAll=function(){return this.storeMap},a})();s.storeMap={}},8665:function(g,n,t){t.d(n,{HX:function(){return C},LH:function(){return a},Tg:function(){return w},b1:function(){return x},oj:function(){return y}});var r=t(5103),s=function(E){var I=r.hZ(E,{maxDepth:0}),R=I.substring(0,36),M=r.DV(E);return I.length>36&&(R+="..."),M=r.rE(M+" "+R)},a=function(E,I){I===void 0&&(I=!0);var R="undefined",M=E;return E instanceof w?(R="uninvocatable",M="(...)"):r.kJ(E)?(R="array",M=s(E)):r.Kn(E)?(R="object",M=s(E)):r.HD(E)?(R="string",M=r.rE(E),I&&(M='"'+M+'"')):r.hj(E)?(R="number",M=String(E)):r.C4(E)?(R="bigint",M=String(E)+"n"):r.jn(E)?(R="boolean",M=String(E)):r.Ft(E)?(R="null",M="null"):r.o8(E)?(R="undefined",M="undefined"):r.mf(E)?(R="function",M=(E.name||"function")+"()"):r.yk(E)&&(R="symbol",M=String(E)),{text:M,valueType:R}},e=[".","[","(","{","}"],u=["]",")","}"],p=function(E,I,R){R===void 0&&(R=0);for(var M={text:"",pos:-1,before:"",after:""},T=E.length-1;T>=R;T--){var L=I.indexOf(E[T]);if(L>-1){M.text=I[L],M.pos=T,M.before=E.substring(R,T),M.after=E.substring(T+1,E.length);break}}return M},y=function(E){var I=p(E,e,0);return{front:I,back:p(E,u,I.pos+1)}},C=function(E,I){if(I==="")return!0;for(var R=0;R<E.data.length;R++)if(typeof E.data[R].origData=="string"&&E.data[R].origData.indexOf(I)>-1)return!0;return!1},b=/(\%[csdo] )|( \%[csdo])/g,x=function(E){if(b.lastIndex=0,r.HD(E[0])&&b.test(E[0])){for(var I,R=[].concat(E),M=R.shift().split(b).filter((function(ee){return ee!==void 0&&ee!==""})),T=R,L=[],V=!1,k="";M.length>0;){var F=M.shift();if(/ ?\%c ?/.test(F)?T.length>0?typeof(k=T.shift())!="string"&&(k=""):(I=F,k="",V=!0):/ ?\%[sd] ?/.test(F)?(I=T.length>0?r.Kn(T[0])?r.DV(T.shift()):String(T.shift()):F,V=!0):/ ?\%o ?/.test(F)?(I=T.length>0?T.shift():F,V=!0):(I=F,V=!0),V){var P={origData:I};k&&(P.style=k),L.push(P),V=!1,I=void 0,k=""}}for(var U=0;U<T.length;U++)L.push({origData:T[U]});return L}for(var G=[],Q=0;Q<E.length;Q++)G.push({origData:E[Q]});return G},w=function(){}},5313:function(g,n,t){var r=t(6738),s=t.n(r),a=t(7705),e=t.n(a)()(s());e.push([g.id,`.vc-icon {
  word-break: normal;
  white-space: normal;
  overflow: visible;
}
.vc-icon svg {
  fill: var(--VC-FG-2);
  height: 1em;
  width: 1em;
  vertical-align: -0.11em;
}
.vc-icon .vc-icon-delete {
  vertical-align: -0.11em;
}
.vc-icon .vc-icon-copy {
  height: 1.1em;
  width: 1.1em;
  vertical-align: -0.16em;
}
.vc-icon .vc-icon-suc {
  fill: var(--VC-TEXTGREEN);
  height: 1.1em;
  width: 1.1em;
  vertical-align: -0.16em;
}
`,""]),n.Z=e},1142:function(g,n,t){var r=t(6738),s=t.n(r),a=t(7705),e=t.n(a)()(s());e.push([g.id,`.vc-scroller-viewport {
  position: relative;
  overflow: hidden;
  height: 100%;
}
.vc-scroller-contents {
  min-height: 100%;
  will-change: transform;
}
.vc-scroller-items {
  will-change: height;
  position: relative;
}
.vc-scroller-item {
  display: none;
  position: absolute;
  left: 0;
  right: 0;
}
.vc-scroller-viewport.static .vc-scroller-item {
  display: block;
  position: static;
}
.vc-scroller-scrollbar-track {
  width: 4px;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding: 1px;
}
.vc-scroller-scrollbar-thumb {
  position: relative;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  border-radius: 999px;
}
`,""]),n.Z=e},3283:function(g,n,t){var r=t(6738),s=t.n(r),a=t(7705),e=t.n(a)()(s());e.push([g.id,`#__vconsole {
  --VC-BG-0: #ededed;
  --VC-BG-1: #f7f7f7;
  --VC-BG-2: #fff;
  --VC-BG-3: #f7f7f7;
  --VC-BG-4: #4c4c4c;
  --VC-BG-5: #fff;
  --VC-BG-6: rgba(0, 0, 0, 0.1);
  --VC-FG-0: rgba(0, 0, 0, 0.9);
  --VC-FG-HALF: rgba(0, 0, 0, 0.9);
  --VC-FG-1: rgba(0, 0, 0, 0.5);
  --VC-FG-2: rgba(0, 0, 0, 0.3);
  --VC-FG-3: rgba(0, 0, 0, 0.1);
  --VC-RED: #fa5151;
  --VC-ORANGE: #fa9d3b;
  --VC-YELLOW: #ffc300;
  --VC-GREEN: #91d300;
  --VC-LIGHTGREEN: #95ec69;
  --VC-BRAND: #07c160;
  --VC-BLUE: #10aeff;
  --VC-INDIGO: #1485ee;
  --VC-PURPLE: #6467f0;
  --VC-LINK: #576b95;
  --VC-TEXTGREEN: #06ae56;
  --VC-FG: black;
  --VC-BG: white;
  --VC-BG-COLOR-ACTIVE: #ececec;
  --VC-WARN-BG: #fff3cc;
  --VC-WARN-BORDER: #ffe799;
  --VC-ERROR-BG: #fedcdc;
  --VC-ERROR-BORDER: #fdb9b9;
  --VC-DOM-TAG-NAME-COLOR: #881280;
  --VC-DOM-ATTRIBUTE-NAME-COLOR: #994500;
  --VC-DOM-ATTRIBUTE-VALUE-COLOR: #1a1aa6;
  --VC-CODE-KEY-FG: #881391;
  --VC-CODE-PRIVATE-KEY-FG: #cfa1d3;
  --VC-CODE-FUNC-FG: #0d22aa;
  --VC-CODE-NUMBER-FG: #1c00cf;
  --VC-CODE-STR-FG: #c41a16;
  --VC-CODE-NULL-FG: #808080;
  color: var(--VC-FG-0);
  font-size: 13px;
  font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
  -webkit-user-select: auto;
  /* global */
}
#__vconsole .vc-max-height {
  max-height: 19.23076923em;
}
#__vconsole .vc-max-height-line {
  max-height: 6.30769231em;
}
#__vconsole .vc-min-height {
  min-height: 3.07692308em;
}
#__vconsole dd,
#__vconsole dl,
#__vconsole pre {
  margin: 0;
}
#__vconsole pre {
  white-space: pre-wrap;
}
#__vconsole i {
  font-style: normal;
}
.vc-table {
  height: 100%;
}
.vc-table .vc-table-row {
  line-height: 1.5;
  display: -webkit-box;
  display: -webkit-flex;
  display: -moz-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -webkit-flex-direction: row;
  -moz-box-orient: horizontal;
  -moz-box-direction: normal;
  -ms-flex-direction: row;
  flex-direction: row;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  overflow: hidden;
  border-bottom: 1px solid var(--VC-FG-3);
}
.vc-table .vc-table-row.vc-left-border {
  border-left: 1px solid var(--VC-FG-3);
}
.vc-table .vc-table-row-icon {
  margin-left: 4px;
}
.vc-table .vc-table-col {
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -moz-box-flex: 1;
  -ms-flex: 1;
  flex: 1;
  padding: 0.23076923em 0.30769231em;
  border-left: 1px solid var(--VC-FG-3);
  overflow: auto;
}
.vc-table .vc-table-col:first-child {
  border: none;
}
.vc-table .vc-table-col-value {
  white-space: pre-wrap;
  word-break: break-word;
  /*white-space: nowrap;
    text-overflow: ellipsis;*/
  -webkit-overflow-scrolling: touch;
}
.vc-table .vc-small .vc-table-col {
  padding: 0 0.30769231em;
  font-size: 0.92307692em;
}
.vc-table .vc-table-col-2 {
  -webkit-box-flex: 2;
  -webkit-flex: 2;
  -moz-box-flex: 2;
  -ms-flex: 2;
  flex: 2;
}
.vc-table .vc-table-col-3 {
  -webkit-box-flex: 3;
  -webkit-flex: 3;
  -moz-box-flex: 3;
  -ms-flex: 3;
  flex: 3;
}
.vc-table .vc-table-col-4 {
  -webkit-box-flex: 4;
  -webkit-flex: 4;
  -moz-box-flex: 4;
  -ms-flex: 4;
  flex: 4;
}
.vc-table .vc-table-col-5 {
  -webkit-box-flex: 5;
  -webkit-flex: 5;
  -moz-box-flex: 5;
  -ms-flex: 5;
  flex: 5;
}
.vc-table .vc-table-col-6 {
  -webkit-box-flex: 6;
  -webkit-flex: 6;
  -moz-box-flex: 6;
  -ms-flex: 6;
  flex: 6;
}
.vc-table .vc-table-row-error {
  border-color: var(--VC-ERROR-BORDER);
  background-color: var(--VC-ERROR-BG);
}
.vc-table .vc-table-row-error .vc-table-col {
  color: var(--VC-RED);
  border-color: var(--VC-ERROR-BORDER);
}
.vc-table .vc-table-col-title {
  font-weight: bold;
}
.vc-table .vc-table-action {
  display: flex;
  justify-content: space-evenly;
}
.vc-table .vc-table-action .vc-icon {
  flex: 1;
  text-align: center;
  display: block;
}
.vc-table .vc-table-action .vc-icon:hover {
  background: var(--VC-BG-3);
}
.vc-table .vc-table-action .vc-icon:active {
  background: var(--VC-BG-1);
}
.vc-table .vc-table-input {
  width: 100%;
  border: none;
  color: var(--VC-FG-0);
  background-color: var(--VC-BG-6);
  height: 3.53846154em;
}
.vc-table .vc-table-input:focus {
  background-color: var(--VC-FG-2);
}
@media (prefers-color-scheme: dark) {
  #__vconsole:not([data-theme="light"]) {
    --VC-BG-0: #191919;
    --VC-BG-1: #1f1f1f;
    --VC-BG-2: #232323;
    --VC-BG-3: #2f2f2f;
    --VC-BG-4: #606060;
    --VC-BG-5: #2c2c2c;
    --VC-BG-6: rgba(255, 255, 255, 0.2);
    --VC-FG-0: rgba(255, 255, 255, 0.8);
    --VC-FG-HALF: rgba(255, 255, 255, 0.6);
    --VC-FG-1: rgba(255, 255, 255, 0.5);
    --VC-FG-2: rgba(255, 255, 255, 0.3);
    --VC-FG-3: rgba(255, 255, 255, 0.05);
    --VC-RED: #fa5151;
    --VC-ORANGE: #c87d2f;
    --VC-YELLOW: #cc9c00;
    --VC-GREEN: #74a800;
    --VC-LIGHTGREEN: #28b561;
    --VC-BRAND: #07c160;
    --VC-BLUE: #10aeff;
    --VC-INDIGO: #1196ff;
    --VC-PURPLE: #8183ff;
    --VC-LINK: #7d90a9;
    --VC-TEXTGREEN: #259c5c;
    --VC-FG: white;
    --VC-BG: black;
    --VC-BG-COLOR-ACTIVE: #282828;
    --VC-WARN-BG: #332700;
    --VC-WARN-BORDER: #664e00;
    --VC-ERROR-BG: #321010;
    --VC-ERROR-BORDER: #642020;
    --VC-DOM-TAG-NAME-COLOR: #5DB0D7;
    --VC-DOM-ATTRIBUTE-NAME-COLOR: #9BBBDC;
    --VC-DOM-ATTRIBUTE-VALUE-COLOR: #f29766;
    --VC-CODE-KEY-FG: #e36eec;
    --VC-CODE-PRIVATE-KEY-FG: #f4c5f7;
    --VC-CODE-FUNC-FG: #556af2;
    --VC-CODE-NUMBER-FG: #9980ff;
    --VC-CODE-STR-FG: #e93f3b;
    --VC-CODE-NULL-FG: #808080;
  }
}
#__vconsole[data-theme="dark"] {
  --VC-BG-0: #191919;
  --VC-BG-1: #1f1f1f;
  --VC-BG-2: #232323;
  --VC-BG-3: #2f2f2f;
  --VC-BG-4: #606060;
  --VC-BG-5: #2c2c2c;
  --VC-BG-6: rgba(255, 255, 255, 0.2);
  --VC-FG-0: rgba(255, 255, 255, 0.8);
  --VC-FG-HALF: rgba(255, 255, 255, 0.6);
  --VC-FG-1: rgba(255, 255, 255, 0.5);
  --VC-FG-2: rgba(255, 255, 255, 0.3);
  --VC-FG-3: rgba(255, 255, 255, 0.05);
  --VC-RED: #fa5151;
  --VC-ORANGE: #c87d2f;
  --VC-YELLOW: #cc9c00;
  --VC-GREEN: #74a800;
  --VC-LIGHTGREEN: #28b561;
  --VC-BRAND: #07c160;
  --VC-BLUE: #10aeff;
  --VC-INDIGO: #1196ff;
  --VC-PURPLE: #8183ff;
  --VC-LINK: #7d90a9;
  --VC-TEXTGREEN: #259c5c;
  --VC-FG: white;
  --VC-BG: black;
  --VC-BG-COLOR-ACTIVE: #282828;
  --VC-WARN-BG: #332700;
  --VC-WARN-BORDER: #664e00;
  --VC-ERROR-BG: #321010;
  --VC-ERROR-BORDER: #642020;
  --VC-DOM-TAG-NAME-COLOR: #5DB0D7;
  --VC-DOM-ATTRIBUTE-NAME-COLOR: #9BBBDC;
  --VC-DOM-ATTRIBUTE-VALUE-COLOR: #f29766;
  --VC-CODE-KEY-FG: #e36eec;
  --VC-CODE-PRIVATE-KEY-FG: #f4c5f7;
  --VC-CODE-FUNC-FG: #556af2;
  --VC-CODE-NUMBER-FG: #9980ff;
  --VC-CODE-STR-FG: #e93f3b;
  --VC-CODE-NULL-FG: #808080;
}
.vc-tabbar {
  border-bottom: 1px solid var(--VC-FG-3);
  overflow-x: auto;
  height: 3em;
  width: auto;
  white-space: nowrap;
}
.vc-tabbar .vc-tab {
  display: inline-block;
  line-height: 3em;
  padding: 0 1.15384615em;
  border-right: 1px solid var(--VC-FG-3);
  text-decoration: none;
  color: var(--VC-FG-0);
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}
.vc-tabbar .vc-tab:active {
  background-color: rgba(0, 0, 0, 0.15);
}
.vc-tabbar .vc-tab.vc-actived {
  background-color: var(--VC-BG-1);
}
.vc-toolbar {
  border-top: 1px solid var(--VC-FG-3);
  line-height: 3em;
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  display: -webkit-box;
  display: -webkit-flex;
  display: -moz-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -webkit-flex-direction: row;
  -moz-box-orient: horizontal;
  -moz-box-direction: normal;
  -ms-flex-direction: row;
  flex-direction: row;
}
.vc-toolbar .vc-tool {
  display: none;
  font-style: normal;
  text-decoration: none;
  color: var(--VC-FG-0);
  width: 50%;
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -moz-box-flex: 1;
  -ms-flex: 1;
  flex: 1;
  text-align: center;
  position: relative;
  -webkit-touch-callout: none;
}
.vc-toolbar .vc-tool.vc-toggle,
.vc-toolbar .vc-tool.vc-global-tool {
  display: block;
}
.vc-toolbar .vc-tool:active {
  background-color: rgba(0, 0, 0, 0.15);
}
.vc-toolbar .vc-tool:after {
  content: " ";
  position: absolute;
  top: 0.53846154em;
  bottom: 0.53846154em;
  right: 0;
  border-left: 1px solid var(--VC-FG-3);
}
.vc-toolbar .vc-tool-last:after {
  border: none;
}
.vc-topbar {
  background-color: var(--VC-BG-1);
  display: -webkit-box;
  display: -webkit-flex;
  display: -moz-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -webkit-flex-direction: row;
  -moz-box-orient: horizontal;
  -moz-box-direction: normal;
  -ms-flex-direction: row;
  flex-direction: row;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  width: 100%;
}
.vc-topbar .vc-toptab {
  display: none;
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -moz-box-flex: 1;
  -ms-flex: 1;
  flex: 1;
  line-height: 2.30769231em;
  padding: 0 1.15384615em;
  border-bottom: 1px solid var(--VC-FG-3);
  text-decoration: none;
  text-align: center;
  color: var(--VC-FG-0);
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}
.vc-topbar .vc-toptab.vc-toggle {
  display: block;
}
.vc-topbar .vc-toptab:active {
  background-color: rgba(0, 0, 0, 0.15);
}
.vc-topbar .vc-toptab.vc-actived {
  border-bottom: 1px solid var(--VC-INDIGO);
}
.vc-mask {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0);
  z-index: 10001;
  -webkit-transition: background 0.3s;
  transition: background 0.3s;
  -webkit-tap-highlight-color: transparent;
  overflow-y: scroll;
}
.vc-panel {
  display: none;
  position: fixed;
  min-height: 85%;
  left: 0;
  right: 0;
  bottom: -100%;
  z-index: 10002;
  background-color: var(--VC-BG-0);
  transition: bottom 0.3s;
}
.vc-toggle .vc-switch {
  display: none;
}
.vc-toggle .vc-mask {
  background: rgba(0, 0, 0, 0.6);
  display: block;
}
.vc-toggle .vc-panel {
  bottom: 0;
}
.vc-content {
  background-color: var(--VC-BG-2);
  overflow-x: hidden;
  overflow-y: auto;
  position: absolute;
  top: 3.07692308em;
  left: 0;
  right: 0;
  bottom: 3.07692308em;
  -webkit-overflow-scrolling: touch;
  margin-bottom: constant(safe-area-inset-bottom);
  margin-bottom: env(safe-area-inset-bottom);
}
.vc-content.vc-has-topbar {
  top: 5.46153846em;
}
.vc-plugin-box {
  display: none;
  position: relative;
  min-height: 100%;
}
.vc-plugin-box.vc-fixed-height {
  height: 100%;
}
.vc-plugin-box.vc-actived {
  display: block;
}
.vc-plugin-content {
  display: flex;
  width: 100%;
  height: 100%;
  overflow-y: auto;
  flex-direction: column;
  -webkit-tap-highlight-color: transparent;
}
.vc-plugin-content:empty:before {
  content: "Empty";
  color: var(--VC-FG-1);
  position: absolute;
  top: 45%;
  left: 0;
  right: 0;
  bottom: 0;
  font-size: 1.15384615em;
  text-align: center;
}
.vc-plugin-empty {
  color: var(--VC-FG-1);
  font-size: 1.15384615em;
  height: 100%;
  width: 100%;
  padding: 1.15384615em 0;
  text-align: center;
  display: flex;
  flex-direction: column;
  justify-content: center;
}
@supports (bottom: constant(safe-area-inset-bottom)) or (bottom: env(safe-area-inset-bottom)) {
  .vc-toolbar,
  .vc-switch {
    bottom: constant(safe-area-inset-bottom);
    bottom: env(safe-area-inset-bottom);
  }
}
`,""]),n.Z=e},7558:function(g,n,t){var r=t(6738),s=t.n(r),a=t(7705),e=t.n(a)()(s());e.push([g.id,`.vc-switch {
  display: block;
  position: fixed;
  right: 0.76923077em;
  bottom: 0.76923077em;
  color: #FFF;
  background-color: var(--VC-BRAND);
  line-height: 1;
  font-size: 1.07692308em;
  padding: 0.61538462em 1.23076923em;
  z-index: 10000;
  border-radius: 0.30769231em;
  box-shadow: 0 0 0.61538462em rgba(0, 0, 0, 0.4);
}
`,""]),n.Z=e},5670:function(g,n,t){var r=t(6738),s=t.n(r),a=t(7705),e=t.n(a)()(s());e.push([g.id,`/* color */
.vcelm-node {
  color: var(--VC-DOM-TAG-NAME-COLOR);
}
.vcelm-k {
  color: var(--VC-DOM-ATTRIBUTE-NAME-COLOR);
}
.vcelm-v {
  color: var(--VC-DOM-ATTRIBUTE-VALUE-COLOR);
}
.vcelm-l.vc-actived > .vcelm-node {
  background-color: var(--VC-FG-3);
}
/* layout */
.vcelm-l {
  padding-left: 8px;
  position: relative;
  word-wrap: break-word;
  line-height: 1.2;
}
/*.vcelm-l.vcelm-noc {
  padding-left: 0;
}*/
.vcelm-l .vcelm-node:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vcelm-l.vcelm-noc .vcelm-node:active {
  background-color: transparent;
}
.vcelm-t {
  white-space: pre-wrap;
  word-wrap: break-word;
}
/* level */
/* arrow */
.vcelm-l:before {
  content: "";
  display: block;
  position: absolute;
  top: 6px;
  left: 3px;
  width: 0;
  height: 0;
  border: transparent solid 3px;
  border-left-color: var(--VC-FG-1);
}
.vcelm-l.vc-toggle:before {
  display: block;
  top: 6px;
  left: 0;
  border-top-color: var(--VC-FG-1);
  border-left-color: transparent;
}
.vcelm-l.vcelm-noc:before {
  display: none;
}
`,""]),n.Z=e},3327:function(g,n,t){var r=t(6738),s=t.n(r),a=t(7705),e=t.n(a)()(s());e.push([g.id,"",""]),n.Z=e},1130:function(g,n,t){var r=t(6738),s=t.n(r),a=t(7705),e=t.n(a)()(s());e.push([g.id,`.vc-cmd {
  height: 3.07692308em;
  border-top: 1px solid var(--VC-FG-3);
  display: flex;
  flex-direction: row;
}
.vc-cmd.vc-filter {
  bottom: 0;
}
.vc-cmd-input-wrap {
  display: flex;
  align-items: center;
  flex: 1;
  position: relative;
  height: 2.15384615em;
  padding: 0.46153846em 0.61538462em;
}
.vc-cmd-input {
  width: 100%;
  border: none;
  resize: none;
  outline: none;
  padding: 0;
  font-size: 0.92307692em;
  background-color: transparent;
  color: var(--VC-FG-0);
}
.vc-cmd-input::-webkit-input-placeholder {
  line-height: 2.15384615em;
}
.vc-cmd-btn {
  width: 3.07692308em;
  border: none;
  background-color: var(--VC-BG-0);
  color: var(--VC-FG-0);
  outline: none;
  -webkit-touch-callout: none;
  font-size: 1em;
}
.vc-cmd-clear-btn {
  flex: 1 3.07692308em;
  text-align: center;
  line-height: 3.07692308em;
}
.vc-cmd-btn:active,
.vc-cmd-clear-btn:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vc-cmd-prompted {
  position: absolute;
  left: 0.46153846em;
  right: 0.46153846em;
  background-color: var(--VC-BG-3);
  border: 1px solid var(--VC-FG-3);
  overflow-x: scroll;
  display: none;
}
.vc-cmd-prompted li {
  list-style: none;
  line-height: 30px;
  padding: 0 0.46153846em;
  border-bottom: 1px solid var(--VC-FG-3);
}
.vc-cmd-prompted li:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vc-cmd-prompted-hide {
  text-align: center;
}
`,""]),n.Z=e},7147:function(g,n,t){var r=t(6738),s=t.n(r),a=t(7705),e=t.n(a)()(s());e.push([g.id,`.vc-log-row {
  margin: 0;
  padding: 0.46153846em 0.61538462em;
  overflow: hidden;
  line-height: 1.3;
  border-bottom: 1px solid var(--VC-FG-3);
  word-break: break-word;
  position: relative;
  display: flex;
}
.vc-log-info {
  color: var(--VC-PURPLE);
}
.vc-log-debug {
  color: var(--VC-YELLOW);
}
.vc-log-warn {
  color: var(--VC-ORANGE);
  border-color: var(--VC-WARN-BORDER);
  background-color: var(--VC-WARN-BG);
}
.vc-log-error {
  color: var(--VC-RED);
  border-color: var(--VC-ERROR-BORDER);
  background-color: var(--VC-ERROR-BG);
}
.vc-logrow-icon {
  margin-left: auto;
}
.vc-log-padding {
  width: 1.53846154em;
  border-left: 1px solid var(--VC-FG-3);
}
.vc-log-group .vc-log-content {
  font-weight: bold;
}
.vc-log-group-toggle {
  padding-left: 0.76923077em;
}
.vc-log-group-toggle {
  display: block;
  font-style: italic;
  padding-left: 0.76923077em;
  position: relative;
}
.vc-log-group-toggle:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vc-log-group > .vc-log-group-toggle::before {
  content: "";
  position: absolute;
  top: 0.30769231em;
  left: 0.15384615em;
  width: 0;
  height: 0;
  border: transparent solid 0.30769231em;
  border-left-color: var(--VC-FG-1);
}
.vc-log-group.vc-toggle > .vc-log-group-toggle::before {
  top: 0.46153846em;
  left: 0;
  border-top-color: var(--VC-FG-1);
  border-left-color: transparent;
}
.vc-log-time {
  width: 6.15384615em;
  color: #777;
}
.vc-log-repeat i {
  margin-right: 0.30769231em;
  padding: 0 6.5px;
  color: #D7E0EF;
  background-color: #42597F;
  border-radius: 8.66666667px;
}
.vc-log-error .vc-log-repeat i {
  color: #901818;
  background-color: var(--VC-RED);
}
.vc-log-warn .vc-log-repeat i {
  color: #987D20;
  background-color: #F4BD02;
}
.vc-log-content {
  flex: 1;
}
.vc-log-input,
.vc-log-output {
  padding-left: 0.92307692em;
}
.vc-log-input:before,
.vc-log-output:before {
  content: "â€º";
  position: absolute;
  top: 0.15384615em;
  left: 0;
  font-size: 1.23076923em;
  color: #6A5ACD;
}
.vc-log-output:before {
  content: "â€¹";
}
`,""]),n.Z=e},1237:function(g,n,t){var r=t(6738),s=t.n(r),a=t(7705),e=t.n(a)()(s());e.push([g.id,`.vc-log-tree {
  display: block;
  overflow: auto;
  position: relative;
  -webkit-overflow-scrolling: touch;
}
.vc-log-tree-node {
  display: block;
  font-style: italic;
  padding-left: 0.76923077em;
  position: relative;
}
.vc-log-tree.vc-is-tree > .vc-log-tree-node:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vc-log-tree.vc-is-tree > .vc-log-tree-node::before {
  content: "";
  position: absolute;
  top: 0.30769231em;
  left: 0.15384615em;
  width: 0;
  height: 0;
  border: transparent solid 0.30769231em;
  border-left-color: var(--VC-FG-1);
}
.vc-log-tree.vc-is-tree.vc-toggle > .vc-log-tree-node::before {
  top: 0.46153846em;
  left: 0;
  border-top-color: var(--VC-FG-1);
  border-left-color: transparent;
}
.vc-log-tree-child {
  margin-left: 0.76923077em;
}
.vc-log-tree-loadmore {
  text-decoration: underline;
  padding-left: 1.84615385em;
  position: relative;
  color: var(--VC-CODE-FUNC-FG);
}
.vc-log-tree-loadmore::before {
  content: "â€ºâ€º";
  position: absolute;
  top: -0.15384615em;
  left: 0.76923077em;
  font-size: 1.23076923em;
  color: var(--VC-CODE-FUNC-FG);
}
.vc-log-tree-loadmore:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
`,""]),n.Z=e},845:function(g,n,t){var r=t(6738),s=t.n(r),a=t(7705),e=t.n(a)()(s());e.push([g.id,`.vc-log-key {
  color: var(--VC-CODE-KEY-FG);
}
.vc-log-key-private {
  color: var(--VC-CODE-PRIVATE-KEY-FG);
}
.vc-log-val {
  white-space: pre-line;
}
.vc-log-val-function {
  color: var(--VC-CODE-FUNC-FG);
  font-style: italic !important;
}
.vc-log-val-bigint {
  color: var(--VC-CODE-FUNC-FG);
}
.vc-log-val-number,
.vc-log-val-boolean {
  color: var(--VC-CODE-NUMBER-FG);
}
.vc-log-val-string {
  white-space: pre-wrap;
}
.vc-log-val-string.vc-log-val-haskey {
  color: var(--VC-CODE-STR-FG);
  white-space: normal;
}
.vc-log-val-null,
.vc-log-val-undefined,
.vc-log-val-uninvocatable {
  color: var(--VC-CODE-NULL-FG);
}
.vc-log-val-symbol {
  color: var(--VC-CODE-STR-FG);
}
`,""]),n.Z=e},8747:function(g,n,t){var r=t(6738),s=t.n(r),a=t(7705),e=t.n(a)()(s());e.push([g.id,`.vc-group .vc-group-preview {
  -webkit-touch-callout: none;
}
.vc-group .vc-group-preview:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vc-group .vc-group-detail {
  display: none;
  padding: 0 0 0.76923077em 1.53846154em;
  border-bottom: 1px solid var(--VC-FG-3);
}
.vc-group.vc-actived .vc-group-detail {
  display: block;
  background-color: var(--VC-BG-1);
}
.vc-group.vc-actived .vc-table-row {
  background-color: var(--VC-BG-2);
}
.vc-group.vc-actived .vc-group-preview {
  background-color: var(--VC-BG-1);
}
`,""]),n.Z=e},3411:function(g,n,t){var r=t(3379),s=t.n(r),a=t(7795),e=t.n(a),u=t(569),p=t.n(u),y=t(3565),C=t.n(y),b=t(9216),x=t.n(b),w=t(4589),E=t.n(w),I=t(1130),R={};I.Z&&I.Z.locals&&(R.locals=I.Z.locals);var M,T=0,L={};L.styleTagTransform=E(),L.setAttributes=C(),L.insert=p().bind(null,"head"),L.domAPI=e(),L.insertStyleElement=x(),R.use=function(V){return L.options=V||{},T++||(M=s()(I.Z,L)),R},R.unuse=function(){T>0&&!--T&&(M(),M=null)},n.Z=R},3379:function(g){var n=[];function t(a){for(var e=-1,u=0;u<n.length;u++)if(n[u].identifier===a){e=u;break}return e}function r(a,e){for(var u={},p=[],y=0;y<a.length;y++){var C=a[y],b=e.base?C[0]+e.base:C[0],x=u[b]||0,w="".concat(b," ").concat(x);u[b]=x+1;var E=t(w),I={css:C[1],media:C[2],sourceMap:C[3],supports:C[4],layer:C[5]};if(E!==-1)n[E].references++,n[E].updater(I);else{var R=s(I,e);e.byIndex=y,n.splice(y,0,{identifier:w,updater:R,references:1})}p.push(w)}return p}function s(a,e){var u=e.domAPI(e);return u.update(a),function(p){if(p){if(p.css===a.css&&p.media===a.media&&p.sourceMap===a.sourceMap&&p.supports===a.supports&&p.layer===a.layer)return;u.update(a=p)}else u.remove()}}g.exports=function(a,e){var u=r(a=a||[],e=e||{});return function(p){p=p||[];for(var y=0;y<u.length;y++){var C=t(u[y]);n[C].references--}for(var b=r(p,e),x=0;x<u.length;x++){var w=t(u[x]);n[w].references===0&&(n[w].updater(),n.splice(w,1))}u=b}}},569:function(g){var n={};g.exports=function(t,r){var s=(function(a){if(n[a]===void 0){var e=document.querySelector(a);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch{e=null}n[a]=e}return n[a]})(t);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(r)}},9216:function(g){g.exports=function(n){var t=document.createElement("style");return n.setAttributes(t,n.attributes),n.insert(t,n.options),t}},3565:function(g,n,t){g.exports=function(r){var s=t.nc;s&&r.setAttribute("nonce",s)}},7795:function(g){g.exports=function(n){var t=n.insertStyleElement(n);return{update:function(r){(function(s,a,e){var u="";e.supports&&(u+="@supports (".concat(e.supports,") {")),e.media&&(u+="@media ".concat(e.media," {"));var p=e.layer!==void 0;p&&(u+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),u+=e.css,p&&(u+="}"),e.media&&(u+="}"),e.supports&&(u+="}");var y=e.sourceMap;y&&typeof btoa<"u"&&(u+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(y))))," */")),a.styleTagTransform(u,s,a.options)})(t,n,r)},remove:function(){(function(r){if(r.parentNode===null)return!1;r.parentNode.removeChild(r)})(t)}}}},4589:function(g){g.exports=function(n,t){if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},6464:function(g,n,t){function r(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}t.d(n,{Z:function(){return r}})},4296:function(g,n,t){function r(a,e){for(var u=0;u<e.length;u++){var p=e[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(a,p.key,p)}}function s(a,e,u){return e&&r(a.prototype,e),u&&r(a,u),Object.defineProperty(a,"prototype",{writable:!1}),a}t.d(n,{Z:function(){return s}})},8270:function(g,n,t){function r(s,a,e){return a in s?Object.defineProperty(s,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[a]=e,s}t.d(n,{Z:function(){return r}})},6881:function(g,n,t){t.d(n,{Z:function(){return s}});var r=t(2717);function s(a,e){a.prototype=Object.create(e.prototype),a.prototype.constructor=a,(0,r.Z)(a,e)}},2717:function(g,n,t){function r(s,a){return r=Object.setPrototypeOf||function(e,u){return e.__proto__=u,e},r(s,a)}t.d(n,{Z:function(){return r}})},7003:function(g,n,t){t.d(n,{H3:function(){return r.H3E},ev:function(){return r.evW},x:function(){return r.xa3}});var r=t(2942)},2942:function(g,n,t){t.d(n,{f_C:function(){return xt},hjT:function(){return Ye},R3I:function(){return k},Ljt:function(){return q},akz:function(){return z},VnY:function(){return Ve},cKT:function(){return je},gbL:function(){return Bt},FIv:function(){return w},XGm:function(){return L},xa3:function(){return Ne},YCL:function(){return me},nuO:function(){return E},vpE:function(){return Pe},RMB:function(){return U},ogt:function(){return P},bGB:function(){return G},cSb:function(){return ne},yl1:function(){return dn},VOJ:function(){return T},u2N:function(){return R},$XI:function(){return x},lig:function(){return Kt},dvw:function(){return pn},S1n:function(){return mt},$Tr:function(){return F},sBU:function(){return u},oLt:function(){return ae},yef:function(){return De},ZTd:function(){return r},AqN:function(){return y},evW:function(){return Be},H3E:function(){return Se},cly:function(){return It},AT7:function(){return fe},j7q:function(){return e},N8:function(){return p},rTO:function(){return te},BmG:function(){return he},fxP:function(){return V},czc:function(){return Ce},DhX:function(){return de},XET:function(){return Ae},LdU:function(){return b},bi5:function(){return Q},fLW:function(){return ee},VHj:function(){return ye},Ui:function(){return Vt},etI:function(){return hn},GQg:function(){return Ht},kmG:function(){return M}}),t(2717),t(6881);function r(){}function s(oe){return oe()}function a(){return Object.create(null)}function e(oe){oe.forEach(s)}function u(oe){return typeof oe=="function"}function p(oe,ge){return oe!=oe?ge==ge:oe!==ge||oe&&typeof oe=="object"||typeof oe=="function"}function y(oe,ge){return oe!=oe?ge==ge:oe!==ge}function C(oe){return Object.keys(oe).length===0}function b(oe){if(oe==null)return r;for(var ge=arguments.length,se=new Array(ge>1?ge-1:0),ve=1;ve<ge;ve++)se[ve-1]=arguments[ve];var Ee=oe.subscribe.apply(oe,se);return Ee.unsubscribe?function(){return Ee.unsubscribe()}:Ee}function x(oe){var ge;return b(oe,(function(se){return ge=se}))(),ge}function w(oe,ge,se){oe.$$.on_destroy.push(b(ge,se))}function E(oe,ge,se,ve){if(oe){var Ee=I(oe,ge,se,ve);return oe[0](Ee)}}function I(oe,ge,se,ve){return oe[1]&&ve?(function(Ee,He){for(var Ze in He)Ee[Ze]=He[Ze];return Ee})(se.ctx.slice(),oe[1](ve(ge))):se.ctx}function R(oe,ge,se,ve){if(oe[2]&&ve){var Ee=oe[2](ve(se));if(ge.dirty===void 0)return Ee;if(typeof Ee=="object"){for(var He=[],Ze=Math.max(ge.dirty.length,Ee.length),pt=0;pt<Ze;pt+=1)He[pt]=ge.dirty[pt]|Ee[pt];return He}return ge.dirty|Ee}return ge.dirty}function M(oe,ge,se,ve,Ee,He){if(Ee){var Ze=I(ge,se,ve,He);oe.p(Ze,Ee)}}function T(oe){if(oe.ctx.length>32){for(var ge=[],se=oe.ctx.length/32,ve=0;ve<se;ve++)ge[ve]=-1;return ge}return-1}function L(oe){var ge={};for(var se in oe)ge[se]=!0;return ge}function V(oe,ge,se){return oe.set(se),ge}function k(oe,ge){oe.appendChild(ge)}function F(oe,ge,se){oe.insertBefore(ge,se||null)}function P(oe){oe.parentNode.removeChild(oe)}function U(oe,ge){for(var se=0;se<oe.length;se+=1)oe[se]&&oe[se].d(ge)}function G(oe){return document.createElement(oe)}function Q(oe){return document.createElementNS("http://www.w3.org/2000/svg",oe)}function ee(oe){return document.createTextNode(oe)}function de(){return ee(" ")}function ne(){return ee("")}function ae(oe,ge,se,ve){return oe.addEventListener(ge,se,ve),function(){return oe.removeEventListener(ge,se,ve)}}function fe(oe){return function(ge){return ge.preventDefault(),oe.call(this,ge)}}function Ae(oe){return function(ge){return ge.stopPropagation(),oe.call(this,ge)}}function q(oe,ge,se){se==null?oe.removeAttribute(ge):oe.getAttribute(ge)!==se&&oe.setAttribute(ge,se)}function te(oe,ge){ge=""+ge,oe.wholeText!==ge&&(oe.data=ge)}function he(oe,ge){oe.value=ge??""}function Ce(oe,ge,se,ve){se===null?oe.style.removeProperty(ge):oe.style.setProperty(ge,se,ve?"important":"")}function ye(oe,ge,se){oe.classList[se?"add":"remove"](ge)}function ce(oe,ge,se){se===void 0&&(se=!1);var ve=document.createEvent("CustomEvent");return ve.initCustomEvent(oe,se,!1,ge),ve}var N;function J(oe){N=oe}function le(){if(!N)throw new Error("Function called outside component initialization");return N}function Se(oe){le().$$.on_mount.push(oe)}function Be(oe){le().$$.on_destroy.push(oe)}function Ne(){var oe=le();return function(ge,se){var ve=oe.$$.callbacks[ge];if(ve){var Ee=ce(ge,se);ve.slice().forEach((function(He){He.call(oe,Ee)}))}}}function je(oe,ge){var se=this,ve=oe.$$.callbacks[ge.type];ve&&ve.slice().forEach((function(Ee){return Ee.call(se,ge)}))}var ke=[],Ve=[],Ge=[],We=[],Ke=Promise.resolve(),Oe=!1;function qe(){Oe||(Oe=!0,Ke.then(dn))}function Xe(oe){Ge.push(oe)}function Ye(oe){We.push(oe)}var ht=new Set,At=0;function dn(){var oe=N;do{for(;At<ke.length;){var ge=ke[At];At++,J(ge),Ut(ge.$$)}for(J(null),ke.length=0,At=0;Ve.length;)Ve.pop()();for(var se=0;se<Ge.length;se+=1){var ve=Ge[se];ht.has(ve)||(ht.add(ve),ve())}Ge.length=0}while(ke.length);for(;We.length;)We.pop()();Oe=!1,ht.clear(),J(oe)}function Ut(oe){if(oe.fragment!==null){oe.update(),e(oe.before_update);var ge=oe.dirty;oe.dirty=[-1],oe.fragment&&oe.fragment.p(oe.ctx,ge),oe.after_update.forEach(Xe)}}var Dt,Ot=new Set;function pn(){Dt={r:0,c:[],p:Dt}}function Bt(){Dt.r||e(Dt.c),Dt=Dt.p}function Vt(oe,ge){oe&&oe.i&&(Ot.delete(oe),oe.i(ge))}function hn(oe,ge,se,ve){if(oe&&oe.o){if(Ot.has(oe))return;Ot.add(oe),Dt.c.push((function(){Ot.delete(oe),ve&&(se&&oe.d(1),ve())})),oe.o(ge)}}var Kt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:commonjsGlobal;function It(oe,ge){hn(oe,1,1,(function(){ge.delete(oe.key)}))}function Ht(oe,ge,se,ve,Ee,He,Ze,pt,Nt,Et,An,Rn){for(var Xt=oe.length,qt=He.length,en=Xt,Cn={};en--;)Cn[oe[en].key]=en;var Mn=[],Un=new Map,$n=new Map;for(en=qt;en--;){var Vn=Rn(Ee,He,en),bn=se(Vn),Hn=Ze.get(bn);Hn?ve&&Hn.p(Vn,ge):(Hn=Et(bn,Vn)).c(),Un.set(bn,Mn[en]=Hn),bn in Cn&&$n.set(bn,Math.abs(en-Cn[bn]))}var tr=new Set,xn=new Set;function Wn(In){Vt(In,1),In.m(pt,An),Ze.set(In.key,In),An=In.first,qt--}for(;Xt&&qt;){var gn=Mn[qt-1],Sn=oe[Xt-1],En=gn.key,Tn=Sn.key;gn===Sn?(An=gn.first,Xt--,qt--):Un.has(Tn)?!Ze.has(En)||tr.has(En)?Wn(gn):xn.has(Tn)?Xt--:$n.get(En)>$n.get(Tn)?(xn.add(En),Wn(gn)):(tr.add(Tn),Xt--):(Nt(Sn,Ze),Xt--)}for(;Xt--;){var vn=oe[Xt];Un.has(vn.key)||Nt(vn,Ze)}for(;qt;)Wn(Mn[qt-1]);return Mn}function z(oe,ge,se){var ve=oe.$$.props[ge];ve!==void 0&&(oe.$$.bound[ve]=se,se(oe.$$.ctx[ve]))}function me(oe){oe&&oe.c()}function De(oe,ge,se,ve){var Ee=oe.$$,He=Ee.fragment,Ze=Ee.on_mount,pt=Ee.on_destroy,Nt=Ee.after_update;He&&He.m(ge,se),ve||Xe((function(){var Et=Ze.map(s).filter(u);pt?pt.push.apply(pt,Et):e(Et),oe.$$.on_mount=[]})),Nt.forEach(Xe)}function Pe(oe,ge){var se=oe.$$;se.fragment!==null&&(e(se.on_destroy),se.fragment&&se.fragment.d(ge),se.on_destroy=se.fragment=null,se.ctx=[])}function Je(oe,ge){oe.$$.dirty[0]===-1&&(ke.push(oe),qe(),oe.$$.dirty.fill(0)),oe.$$.dirty[ge/31|0]|=1<<ge%31}function mt(oe,ge,se,ve,Ee,He,Ze,pt){pt===void 0&&(pt=[-1]);var Nt=N;J(oe);var Et=oe.$$={fragment:null,ctx:null,props:He,update:r,not_equal:Ee,bound:a(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(ge.context||(Nt?Nt.$$.context:[])),callbacks:a(),dirty:pt,skip_bound:!1,root:ge.target||Nt.$$.root};Ze&&Ze(Et.root);var An,Rn=!1;if(Et.ctx=se?se(oe,ge.props||{},(function(qt,en){var Cn=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:en;return Et.ctx&&Ee(Et.ctx[qt],Et.ctx[qt]=Cn)&&(!Et.skip_bound&&Et.bound[qt]&&Et.bound[qt](Cn),Rn&&Je(oe,qt)),en})):[],Et.update(),Rn=!0,e(Et.before_update),Et.fragment=!!ve&&ve(Et.ctx),ge.target){if(ge.hydrate){var Xt=(An=ge.target,Array.from(An.childNodes));Et.fragment&&Et.fragment.l(Xt),Xt.forEach(P)}else Et.fragment&&Et.fragment.c();ge.intro&&Vt(oe.$$.fragment),De(oe,ge.target,ge.anchor,ge.customElement),dn()}J(Nt)}var xt=(function(){function oe(){}var ge=oe.prototype;return ge.$destroy=function(){Pe(this,1),this.$destroy=r},ge.$on=function(se,ve){var Ee=this.$$.callbacks[se]||(this.$$.callbacks[se]=[]);return Ee.push(ve),function(){var He=Ee.indexOf(ve);He!==-1&&Ee.splice(He,1)}},ge.$set=function(se){this.$$set&&!C(se)&&(this.$$.skip_bound=!0,this.$$set(se),this.$$.skip_bound=!1)},oe})()},3313:function(g,n,t){t.d(n,{U2:function(){return r.$XI},fZ:function(){return u}});var r=t(2942);function s(p,y){var C=typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(C)return(C=C.call(p)).next.bind(C);if(Array.isArray(p)||(C=(function(x,w){if(x){if(typeof x=="string")return a(x,w);var E=Object.prototype.toString.call(x).slice(8,-1);if(E==="Object"&&x.constructor&&(E=x.constructor.name),E==="Map"||E==="Set")return Array.from(x);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return a(x,w)}})(p))||y){C&&(p=C);var b=0;return function(){return b>=p.length?{done:!0}:{done:!1,value:p[b++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(p,y){(y==null||y>p.length)&&(y=p.length);for(var C=0,b=new Array(y);C<y;C++)b[C]=p[C];return b}var e=[];function u(p,y){var C;y===void 0&&(y=r.ZTd);var b=new Set;function x(w){if((0,r.N8)(p,w)&&(p=w,C)){for(var E,I=!e.length,R=s(b);!(E=R()).done;){var M=E.value;M[1](),e.push(M,p)}if(I){for(var T=0;T<e.length;T+=2)e[T][0](e[T+1]);e.length=0}}}return{set:x,update:function(w){x(w(p))},subscribe:function(w,E){E===void 0&&(E=r.ZTd);var I=[w,E];return b.add(I),b.size===1&&(C=y(x)||r.ZTd),w(p),function(){b.delete(I),b.size===0&&(C(),C=null)}}}}}},__webpack_module_cache__={};function __webpack_require__(g){var n=__webpack_module_cache__[g];if(n!==void 0)return n.exports;var t=__webpack_module_cache__[g]={id:g,exports:{}};return __webpack_modules__[g](t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=function(g){var n=g&&g.__esModule?function(){return g.default}:function(){return g};return __webpack_require__.d(n,{a:n}),n},__webpack_require__.d=function(g,n){for(var t in n)__webpack_require__.o(n,t)&&!__webpack_require__.o(g,t)&&Object.defineProperty(g,t,{enumerable:!0,get:n[t]})},__webpack_require__.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),__webpack_require__.o=function(g,n){return Object.prototype.hasOwnProperty.call(g,n)};var __webpack_exports__={};return(function(){__webpack_require__.d(__webpack_exports__,{default:function(){return $s}}),__webpack_require__(5441),__webpack_require__(8765);var g=__webpack_require__(4296),n=__webpack_require__(5103),t={one:function(h,c){c===void 0&&(c=document);try{return c.querySelector(h)||void 0}catch{return}},all:function(h,c){c===void 0&&(c=document);try{var o=c.querySelectorAll(h);return[].slice.call(o)}catch{return[]}},addClass:function(h,c){if(h)for(var o=(0,n.kJ)(h)?h:[h],l=0;l<o.length;l++){var d=(o[l].className||"").split(" ");d.indexOf(c)>-1||(d.push(c),o[l].className=d.join(" "))}},removeClass:function(h,c){if(h)for(var o=(0,n.kJ)(h)?h:[h],l=0;l<o.length;l++){for(var d=o[l].className.split(" "),f=0;f<d.length;f++)d[f]==c&&(d[f]="");o[l].className=d.join(" ").trim()}},hasClass:function(h,c){return!(!h||!h.classList)&&h.classList.contains(c)},bind:function(h,c,o,l){l===void 0&&(l=!1),h&&((0,n.kJ)(h)?h:[h]).forEach((function(d){d.addEventListener(c,o,!!l)}))},delegate:function(h,c,o,l){h&&h.addEventListener(c,(function(d){var f=t.all(o,h);if(f)e:for(var v=0;v<f.length;v++)for(var _=d.target;_;){if(_==f[v]){l.call(_,d,_);break e}if((_=_.parentNode)==h)break}}),!1)},removeChildren:function(h){for(;h.firstChild;)h.removeChild(h.lastChild);return h}},r=t,s=__webpack_require__(6464),a=__webpack_require__(6881),e=__webpack_require__(2942),u=__webpack_require__(7003),p=__webpack_require__(3379),y=__webpack_require__.n(p),C=__webpack_require__(7795),b=__webpack_require__.n(C),x=__webpack_require__(569),w=__webpack_require__.n(x),E=__webpack_require__(3565),I=__webpack_require__.n(E),R=__webpack_require__(9216),M=__webpack_require__.n(R),T=__webpack_require__(4589),L=__webpack_require__.n(T),V=__webpack_require__(7558),k={};V.Z&&V.Z.locals&&(k.locals=V.Z.locals);var F,P=0,U={};U.styleTagTransform=L(),U.setAttributes=I(),U.insert=w().bind(null,"head"),U.domAPI=b(),U.insertStyleElement=M(),k.use=function(h){return U.options=h||{},P++||(F=y()(V.Z,U)),k},k.unuse=function(){P>0&&!--P&&(F(),F=null)};var G=k;function Q(h){var c,o,l,d;return{c:function(){c=(0,e.bGB)("div"),o=(0,e.fLW)("vConsole"),(0,e.Ljt)(c,"class","vc-switch"),(0,e.czc)(c,"right",h[2].x+"px"),(0,e.czc)(c,"bottom",h[2].y+"px"),(0,e.czc)(c,"display",h[0]?"block":"none")},m:function(f,v){(0,e.$Tr)(f,c,v),(0,e.R3I)(c,o),h[8](c),l||(d=[(0,e.oLt)(c,"touchstart",h[3],{passive:!1}),(0,e.oLt)(c,"touchend",h[4],{passive:!1}),(0,e.oLt)(c,"touchmove",h[5],{passive:!1}),(0,e.oLt)(c,"click",h[7])],l=!0)},p:function(f,v){var _=v[0];4&_&&(0,e.czc)(c,"right",f[2].x+"px"),4&_&&(0,e.czc)(c,"bottom",f[2].y+"px"),1&_&&(0,e.czc)(c,"display",f[0]?"block":"none")},i:e.ZTd,o:e.ZTd,d:function(f){f&&(0,e.ogt)(c),h[8](null),l=!1,(0,e.j7q)(d)}}}function ee(h,c,o){var l,d=c.show,f=d===void 0||d,v=c.position,_=v===void 0?{x:0,y:0}:v,B={hasMoved:!1,x:0,y:0,startX:0,startY:0,endX:0,endY:0},O={x:0,y:0};(0,u.H3)((function(){G.use()})),(0,u.ev)((function(){G.unuse()}));var $=function(H,re){var K=j(H,re);H=K[0],re=K[1],B.x=H,B.y=re,o(2,O.x=H,O),o(2,O.y=re,O),n.po("switch_x",H+""),n.po("switch_y",re+"")},j=function(H,re){var K=Math.max(document.documentElement.offsetWidth,window.innerWidth),ie=Math.max(document.documentElement.offsetHeight,window.innerHeight);return H+l.offsetWidth>K&&(H=K-l.offsetWidth),re+l.offsetHeight>ie&&(re=ie-l.offsetHeight),H<0&&(H=0),re<20&&(re=20),[H,re]};return h.$$set=function(H){"show"in H&&o(0,f=H.show),"position"in H&&o(6,_=H.position)},h.$$.update=function(){66&h.$$.dirty&&l&&$(_.x,_.y)},[f,l,O,function(H){B.startX=H.touches[0].pageX,B.startY=H.touches[0].pageY,B.hasMoved=!1},function(H){B.hasMoved&&(B.startX=0,B.startY=0,B.hasMoved=!1,$(B.endX,B.endY))},function(H){if(!(H.touches.length<=0)){var re=H.touches[0].pageX-B.startX,K=H.touches[0].pageY-B.startY,ie=Math.floor(B.x-re),ue=Math.floor(B.y-K),be=j(ie,ue);ie=be[0],ue=be[1],o(2,O.x=ie,O),o(2,O.y=ue,O),B.endX=ie,B.endY=ue,B.hasMoved=!0,H.preventDefault()}},_,function(H){e.cKT.call(this,h,H)},function(H){e.VnY[H?"unshift":"push"]((function(){o(1,l=H)}))}]}var de=(function(h){function c(o){var l;return l=h.call(this)||this,(0,e.S1n)((0,s.Z)(l),o,ee,Q,e.N8,{show:0,position:6}),l}return(0,a.Z)(c,h),(0,g.Z)(c,[{key:"show",get:function(){return this.$$.ctx[0]},set:function(o){this.$$set({show:o}),(0,e.yl1)()}},{key:"position",get:function(){return this.$$.ctx[6]},set:function(o){this.$$set({position:o}),(0,e.yl1)()}}]),c})(e.f_C),ne=de;function ae(h){var c,o;return{c:function(){c=(0,e.bGB)("div"),(0,e.Ljt)(c,"id",o="__vc_plug_"+h[0]),(0,e.Ljt)(c,"class","vc-plugin-box"),(0,e.VHj)(c,"vc-fixed-height",h[1]),(0,e.VHj)(c,"vc-actived",h[2])},m:function(l,d){(0,e.$Tr)(l,c,d),h[6](c)},p:function(l,d){var f=d[0];1&f&&o!==(o="__vc_plug_"+l[0])&&(0,e.Ljt)(c,"id",o),2&f&&(0,e.VHj)(c,"vc-fixed-height",l[1]),4&f&&(0,e.VHj)(c,"vc-actived",l[2])},i:e.ZTd,o:e.ZTd,d:function(l){l&&(0,e.ogt)(c),h[6](null)}}}function fe(h,c,o){var l=c.pluginId,d=l===void 0?"":l,f=c.fixedHeight,v=f!==void 0&&f,_=c.actived,B=_!==void 0&&_,O=c.content,$=O===void 0?void 0:O,j=void 0,H=void 0;return h.$$set=function(re){"pluginId"in re&&o(0,d=re.pluginId),"fixedHeight"in re&&o(1,v=re.fixedHeight),"actived"in re&&o(2,B=re.actived),"content"in re&&o(4,$=re.content)},h.$$.update=function(){57&h.$$.dirty&&H!==d&&$&&j&&(o(5,H=d),o(3,j.innerHTML="",j),(0,n.HD)($)?o(3,j.innerHTML=$,j):(0,n.kK)($)&&j.appendChild($))},[d,v,B,j,$,H,function(re){e.VnY[re?"unshift":"push"]((function(){o(3,j=re),o(5,H),o(0,d),o(4,$)}))}]}var Ae=(function(h){function c(o){var l;return l=h.call(this)||this,(0,e.S1n)((0,s.Z)(l),o,fe,ae,e.N8,{pluginId:0,fixedHeight:1,actived:2,content:4}),l}return(0,a.Z)(c,h),(0,g.Z)(c,[{key:"pluginId",get:function(){return this.$$.ctx[0]},set:function(o){this.$$set({pluginId:o}),(0,e.yl1)()}},{key:"fixedHeight",get:function(){return this.$$.ctx[1]},set:function(o){this.$$set({fixedHeight:o}),(0,e.yl1)()}},{key:"actived",get:function(){return this.$$.ctx[2]},set:function(o){this.$$set({actived:o}),(0,e.yl1)()}},{key:"content",get:function(){return this.$$.ctx[4]},set:function(o){this.$$set({content:o}),(0,e.yl1)()}}]),c})(e.f_C),q=Ae,te=__webpack_require__(4687),he=__webpack_require__(3283),Ce={};he.Z&&he.Z.locals&&(Ce.locals=he.Z.locals);var ye,ce=0,N={};N.styleTagTransform=L(),N.setAttributes=I(),N.insert=w().bind(null,"head"),N.domAPI=b(),N.insertStyleElement=M(),Ce.use=function(h){return N.options=h||{},ce++||(ye=y()(he.Z,N)),Ce},Ce.unuse=function(){ce>0&&!--ce&&(ye(),ye=null)};var J=Ce;function le(h,c,o){var l=h.slice();return l[39]=c[o][0],l[40]=c[o][1],l}function Se(h,c,o){var l=h.slice();return l[43]=c[o],l[45]=o,l}function Be(h,c,o){var l=h.slice();return l[39]=c[o][0],l[40]=c[o][1],l}function Ne(h,c,o){var l=h.slice();return l[39]=c[o][0],l[40]=c[o][1],l}function je(h,c,o){var l=h.slice();return l[43]=c[o],l[45]=o,l}function ke(h,c,o){var l=h.slice();return l[39]=c[o][0],l[40]=c[o][1],l}function Ve(h){var c,o,l,d,f,v=h[40].name+"";function _(){return h[25](h[40])}return{c:function(){c=(0,e.bGB)("a"),o=(0,e.fLW)(v),(0,e.Ljt)(c,"class","vc-tab"),(0,e.Ljt)(c,"id",l="__vc_tab_"+h[40].id),(0,e.VHj)(c,"vc-actived",h[40].id===h[2])},m:function(B,O){(0,e.$Tr)(B,c,O),(0,e.R3I)(c,o),d||(f=(0,e.oLt)(c,"click",_),d=!0)},p:function(B,O){h=B,8&O[0]&&v!==(v=h[40].name+"")&&(0,e.rTO)(o,v),8&O[0]&&l!==(l="__vc_tab_"+h[40].id)&&(0,e.Ljt)(c,"id",l),12&O[0]&&(0,e.VHj)(c,"vc-actived",h[40].id===h[2])},d:function(B){B&&(0,e.ogt)(c),d=!1,f()}}}function Ge(h){var c,o=h[40].hasTabPanel&&Ve(h);return{c:function(){o&&o.c(),c=(0,e.cSb)()},m:function(l,d){o&&o.m(l,d),(0,e.$Tr)(l,c,d)},p:function(l,d){l[40].hasTabPanel?o?o.p(l,d):((o=Ve(l)).c(),o.m(c.parentNode,c)):o&&(o.d(1),o=null)},d:function(l){o&&o.d(l),l&&(0,e.ogt)(c)}}}function We(h){var c,o,l,d,f,v=h[43].name+"";function _(){for(var B,O=arguments.length,$=new Array(O),j=0;j<O;j++)$[j]=arguments[j];return(B=h)[26].apply(B,[h[40],h[45]].concat($))}return{c:function(){c=(0,e.bGB)("i"),o=(0,e.fLW)(v),(0,e.Ljt)(c,"class",l="vc-toptab vc-topbar-"+h[40].id+" "+h[43].className),(0,e.VHj)(c,"vc-toggle",h[40].id===h[2]),(0,e.VHj)(c,"vc-actived",h[43].actived)},m:function(B,O){(0,e.$Tr)(B,c,O),(0,e.R3I)(c,o),d||(f=(0,e.oLt)(c,"click",_),d=!0)},p:function(B,O){h=B,8&O[0]&&v!==(v=h[43].name+"")&&(0,e.rTO)(o,v),8&O[0]&&l!==(l="vc-toptab vc-topbar-"+h[40].id+" "+h[43].className)&&(0,e.Ljt)(c,"class",l),12&O[0]&&(0,e.VHj)(c,"vc-toggle",h[40].id===h[2]),8&O[0]&&(0,e.VHj)(c,"vc-actived",h[43].actived)},d:function(B){B&&(0,e.ogt)(c),d=!1,f()}}}function Ke(h){for(var c,o=h[40].topbarList,l=[],d=0;d<o.length;d+=1)l[d]=We(je(h,o,d));return{c:function(){for(var f=0;f<l.length;f+=1)l[f].c();c=(0,e.cSb)()},m:function(f,v){for(var _=0;_<l.length;_+=1)l[_].m(f,v);(0,e.$Tr)(f,c,v)},p:function(f,v){if(8204&v[0]){var _;for(o=f[40].topbarList,_=0;_<o.length;_+=1){var B=je(f,o,_);l[_]?l[_].p(B,v):(l[_]=We(B),l[_].c(),l[_].m(c.parentNode,c))}for(;_<l.length;_+=1)l[_].d(1);l.length=o.length}},d:function(f){(0,e.RMB)(l,f),f&&(0,e.ogt)(c)}}}function Oe(h){var c,o,l,d=q;function f(v){var _;return{props:{pluginId:v[40].id,fixedHeight:(_=v[40].tabOptions)==null?void 0:_.fixedHeight,actived:v[40].id===v[2],content:v[40].content}}}return d&&(c=new d(f(h))),{c:function(){c&&(0,e.YCL)(c.$$.fragment),o=(0,e.cSb)()},m:function(v,_){c&&(0,e.yef)(c,v,_),(0,e.$Tr)(v,o,_),l=!0},p:function(v,_){var B,O={};if(8&_[0]&&(O.pluginId=v[40].id),8&_[0]&&(O.fixedHeight=(B=v[40].tabOptions)==null?void 0:B.fixedHeight),12&_[0]&&(O.actived=v[40].id===v[2]),8&_[0]&&(O.content=v[40].content),d!==(d=q)){if(c){(0,e.dvw)();var $=c;(0,e.etI)($.$$.fragment,1,0,(function(){(0,e.vpE)($,1)})),(0,e.gbL)()}d?(c=new d(f(v)),(0,e.YCL)(c.$$.fragment),(0,e.Ui)(c.$$.fragment,1),(0,e.yef)(c,o.parentNode,o)):c=null}else d&&c.$set(O)},i:function(v){l||(c&&(0,e.Ui)(c.$$.fragment,v),l=!0)},o:function(v){c&&(0,e.etI)(c.$$.fragment,v),l=!1},d:function(v){v&&(0,e.ogt)(o),c&&(0,e.vpE)(c,v)}}}function qe(h){var c,o,l,d,f,v=h[43].name+"";function _(){for(var B,O=arguments.length,$=new Array(O),j=0;j<O;j++)$[j]=arguments[j];return(B=h)[28].apply(B,[h[40],h[45]].concat($))}return{c:function(){c=(0,e.bGB)("i"),o=(0,e.fLW)(v),(0,e.Ljt)(c,"class",l="vc-tool vc-tool-"+h[40].id),(0,e.VHj)(c,"vc-global-tool",h[43].global),(0,e.VHj)(c,"vc-toggle",h[40].id===h[2])},m:function(B,O){(0,e.$Tr)(B,c,O),(0,e.R3I)(c,o),d||(f=(0,e.oLt)(c,"click",_),d=!0)},p:function(B,O){h=B,8&O[0]&&v!==(v=h[43].name+"")&&(0,e.rTO)(o,v),8&O[0]&&l!==(l="vc-tool vc-tool-"+h[40].id)&&(0,e.Ljt)(c,"class",l),8&O[0]&&(0,e.VHj)(c,"vc-global-tool",h[43].global),12&O[0]&&(0,e.VHj)(c,"vc-toggle",h[40].id===h[2])},d:function(B){B&&(0,e.ogt)(c),d=!1,f()}}}function Xe(h){for(var c,o=h[40].toolbarList,l=[],d=0;d<o.length;d+=1)l[d]=qe(Se(h,o,d));return{c:function(){for(var f=0;f<l.length;f+=1)l[f].c();c=(0,e.cSb)()},m:function(f,v){for(var _=0;_<l.length;_+=1)l[_].m(f,v);(0,e.$Tr)(f,c,v)},p:function(f,v){if(16396&v[0]){var _;for(o=f[40].toolbarList,_=0;_<o.length;_+=1){var B=Se(f,o,_);l[_]?l[_].p(B,v):(l[_]=qe(B),l[_].c(),l[_].m(c.parentNode,c))}for(;_<l.length;_+=1)l[_].d(1);l.length=o.length}},d:function(f){(0,e.RMB)(l,f),f&&(0,e.ogt)(c)}}}function Ye(h){var c,o,l,d,f,v,_,B,O,$,j,H,re,K,ie,ue,be,_e,Te,Qe,Fe;function st(Le){h[23](Le)}function at(Le){h[24](Le)}var ct={};h[0]!==void 0&&(ct.show=h[0]),h[1]!==void 0&&(ct.position=h[1]),o=new ne({props:ct}),e.VnY.push((function(){return(0,e.akz)(o,"show",st)})),e.VnY.push((function(){return(0,e.akz)(o,"position",at)})),o.$on("click",h[10]);for(var $e=Object.entries(h[3]),ze=[],ut=0;ut<$e.length;ut+=1)ze[ut]=Ge(ke(h,$e,ut));for(var Pt=Object.entries(h[3]),dt=[],lt=0;lt<Pt.length;lt+=1)dt[lt]=Ke(Ne(h,Pt,lt));for(var et=Object.entries(h[3]),Ie=[],Me=0;Me<et.length;Me+=1)Ie[Me]=Oe(Be(h,et,Me));for(var gt=function(Le){return(0,e.etI)(Ie[Le],1,1,(function(){Ie[Le]=null}))},we=Object.entries(h[3]),Ue=[],ot=0;ot<we.length;ot+=1)Ue[ot]=Xe(le(h,we,ot));return{c:function(){var Le,it;c=(0,e.bGB)("div"),(0,e.YCL)(o.$$.fragment),f=(0,e.DhX)(),v=(0,e.bGB)("div"),_=(0,e.DhX)(),B=(0,e.bGB)("div"),O=(0,e.bGB)("div");for(var wt=0;wt<ze.length;wt+=1)ze[wt].c();$=(0,e.DhX)(),j=(0,e.bGB)("div");for(var Rt=0;Rt<dt.length;Rt+=1)dt[Rt].c();H=(0,e.DhX)(),re=(0,e.bGB)("div");for(var Ft=0;Ft<Ie.length;Ft+=1)Ie[Ft].c();K=(0,e.DhX)(),ie=(0,e.bGB)("div");for(var Ct=0;Ct<Ue.length;Ct+=1)Ue[Ct].c();ue=(0,e.DhX)(),(be=(0,e.bGB)("i")).textContent="Hide",(0,e.Ljt)(v,"class","vc-mask"),(0,e.czc)(v,"display",h[8]?"block":"none"),(0,e.Ljt)(O,"class","vc-tabbar"),(0,e.Ljt)(j,"class","vc-topbar"),(0,e.Ljt)(re,"class","vc-content"),(0,e.VHj)(re,"vc-has-topbar",((Le=h[3][h[2]])==null||(it=Le.topbarList)==null?void 0:it.length)>0),(0,e.Ljt)(be,"class","vc-tool vc-global-tool vc-tool-last vc-hide"),(0,e.Ljt)(ie,"class","vc-toolbar"),(0,e.Ljt)(B,"class","vc-panel"),(0,e.czc)(B,"display",h[7]?"block":"none"),(0,e.Ljt)(c,"id","__vconsole"),(0,e.Ljt)(c,"style",_e=h[5]?"font-size:"+h[5]+";":""),(0,e.Ljt)(c,"data-theme",h[4]),(0,e.VHj)(c,"vc-toggle",h[6])},m:function(Le,it){(0,e.$Tr)(Le,c,it),(0,e.yef)(o,c,null),(0,e.R3I)(c,f),(0,e.R3I)(c,v),(0,e.R3I)(c,_),(0,e.R3I)(c,B),(0,e.R3I)(B,O);for(var wt=0;wt<ze.length;wt+=1)ze[wt].m(O,null);(0,e.R3I)(B,$),(0,e.R3I)(B,j);for(var Rt=0;Rt<dt.length;Rt+=1)dt[Rt].m(j,null);(0,e.R3I)(B,H),(0,e.R3I)(B,re);for(var Ft=0;Ft<Ie.length;Ft+=1)Ie[Ft].m(re,null);h[27](re),(0,e.R3I)(B,K),(0,e.R3I)(B,ie);for(var Ct=0;Ct<Ue.length;Ct+=1)Ue[Ct].m(ie,null);(0,e.R3I)(ie,ue),(0,e.R3I)(ie,be),Te=!0,Qe||(Fe=[(0,e.oLt)(v,"click",h[11]),(0,e.oLt)(re,"touchstart",h[15]),(0,e.oLt)(re,"touchmove",h[16]),(0,e.oLt)(re,"touchend",h[17]),(0,e.oLt)(re,"scroll",h[18]),(0,e.oLt)(be,"click",h[11]),(0,e.oLt)(c,"touchstart",h[19].touchStart,{passive:!1,capture:!0}),(0,e.oLt)(c,"touchmove",h[19].touchMove,{passive:!1,capture:!0}),(0,e.oLt)(c,"touchend",h[19].touchEnd,{passive:!1,capture:!0})],Qe=!0)},p:function(Le,it){var wt,Rt,Ft={};if(!l&&1&it[0]&&(l=!0,Ft.show=Le[0],(0,e.hjT)((function(){return l=!1}))),!d&&2&it[0]&&(d=!0,Ft.position=Le[1],(0,e.hjT)((function(){return d=!1}))),o.$set(Ft),(!Te||256&it[0])&&(0,e.czc)(v,"display",Le[8]?"block":"none"),4108&it[0]){var Ct;for($e=Object.entries(Le[3]),Ct=0;Ct<$e.length;Ct+=1){var tn=ke(Le,$e,Ct);ze[Ct]?ze[Ct].p(tn,it):(ze[Ct]=Ge(tn),ze[Ct].c(),ze[Ct].m(O,null))}for(;Ct<ze.length;Ct+=1)ze[Ct].d(1);ze.length=$e.length}if(8204&it[0]){var kt;for(Pt=Object.entries(Le[3]),kt=0;kt<Pt.length;kt+=1){var nn=Ne(Le,Pt,kt);dt[kt]?dt[kt].p(nn,it):(dt[kt]=Ke(nn),dt[kt].c(),dt[kt].m(j,null))}for(;kt<dt.length;kt+=1)dt[kt].d(1);dt.length=Pt.length}if(12&it[0]){var Tt;for(et=Object.entries(Le[3]),Tt=0;Tt<et.length;Tt+=1){var ln=Be(Le,et,Tt);Ie[Tt]?(Ie[Tt].p(ln,it),(0,e.Ui)(Ie[Tt],1)):(Ie[Tt]=Oe(ln),Ie[Tt].c(),(0,e.Ui)(Ie[Tt],1),Ie[Tt].m(re,null))}for((0,e.dvw)(),Tt=et.length;Tt<Ie.length;Tt+=1)gt(Tt);(0,e.gbL)()}if(12&it[0]&&(0,e.VHj)(re,"vc-has-topbar",((wt=Le[3][Le[2]])==null||(Rt=wt.topbarList)==null?void 0:Rt.length)>0),16396&it[0]){var Lt;for(we=Object.entries(Le[3]),Lt=0;Lt<we.length;Lt+=1){var yn=le(Le,we,Lt);Ue[Lt]?Ue[Lt].p(yn,it):(Ue[Lt]=Xe(yn),Ue[Lt].c(),Ue[Lt].m(ie,ue))}for(;Lt<Ue.length;Lt+=1)Ue[Lt].d(1);Ue.length=we.length}(!Te||128&it[0])&&(0,e.czc)(B,"display",Le[7]?"block":"none"),(!Te||32&it[0]&&_e!==(_e=Le[5]?"font-size:"+Le[5]+";":""))&&(0,e.Ljt)(c,"style",_e),(!Te||16&it[0])&&(0,e.Ljt)(c,"data-theme",Le[4]),64&it[0]&&(0,e.VHj)(c,"vc-toggle",Le[6])},i:function(Le){if(!Te){(0,e.Ui)(o.$$.fragment,Le);for(var it=0;it<et.length;it+=1)(0,e.Ui)(Ie[it]);Te=!0}},o:function(Le){(0,e.etI)(o.$$.fragment,Le),Ie=Ie.filter(Boolean);for(var it=0;it<Ie.length;it+=1)(0,e.etI)(Ie[it]);Te=!1},d:function(Le){Le&&(0,e.ogt)(c),(0,e.vpE)(o),(0,e.RMB)(ze,Le),(0,e.RMB)(dt,Le),(0,e.RMB)(Ie,Le),h[27](null),(0,e.RMB)(Ue,Le),Qe=!1,(0,e.j7q)(Fe)}}}function ht(h,c,o){var l,d,f=c.theme,v=f===void 0?"":f,_=c.disableScrolling,B=_!==void 0&&_,O=c.show,$=O!==void 0&&O,j=c.showSwitchButton,H=j===void 0||j,re=c.switchButtonPosition,K=re===void 0?{x:0,y:0}:re,ie=c.activedPluginId,ue=ie===void 0?"":ie,be=c.pluginList,_e=be===void 0?{}:be,Te=(0,u.x)(),Qe=!1,Fe="",st=!1,at=!1,ct=!1,$e=!0,ze=0,ut=null,Pt={};(0,u.H3)((function(){var we=document.querySelectorAll('[name="viewport"]');if(we&&we[0]){var Ue=(we[we.length-1].getAttribute("content")||"").match(/initial\-scale\=\d+(\.\d+)?/),ot=Ue?parseFloat(Ue[0].split("=")[1]):1;ot!==1&&o(5,Fe=Math.floor(1/ot*13)+"px")}J.use&&J.use(),l=te.x.subscribe((function(Le){$&&ze!==Le.updateTime&&(ze=Le.updateTime,dt())}))})),(0,u.ev)((function(){J.unuse&&J.unuse(),l&&l()}));var dt=function(){!B&&$e&&d&&o(9,d.scrollTop=d.scrollHeight-d.offsetHeight,d)},lt=function(we){we!==ue&&(o(2,ue=we),Te("changePanel",{pluginId:we}),setTimeout((function(){d&&o(9,d.scrollTop=Pt[ue]||0,d)}),0))},et=function(we,Ue,ot){var Le=_e[Ue].topbarList[ot],it=!0;if(n.mf(Le.onClick)&&(it=Le.onClick.call(we.target,we,Le.data)),it!==!1){for(var wt=0;wt<_e[Ue].topbarList.length;wt++)o(3,_e[Ue].topbarList[wt].actived=ot===wt,_e);o(3,_e)}},Ie=function(we,Ue,ot){var Le=_e[Ue].toolbarList[ot];n.mf(Le.onClick)&&Le.onClick.call(we.target,we,Le.data)},Me={tapTime:700,tapBoundary:10,lastTouchStartTime:0,touchstartX:0,touchstartY:0,touchHasMoved:!1,targetElem:null},gt={touchStart:function(we){if(Me.lastTouchStartTime===0){var Ue=we.targetTouches[0];Me.touchstartX=Ue.pageX,Me.touchstartY=Ue.pageY,Me.lastTouchStartTime=we.timeStamp,Me.targetElem=we.target.nodeType===Node.TEXT_NODE?we.target.parentNode:we.target}},touchMove:function(we){var Ue=we.changedTouches[0];(Math.abs(Ue.pageX-Me.touchstartX)>Me.tapBoundary||Math.abs(Ue.pageY-Me.touchstartY)>Me.tapBoundary)&&(Me.touchHasMoved=!0)},touchEnd:function(we){if(Me.touchHasMoved===!1&&we.timeStamp-Me.lastTouchStartTime<Me.tapTime&&Me.targetElem!=null){var Ue=!1;switch(Me.targetElem.tagName.toLowerCase()){case"textarea":Ue=!0;break;case"select":Ue=!Me.targetElem.disabled&&!Me.targetElem.readOnly;break;case"input":switch(Me.targetElem.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":Ue=!1;break;default:Ue=!Me.targetElem.disabled&&!Me.targetElem.readOnly}}Ue?Me.targetElem.focus():we.preventDefault();var ot=we.changedTouches[0],Le=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,screenX:ot.screenX,screenY:ot.screenY,clientX:ot.clientX,clientY:ot.clientY});Me.targetElem.dispatchEvent(Le)}Me.lastTouchStartTime=0,Me.touchHasMoved=!1,Me.targetElem=null}};return h.$$set=function(we){"theme"in we&&o(4,v=we.theme),"disableScrolling"in we&&o(20,B=we.disableScrolling),"show"in we&&o(21,$=we.show),"showSwitchButton"in we&&o(0,H=we.showSwitchButton),"switchButtonPosition"in we&&o(1,K=we.switchButtonPosition),"activedPluginId"in we&&o(2,ue=we.activedPluginId),"pluginList"in we&&o(3,_e=we.pluginList)},h.$$.update=function(){6291456&h.$$.dirty[0]&&($===!0?(o(7,at=!0),o(8,ct=!0),ut&&clearTimeout(ut),o(22,ut=setTimeout((function(){o(6,st=!0),dt()}),10))):(o(6,st=!1),ut&&clearTimeout(ut),o(22,ut=setTimeout((function(){o(7,at=!1),o(8,ct=!1)}),330))))},[H,K,ue,_e,v,Fe,st,at,ct,d,function(we){Te("show",{show:!0})},function(we){Te("show",{show:!1})},lt,et,Ie,function(we){if(!(we.target.tagName==="INPUT"||we.target.tagName==="TEXTAREA")){var Ue=!1;if(typeof window.getComputedStyle=="function"){var ot=window.getComputedStyle(we.target);ot.overflow!=="auto"&&ot.overflow!=="initial"&&ot.overflow!=="scroll"||(Ue=!0)}if(!Ue){var Le=d.scrollTop,it=d.scrollHeight,wt=Le+d.offsetHeight;Le===0?(o(9,d.scrollTop=1,d),d.scrollTop===0&&(Qe=!0)):wt===it&&(o(9,d.scrollTop=Le-1,d),d.scrollTop===Le&&(Qe=!0))}}},function(we){Qe&&we.preventDefault()},function(we){Qe=!1},function(we){$&&($e=d.scrollTop+d.offsetHeight>=d.scrollHeight-50,Pt[ue]=d.scrollTop)},gt,B,$,ut,function(we){o(0,H=we)},function(we){o(1,K=we)},function(we){return lt(we.id)},function(we,Ue,ot){return et(ot,we.id,Ue)},function(we){e.VnY[we?"unshift":"push"]((function(){o(9,d=we)}))},function(we,Ue,ot){return Ie(ot,we.id,Ue)}]}var At=(function(h){function c(o){var l;return l=h.call(this)||this,(0,e.S1n)((0,s.Z)(l),o,ht,Ye,e.N8,{theme:4,disableScrolling:20,show:21,showSwitchButton:0,switchButtonPosition:1,activedPluginId:2,pluginList:3},null,[-1,-1]),l}return(0,a.Z)(c,h),(0,g.Z)(c,[{key:"theme",get:function(){return this.$$.ctx[4]},set:function(o){this.$$set({theme:o}),(0,e.yl1)()}},{key:"disableScrolling",get:function(){return this.$$.ctx[20]},set:function(o){this.$$set({disableScrolling:o}),(0,e.yl1)()}},{key:"show",get:function(){return this.$$.ctx[21]},set:function(o){this.$$set({show:o}),(0,e.yl1)()}},{key:"showSwitchButton",get:function(){return this.$$.ctx[0]},set:function(o){this.$$set({showSwitchButton:o}),(0,e.yl1)()}},{key:"switchButtonPosition",get:function(){return this.$$.ctx[1]},set:function(o){this.$$set({switchButtonPosition:o}),(0,e.yl1)()}},{key:"activedPluginId",get:function(){return this.$$.ctx[2]},set:function(o){this.$$set({activedPluginId:o}),(0,e.yl1)()}},{key:"pluginList",get:function(){return this.$$.ctx[3]},set:function(o){this.$$set({pluginList:o}),(0,e.yl1)()}}]),c})(e.f_C),dn=At,Ut=(function(){function h(o,l){l===void 0&&(l="newPlugin"),this.isReady=!1,this.eventMap=new Map,this.exporter=void 0,this._id=void 0,this._name=void 0,this._vConsole=void 0,this.id=o,this.name=l,this.isReady=!1}var c=h.prototype;return c.on=function(o,l){return this.eventMap.set(o,l),this},c.onRemove=function(){this.unbindExporter()},c.trigger=function(o,l){var d=this.eventMap.get(o);if(typeof d=="function")d.call(this,l);else{var f="on"+o.charAt(0).toUpperCase()+o.slice(1);typeof this[f]=="function"&&this[f].call(this,l)}return this},c.bindExporter=function(){if(this._vConsole&&this.exporter){var o=this.id==="default"?"log":this.id;this._vConsole[o]=this.exporter}},c.unbindExporter=function(){var o=this.id==="default"?"log":this.id;this._vConsole&&this._vConsole[o]&&(this._vConsole[o]=void 0)},c.getUniqueID=function(o){return o===void 0&&(o=""),(0,n.QI)(o)},(0,g.Z)(h,[{key:"id",get:function(){return this._id},set:function(o){if(typeof o!="string")throw"[vConsole] Plugin ID must be a string.";if(!o)throw"[vConsole] Plugin ID cannot be empty.";this._id=o.toLowerCase()}},{key:"name",get:function(){return this._name},set:function(o){if(typeof o!="string")throw"[vConsole] Plugin name must be a string.";if(!o)throw"[vConsole] Plugin name cannot be empty.";this._name=o}},{key:"vConsole",get:function(){return this._vConsole||void 0},set:function(o){if(!o)throw"[vConsole] vConsole cannot be empty";this._vConsole=o,this.bindExporter()}}]),h})(),Dt=(function(h){function c(l,d,f,v){var _;return(_=h.call(this,l,d)||this).CompClass=void 0,_.compInstance=void 0,_.initialProps=void 0,_.CompClass=f,_.initialProps=v,_}(0,a.Z)(c,h);var o=c.prototype;return o.onReady=function(){this.isReady=!0},o.onRenderTab=function(l){var d=document.createElement("div"),f=this.compInstance=new this.CompClass({target:d,props:this.initialProps});l(d.firstElementChild,f.options)},o.onRemove=function(){h.prototype.onRemove&&h.prototype.onRemove.call(this),this.compInstance&&this.compInstance.$destroy()},c})(Ut),Ot=__webpack_require__(8665),pn=__webpack_require__(9923),Bt=__webpack_require__(8702);function Vt(h){var c,o;return(c=new Bt.Z({props:{name:h[0]?"success":"copy"}})).$on("click",h[1]),{c:function(){(0,e.YCL)(c.$$.fragment)},m:function(l,d){(0,e.yef)(c,l,d),o=!0},p:function(l,d){var f={};1&d[0]&&(f.name=l[0]?"success":"copy"),c.$set(f)},i:function(l){o||((0,e.Ui)(c.$$.fragment,l),o=!0)},o:function(l){(0,e.etI)(c.$$.fragment,l),o=!1},d:function(l){(0,e.vpE)(c,l)}}}function hn(h,c,o){var l=c.content,d=l===void 0?"":l,f=c.handler,v=f===void 0?void 0:f,_={target:document.documentElement},B=!1;return h.$$set=function(O){"content"in O&&o(2,d=O.content),"handler"in O&&o(3,v=O.handler)},[B,function(O){(function($,j){var H=(j===void 0?{}:j).target,re=H===void 0?document.body:H,K=document.createElement("textarea"),ie=document.activeElement;K.value=$,K.setAttribute("readonly",""),K.style.contain="strict",K.style.position="absolute",K.style.left="-9999px",K.style.fontSize="12pt";var ue=document.getSelection(),be=!1;ue.rangeCount>0&&(be=ue.getRangeAt(0)),re.append(K),K.select(),K.selectionStart=0,K.selectionEnd=$.length;var _e=!1;try{_e=document.execCommand("copy")}catch{}K.remove(),be&&(ue.removeAllRanges(),ue.addRange(be)),ie&&ie.focus()})(n.mf(v)?v(d)||"":n.Kn(d)||n.kJ(d)?n.hZ(d,{maxDepth:10,keyMaxLen:1e4,pretty:!1,standardJSON:!0}):d,_),o(0,B=!0),setTimeout((function(){o(0,B=!1)}),600)},d,v]}var Kt=(function(h){function c(o){var l;return l=h.call(this)||this,(0,e.S1n)((0,s.Z)(l),o,hn,Vt,e.N8,{content:2,handler:3}),l}return(0,a.Z)(c,h),(0,g.Z)(c,[{key:"content",get:function(){return this.$$.ctx[2]},set:function(o){this.$$set({content:o}),(0,e.yl1)()}},{key:"handler",get:function(){return this.$$.ctx[3]},set:function(o){this.$$set({handler:o}),(0,e.yl1)()}}]),c})(e.f_C),It=Kt,Ht=__webpack_require__(845),z={};Ht.Z&&Ht.Z.locals&&(z.locals=Ht.Z.locals);var me,De=0,Pe={};Pe.styleTagTransform=L(),Pe.setAttributes=I(),Pe.insert=w().bind(null,"head"),Pe.domAPI=b(),Pe.insertStyleElement=M(),z.use=function(h){return Pe.options=h||{},De++||(me=y()(Ht.Z,Pe)),z},z.unuse=function(){De>0&&!--De&&(me(),me=null)};var Je=z;function mt(h){var c,o,l,d=n.rE(h[1])+"";return{c:function(){c=(0,e.bGB)("i"),o=(0,e.fLW)(d),l=(0,e.fLW)(":"),(0,e.Ljt)(c,"class","vc-log-key"),(0,e.VHj)(c,"vc-log-key-symbol",h[2]==="symbol"),(0,e.VHj)(c,"vc-log-key-private",h[2]==="private")},m:function(f,v){(0,e.$Tr)(f,c,v),(0,e.R3I)(c,o),(0,e.$Tr)(f,l,v)},p:function(f,v){2&v&&d!==(d=n.rE(f[1])+"")&&(0,e.rTO)(o,d),4&v&&(0,e.VHj)(c,"vc-log-key-symbol",f[2]==="symbol"),4&v&&(0,e.VHj)(c,"vc-log-key-private",f[2]==="private")},d:function(f){f&&(0,e.ogt)(c),f&&(0,e.ogt)(l)}}}function xt(h){var c,o,l,d,f=h[1]!==void 0&&mt(h);return{c:function(){f&&f.c(),c=(0,e.DhX)(),o=(0,e.bGB)("i"),l=(0,e.fLW)(h[3]),(0,e.Ljt)(o,"class",d="vc-log-val vc-log-val-"+h[4]),(0,e.Ljt)(o,"style",h[0]),(0,e.VHj)(o,"vc-log-val-haskey",h[1]!==void 0)},m:function(v,_){f&&f.m(v,_),(0,e.$Tr)(v,c,_),(0,e.$Tr)(v,o,_),(0,e.R3I)(o,l)},p:function(v,_){var B=_[0];v[1]!==void 0?f?f.p(v,B):((f=mt(v)).c(),f.m(c.parentNode,c)):f&&(f.d(1),f=null),8&B&&(0,e.rTO)(l,v[3]),16&B&&d!==(d="vc-log-val vc-log-val-"+v[4])&&(0,e.Ljt)(o,"class",d),1&B&&(0,e.Ljt)(o,"style",v[0]),18&B&&(0,e.VHj)(o,"vc-log-val-haskey",v[1]!==void 0)},i:e.ZTd,o:e.ZTd,d:function(v){f&&f.d(v),v&&(0,e.ogt)(c),v&&(0,e.ogt)(o)}}}function oe(h,c,o){var l=c.origData,d=c.style,f=d===void 0?"":d,v=c.dataKey,_=v===void 0?void 0:v,B=c.keyType,O=B===void 0?"":B,$="",j="",H=!1;return(0,u.H3)((function(){Je.use()})),(0,u.ev)((function(){Je.unuse()})),h.$$set=function(re){"origData"in re&&o(5,l=re.origData),"style"in re&&o(0,f=re.style),"dataKey"in re&&o(1,_=re.dataKey),"keyType"in re&&o(2,O=re.keyType)},h.$$.update=function(){if(122&h.$$.dirty){o(6,H=_!==void 0);var re=(0,Ot.LH)(l,H);o(4,j=re.valueType),o(3,$=re.text),H||j!=="string"||o(3,$=$.replace(/\\n/g,`
`).replace(/\\t/g,"    "))}},[f,_,O,$,j,l,H]}var ge=(function(h){function c(o){var l;return l=h.call(this)||this,(0,e.S1n)((0,s.Z)(l),o,oe,xt,e.AqN,{origData:5,style:0,dataKey:1,keyType:2}),l}return(0,a.Z)(c,h),(0,g.Z)(c,[{key:"origData",get:function(){return this.$$.ctx[5]},set:function(o){this.$$set({origData:o}),(0,e.yl1)()}},{key:"style",get:function(){return this.$$.ctx[0]},set:function(o){this.$$set({style:o}),(0,e.yl1)()}},{key:"dataKey",get:function(){return this.$$.ctx[1]},set:function(o){this.$$set({dataKey:o}),(0,e.yl1)()}},{key:"keyType",get:function(){return this.$$.ctx[2]},set:function(o){this.$$set({keyType:o}),(0,e.yl1)()}}]),c})(e.f_C),se=ge,ve=__webpack_require__(1237),Ee={};ve.Z&&ve.Z.locals&&(Ee.locals=ve.Z.locals);var He,Ze=0,pt={};pt.styleTagTransform=L(),pt.setAttributes=I(),pt.insert=w().bind(null,"head"),pt.domAPI=b(),pt.insertStyleElement=M(),Ee.use=function(h){return pt.options=h||{},Ze++||(He=y()(ve.Z,pt)),Ee},Ee.unuse=function(){Ze>0&&!--Ze&&(He(),He=null)};var Nt=Ee;function Et(h,c,o){var l=h.slice();return l[19]=c[o],l[21]=o,l}function An(h,c,o){var l=h.slice();return l[19]=c[o],l}function Rn(h,c,o){var l=h.slice();return l[19]=c[o],l[21]=o,l}function Xt(h){for(var c,o,l,d,f,v,_,B=[],O=new Map,$=[],j=new Map,H=[],re=new Map,K=h[7],ie=function(Ie){return Ie[19]},ue=0;ue<K.length;ue+=1){var be=Rn(h,K,ue),_e=ie(be);O.set(_e,B[ue]=en(_e,be))}for(var Te=h[11]<h[7].length&&Cn(h),Qe=h[9],Fe=function(Ie){return Ie[19]},st=0;st<Qe.length;st+=1){var at=An(h,Qe,st),ct=Fe(at);j.set(ct,$[st]=Mn(ct,at))}for(var $e=h[8],ze=function(Ie){return Ie[19]},ut=0;ut<$e.length;ut+=1){var Pt=Et(h,$e,ut),dt=ze(Pt);re.set(dt,H[ut]=$n(dt,Pt))}var lt=h[12]<h[8].length&&Vn(h),et=h[10]&&bn(h);return{c:function(){c=(0,e.bGB)("div");for(var Ie=0;Ie<B.length;Ie+=1)B[Ie].c();o=(0,e.DhX)(),Te&&Te.c(),l=(0,e.DhX)();for(var Me=0;Me<$.length;Me+=1)$[Me].c();d=(0,e.DhX)();for(var gt=0;gt<H.length;gt+=1)H[gt].c();f=(0,e.DhX)(),lt&&lt.c(),v=(0,e.DhX)(),et&&et.c(),(0,e.Ljt)(c,"class","vc-log-tree-child")},m:function(Ie,Me){(0,e.$Tr)(Ie,c,Me);for(var gt=0;gt<B.length;gt+=1)B[gt].m(c,null);(0,e.R3I)(c,o),Te&&Te.m(c,null),(0,e.R3I)(c,l);for(var we=0;we<$.length;we+=1)$[we].m(c,null);(0,e.R3I)(c,d);for(var Ue=0;Ue<H.length;Ue+=1)H[Ue].m(c,null);(0,e.R3I)(c,f),lt&&lt.m(c,null),(0,e.R3I)(c,v),et&&et.m(c,null),_=!0},p:function(Ie,Me){67721&Me&&(K=Ie[7],(0,e.dvw)(),B=(0,e.GQg)(B,Me,ie,1,Ie,K,O,c,e.cly,en,o,Rn),(0,e.gbL)()),Ie[11]<Ie[7].length?Te?Te.p(Ie,Me):((Te=Cn(Ie)).c(),Te.m(c,l)):Te&&(Te.d(1),Te=null),66057&Me&&(Qe=Ie[9],(0,e.dvw)(),$=(0,e.GQg)($,Me,Fe,1,Ie,Qe,j,c,e.cly,Mn,d,An),(0,e.gbL)()),69897&Me&&($e=Ie[8],(0,e.dvw)(),H=(0,e.GQg)(H,Me,ze,1,Ie,$e,re,c,e.cly,$n,f,Et),(0,e.gbL)()),Ie[12]<Ie[8].length?lt?lt.p(Ie,Me):((lt=Vn(Ie)).c(),lt.m(c,v)):lt&&(lt.d(1),lt=null),Ie[10]?et?(et.p(Ie,Me),1024&Me&&(0,e.Ui)(et,1)):((et=bn(Ie)).c(),(0,e.Ui)(et,1),et.m(c,null)):et&&((0,e.dvw)(),(0,e.etI)(et,1,1,(function(){et=null})),(0,e.gbL)())},i:function(Ie){if(!_){for(var Me=0;Me<K.length;Me+=1)(0,e.Ui)(B[Me]);for(var gt=0;gt<Qe.length;gt+=1)(0,e.Ui)($[gt]);for(var we=0;we<$e.length;we+=1)(0,e.Ui)(H[we]);(0,e.Ui)(et),_=!0}},o:function(Ie){for(var Me=0;Me<B.length;Me+=1)(0,e.etI)(B[Me]);for(var gt=0;gt<$.length;gt+=1)(0,e.etI)($[gt]);for(var we=0;we<H.length;we+=1)(0,e.etI)(H[we]);(0,e.etI)(et),_=!1},d:function(Ie){Ie&&(0,e.ogt)(c);for(var Me=0;Me<B.length;Me+=1)B[Me].d();Te&&Te.d();for(var gt=0;gt<$.length;gt+=1)$[gt].d();for(var we=0;we<H.length;we+=1)H[we].d();lt&&lt.d(),et&&et.d()}}}function qt(h){var c,o;return c=new xn({props:{origData:h[16](h[19]),dataKey:h[19],keyPath:h[3]+"."+h[19],toggle:h[0]}}),{c:function(){(0,e.YCL)(c.$$.fragment)},m:function(l,d){(0,e.yef)(c,l,d),o=!0},p:function(l,d){var f={};128&d&&(f.origData=l[16](l[19])),128&d&&(f.dataKey=l[19]),136&d&&(f.keyPath=l[3]+"."+l[19]),1&d&&(f.toggle=l[0]),c.$set(f)},i:function(l){o||((0,e.Ui)(c.$$.fragment,l),o=!0)},o:function(l){(0,e.etI)(c.$$.fragment,l),o=!1},d:function(l){(0,e.vpE)(c,l)}}}function en(h,c){var o,l,d,f=c[21]<c[11]&&qt(c);return{key:h,first:null,c:function(){o=(0,e.cSb)(),f&&f.c(),l=(0,e.cSb)(),this.first=o},m:function(v,_){(0,e.$Tr)(v,o,_),f&&f.m(v,_),(0,e.$Tr)(v,l,_),d=!0},p:function(v,_){(c=v)[21]<c[11]?f?(f.p(c,_),2176&_&&(0,e.Ui)(f,1)):((f=qt(c)).c(),(0,e.Ui)(f,1),f.m(l.parentNode,l)):f&&((0,e.dvw)(),(0,e.etI)(f,1,1,(function(){f=null})),(0,e.gbL)())},i:function(v){d||((0,e.Ui)(f),d=!0)},o:function(v){(0,e.etI)(f),d=!1},d:function(v){v&&(0,e.ogt)(o),f&&f.d(v),v&&(0,e.ogt)(l)}}}function Cn(h){var c,o,l,d,f=h[14](h[7].length-h[11])+"";return{c:function(){c=(0,e.bGB)("div"),o=(0,e.fLW)(f),(0,e.Ljt)(c,"class","vc-log-tree-loadmore")},m:function(v,_){(0,e.$Tr)(v,c,_),(0,e.R3I)(c,o),l||(d=(0,e.oLt)(c,"click",h[17]),l=!0)},p:function(v,_){2176&_&&f!==(f=v[14](v[7].length-v[11])+"")&&(0,e.rTO)(o,f)},d:function(v){v&&(0,e.ogt)(c),l=!1,d()}}}function Mn(h,c){var o,l,d;return l=new xn({props:{origData:c[16](c[19]),dataKey:String(c[19]),keyType:"symbol",keyPath:c[3]+"["+String(c[19])+"]",toggle:c[0]}}),{key:h,first:null,c:function(){o=(0,e.cSb)(),(0,e.YCL)(l.$$.fragment),this.first=o},m:function(f,v){(0,e.$Tr)(f,o,v),(0,e.yef)(l,f,v),d=!0},p:function(f,v){c=f;var _={};512&v&&(_.origData=c[16](c[19])),512&v&&(_.dataKey=String(c[19])),520&v&&(_.keyPath=c[3]+"["+String(c[19])+"]"),1&v&&(_.toggle=c[0]),l.$set(_)},i:function(f){d||((0,e.Ui)(l.$$.fragment,f),d=!0)},o:function(f){(0,e.etI)(l.$$.fragment,f),d=!1},d:function(f){f&&(0,e.ogt)(o),(0,e.vpE)(l,f)}}}function Un(h){var c,o;return c=new xn({props:{origData:h[16](h[19]),dataKey:h[19],keyType:"private",keyPath:h[3]+"."+h[19],toggle:h[0]}}),{c:function(){(0,e.YCL)(c.$$.fragment)},m:function(l,d){(0,e.yef)(c,l,d),o=!0},p:function(l,d){var f={};256&d&&(f.origData=l[16](l[19])),256&d&&(f.dataKey=l[19]),264&d&&(f.keyPath=l[3]+"."+l[19]),1&d&&(f.toggle=l[0]),c.$set(f)},i:function(l){o||((0,e.Ui)(c.$$.fragment,l),o=!0)},o:function(l){(0,e.etI)(c.$$.fragment,l),o=!1},d:function(l){(0,e.vpE)(c,l)}}}function $n(h,c){var o,l,d,f=c[21]<c[12]&&Un(c);return{key:h,first:null,c:function(){o=(0,e.cSb)(),f&&f.c(),l=(0,e.cSb)(),this.first=o},m:function(v,_){(0,e.$Tr)(v,o,_),f&&f.m(v,_),(0,e.$Tr)(v,l,_),d=!0},p:function(v,_){(c=v)[21]<c[12]?f?(f.p(c,_),4352&_&&(0,e.Ui)(f,1)):((f=Un(c)).c(),(0,e.Ui)(f,1),f.m(l.parentNode,l)):f&&((0,e.dvw)(),(0,e.etI)(f,1,1,(function(){f=null})),(0,e.gbL)())},i:function(v){d||((0,e.Ui)(f),d=!0)},o:function(v){(0,e.etI)(f),d=!1},d:function(v){v&&(0,e.ogt)(o),f&&f.d(v),v&&(0,e.ogt)(l)}}}function Vn(h){var c,o,l,d,f=h[14](h[8].length-h[12])+"";return{c:function(){c=(0,e.bGB)("div"),o=(0,e.fLW)(f),(0,e.Ljt)(c,"class","vc-log-tree-loadmore")},m:function(v,_){(0,e.$Tr)(v,c,_),(0,e.R3I)(c,o),l||(d=(0,e.oLt)(c,"click",h[18]),l=!0)},p:function(v,_){4352&_&&f!==(f=v[14](v[8].length-v[12])+"")&&(0,e.rTO)(o,f)},d:function(v){v&&(0,e.ogt)(c),l=!1,d()}}}function bn(h){var c,o;return c=new xn({props:{origData:h[16]("__proto__"),dataKey:"__proto__",keyType:"private",keyPath:h[3]+".__proto__",toggle:h[0]}}),{c:function(){(0,e.YCL)(c.$$.fragment)},m:function(l,d){(0,e.yef)(c,l,d),o=!0},p:function(l,d){var f={};8&d&&(f.keyPath=l[3]+".__proto__"),1&d&&(f.toggle=l[0]),c.$set(f)},i:function(l){o||((0,e.Ui)(c.$$.fragment,l),o=!0)},o:function(l){(0,e.etI)(c.$$.fragment,l),o=!1},d:function(l){(0,e.vpE)(c,l)}}}function Hn(h){var c,o,l,d,f,v,_;l=new se({props:{origData:h[1],dataKey:h[2],keyType:h[4]}});var B=h[6]&&h[5]&&Xt(h);return{c:function(){c=(0,e.bGB)("div"),o=(0,e.bGB)("div"),(0,e.YCL)(l.$$.fragment),d=(0,e.DhX)(),B&&B.c(),(0,e.Ljt)(o,"class","vc-log-tree-node"),(0,e.Ljt)(c,"class","vc-log-tree"),(0,e.Ljt)(c,"data-keypath",h[3]),(0,e.VHj)(c,"vc-toggle",h[5]),(0,e.VHj)(c,"vc-is-tree",h[6])},m:function(O,$){(0,e.$Tr)(O,c,$),(0,e.R3I)(c,o),(0,e.yef)(l,o,null),(0,e.R3I)(c,d),B&&B.m(c,null),f=!0,v||(_=(0,e.oLt)(o,"click",(0,e.XET)(h[15])),v=!0)},p:function(O,$){var j=$[0],H={};2&j&&(H.origData=O[1]),4&j&&(H.dataKey=O[2]),16&j&&(H.keyType=O[4]),l.$set(H),O[6]&&O[5]?B?(B.p(O,j),96&j&&(0,e.Ui)(B,1)):((B=Xt(O)).c(),(0,e.Ui)(B,1),B.m(c,null)):B&&((0,e.dvw)(),(0,e.etI)(B,1,1,(function(){B=null})),(0,e.gbL)()),(!f||8&j)&&(0,e.Ljt)(c,"data-keypath",O[3]),32&j&&(0,e.VHj)(c,"vc-toggle",O[5]),64&j&&(0,e.VHj)(c,"vc-is-tree",O[6])},i:function(O){f||((0,e.Ui)(l.$$.fragment,O),(0,e.Ui)(B),f=!0)},o:function(O){(0,e.etI)(l.$$.fragment,O),(0,e.etI)(B),f=!1},d:function(O){O&&(0,e.ogt)(c),(0,e.vpE)(l),B&&B.d(),v=!1,_()}}}function tr(h,c,o){var l,d,f,v=c.origData,_=c.dataKey,B=_===void 0?void 0:_,O=c.keyPath,$=O===void 0?"":O,j=c.keyType,H=j===void 0?"":j,re=c.toggle,K=re===void 0?{}:re,ie=!1,ue=!1,be=!1,_e=50,Te=50;(0,u.H3)((function(){Nt.use()})),(0,u.ev)((function(){Nt.unuse()}));var Qe=function(Fe){Fe==="enum"?o(11,_e+=50):Fe==="nonEnum"&&o(12,Te+=50)};return h.$$set=function(Fe){"origData"in Fe&&o(1,v=Fe.origData),"dataKey"in Fe&&o(2,B=Fe.dataKey),"keyPath"in Fe&&o(3,$=Fe.keyPath),"keyType"in Fe&&o(4,H=Fe.keyType),"toggle"in Fe&&o(0,K=Fe.toggle)},h.$$.update=function(){1003&h.$$.dirty&&(o(5,ie=K[$]||!1),o(6,ue=!(v instanceof Ot.Tg)&&(n.kJ(v)||n.Kn(v))),ue&&ie&&(o(7,l=l||n.qr(n.MH(v))),o(8,d=d||n.qr(n.QK(v))),o(9,f=f||n._D(v)),o(10,be=n.Kn(v)&&d.indexOf("__proto__")===-1)))},[K,v,B,$,H,ie,ue,l,d,f,be,_e,Te,Qe,function(Fe){return"(..."+Fe+" Key"+(Fe>1?"s":"")+" Left)"},function(){o(5,ie=!ie),o(0,K[$]=ie,K)},function(Fe){try{return v[Fe]}catch{return new Ot.Tg}},function(){return Qe("enum")},function(){return Qe("nonEnum")}]}var xn=(function(h){function c(o){var l;return l=h.call(this)||this,(0,e.S1n)((0,s.Z)(l),o,tr,Hn,e.AqN,{origData:1,dataKey:2,keyPath:3,keyType:4,toggle:0}),l}return(0,a.Z)(c,h),(0,g.Z)(c,[{key:"origData",get:function(){return this.$$.ctx[1]},set:function(o){this.$$set({origData:o}),(0,e.yl1)()}},{key:"dataKey",get:function(){return this.$$.ctx[2]},set:function(o){this.$$set({dataKey:o}),(0,e.yl1)()}},{key:"keyPath",get:function(){return this.$$.ctx[3]},set:function(o){this.$$set({keyPath:o}),(0,e.yl1)()}},{key:"keyType",get:function(){return this.$$.ctx[4]},set:function(o){this.$$set({keyType:o}),(0,e.yl1)()}},{key:"toggle",get:function(){return this.$$.ctx[0]},set:function(o){this.$$set({toggle:o}),(0,e.yl1)()}}]),c})(e.f_C),Wn=xn,gn=__webpack_require__(7147),Sn={};gn.Z&&gn.Z.locals&&(Sn.locals=gn.Z.locals);var En,Tn=0,vn={};vn.styleTagTransform=L(),vn.setAttributes=I(),vn.insert=w().bind(null,"head"),vn.domAPI=b(),vn.insertStyleElement=M(),Sn.use=function(h){return vn.options=h||{},Tn++||(En=y()(gn.Z,vn)),Sn},Sn.unuse=function(){Tn>0&&!--Tn&&(En(),En=null)};var In=Sn;function Hr(h,c,o){var l=h.slice();return l[9]=c[o],l[11]=o,l}function Nr(h,c,o){var l=h.slice();return l[12]=c[o],l}function zr(h){for(var c,o,l,d,f,v,_,B,O,$,j,H,re,K=[],ie=new Map,ue=h[0].groupLevel&&jr(h),be=h[2]>0&&Wr(),_e=h[1]&&Qr(h),Te=h[0].repeated&&Kr(h),Qe=h[0].data,Fe=function($e){return $e[11]},st=0;st<Qe.length;st+=1){var at=Hr(h,Qe,st),ct=Fe(at);ie.set(ct,K[st]=qr(ct,at))}return O=new It({props:{handler:h[6]}}),{c:function(){c=(0,e.bGB)("div"),ue&&ue.c(),o=(0,e.DhX)(),be&&be.c(),l=(0,e.DhX)(),_e&&_e.c(),d=(0,e.DhX)(),Te&&Te.c(),f=(0,e.DhX)(),v=(0,e.bGB)("div");for(var $e=0;$e<K.length;$e+=1)K[$e].c();_=(0,e.DhX)(),B=(0,e.bGB)("div"),(0,e.YCL)(O.$$.fragment),(0,e.Ljt)(v,"class","vc-log-content"),(0,e.Ljt)(B,"class","vc-logrow-icon"),(0,e.Ljt)(c,"class",$="vc-log-row vc-log-"+h[0].type),(0,e.VHj)(c,"vc-log-input",h[0].cmdType==="input"),(0,e.VHj)(c,"vc-log-output",h[0].cmdType==="output"),(0,e.VHj)(c,"vc-log-group",h[2]>0),(0,e.VHj)(c,"vc-toggle",h[2]===1)},m:function($e,ze){(0,e.$Tr)($e,c,ze),ue&&ue.m(c,null),(0,e.R3I)(c,o),be&&be.m(c,null),(0,e.R3I)(c,l),_e&&_e.m(c,null),(0,e.R3I)(c,d),Te&&Te.m(c,null),(0,e.R3I)(c,f),(0,e.R3I)(c,v);for(var ut=0;ut<K.length;ut+=1)K[ut].m(v,null);(0,e.R3I)(c,_),(0,e.R3I)(c,B),(0,e.yef)(O,B,null),j=!0,H||(re=(0,e.oLt)(c,"click",h[5]),H=!0)},p:function($e,ze){$e[0].groupLevel?ue?ue.p($e,ze):((ue=jr($e)).c(),ue.m(c,o)):ue&&(ue.d(1),ue=null),$e[2]>0?be||((be=Wr()).c(),be.m(c,l)):be&&(be.d(1),be=null),$e[1]?_e?_e.p($e,ze):((_e=Qr($e)).c(),_e.m(c,d)):_e&&(_e.d(1),_e=null),$e[0].repeated?Te?Te.p($e,ze):((Te=Kr($e)).c(),Te.m(c,f)):Te&&(Te.d(1),Te=null),17&ze&&(Qe=$e[0].data,(0,e.dvw)(),K=(0,e.GQg)(K,ze,Fe,1,$e,Qe,ie,v,e.cly,qr,null,Hr),(0,e.gbL)()),(!j||1&ze&&$!==($="vc-log-row vc-log-"+$e[0].type))&&(0,e.Ljt)(c,"class",$),1&ze&&(0,e.VHj)(c,"vc-log-input",$e[0].cmdType==="input"),1&ze&&(0,e.VHj)(c,"vc-log-output",$e[0].cmdType==="output"),5&ze&&(0,e.VHj)(c,"vc-log-group",$e[2]>0),5&ze&&(0,e.VHj)(c,"vc-toggle",$e[2]===1)},i:function($e){if(!j){for(var ze=0;ze<Qe.length;ze+=1)(0,e.Ui)(K[ze]);(0,e.Ui)(O.$$.fragment,$e),j=!0}},o:function($e){for(var ze=0;ze<K.length;ze+=1)(0,e.etI)(K[ze]);(0,e.etI)(O.$$.fragment,$e),j=!1},d:function($e){$e&&(0,e.ogt)(c),ue&&ue.d(),be&&be.d(),_e&&_e.d(),Te&&Te.d();for(var ze=0;ze<K.length;ze+=1)K[ze].d();(0,e.vpE)(O),H=!1,re()}}}function jr(h){for(var c,o=new Array(h[0].groupLevel),l=[],d=0;d<o.length;d+=1)l[d]=Gr(Nr(h,o,d));return{c:function(){for(var f=0;f<l.length;f+=1)l[f].c();c=(0,e.cSb)()},m:function(f,v){for(var _=0;_<l.length;_+=1)l[_].m(f,v);(0,e.$Tr)(f,c,v)},p:function(f,v){if(1&v){var _;for(o=new Array(f[0].groupLevel),_=0;_<o.length;_+=1){var B=Nr(f,o,_);l[_]?l[_].p(B,v):(l[_]=Gr(),l[_].c(),l[_].m(c.parentNode,c))}for(;_<l.length;_+=1)l[_].d(1);l.length=o.length}},d:function(f){(0,e.RMB)(l,f),f&&(0,e.ogt)(c)}}}function Gr(h){var c;return{c:function(){c=(0,e.bGB)("i"),(0,e.Ljt)(c,"class","vc-log-padding")},m:function(o,l){(0,e.$Tr)(o,c,l)},p:e.ZTd,d:function(o){o&&(0,e.ogt)(c)}}}function Wr(h){var c;return{c:function(){c=(0,e.bGB)("div"),(0,e.Ljt)(c,"class","vc-log-group-toggle")},m:function(o,l){(0,e.$Tr)(o,c,l)},d:function(o){o&&(0,e.ogt)(c)}}}function Qr(h){var c,o;return{c:function(){c=(0,e.bGB)("div"),o=(0,e.fLW)(h[3]),(0,e.Ljt)(c,"class","vc-log-time")},m:function(l,d){(0,e.$Tr)(l,c,d),(0,e.R3I)(c,o)},p:function(l,d){8&d&&(0,e.rTO)(o,l[3])},d:function(l){l&&(0,e.ogt)(c)}}}function Kr(h){var c,o,l,d=h[0].repeated+"";return{c:function(){c=(0,e.bGB)("div"),o=(0,e.bGB)("i"),l=(0,e.fLW)(d),(0,e.Ljt)(c,"class","vc-log-repeat")},m:function(f,v){(0,e.$Tr)(f,c,v),(0,e.R3I)(c,o),(0,e.R3I)(o,l)},p:function(f,v){1&v&&d!==(d=f[0].repeated+"")&&(0,e.rTO)(l,d)},d:function(f){f&&(0,e.ogt)(c)}}}function hi(h){var c,o;return c=new se({props:{origData:h[9].origData,style:h[9].style}}),{c:function(){(0,e.YCL)(c.$$.fragment)},m:function(l,d){(0,e.yef)(c,l,d),o=!0},p:function(l,d){var f={};1&d&&(f.origData=l[9].origData),1&d&&(f.style=l[9].style),c.$set(f)},i:function(l){o||((0,e.Ui)(c.$$.fragment,l),o=!0)},o:function(l){(0,e.etI)(c.$$.fragment,l),o=!1},d:function(l){(0,e.vpE)(c,l)}}}function fi(h){var c,o;return c=new Wn({props:{origData:h[9].origData,keyPath:String(h[11]),toggle:h[0].toggle}}),{c:function(){(0,e.YCL)(c.$$.fragment)},m:function(l,d){(0,e.yef)(c,l,d),o=!0},p:function(l,d){var f={};1&d&&(f.origData=l[9].origData),1&d&&(f.keyPath=String(l[11])),1&d&&(f.toggle=l[0].toggle),c.$set(f)},i:function(l){o||((0,e.Ui)(c.$$.fragment,l),o=!0)},o:function(l){(0,e.etI)(c.$$.fragment,l),o=!1},d:function(l){(0,e.vpE)(c,l)}}}function qr(h,c){var o,l,d,f,v,_,B=[fi,hi],O=[];function $(j,H){return 1&H&&(l=null),l==null&&(l=!!j[4](j[9].origData)),l?0:1}return d=$(c,-1),f=O[d]=B[d](c),{key:h,first:null,c:function(){o=(0,e.cSb)(),f.c(),v=(0,e.cSb)(),this.first=o},m:function(j,H){(0,e.$Tr)(j,o,H),O[d].m(j,H),(0,e.$Tr)(j,v,H),_=!0},p:function(j,H){var re=d;(d=$(c=j,H))===re?O[d].p(c,H):((0,e.dvw)(),(0,e.etI)(O[re],1,1,(function(){O[re]=null})),(0,e.gbL)(),(f=O[d])?f.p(c,H):(f=O[d]=B[d](c)).c(),(0,e.Ui)(f,1),f.m(v.parentNode,v))},i:function(j){_||((0,e.Ui)(f),_=!0)},o:function(j){(0,e.etI)(f),_=!1},d:function(j){j&&(0,e.ogt)(o),O[d].d(j),j&&(0,e.ogt)(v)}}}function pi(h){var c,o,l=h[0]&&zr(h);return{c:function(){l&&l.c(),c=(0,e.cSb)()},m:function(d,f){l&&l.m(d,f),(0,e.$Tr)(d,c,f),o=!0},p:function(d,f){var v=f[0];d[0]?l?(l.p(d,v),1&v&&(0,e.Ui)(l,1)):((l=zr(d)).c(),(0,e.Ui)(l,1),l.m(c.parentNode,c)):l&&((0,e.dvw)(),(0,e.etI)(l,1,1,(function(){l=null})),(0,e.gbL)())},i:function(d){o||((0,e.Ui)(l),o=!0)},o:function(d){(0,e.etI)(l),o=!1},d:function(d){l&&l.d(d),d&&(0,e.ogt)(c)}}}function mi(h,c,o){var l=c.log,d=c.showTimestamps,f=d!==void 0&&d,v=c.groupHeader,_=v===void 0?0:v,B=(0,u.x)(),O="",$=function(j,H){var re="000"+j;return re.substring(re.length-H)};return(0,u.H3)((function(){In.use()})),(0,u.ev)((function(){In.unuse()})),h.$$set=function(j){"log"in j&&o(0,l=j.log),"showTimestamps"in j&&o(1,f=j.showTimestamps),"groupHeader"in j&&o(2,_=j.groupHeader)},h.$$.update=function(){if(3&h.$$.dirty&&f){var j=new Date(l.date);o(3,O=$(j.getHours(),2)+":"+$(j.getMinutes(),2)+":"+$(j.getSeconds(),2)+":"+$(j.getMilliseconds(),3))}},[l,f,_,O,function(j){return!(j instanceof Ot.Tg)&&(n.kJ(j)||n.Kn(j))},function(){_>0&&B("groupCollapsed",{groupLabel:l.groupLabel,groupHeader:_===1?2:1,isGroupCollapsed:_===1})},function(){var j=[];try{for(var H=0;H<l.data.length;H++)n.HD(l.data[H].origData)||n.hj(l.data[H].origData)?j.push(l.data[H].origData):j.push(n.hZ(l.data[H].origData,{maxDepth:10,keyMaxLen:1e4,pretty:!1,standardJSON:!0}))}catch{}return j.join(" ")}]}var gi=(function(h){function c(o){var l;return l=h.call(this)||this,(0,e.S1n)((0,s.Z)(l),o,mi,pi,e.AqN,{log:0,showTimestamps:1,groupHeader:2}),l}return(0,a.Z)(c,h),(0,g.Z)(c,[{key:"log",get:function(){return this.$$.ctx[0]},set:function(o){this.$$set({log:o}),(0,e.yl1)()}},{key:"showTimestamps",get:function(){return this.$$.ctx[1]},set:function(o){this.$$set({showTimestamps:o}),(0,e.yl1)()}},{key:"groupHeader",get:function(){return this.$$.ctx[2]},set:function(o){this.$$set({groupHeader:o}),(0,e.yl1)()}}]),c})(e.f_C),vi=gi,yi=__webpack_require__(3903),nr=__webpack_require__(3327),Qn={};nr.Z&&nr.Z.locals&&(Qn.locals=nr.Z.locals);var Sr,_r=0,Pn={};Pn.styleTagTransform=L(),Pn.setAttributes=I(),Pn.insert=w().bind(null,"head"),Pn.domAPI=b(),Pn.insertStyleElement=M(),Qn.use=function(h){return Pn.options=h||{},_r++||(Sr=y()(nr.Z,Pn)),Qn},Qn.unuse=function(){_r>0&&!--_r&&(Sr(),Sr=null)};var Xr=Qn,Ai=__webpack_require__(4264),bt=__webpack_require__.n(Ai),Ci=(function(){function h(o){console.debug("[vConsole] `ResizeObserver` is not supported in the browser, vConsole cannot render correctly."),o([{contentRect:{height:30}}],this)}var c=h.prototype;return c.disconnect=function(){},c.observe=function(o,l){},c.unobserve=function(o){},h})(),wr=function(){return typeof window.ResizeObserver=="function"},Yr=function(){return window.ResizeObserver||Ci};function bi(h){var c,o,l=h[6].default,d=(0,e.nuO)(l,h,h[5],null);return{c:function(){c=(0,e.bGB)("div"),d&&d.c(),(0,e.Ljt)(c,"class","vc-scroller-item"),(0,e.czc)(c,"display",h[0]?"block":"none",!1),(0,e.czc)(c,"top",h[3]?h[1]+"px":"auto",!1)},m:function(f,v){(0,e.$Tr)(f,c,v),d&&d.m(c,null),h[7](c),o=!0},p:function(f,v){var _=v[0];d&&d.p&&(!o||32&_)&&(0,e.kmG)(d,l,f,f[5],o?(0,e.u2N)(l,f[5],_,null):(0,e.VOJ)(f[5]),null),1&_&&(0,e.czc)(c,"display",f[0]?"block":"none",!1),2&_&&(0,e.czc)(c,"top",f[3]?f[1]+"px":"auto",!1)},i:function(f){o||((0,e.Ui)(d,f),o=!0)},o:function(f){(0,e.etI)(d,f),o=!1},d:function(f){f&&(0,e.ogt)(c),d&&d.d(f),h[7](null)}}}function Si(h,c,o){var l,d=c.$$slots,f=d===void 0?{}:d,v=c.$$scope,_=c.show,B=_===void 0?!wr():_,O=c.top,$=c.onResize,j=$===void 0?function(){}:$,H=null,re=wr();return(0,u.H3)((function(){if(B&&j(l.getBoundingClientRect().height),re){var K=Yr();(H=new K((function(ie){var ue=ie[0];B&&j(ue.contentRect.height)}))).observe(l)}})),(0,u.ev)((function(){re&&H.disconnect()})),h.$$set=function(K){"show"in K&&o(0,B=K.show),"top"in K&&o(1,O=K.top),"onResize"in K&&o(4,j=K.onResize),"$$scope"in K&&o(5,v=K.$$scope)},[B,O,l,re,j,v,f,function(K){e.VnY[K?"unshift":"push"]((function(){o(2,l=K)}))}]}var _i=(function(h){function c(o){var l;return l=h.call(this)||this,(0,e.S1n)((0,s.Z)(l),o,Si,bi,e.N8,{show:0,top:1,onResize:4}),l}return(0,a.Z)(c,h),(0,g.Z)(c,[{key:"show",get:function(){return this.$$.ctx[0]},set:function(o){this.$$set({show:o}),(0,e.yl1)()}},{key:"top",get:function(){return this.$$.ctx[1]},set:function(o){this.$$set({top:o}),(0,e.yl1)()}},{key:"onResize",get:function(){return this.$$.ctx[4]},set:function(o){this.$$set({onResize:o}),(0,e.yl1)()}}]),c})(e.f_C),wi=_i,xi=(function(){function h(){this._x=0,this._endX=0,this._v=0,this._startTime=0,this._endTime=0}var c=h.prototype;return c.set=function(o,l,d,f){this._x=o,this._endX=l,this._v=(l-o)/d,this._startTime=f||Date.now(),this._endTime=this._startTime+d},c.x=function(o){if(this.done(o))return this._endX;var l=o-this._startTime;return this._x+this._v*l},c.dx=function(o){return this.done(o)?0:this._v},c.done=function(o){return o>=this._endTime},h})(),Ei=(function(){function h(o){this._drag=void 0,this._dragLog=void 0,this._x=0,this._v=0,this._startTime=0,this._drag=o,this._dragLog=Math.log(o)}var c=h.prototype;return c.set=function(o,l,d){this._x=o,this._v=l,this._startTime=d||Date.now()},c.x=function(o){var l=(o-this._startTime)/1e3;return this._x+this._v*Math.pow(this._drag,l)/this._dragLog-this._v/this._dragLog},c.dx=function(o){var l=(o-this._startTime)/1e3;return this._v*Math.pow(this._drag,l)},c.done=function(o){return Math.abs(this.dx(o))<3},h})(),Zr=function(h,c){return h>c-.1&&h<c+.1},Jr=function(h){return Zr(h,0)},Ti=(function(){function h(o,l,d){this._solver=void 0,this._solution=void 0,this._endPosition=void 0,this._startTime=void 0,this._solver=(function(f,v,_){var B=_,O=f,$=v,j=B*B-4*O*$;if(j==0){var H=-B/(2*O);return function(be,_e){var Te=be,Qe=_e/(H*be);return{x:function(Fe){return(Te+Qe*Fe)*Math.pow(Math.E,H*Fe)},dx:function(Fe){return(H*(Te+Qe*Fe)+Qe)*Math.pow(Math.E,H*Fe)}}}}if(j>0){var re=(-B-Math.sqrt(j))/(2*O),K=(-B+Math.sqrt(j))/(2*O);return function(be,_e){var Te=(_e-re*be)/(K-re),Qe=be-Te;return{x:function(Fe){return Qe*Math.pow(Math.E,re*Fe)+Te*Math.pow(Math.E,K*Fe)},dx:function(Fe){return Qe*re*Math.pow(Math.E,re*Fe)+Te*K*Math.pow(Math.E,K*Fe)}}}}var ie=Math.sqrt(4*O*$-B*B)/(2*O),ue=-B/2*O;return function(be,_e){var Te=be,Qe=(_e-ue*be)/ie;return{x:function(Fe){return Math.pow(Math.E,ue*Fe)*(Te*Math.cos(ie*Fe)+Qe*Math.sin(ie*Fe))},dx:function(Fe){var st=Math.pow(Math.E,ue*Fe),at=Math.cos(ie*Fe),ct=Math.sin(ie*Fe);return st*(Qe*ie*at-Te*ie*ct)+ue*st*(Qe*ct+Te*at)}}}})(o,l,d),this._solution=null,this._endPosition=0,this._startTime=0}var c=h.prototype;return c.x=function(o){if(!this._solution)return 0;var l=(o-this._startTime)/1e3;return this._endPosition+this._solution.x(l)},c.dx=function(o){if(!this._solution)return 0;var l=(o-this._startTime)/1e3;return this._solution.dx(l)},c.set=function(o,l,d,f){f||(f=Date.now()),this._endPosition=o,l==o&&Jr(d)||(this._solution=this._solver(l-o,d),this._startTime=f)},c.done=function(o){return o||(o=Date.now()),Zr(this.x(o),this._endPosition)&&Jr(this.dx(o))},h})(),Ii=(function(){function h(o,l){this._enableSpring=l,this._getExtend=void 0,this._friction=new Ei(.05),this._spring=new Ti(1,90,20),this._toEdge=!1,this._getExtend=o}var c=h.prototype;return c.set=function(o,l,d){if(d===void 0&&(d=Date.now()),this._friction.set(o,l,d),o>0&&l>=0)this._toEdge=!0,this._enableSpring&&this._spring.set(0,o,l,d);else{var f=this._getExtend();o<-f&&l<=0?(this._toEdge=!0,this._enableSpring&&this._spring.set(-f,o,l,d)):this._toEdge=!1}},c.x=function(o){if(this._enableSpring&&this._toEdge)return this._spring.x(o);var l=this._friction.x(o),d=this._friction.dx(o);if(l>0&&d>=0){if(this._toEdge=!0,!this._enableSpring)return 0;this._spring.set(0,l,d,o)}else{var f=this._getExtend();if(l<-f&&d<=0){if(this._toEdge=!0,!this._enableSpring)return-f;this._spring.set(-f,l,d,o)}}return l},c.dx=function(o){return this._toEdge?this._enableSpring?this._spring.dx(o):0:this._friction.dx(o)},c.done=function(o){return this._toEdge?!this._enableSpring||this._spring.done(o):this._friction.done(o)},h})();function xr(h,c){var o,l;return(function d(){if(!l){var f=Date.now();c(f),h.done(f)||(o=requestAnimationFrame(d))}})(),{cancel:function(){cancelAnimationFrame(o),l=!0}}}var Di=(function(){function h(o,l){this._updatePosition=l,this._scrollModel=void 0,this._linearModel=void 0,this._startPosition=0,this._position=0,this._animate=null,this._getExtent=void 0,this._getExtent=o,this._scrollModel=new Ii(o,!1),this._linearModel=new xi}var c=h.prototype;return c.onTouchStart=function(){var o=this._position;if(o>0)o*=0;else{var l=this._getExtent();o<-l&&(o=0*(o+l)-l)}this._startPosition=this._position=o,this._animate&&(this._animate.cancel(),this._animate=null),this._updatePosition(-o)},c.onTouchMove=function(o,l){var d=l+this._startPosition;if(d>0)d*=0;else{var f=this._getExtent();d<-f&&(d=0*(d+f)-f)}this._position=d,this._updatePosition(-d)},c.onTouchEnd=function(o,l,d,f){var v=this,_=l+this._startPosition;if(_>0)_*=0;else{var B=this._getExtent();_<-B&&(_=0*(_+B)-B)}if(this._position=_,this._updatePosition(-_),!(Math.abs(l)<=.1&&Math.abs(f)<=.1)){var O=this._scrollModel;O.set(_,f),this._animate=xr(O,(function($){var j=v._position=O.x($);v._updatePosition(-j)}))}},c.onTouchCancel=function(){var o=this,l=this._position;if(l>0)l*=0;else{var d=this._getExtent();l<-d&&(l=0*(l+d)-d)}this._position=l;var f=this._scrollModel;f.set(l,0),this._animate=xr(f,(function(v){var _=o._position=f.x(v);o._updatePosition(-_)}))},c.onWheel=function(o,l){var d=this._position-l;if(this._animate&&(this._animate.cancel(),this._animate=null),d>0)d=0;else{var f=this._getExtent();d<-f&&(d=-f)}this._position=d,this._updatePosition(-d)},c.getPosition=function(){return-this._position},c.updatePosition=function(o){var l=-o-this._position;this._startPosition+=l,this._position+=l;var d=this._position;this._updatePosition(-d);var f=this._scrollModel,v=Date.now();if(!f.done(v)){var _=f.dx(v);f.set(d,_,v)}},c.scrollTo=function(o,l){var d=this;if(this._animate&&(this._animate.cancel(),this._animate=null),l>0){var f=this._linearModel;f.set(this._position,-o,l),this._animate=xr(this._linearModel,(function(v){var _=d._position=f.x(v);d._updatePosition(-_)}))}else this._updatePosition(o)},h})();function Bi(h,c){var o=typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(o)return(o=o.call(h)).next.bind(o);if(Array.isArray(h)||(o=(function(d,f){if(d){if(typeof d=="string")return eo(d,f);var v=Object.prototype.toString.call(d).slice(8,-1);if(v==="Object"&&d.constructor&&(v=d.constructor.name),v==="Map"||v==="Set")return Array.from(d);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return eo(d,f)}})(h))||c){o&&(h=o);var l=0;return function(){return l>=h.length?{done:!0}:{done:!1,value:h[l++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eo(h,c){(c==null||c>h.length)&&(c=h.length);for(var o=0,l=new Array(c);o<c;o++)l[o]=h[o];return l}var Ri=function(h){var c=null,o=!1,l=function d(){o=!1,h(),c=requestAnimationFrame((function(){c=null,o&&d()}))};return{trigger:function(){c===null?l():o=!0},cancel:function(){c&&(cancelAnimationFrame(c),o=!1,c=null)}}},Mi=(function(){function h(c){var o=this;this._handler=c,this._touchId=null,this._startX=0,this._startY=0,this._historyX=[],this._historyY=[],this._historyTime=[],this._wheelDeltaX=0,this._wheelDeltaY=0,this._onTouchMove=function(){var l=o._historyX[o._historyX.length-1],d=o._historyY[o._historyY.length-1];o._handler.onTouchMove(l,d)},this._onWheel=Ri((function(){var l=o._wheelDeltaX,d=o._wheelDeltaY;o._wheelDeltaX=0,o._wheelDeltaY=0,o._handler.onWheel(l,d)})),this.handleTouchStart=function(l){var d;if(((d=l.target.dataset)==null?void 0:d.scrollable)!=="1"){l.preventDefault();var f=l.touches[0];o._touchId=f.identifier,o._startX=f.pageX,o._startY=f.pageY,o._historyX=[0],o._historyY=[0],o._historyTime=[Date.now()],o._handler.onTouchStart()}},this.handleTouchMove=function(l){var d;if(((d=l.target.dataset)==null?void 0:d.scrollable)!=="1"){l.preventDefault();var f=o._getTouchDelta(l);f!==null&&(o._historyX.push(f.x),o._historyY.push(f.y),o._historyTime.push(Date.now()),o._onTouchMove())}},this.handleTouchEnd=function(l){var d;if(((d=l.target.dataset)==null?void 0:d.scrollable)!=="1"){l.preventDefault();var f=o._getTouchDelta(l);if(f!==null){for(var v=0,_=0,B=Date.now(),O=f.y,$=f.x,j=o._historyTime,H=j.length-1;H>0;H-=1){var re=B-j[H];if(re>30){v=1e3*($-o._historyX[H])/re,_=1e3*(O-o._historyY[H])/re;break}}o._touchId=null,o._handler.onTouchEnd(f.x,f.y,v,_)}}},this.handleTouchCancel=function(l){var d;((d=l.target.dataset)==null?void 0:d.scrollable)!=="1"&&(l.preventDefault(),o._getTouchDelta(l)!==null&&(o._touchId=null,o._handler.onTouchCancel()))},this.handleWheel=function(l){var d;((d=l.target.dataset)==null?void 0:d.scrollable)!=="1"&&(l.preventDefault(),o._wheelDeltaX+=l.deltaX,o._wheelDeltaY+=l.deltaY,o._onWheel.trigger())}}return h.prototype._getTouchDelta=function(c){if(this._touchId===null)return null;for(var o,l=Bi(c.changedTouches);!(o=l()).done;){var d=o.value;if(d.identifier===this._touchId)return{x:d.pageX-this._startX,y:d.pageY-this._startY}}return null},h})(),rr=__webpack_require__(1142),Kn={};rr.Z&&rr.Z.locals&&(Kn.locals=rr.Z.locals);var Er,Tr=0,Ln={};Ln.styleTagTransform=L(),Ln.setAttributes=I(),Ln.insert=w().bind(null,"head"),Ln.domAPI=b(),Ln.insertStyleElement=M(),Kn.use=function(h){return Ln.options=h||{},Tr++||(Er=y()(rr.Z,Ln)),Kn},Kn.unuse=function(){Tr>0&&!--Tr&&(Er(),Er=null)};var to=Kn,Pi=function(){var h=[],c=[],o=0,l=0,d=0,f=0,v=0;return function(_,B,O){if(d===_&&f===B&&v===O)return h;var $=c.length,j=B<=l?Math.max(0,Math.min(B,Math.max(o,Math.min(l-1,O-$)))):B,H=o<=O?Math.max(O,Math.min(_,Math.max(o+1,Math.min(l,j+$)))):O;if($===0||H-j<$){for(var re=h.length=c.length=O-B,K=0;K<re;K+=1)c[K]=K,h[K]={key:K,index:K+B,show:!0};return o=B,l=O,d=_,f=B,v=O,h}var ie=0,ue=0,be=0,_e=0;l<j||H<o?(be=j,_e=j+$):o<j?(ue=j-o,be=j,_e=j+$):H<l?(ue=$-(l-H),be=H-$,_e=H):j<=o&&l<=H&&(be=o,_e=l);for(var Te=j;Te<B;Te+=1,ie+=1){var Qe=c[(ue+ie)%$],Fe=h[Te-j];Fe.key=Qe,Fe.index=Te,Fe.show=!1}for(var st=B,at=0;st<O;st+=1){var ct=void 0;be<=st&&st<_e?(ct=c[(ue+ie)%$],ie+=1):(ct=$+at,at+=1);var $e=st-j;if($e<h.length){var ze=h[$e];ze.key=ct,ze.index=st,ze.show=!0}else h.push({key:ct,index:st,show:!0})}for(var ut=O;ut<H;ut+=1,ie+=1){var Pt=c[(ue+ie)%$],dt=h[ut-j];dt.key=Pt,dt.index=ut,dt.show=!1}for(var lt=0;lt<h.length;lt+=1)c[lt]=h[lt].key;return h.sort((function(et,Ie){return et.key-Ie.key})),o=j,l=H,d=_,f=B,v=O,h}},Li=e.lig.Map,Oi=function(h){return{}},no=function(h){return{}},Fi=function(h){return{}},ro=function(h){return{}};function oo(h,c,o){var l=h.slice();return l[53]=c[o],l[55]=o,l}var ki=function(h){return{item:1025&h[0]}},io=function(h){return{item:h[0][h[53].index]}},Ui=function(h){return{}},so=function(h){return{}};function ao(h){var c,o,l=h[24].header,d=(0,e.nuO)(l,h,h[31],so);return{c:function(){c=(0,e.bGB)("div"),d&&d.c(),(0,e.Ljt)(c,"class","vc-scroller-header")},m:function(f,v){(0,e.$Tr)(f,c,v),d&&d.m(c,null),h[25](c),o=!0},p:function(f,v){d&&d.p&&(!o||1&v[1])&&(0,e.kmG)(d,l,f,f[31],o?(0,e.u2N)(l,f[31],v,Ui):(0,e.VOJ)(f[31]),so)},i:function(f){o||((0,e.Ui)(d,f),o=!0)},o:function(f){(0,e.etI)(d,f),o=!1},d:function(f){f&&(0,e.ogt)(c),d&&d.d(f),h[25](null)}}}function $i(h){var c,o=h[24].empty,l=(0,e.nuO)(o,h,h[31],ro);return{c:function(){l&&l.c()},m:function(d,f){l&&l.m(d,f),c=!0},p:function(d,f){l&&l.p&&(!c||1&f[1])&&(0,e.kmG)(l,o,d,d[31],c?(0,e.u2N)(o,d[31],f,Fi):(0,e.VOJ)(d[31]),ro)},i:function(d){c||((0,e.Ui)(l,d),c=!0)},o:function(d){(0,e.etI)(l,d),c=!1},d:function(d){l&&l.d(d)}}}function Vi(h){for(var c,o,l=[],d=new Li,f=h[10],v=function($){return $[53].key},_=0;_<f.length;_+=1){var B=oo(h,f,_),O=v(B);d.set(O,l[_]=lo(O,B))}return{c:function(){for(var $=0;$<l.length;$+=1)l[$].c();c=(0,e.cSb)()},m:function($,j){for(var H=0;H<l.length;H+=1)l[H].m($,j);(0,e.$Tr)($,c,j),o=!0},p:function($,j){17921&j[0]|1&j[1]&&(f=$[10],(0,e.dvw)(),l=(0,e.GQg)(l,j,v,1,$,f,d,c.parentNode,e.cly,lo,c,oo),(0,e.gbL)())},i:function($){if(!o){for(var j=0;j<f.length;j+=1)(0,e.Ui)(l[j]);o=!0}},o:function($){for(var j=0;j<l.length;j+=1)(0,e.etI)(l[j]);o=!1},d:function($){for(var j=0;j<l.length;j+=1)l[j].d($);$&&(0,e.ogt)(c)}}}function Hi(h){var c,o,l=h[24].item,d=(0,e.nuO)(l,h,h[31],io),f=d||(function(v){var _;return{c:function(){_=(0,e.fLW)("Missing template")},m:function(B,O){(0,e.$Tr)(B,_,O)},d:function(B){B&&(0,e.ogt)(_)}}})();return{c:function(){f&&f.c(),c=(0,e.DhX)()},m:function(v,_){f&&f.m(v,_),(0,e.$Tr)(v,c,_),o=!0},p:function(v,_){d&&d.p&&(!o||1025&_[0]|1&_[1])&&(0,e.kmG)(d,l,v,v[31],o?(0,e.u2N)(l,v[31],_,ki):(0,e.VOJ)(v[31]),io)},i:function(v){o||((0,e.Ui)(f,v),o=!0)},o:function(v){(0,e.etI)(f,v),o=!1},d:function(v){f&&f.d(v),v&&(0,e.ogt)(c)}}}function lo(h,c){var o,l,d;function f(){for(var v,_=arguments.length,B=new Array(_),O=0;O<_;O++)B[O]=arguments[O];return(v=c)[26].apply(v,[c[53]].concat(B))}return l=new wi({props:{show:c[53].show,top:c[9][c[53].index],onResize:f,$$slots:{default:[Hi]},$$scope:{ctx:c}}}),{key:h,first:null,c:function(){o=(0,e.cSb)(),(0,e.YCL)(l.$$.fragment),this.first=o},m:function(v,_){(0,e.$Tr)(v,o,_),(0,e.yef)(l,v,_),d=!0},p:function(v,_){c=v;var B={};1024&_[0]&&(B.show=c[53].show),1536&_[0]&&(B.top=c[9][c[53].index]),1024&_[0]&&(B.onResize=f),1025&_[0]|1&_[1]&&(B.$$scope={dirty:_,ctx:c}),l.$set(B)},i:function(v){d||((0,e.Ui)(l.$$.fragment,v),d=!0)},o:function(v){(0,e.etI)(l.$$.fragment,v),d=!1},d:function(v){v&&(0,e.ogt)(o),(0,e.vpE)(l,v)}}}function co(h){var c,o,l=h[24].footer,d=(0,e.nuO)(l,h,h[31],no);return{c:function(){c=(0,e.bGB)("div"),d&&d.c(),(0,e.Ljt)(c,"class","vc-scroller-footer")},m:function(f,v){(0,e.$Tr)(f,c,v),d&&d.m(c,null),h[28](c),o=!0},p:function(f,v){d&&d.p&&(!o||1&v[1])&&(0,e.kmG)(d,l,f,f[31],o?(0,e.u2N)(l,f[31],v,Oi):(0,e.VOJ)(f[31]),no)},i:function(f){o||((0,e.Ui)(d,f),o=!0)},o:function(f){(0,e.etI)(d,f),o=!1},d:function(f){f&&(0,e.ogt)(c),d&&d.d(f),h[28](null)}}}function uo(h){var c,o,l=h[7]+"%",d=h[8]+"%";return{c:function(){c=(0,e.bGB)("div"),o=(0,e.bGB)("div"),(0,e.Ljt)(o,"class","vc-scroller-scrollbar-thumb"),(0,e.czc)(o,"height",l,!1),(0,e.czc)(o,"top",d,!1),(0,e.Ljt)(c,"class","vc-scroller-scrollbar-track"),(0,e.czc)(c,"display",h[7]<100?"block":"none",!1)},m:function(f,v){(0,e.$Tr)(f,c,v),(0,e.R3I)(c,o)},p:function(f,v){128&v[0]&&l!==(l=f[7]+"%")&&(0,e.czc)(o,"height",l,!1),256&v[0]&&d!==(d=f[8]+"%")&&(0,e.czc)(o,"top",d,!1),128&v[0]&&(0,e.czc)(c,"display",f[7]<100?"block":"none",!1)},d:function(f){f&&(0,e.ogt)(c)}}}function Ni(h){var c,o,l,d,f,v,_,B,O,$,j,H=h[15].header&&ao(h),re=[Vi,$i],K=[];function ie(_e,Te){return _e[0].length?0:1}f=ie(h),v=K[f]=re[f](h);var ue=h[15].footer&&co(h),be=h[1]&&uo(h);return{c:function(){c=(0,e.bGB)("div"),o=(0,e.bGB)("div"),H&&H.c(),l=(0,e.DhX)(),d=(0,e.bGB)("div"),v.c(),_=(0,e.DhX)(),ue&&ue.c(),B=(0,e.DhX)(),be&&be.c(),(0,e.Ljt)(d,"class","vc-scroller-items"),(0,e.Ljt)(o,"class","vc-scroller-contents"),(0,e.Ljt)(c,"class","vc-scroller-viewport"),(0,e.VHj)(c,"static",!h[13])},m:function(_e,Te){(0,e.$Tr)(_e,c,Te),(0,e.R3I)(c,o),H&&H.m(o,null),(0,e.R3I)(o,l),(0,e.R3I)(o,d),K[f].m(d,null),h[27](d),(0,e.R3I)(o,_),ue&&ue.m(o,null),h[29](o),(0,e.R3I)(c,B),be&&be.m(c,null),h[30](c),O=!0,$||(j=[(0,e.oLt)(c,"touchstart",(function(){(0,e.sBU)(h[13]?h[11].handleTouchStart:h[12])&&(h[13]?h[11].handleTouchStart:h[12]).apply(this,arguments)})),(0,e.oLt)(c,"touchmove",(function(){(0,e.sBU)(h[13]?h[11].handleTouchMove:h[12])&&(h[13]?h[11].handleTouchMove:h[12]).apply(this,arguments)})),(0,e.oLt)(c,"touchend",(function(){(0,e.sBU)(h[13]?h[11].handleTouchEnd:h[12])&&(h[13]?h[11].handleTouchEnd:h[12]).apply(this,arguments)})),(0,e.oLt)(c,"touchcancel",(function(){(0,e.sBU)(h[13]?h[11].handleTouchCancel:h[12])&&(h[13]?h[11].handleTouchCancel:h[12]).apply(this,arguments)})),(0,e.oLt)(c,"wheel",(function(){(0,e.sBU)(h[13]?h[11].handleWheel:h[12])&&(h[13]?h[11].handleWheel:h[12]).apply(this,arguments)}))],$=!0)},p:function(_e,Te){(h=_e)[15].header?H?(H.p(h,Te),32768&Te[0]&&(0,e.Ui)(H,1)):((H=ao(h)).c(),(0,e.Ui)(H,1),H.m(o,l)):H&&((0,e.dvw)(),(0,e.etI)(H,1,1,(function(){H=null})),(0,e.gbL)());var Qe=f;(f=ie(h))===Qe?K[f].p(h,Te):((0,e.dvw)(),(0,e.etI)(K[Qe],1,1,(function(){K[Qe]=null})),(0,e.gbL)(),(v=K[f])?v.p(h,Te):(v=K[f]=re[f](h)).c(),(0,e.Ui)(v,1),v.m(d,null)),h[15].footer?ue?(ue.p(h,Te),32768&Te[0]&&(0,e.Ui)(ue,1)):((ue=co(h)).c(),(0,e.Ui)(ue,1),ue.m(o,null)):ue&&((0,e.dvw)(),(0,e.etI)(ue,1,1,(function(){ue=null})),(0,e.gbL)()),h[1]?be?be.p(h,Te):((be=uo(h)).c(),be.m(c,null)):be&&(be.d(1),be=null)},i:function(_e){O||((0,e.Ui)(H),(0,e.Ui)(v),(0,e.Ui)(ue),O=!0)},o:function(_e){(0,e.etI)(H),(0,e.etI)(v),(0,e.etI)(ue),O=!1},d:function(_e){_e&&(0,e.ogt)(c),H&&H.d(),K[f].d(),h[27](null),ue&&ue.d(),h[29](null),be&&be.d(),h[30](null),$=!1,(0,e.j7q)(j)}}}function zi(h,c,o){var l,d,f,v,_,B,O,$=c.$$slots,j=$===void 0?{}:$,H=c.$$scope,re=(0,e.XGm)(j),K=this&&this.__awaiter||function(Re,nt,tt,rt){return new(tt||(tt=Promise))((function(ft,St){function cn(Mt){try{on(rt.next(Mt))}catch(Zt){St(Zt)}}function rn(Mt){try{on(rt.throw(Mt))}catch(Zt){St(Zt)}}function on(Mt){var Zt;Mt.done?ft(Mt.value):(Zt=Mt.value,Zt instanceof tt?Zt:new tt((function(wn){wn(Zt)}))).then(cn,rn)}on((rt=rt.apply(Re,nt||[])).next())}))},ie=c.items,ue=c.itemKey,be=ue===void 0?void 0:ue,_e=c.itemHeight,Te=_e===void 0?void 0:_e,Qe=c.buffer,Fe=Qe===void 0?200:Qe,st=c.stickToBottom,at=st!==void 0&&st,ct=c.scrollbar,$e=ct!==void 0&&ct,ze=c.start,ut=ze===void 0?0:ze,Pt=c.end,dt=Pt===void 0?0:Pt,lt=0,et=0,Ie=0,Me=0,gt=100,we=0,Ue=[],ot=[],Le=[],it=Pi(),wt=function(){return Math.max(0,Me+lt+et-Ie)},Rt=!0,Ft=!1,Ct=[],tn=!1,kt=!1,nn=wr(),Tt=function(Re,nt){var tt;(0,u.H3)((function(){var rt=Re();if(rt){nt(rt.getBoundingClientRect().height),tt&&tt.disconnect();var ft=Yr();(tt=new ft((function(St){var cn=St[0];nt(cn.contentRect.height)}))).observe(rt)}else nt(0),tt&&(tt.disconnect(),tt=null)})),(0,u.ev)((function(){tt&&(tt.disconnect(),tt=null)}))},ln=function(){var Re=B.getPosition(),nt=100/(Me+lt+et);o(8,we=Re*nt),o(7,gt=Ie*nt)},Lt=function(Re){var nt=wt();(Re||B.getPosition()>nt)&&B.updatePosition(nt)},yn=function(Re){(function(nt,tt,rt){for(var ft=new Map,St=0;St<Ct.length;St+=1){var cn=Ct[St],rn=be===void 0?cn:cn[be];ft.set(rn,Ue[St])}o(9,ot.length=Ue.length=nt.length,ot);for(var on=0,Mt=0;Mt<nt.length;Mt+=1){var Zt=nt[Mt],wn=be===void 0?Zt:Zt[be];ft.has(wn)?Ue[Mt]=ft.get(wn):Ue[Mt]=rt,o(9,ot[Mt]=on,ot),on+=Ue[Mt]}Me=Math.max(on,tt-lt-et),Ct=nt,nn?(_n(nt,B.getPosition(),tt),o(6,_.style.height=Me+"px",_),Lt(Rt&&at),ln()):_n(nt,0,9e6)})(Re,Ie,Te)};function _n(Re,nt,tt){for(var rt=0,ft=0;rt<Re.length&&ft+Ue[rt]<nt-Fe;)ft+=Ue[rt],rt+=1;for(o(16,ut=rt);rt<Re.length&&tt&&ft<nt+tt+Fe;)ft+=Ue[rt],rt+=1;o(17,dt=rt),o(10,Le=it(Re.length,ut,dt))}var jn=function(Re,nt){return K(void 0,void 0,void 0,bt().mark((function tt(){var rt,ft,St,cn;return bt().wrap((function(rn){for(;;)switch(rn.prev=rn.next){case 0:if(Ue[Re]!==nt&&Ie!==0){rn.next=2;break}return rn.abrupt("return");case 2:for(rt=Ue[Re],Ue[Re]=nt,ft=ie.length,St=Re;St<ft-1;St+=1)o(9,ot[St+1]=ot[St]+Ue[St],ot);return Me=Math.max(ot[ft-1]+Ue[ft-1],Ie-lt-et),cn=B.getPosition(),Ft=!0,ot[Re]+rt<cn?B.updatePosition(cn+nt-rt):Lt(Rt&&at),rn.next=12,new Promise((function(on){return setTimeout(on,0)}));case 12:_n(ie,B.getPosition(),Ie),o(6,_.style.height=Me+"px",_),ln();case 15:case"end":return rn.stop()}}),tt)})))};(0,u.H3)((function(){o(23,tn=!0),to.use()})),(0,u.ev)((function(){to.unuse()})),nn&&(nn&&(B=B||new Di(wt,(function(Re){return K(void 0,void 0,void 0,bt().mark((function nt(){var tt;return bt().wrap((function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(tt=wt(),Rt=Math.abs(Re-tt)<=1,o(5,v.style.transform="translateY("+-Re+"px) translateZ(0)",v),ln(),!Ft){rt.next=8;break}Ft=!1,rt.next=11;break;case 8:return rt.next=10,new Promise((function(ft){return setTimeout(ft,0)}));case 10:_n(ie,Re,Ie);case 11:case"end":return rt.stop()}}),nt)})))})),o(11,O=O||new Mi(B))),!kt&&nn&&(Tt((function(){return f}),(function(Re){return K(void 0,void 0,void 0,bt().mark((function nt(){var tt,rt;return bt().wrap((function(ft){for(;;)switch(ft.prev=ft.next){case 0:if(Ie!==Re){ft.next=2;break}return ft.abrupt("return");case 2:for(Ie=Re,tt=0,rt=0;rt<ie.length;rt+=1)tt+=Ue[rt];return Me=Math.max(tt,Ie-et),o(6,_.style.height=Me+"px",_),ft.next=9,new Promise((function(St){return setTimeout(St,0)}));case 9:yn(ie),_n(ie,B.getPosition(),Ie),Ie!==0&&Lt(Rt&&at),ln();case 13:case"end":return ft.stop()}}),nt)})))})),Tt((function(){return d}),(function(Re){if(et!==Re){et=Re;for(var nt=0,tt=0;tt<ie.length;tt+=1)nt+=Ue[tt];Me=Math.max(nt,Ie-lt-et),o(6,_.style.height=Me+"px",_),Ie!==0&&Lt(Rt&&at),ln()}})),Tt((function(){return l}),(function(Re){lt!==Re&&(lt=Re,yn(ie),ln())}))));var Jn={scrollTo:function(Re){if(nn){var nt=ot[Math.max(0,Math.min(ie.length-1,Re))],tt=Math.min(wt(),nt),rt=Math.min(Math.floor(500*Math.abs(B.getPosition()-tt)/2e3),500);B.scrollTo(tt,rt)}}};return h.$$set=function(Re){"items"in Re&&o(0,ie=Re.items),"itemKey"in Re&&o(18,be=Re.itemKey),"itemHeight"in Re&&o(19,Te=Re.itemHeight),"buffer"in Re&&o(20,Fe=Re.buffer),"stickToBottom"in Re&&o(21,at=Re.stickToBottom),"scrollbar"in Re&&o(1,$e=Re.scrollbar),"start"in Re&&o(16,ut=Re.start),"end"in Re&&o(17,dt=Re.end),"$$scope"in Re&&o(31,H=Re.$$scope)},h.$$.update=function(){8388609&h.$$.dirty[0]&&tn&&(nn||o(4,f.parentElement.style.height="auto",f),yn(ie),kt=!0)},[ie,$e,l,d,f,v,_,gt,we,ot,Le,O,function(){},nn,jn,re,ut,dt,be,Te,Fe,at,Jn,tn,j,function(Re){e.VnY[Re?"unshift":"push"]((function(){o(2,l=Re)}))},function(Re,nt){return jn(Re.index,nt)},function(Re){e.VnY[Re?"unshift":"push"]((function(){o(6,_=Re)}))},function(Re){e.VnY[Re?"unshift":"push"]((function(){o(3,d=Re)}))},function(Re){e.VnY[Re?"unshift":"push"]((function(){o(5,v=Re)}))},function(Re){e.VnY[Re?"unshift":"push"]((function(){o(4,f=Re),o(23,tn),o(13,nn),o(0,ie)}))},H]}var ji=(function(h){function c(o){var l;return l=h.call(this)||this,(0,e.S1n)((0,s.Z)(l),o,zi,Ni,e.N8,{items:0,itemKey:18,itemHeight:19,buffer:20,stickToBottom:21,scrollbar:1,start:16,end:17,handler:22},null,[-1,-1]),l}return(0,a.Z)(c,h),(0,g.Z)(c,[{key:"items",get:function(){return this.$$.ctx[0]},set:function(o){this.$$set({items:o}),(0,e.yl1)()}},{key:"itemKey",get:function(){return this.$$.ctx[18]},set:function(o){this.$$set({itemKey:o}),(0,e.yl1)()}},{key:"itemHeight",get:function(){return this.$$.ctx[19]},set:function(o){this.$$set({itemHeight:o}),(0,e.yl1)()}},{key:"buffer",get:function(){return this.$$.ctx[20]},set:function(o){this.$$set({buffer:o}),(0,e.yl1)()}},{key:"stickToBottom",get:function(){return this.$$.ctx[21]},set:function(o){this.$$set({stickToBottom:o}),(0,e.yl1)()}},{key:"scrollbar",get:function(){return this.$$.ctx[1]},set:function(o){this.$$set({scrollbar:o}),(0,e.yl1)()}},{key:"start",get:function(){return this.$$.ctx[16]},set:function(o){this.$$set({start:o}),(0,e.yl1)()}},{key:"end",get:function(){return this.$$.ctx[17]},set:function(o){this.$$set({end:o}),(0,e.yl1)()}},{key:"handler",get:function(){return this.$$.ctx[22]}}]),c})(e.f_C),ho=ji;function Gi(h){var c;return{c:function(){(c=(0,e.bGB)("div")).textContent="Empty",(0,e.Ljt)(c,"slot","empty"),(0,e.Ljt)(c,"class","vc-plugin-empty")},m:function(o,l){(0,e.$Tr)(o,c,l)},p:e.ZTd,d:function(o){o&&(0,e.ogt)(c)}}}function Wi(h){var c,o;return(c=new vi({props:{slot:"item",log:h[16],showTimestamps:h[1],groupHeader:h[16].groupHeader}})).$on("groupCollapsed",h[6]),{c:function(){(0,e.YCL)(c.$$.fragment)},m:function(l,d){(0,e.yef)(c,l,d),o=!0},p:function(l,d){var f={};65536&d&&(f.log=l[16]),2&d&&(f.showTimestamps=l[1]),65536&d&&(f.groupHeader=l[16].groupHeader),c.$set(f)},i:function(l){o||((0,e.Ui)(c.$$.fragment,l),o=!0)},o:function(l){(0,e.etI)(c.$$.fragment,l),o=!1},d:function(l){(0,e.vpE)(c,l)}}}function fo(h){var c,o;return(c=new yi.Z({})).$on("filterText",h[5]),{c:function(){(0,e.YCL)(c.$$.fragment)},m:function(l,d){(0,e.yef)(c,l,d),o=!0},p:e.ZTd,i:function(l){o||((0,e.Ui)(c.$$.fragment,l),o=!0)},o:function(l){(0,e.etI)(c.$$.fragment,l),o=!1},d:function(l){(0,e.vpE)(c,l)}}}function Qi(h){var c,o,l=h[0]&&fo(h);return{c:function(){l&&l.c(),c=(0,e.cSb)()},m:function(d,f){l&&l.m(d,f),(0,e.$Tr)(d,c,f),o=!0},p:function(d,f){d[0]?l?(l.p(d,f),1&f&&(0,e.Ui)(l,1)):((l=fo(d)).c(),(0,e.Ui)(l,1),l.m(c.parentNode,c)):l&&((0,e.dvw)(),(0,e.etI)(l,1,1,(function(){l=null})),(0,e.gbL)())},i:function(d){o||((0,e.Ui)(l),o=!0)},o:function(d){(0,e.etI)(l),o=!1},d:function(d){l&&l.d(d),d&&(0,e.ogt)(c)}}}function Ki(h){var c,o,l,d;function f(_){h[15](_)}var v={items:h[4],itemKey:"_id",itemHeight:30,buffer:100,stickToBottom:!0,scrollbar:!0,$$slots:{footer:[Qi],item:[Wi,function(_){return{16:_.item}},function(_){return _.item?65536:0}],empty:[Gi]},$$scope:{ctx:h}};return h[3]!==void 0&&(v.handler=h[3]),o=new ho({props:v}),e.VnY.push((function(){return(0,e.akz)(o,"handler",f)})),{c:function(){c=(0,e.bGB)("div"),(0,e.YCL)(o.$$.fragment),(0,e.Ljt)(c,"class","vc-plugin-content"),(0,e.VHj)(c,"vc-logs-has-cmd",h[0])},m:function(_,B){(0,e.$Tr)(_,c,B),(0,e.yef)(o,c,null),d=!0},p:function(_,B){var O=B[0],$={};16&O&&($.items=_[4]),196611&O&&($.$$scope={dirty:O,ctx:_}),!l&&8&O&&(l=!0,$.handler=_[3],(0,e.hjT)((function(){return l=!1}))),o.$set($),1&O&&(0,e.VHj)(c,"vc-logs-has-cmd",_[0])},i:function(_){d||((0,e.Ui)(o.$$.fragment,_),d=!0)},o:function(_){(0,e.etI)(o.$$.fragment,_),d=!1},d:function(_){_&&(0,e.ogt)(c),(0,e.vpE)(o)}}}function qi(h,c,o){var l,d=e.ZTd;h.$$.on_destroy.push((function(){return d()}));var f,v,_=c.pluginId,B=_===void 0?"default":_,O=c.showCmd,$=O!==void 0&&O,j=c.filterType,H=j===void 0?"all":j,re=c.showTimestamps,K=re!==void 0&&re,ie=!1,ue="",be=[];return(0,u.H3)((function(){Xr.use()})),(0,u.ev)((function(){Xr.unuse()})),h.$$set=function(_e){"pluginId"in _e&&o(7,B=_e.pluginId),"showCmd"in _e&&o(0,$=_e.showCmd),"filterType"in _e&&o(8,H=_e.filterType),"showTimestamps"in _e&&o(1,K=_e.showTimestamps)},h.$$.update=function(){29056&h.$$.dirty&&(ie||(o(2,f=pn.O.get(B)),d(),d=(0,e.LdU)(f,(function(_e){return o(14,l=_e)})),o(12,ie=!0)),o(4,be=l.logList.filter((function(_e){return(H==="all"||H===_e.type)&&(ue===""||(0,Ot.HX)(_e,ue))&&!_e.groupCollapsed}))))},[$,K,f,v,be,function(_e){o(13,ue=_e.detail.filterText||"")},function(_e){var Te=_e.detail.groupLabel,Qe=_e.detail.groupHeader,Fe=_e.detail.isGroupCollapsed;f.update((function(st){return st.logList.forEach((function(at){at.groupLabel===Te&&(at.groupHeader>0?at.groupHeader=Qe:at.groupCollapsed=Fe)})),st}))},B,H,function(){v.scrollTo(0)},function(){v.scrollTo(be.length-1)},{fixedHeight:!0},ie,ue,l,function(_e){o(3,v=_e)}]}var Xi=(function(h){function c(o){var l;return l=h.call(this)||this,(0,e.S1n)((0,s.Z)(l),o,qi,Ki,e.N8,{pluginId:7,showCmd:0,filterType:8,showTimestamps:1,scrollToTop:9,scrollToBottom:10,options:11}),l}return(0,a.Z)(c,h),(0,g.Z)(c,[{key:"pluginId",get:function(){return this.$$.ctx[7]},set:function(o){this.$$set({pluginId:o}),(0,e.yl1)()}},{key:"showCmd",get:function(){return this.$$.ctx[0]},set:function(o){this.$$set({showCmd:o}),(0,e.yl1)()}},{key:"filterType",get:function(){return this.$$.ctx[8]},set:function(o){this.$$set({filterType:o}),(0,e.yl1)()}},{key:"showTimestamps",get:function(){return this.$$.ctx[1]},set:function(o){this.$$set({showTimestamps:o}),(0,e.yl1)()}},{key:"scrollToTop",get:function(){return this.$$.ctx[9]}},{key:"scrollToBottom",get:function(){return this.$$.ctx[10]}},{key:"options",get:function(){return this.$$.ctx[11]}}]),c})(e.f_C),Yi=Xi,or=__webpack_require__(5629),po=(function(){function h(c){this.model=void 0,this.pluginId=void 0,this.pluginId=c}return h.prototype.destroy=function(){this.model=void 0},h})(),Zi=(function(h){function c(){for(var l,d=arguments.length,f=new Array(d),v=0;v<d;v++)f[v]=arguments[v];return(l=h.call.apply(h,[this].concat(f))||this).model=or.W.getSingleton(or.W,"VConsoleLogModel"),l}(0,a.Z)(c,h);var o=c.prototype;return o.log=function(){for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];this.addLog.apply(this,["log"].concat(d))},o.info=function(){for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];this.addLog.apply(this,["info"].concat(d))},o.debug=function(){for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];this.addLog.apply(this,["debug"].concat(d))},o.warn=function(){for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];this.addLog.apply(this,["warn"].concat(d))},o.error=function(){for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];this.addLog.apply(this,["error"].concat(d))},o.clear=function(){this.model&&this.model.clearPluginLog(this.pluginId)},o.addLog=function(l){if(this.model){for(var d=arguments.length,f=new Array(d>1?d-1:0),v=1;v<d;v++)f[v-1]=arguments[v];f.unshift("["+this.pluginId+"]"),this.model.addLog({type:l,origData:f},{noOrig:!0})}},c})(po),Ir=(function(h){function c(l,d){var f;return(f=h.call(this,l,d,Yi,{pluginId:l,filterType:"all"})||this).model=or.W.getSingleton(or.W,"VConsoleLogModel"),f.isReady=!1,f.isShow=!1,f.isInBottom=!0,f.model.bindPlugin(l),f.exporter=new Zi(l),f}(0,a.Z)(c,h);var o=c.prototype;return o.onReady=function(){var l,d;h.prototype.onReady.call(this),this.model.maxLogNumber=Number((l=this.vConsole.option.log)==null?void 0:l.maxLogNumber)||1e3,this.compInstance.showTimestamps=!((d=this.vConsole.option.log)==null||!d.showTimestamps)},o.onRemove=function(){h.prototype.onRemove.call(this),this.model.unbindPlugin(this.id)},o.onAddTopBar=function(l){for(var d=this,f=["All","Log","Info","Warn","Error"],v=[],_=0;_<f.length;_++)v.push({name:f[_],data:{type:f[_].toLowerCase()},actived:_===0,className:"",onClick:function(B,O){if(O.type===d.compInstance.filterType)return!1;d.compInstance.filterType=O.type}});v[0].className="vc-actived",l(v)},o.onAddTool=function(l){var d=this;l([{name:"Clear",global:!1,onClick:function(f){d.model.clearPluginLog(d.id),d.vConsole.triggerEvent("clearLog")}},{name:"Top",global:!1,onClick:function(f){d.compInstance.scrollToTop()}},{name:"Bottom",global:!1,onClick:function(f){d.compInstance.scrollToBottom()}}])},o.onUpdateOption=function(){var l,d,f,v;((l=this.vConsole.option.log)==null?void 0:l.maxLogNumber)!==this.model.maxLogNumber&&(this.model.maxLogNumber=Number((f=this.vConsole.option.log)==null?void 0:f.maxLogNumber)||1e3),!((d=this.vConsole.option.log)==null||!d.showTimestamps)!==this.compInstance.showTimestamps&&(this.compInstance.showTimestamps=!((v=this.vConsole.option.log)==null||!v.showTimestamps))},c})(Dt),mo=(function(h){function c(){for(var l,d=arguments.length,f=new Array(d),v=0;v<d;v++)f[v]=arguments[v];return(l=h.call.apply(h,[this].concat(f))||this).onErrorHandler=void 0,l.resourceErrorHandler=void 0,l.rejectionHandler=void 0,l}(0,a.Z)(c,h);var o=c.prototype;return o.onReady=function(){h.prototype.onReady.call(this),this.bindErrors(),this.compInstance.showCmd=!0},o.onRemove=function(){h.prototype.onRemove.call(this),this.unbindErrors()},o.bindErrors=function(){n.FJ(window)&&n.mf(window.addEventListener)&&(this.catchWindowOnError(),this.catchResourceError(),this.catchUnhandledRejection())},o.unbindErrors=function(){n.FJ(window)&&n.mf(window.addEventListener)&&(window.removeEventListener("error",this.onErrorHandler),window.removeEventListener("error",this.resourceErrorHandler),window.removeEventListener("unhandledrejection",this.rejectionHandler))},o.catchWindowOnError=function(){var l=this;this.onErrorHandler=this.onErrorHandler?this.onErrorHandler:function(d){var f=d.message;d.filename&&(f+="\\n\\t"+d.filename.replace(location.origin,""),(d.lineno||d.colno)&&(f+=":"+d.lineno+":"+d.colno)),f+="\\n"+(!!d.error&&!!d.error.stack&&d.error.stack.toString()||""),l.model.addLog({type:"error",origData:[f]},{noOrig:!0})},window.removeEventListener("error",this.onErrorHandler),window.addEventListener("error",this.onErrorHandler)},o.catchResourceError=function(){var l=this;this.resourceErrorHandler=this.resourceErrorHandler?this.resourceErrorHandler:function(d){var f=d.target;if(["link","video","script","img","audio"].indexOf(f.localName)>-1){var v=f.href||f.src||f.currentSrc;l.model.addLog({type:"error",origData:["GET <"+f.localName+"> error: "+v]},{noOrig:!0})}},window.removeEventListener("error",this.resourceErrorHandler),window.addEventListener("error",this.resourceErrorHandler,!0)},o.catchUnhandledRejection=function(){var l=this;this.rejectionHandler=this.rejectionHandler?this.rejectionHandler:function(d){var f=d&&d.reason,v="Uncaught (in promise) ",_=[v,f];f instanceof Error&&(_=[v,{name:f.name,message:f.message,stack:f.stack}]),l.model.addLog({type:"error",origData:_},{noOrig:!0})},window.removeEventListener("unhandledrejection",this.rejectionHandler),window.addEventListener("unhandledrejection",this.rejectionHandler)},c})(Ir),go=(function(h){function c(){return h.apply(this,arguments)||this}(0,a.Z)(c,h);var o=c.prototype;return o.onReady=function(){h.prototype.onReady.call(this),this.printSystemInfo()},o.printSystemInfo=function(){var l=navigator.userAgent,d=[],f=l.match(/MicroMessenger\/([\d\.]+)/i),v=f&&f[1]?f[1]:null;location.host==="servicewechat.com"||console.info("[system]","Location:",location.href);var _=l.match(/(ipod).*\s([\d_]+)/i),B=l.match(/(ipad).*\s([\d_]+)/i),O=l.match(/(iphone)\sos\s([\d_]+)/i),$=l.match(/(android)\s([\d\.]+)/i),j=l.match(/(Mac OS X)\s([\d_]+)/i);d=[],$?d.push("Android "+$[2]):O?d.push("iPhone, iOS "+O[2].replace(/_/g,".")):B?d.push("iPad, iOS "+B[2].replace(/_/g,".")):_?d.push("iPod, iOS "+_[2].replace(/_/g,".")):j&&d.push("Mac, MacOS "+j[2].replace(/_/g,".")),v&&d.push("WeChat "+v),console.info("[system]","Client:",d.length?d.join(", "):"Unknown");var H=l.toLowerCase().match(/ nettype\/([^ ]+)/g);H&&H[0]&&(d=[(H=H[0].split("/"))[1]],console.info("[system]","Network:",d.length?d.join(", "):"Unknown")),console.info("[system]","UA:",l),setTimeout((function(){var re=window.performance||window.msPerformance||window.webkitPerformance;if(re&&re.timing){var K=re.timing;K.navigationStart&&console.info("[system]","navigationStart:",K.navigationStart),K.navigationStart&&K.domainLookupStart&&console.info("[system]","navigation:",K.domainLookupStart-K.navigationStart+"ms"),K.domainLookupEnd&&K.domainLookupStart&&console.info("[system]","dns:",K.domainLookupEnd-K.domainLookupStart+"ms"),K.connectEnd&&K.connectStart&&(K.connectEnd&&K.secureConnectionStart?console.info("[system]","tcp (ssl):",K.connectEnd-K.connectStart+"ms ("+(K.connectEnd-K.secureConnectionStart)+"ms)"):console.info("[system]","tcp:",K.connectEnd-K.connectStart+"ms")),K.responseStart&&K.requestStart&&console.info("[system]","request:",K.responseStart-K.requestStart+"ms"),K.responseEnd&&K.responseStart&&console.info("[system]","response:",K.responseEnd-K.responseStart+"ms"),K.domComplete&&K.domLoading&&(K.domContentLoadedEventStart&&K.domLoading?console.info("[system]","domComplete (domLoaded):",K.domComplete-K.domLoading+"ms ("+(K.domContentLoadedEventStart-K.domLoading)+"ms)"):console.info("[system]","domComplete:",K.domComplete-K.domLoading+"ms")),K.loadEventEnd&&K.loadEventStart&&console.info("[system]","loadEvent:",K.loadEventEnd-K.loadEventStart+"ms"),K.navigationStart&&K.loadEventEnd&&console.info("[system]","total (DOM):",K.loadEventEnd-K.navigationStart+"ms ("+(K.domComplete-K.navigationStart)+"ms)")}}),0)},c})(Ir),$t=__webpack_require__(3313),vo=__webpack_require__(643);function Dr(h,c){var o=typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(o)return(o=o.call(h)).next.bind(o);if(Array.isArray(h)||(o=(function(d,f){if(d){if(typeof d=="string")return yo(d,f);var v=Object.prototype.toString.call(d).slice(8,-1);if(v==="Object"&&d.constructor&&(v=d.constructor.name),v==="Map"||v==="Set")return Array.from(d);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return yo(d,f)}})(h))||c){o&&(h=o);var l=0;return function(){return l>=h.length?{done:!0}:{done:!1,value:h[l++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yo(h,c){(c==null||c>h.length)&&(c=h.length);for(var o=0,l=new Array(c);o<c;o++)l[o]=h[o];return l}var Ao=function(h,c){c===void 0&&(c={}),n.Kn(c)||(c={});var o=h?h.split("?"):[];if(o.shift(),o.length>0)for(var l,d=Dr(o=o.join("?").split("&"));!(l=d()).done;){var f=l.value.split("=");try{c[f[0]]=decodeURIComponent(f[1])}catch{c[f[0]]=f[1]}}return c},Nn=function(h,c){var o="";switch(h){case"":case"text":case"json":if(n.HD(c))try{o=JSON.parse(c),o=n.hZ(o,{maxDepth:10,keyMaxLen:1e4,pretty:!0,standardJSON:!0})}catch{o=n.id(String(c),1e4)}else n.Kn(c)||n.kJ(c)?o=n.hZ(c,{maxDepth:10,keyMaxLen:1e4,pretty:!0,standardJSON:!0}):c!==void 0&&(o=Object.prototype.toString.call(c));break;default:c!==void 0&&(o=Object.prototype.toString.call(c))}return o},Br=function(h){if(!h)return null;var c=null;if(typeof h=="string")try{c=JSON.parse(h)}catch{var o=h.split("&");if(o.length===1)c=h;else{c={};for(var l,d=Dr(o);!(l=d()).done;){var f=l.value.split("=");c[f[0]]=f[1]===void 0?"undefined":f[1]}}}else if(n.TW(h)){c={};for(var v,_=Dr(h);!(v=_()).done;){var B=v.value,O=B[0],$=B[1];c[O]=typeof $=="string"?$:"[object Object]"}}else n.PO(h)?c=h:c="[object "+n.zl(h)+"]";return c},Rr=function(h){return h===void 0&&(h=""),h.startsWith("//")&&(h=""+new URL(window.location.href).protocol+h),h.startsWith("http")?new URL(h):new URL(h,window.location.href)},qn=function(){this.id="",this.name="",this.method="",this.url="",this.status=0,this.statusText="",this.cancelState=0,this.readyState=0,this.header=null,this.responseType="",this.requestType=void 0,this.requestHeader=null,this.response=void 0,this.responseSize=0,this.responseSizeText="",this.startTime=0,this.startTimeText="",this.endTime=0,this.costTime=0,this.getData=null,this.postData=null,this.actived=!1,this.noVConsole=!1,this.id=(0,n.QI)()},Co=(function(h){function c(o){var l;return(l=h.call(this)||this)._response=void 0,new Proxy(o,c.Handler)||(0,s.Z)(l)}return(0,a.Z)(c,h),c})(qn);Co.Handler={get:function(h,c){return c==="response"?h._response:Reflect.get(h,c)},set:function(h,c,o){var l;switch(c){case"response":return h._response=Nn(h.responseType,o),!0;case"url":var d=((l=o=String(o))==null?void 0:l.replace(new RegExp("[/]*$"),"").split("/").pop())||"Unknown";Reflect.set(h,"name",d);var f=Ao(o,h.getData);Reflect.set(h,"getData",f);break;case"status":var v=String(o)||"Unknown";Reflect.set(h,"statusText",v);break;case"startTime":if(o&&h.endTime){var _=h.endTime-o;Reflect.set(h,"costTime",_)}break;case"endTime":if(o&&h.startTime){var B=o-h.startTime;Reflect.set(h,"costTime",B)}}return Reflect.set(h,c,o)}};var Ji=(function(){function h(o,l){var d=this;this.XMLReq=void 0,this.item=void 0,this.onUpdateCallback=void 0,this.XMLReq=o,this.XMLReq.onreadystatechange=function(){d.onReadyStateChange()},this.XMLReq.onabort=function(){d.onAbort()},this.XMLReq.ontimeout=function(){d.onTimeout()},this.item=new qn,this.item.requestType="xhr",this.onUpdateCallback=l}var c=h.prototype;return c.get=function(o,l){switch(l){case"_noVConsole":return this.item.noVConsole;case"open":return this.getOpen(o);case"send":return this.getSend(o);case"setRequestHeader":return this.getSetRequestHeader(o);default:var d=Reflect.get(o,l);return typeof d=="function"?d.bind(o):d}},c.set=function(o,l,d){switch(l){case"_noVConsole":return void(this.item.noVConsole=!!d);case"onreadystatechange":return this.setOnReadyStateChange(o,l,d);case"onabort":return this.setOnAbort(o,l,d);case"ontimeout":return this.setOnTimeout(o,l,d)}return Reflect.set(o,l,d)},c.onReadyStateChange=function(){this.item.readyState=this.XMLReq.readyState,this.item.responseType=this.XMLReq.responseType,this.item.endTime=Date.now(),this.item.costTime=this.item.endTime-this.item.startTime,this.updateItemByReadyState(),this.item.response=Nn(this.item.responseType,this.item.response),this.triggerUpdate()},c.onAbort=function(){this.item.cancelState=1,this.item.statusText="Abort",this.triggerUpdate()},c.onTimeout=function(){this.item.cancelState=3,this.item.statusText="Timeout",this.triggerUpdate()},c.triggerUpdate=function(){this.item.noVConsole||this.onUpdateCallback(this.item)},c.getOpen=function(o){var l=this,d=Reflect.get(o,"open");return function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var B=v[0],O=v[1];return l.item.method=B?B.toUpperCase():"GET",l.item.url=O||"",l.item.name=l.item.url.replace(new RegExp("[/]*$"),"").split("/").pop()||"",l.item.getData=Ao(l.item.url,{}),l.triggerUpdate(),d.apply(o,v)}},c.getSend=function(o){var l=this,d=Reflect.get(o,"send");return function(){for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];var B=v[0];return l.item.postData=Br(B),l.triggerUpdate(),d.apply(o,v)}},c.getSetRequestHeader=function(o){var l=this,d=Reflect.get(o,"setRequestHeader");return function(){l.item.requestHeader||(l.item.requestHeader={});for(var f=arguments.length,v=new Array(f),_=0;_<f;_++)v[_]=arguments[_];return l.item.requestHeader[v[0]]=v[1],l.triggerUpdate(),d.apply(o,v)}},c.setOnReadyStateChange=function(o,l,d){var f=this;return Reflect.set(o,l,(function(){f.onReadyStateChange();for(var v=arguments.length,_=new Array(v),B=0;B<v;B++)_[B]=arguments[B];d.apply(o,_)}))},c.setOnAbort=function(o,l,d){var f=this;return Reflect.set(o,l,(function(){f.onAbort();for(var v=arguments.length,_=new Array(v),B=0;B<v;B++)_[B]=arguments[B];d.apply(o,_)}))},c.setOnTimeout=function(o,l,d){var f=this;return Reflect.set(o,l,(function(){f.onTimeout();for(var v=arguments.length,_=new Array(v),B=0;B<v;B++)_[B]=arguments[B];d.apply(o,_)}))},c.updateItemByReadyState=function(){switch(this.XMLReq.readyState){case 0:case 1:if(this.item.status=0,this.item.statusText="Pending",!this.item.startTime){this.item.startTime=Date.now();var o=(0,n._3)(this.item.startTime);this.item.startTimeText=o.year+"-"+o.month+"-"+o.day+" "+o.hour+":"+o.minute+":"+o.second+"."+o.millisecond}break;case 2:this.item.status=this.XMLReq.status,this.item.statusText="Loading",this.item.header={};for(var l=(this.XMLReq.getAllResponseHeaders()||"").split(`
`),d=0;d<l.length;d++){var f=l[d];if(f){var v=f.split(": "),_=v[0],B=v.slice(1).join(": ");this.item.header[_]=B}}break;case 3:this.item.status=this.XMLReq.status,this.item.statusText="Loading",this.XMLReq.response&&this.XMLReq.response.length&&(this.item.responseSize=this.XMLReq.response.length,this.item.responseSizeText=(0,n.KL)(this.item.responseSize));break;case 4:this.item.status=this.XMLReq.status||this.item.status||0,this.item.statusText=String(this.item.status),this.item.endTime=Date.now(),this.item.costTime=this.item.endTime-(this.item.startTime||this.item.endTime),this.item.response=this.XMLReq.response,this.XMLReq.response&&this.XMLReq.response.length&&(this.item.responseSize=this.XMLReq.response.length,this.item.responseSizeText=(0,n.KL)(this.item.responseSize));break;default:this.item.status=this.XMLReq.status,this.item.statusText="Unknown"}},h})(),Mr=(function(){function h(){}return h.create=function(c){return new Proxy(XMLHttpRequest,{construct:function(o){var l=new o;return new Proxy(l,new Ji(l,c))}})},h})();function Pr(h,c){var o=typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(o)return(o=o.call(h)).next.bind(o);if(Array.isArray(h)||(o=(function(d,f){if(d){if(typeof d=="string")return bo(d,f);var v=Object.prototype.toString.call(d).slice(8,-1);if(v==="Object"&&d.constructor&&(v=d.constructor.name),v==="Map"||v==="Set")return Array.from(d);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return bo(d,f)}})(h))||c){o&&(h=o);var l=0;return function(){return l>=h.length?{done:!0}:{done:!1,value:h[l++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bo(h,c){(c==null||c>h.length)&&(c=h.length);for(var o=0,l=new Array(c);o<c;o++)l[o]=h[o];return l}Mr.origXMLHttpRequest=XMLHttpRequest;var es=(function(){function h(o,l,d){this.resp=void 0,this.item=void 0,this.onUpdateCallback=void 0,this.resp=o,this.item=l,this.onUpdateCallback=d,this.mockReader()}var c=h.prototype;return c.set=function(o,l,d){return Reflect.set(o,l,d)},c.get=function(o,l){var d=this,f=Reflect.get(o,l);switch(l){case"arrayBuffer":case"blob":case"formData":case"json":case"text":return function(){return d.item.responseType=l.toLowerCase(),f.apply(o).then((function(v){return d.item.response=Nn(d.item.responseType,v),d.onUpdateCallback(d.item),v}))}}return typeof f=="function"?f.bind(o):f},c.mockReader=function(){var o,l=this;if(this.resp.body&&typeof this.resp.body.getReader=="function"){var d=this.resp.body.getReader;this.resp.body.getReader=function(){var f=d.apply(l.resp.body);if(l.item.readyState===4)return f;var v=f.read,_=f.cancel;return l.item.responseType="arraybuffer",f.read=function(){return v.apply(f).then((function(B){if(o){var O=new Uint8Array(o.length+B.value.length);O.set(o),O.set(B.value,o.length),o=O}else o=new Uint8Array(B.value);return l.item.endTime=Date.now(),l.item.costTime=l.item.endTime-(l.item.startTime||l.item.endTime),l.item.readyState=B.done?4:3,l.item.statusText=B.done?String(l.item.status):"Loading",l.item.responseSize=o.length,l.item.responseSizeText=n.KL(l.item.responseSize),B.done&&(l.item.response=Nn(l.item.responseType,o)),l.onUpdateCallback(l.item),B}))},f.cancel=function(){l.item.cancelState=2,l.item.statusText="Cancel",l.item.endTime=Date.now(),l.item.costTime=l.item.endTime-(l.item.startTime||l.item.endTime),l.item.response=Nn(l.item.responseType,o),l.onUpdateCallback(l.item);for(var B=arguments.length,O=new Array(B),$=0;$<B;$++)O[$]=arguments[$];return _.apply(f,O)},f}}},h})(),ts=(function(){function h(o){this.onUpdateCallback=void 0,this.onUpdateCallback=o}var c=h.prototype;return c.apply=function(o,l,d){var f=this,v=d[0],_=d[1],B=new qn;return this.beforeFetch(B,v,_),o.apply(window,d).then(this.afterFetch(B)).catch((function(O){throw B.endTime=Date.now(),B.costTime=B.endTime-(B.startTime||B.endTime),f.onUpdateCallback(B),O}))},c.beforeFetch=function(o,l,d){var f,v="GET",_=null;if(n.HD(l)?(v=(d==null?void 0:d.method)||"GET",f=Rr(l),_=(d==null?void 0:d.headers)||null):(v=l.method||"GET",f=Rr(l.url),_=l.headers),o.method=v,o.requestType="fetch",o.requestHeader=_,o.url=f.toString(),o.name=(f.pathname.split("/").pop()||"")+f.search,o.status=0,o.statusText="Pending",o.readyState=1,!o.startTime){o.startTime=Date.now();var B=n._3(o.startTime);o.startTimeText=B.year+"-"+B.month+"-"+B.day+" "+B.hour+":"+B.minute+":"+B.second+"."+B.millisecond}if(Object.prototype.toString.call(_)==="[object Headers]"){o.requestHeader={};for(var O,$=Pr(_);!(O=$()).done;){var j=O.value,H=j[0],re=j[1];o.requestHeader[H]=re}}else o.requestHeader=_;if(f.search&&f.searchParams){o.getData={};for(var K,ie=Pr(f.searchParams);!(K=ie()).done;){var ue=K.value,be=ue[0],_e=ue[1];o.getData[be]=_e}}d!=null&&d.body&&(o.postData=Br(d.body)),this.onUpdateCallback(o)},c.afterFetch=function(o){var l=this;return function(d){o.endTime=Date.now(),o.costTime=o.endTime-(o.startTime||o.endTime),o.status=d.status,o.statusText=String(d.status);var f=!1;o.header={};for(var v,_=Pr(d.headers);!(v=_()).done;){var B=v.value,O=B[0],$=B[1];o.header[O]=$,f=$.toLowerCase().indexOf("chunked")>-1||f}return f?o.readyState=3:(o.readyState=4,l.handleResponseBody(d.clone(),o).then((function(j){o.responseSize=typeof j=="string"?j.length:j.byteLength,o.responseSizeText=n.KL(o.responseSize),o.response=Nn(o.responseType,j),l.onUpdateCallback(o)}))),l.onUpdateCallback(o),new Proxy(d,new es(d,o,l.onUpdateCallback))}},c.handleResponseBody=function(o,l){var d=o.headers.get("content-type");return d&&d.includes("application/json")?(l.responseType="json",o.text()):d&&(d.includes("text/html")||d.includes("text/plain"))?(l.responseType="text",o.text()):(l.responseType="arraybuffer",o.arrayBuffer())},h})(),Lr=(function(){function h(){}return h.create=function(c){return new Proxy(fetch,new ts(c))},h})();function ns(h,c){var o=typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(o)return(o=o.call(h)).next.bind(o);if(Array.isArray(h)||(o=(function(d,f){if(d){if(typeof d=="string")return So(d,f);var v=Object.prototype.toString.call(d).slice(8,-1);if(v==="Object"&&d.constructor&&(v=d.constructor.name),v==="Map"||v==="Set")return Array.from(d);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return So(d,f)}})(h))||c){o&&(h=o);var l=0;return function(){return l>=h.length?{done:!0}:{done:!1,value:h[l++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function So(h,c){(c==null||c>h.length)&&(c=h.length);for(var o=0,l=new Array(c);o<c;o++)l[o]=h[o];return l}Lr.origFetch=fetch;var rs=function(h){return h instanceof Blob?h.type:h instanceof FormData?"multipart/form-data":h instanceof URLSearchParams?"application/x-www-form-urlencoded;charset=UTF-8":"text/plain;charset=UTF-8"},os=(function(){function h(c){this.onUpdateCallback=void 0,this.onUpdateCallback=c}return h.prototype.apply=function(c,o,l){var d=l[0],f=l[1],v=new qn,_=Rr(d);if(v.method="POST",v.url=d,v.name=(_.pathname.split("/").pop()||"")+_.search,v.requestType="ping",v.requestHeader={"Content-Type":rs(f)},v.status=0,v.statusText="Pending",_.search&&_.searchParams){v.getData={};for(var B,O=ns(_.searchParams);!(B=O()).done;){var $=B.value,j=$[0],H=$[1];v.getData[j]=H}}v.postData=Br(f),v.startTime||(v.startTime=Date.now()),this.onUpdateCallback(v);var re=c.apply(o,l);return re?(v.endTime=Date.now(),v.costTime=v.endTime-(v.startTime||v.endTime),v.status=0,v.statusText="Sent",v.readyState=4):(v.status=500,v.statusText="Unknown"),this.onUpdateCallback(v),re},h})(),Or=(function(){function h(){}return h.create=function(c){return new Proxy(navigator.sendBeacon,new os(c))},h})();Or.origSendBeacon=navigator.sendBeacon;var Dn=(0,$t.fZ)({}),ir=(function(h){function c(){var l;return(l=h.call(this)||this).maxNetworkNumber=1e3,l.ignoreUrlRegExp=void 0,l.itemCounter=0,l.mockXHR(),l.mockFetch(),l.mockSendBeacon(),l}(0,a.Z)(c,h);var o=c.prototype;return o.unMock=function(){window.hasOwnProperty("XMLHttpRequest")&&(window.XMLHttpRequest=Mr.origXMLHttpRequest),window.hasOwnProperty("fetch")&&(window.fetch=Lr.origFetch),window.navigator.sendBeacon&&(window.navigator.sendBeacon=Or.origSendBeacon)},o.clearLog=function(){Dn.set({})},o.updateRequest=function(l,d){var f,v=d.url;if(!v||(f=this.ignoreUrlRegExp)==null||!f.test(v)){var _=(0,$t.U2)(Dn),B=!!_[l];if(B){var O=_[l];for(var $ in d)O[$]=d[$];d=O}Dn.update((function(j){return j[l]=d,j})),B||(te.x.updateTime(),this.limitListLength())}},o.mockXHR=function(){var l=this;window.hasOwnProperty("XMLHttpRequest")&&(window.XMLHttpRequest=Mr.create((function(d){l.updateRequest(d.id,d)})))},o.mockFetch=function(){var l=this;window.hasOwnProperty("fetch")&&(window.fetch=Lr.create((function(d){l.updateRequest(d.id,d)})))},o.mockSendBeacon=function(){var l,d,f=this;(l=window)!=null&&(d=l.navigator)!=null&&d.sendBeacon&&(window.navigator.sendBeacon=Or.create((function(v){f.updateRequest(v.id,v)})))},o.limitListLength=function(){var l=this;if(this.itemCounter++,this.itemCounter%10==0){this.itemCounter=0;var d=(0,$t.U2)(Dn),f=Object.keys(d);f.length>this.maxNetworkNumber-10&&Dn.update((function(v){for(var _=f.splice(0,f.length-l.maxNetworkNumber+10),B=0;B<_.length;B++)v[_[B]]=void 0,delete v[_[B]];return v}))}},c})(vo.N),sr=__webpack_require__(8747),Xn={};sr.Z&&sr.Z.locals&&(Xn.locals=sr.Z.locals);var Fr,kr=0,On={};On.styleTagTransform=L(),On.setAttributes=I(),On.insert=w().bind(null,"head"),On.domAPI=b(),On.insertStyleElement=M(),Xn.use=function(h){return On.options=h||{},kr++||(Fr=y()(sr.Z,On)),Xn},Xn.unuse=function(){kr>0&&!--kr&&(Fr(),Fr=null)};var _o=Xn;function wo(h,c,o){var l=h.slice();return l[11]=c[o][0],l[12]=c[o][1],l}function xo(h,c,o){var l=h.slice();return l[11]=c[o][0],l[12]=c[o][1],l}function Eo(h,c,o){var l=h.slice();return l[11]=c[o][0],l[12]=c[o][1],l}function To(h,c,o){var l=h.slice();return l[11]=c[o][0],l[12]=c[o][1],l}function Io(h){var c,o,l;return{c:function(){c=(0,e.fLW)("("),o=(0,e.fLW)(h[0]),l=(0,e.fLW)(")")},m:function(d,f){(0,e.$Tr)(d,c,f),(0,e.$Tr)(d,o,f),(0,e.$Tr)(d,l,f)},p:function(d,f){1&f&&(0,e.rTO)(o,d[0])},d:function(d){d&&(0,e.ogt)(c),d&&(0,e.ogt)(o),d&&(0,e.ogt)(l)}}}function is(h){var c,o,l,d,f,v,_=h[0]>0&&Io(h);return{c:function(){c=(0,e.bGB)("dl"),o=(0,e.bGB)("dd"),l=(0,e.fLW)("Name "),_&&_.c(),(d=(0,e.bGB)("dd")).textContent="Method",(f=(0,e.bGB)("dd")).textContent="Status",(v=(0,e.bGB)("dd")).textContent="Time",(0,e.Ljt)(o,"class","vc-table-col vc-table-col-4"),(0,e.Ljt)(d,"class","vc-table-col"),(0,e.Ljt)(f,"class","vc-table-col"),(0,e.Ljt)(v,"class","vc-table-col"),(0,e.Ljt)(c,"class","vc-table-row")},m:function(B,O){(0,e.$Tr)(B,c,O),(0,e.R3I)(c,o),(0,e.R3I)(o,l),_&&_.m(o,null),(0,e.R3I)(c,d),(0,e.R3I)(c,f),(0,e.R3I)(c,v)},p:function(B,O){B[0]>0?_?_.p(B,O):((_=Io(B)).c(),_.m(o,null)):_&&(_.d(1),_=null)},d:function(B){B&&(0,e.ogt)(c),_&&_.d()}}}function ss(h){var c;return{c:function(){(c=(0,e.bGB)("div")).textContent="Empty",(0,e.Ljt)(c,"slot","empty"),(0,e.Ljt)(c,"class","vc-plugin-empty")},m:function(o,l){(0,e.$Tr)(o,c,l)},p:e.ZTd,d:function(o){o&&(0,e.ogt)(c)}}}function Do(h){var c,o,l,d,f,v,_,B;v=new It({props:{content:h[10].requestHeader}});for(var O=Object.entries(h[10].requestHeader),$=[],j=0;j<O.length;j+=1)$[j]=Bo(To(h,O,j));return{c:function(){c=(0,e.bGB)("div"),o=(0,e.bGB)("dl"),l=(0,e.bGB)("dt"),d=(0,e.fLW)(`Request Headers
                `),f=(0,e.bGB)("i"),(0,e.YCL)(v.$$.fragment),_=(0,e.DhX)();for(var H=0;H<$.length;H+=1)$[H].c();(0,e.Ljt)(f,"class","vc-table-row-icon"),(0,e.Ljt)(l,"class","vc-table-col vc-table-col-title"),(0,e.Ljt)(o,"class","vc-table-row vc-left-border")},m:function(H,re){(0,e.$Tr)(H,c,re),(0,e.R3I)(c,o),(0,e.R3I)(o,l),(0,e.R3I)(l,d),(0,e.R3I)(l,f),(0,e.yef)(v,f,null),(0,e.R3I)(c,_);for(var K=0;K<$.length;K+=1)$[K].m(c,null);B=!0},p:function(H,re){var K={};if(1024&re&&(K.content=H[10].requestHeader),v.$set(K),1040&re){var ie;for(O=Object.entries(H[10].requestHeader),ie=0;ie<O.length;ie+=1){var ue=To(H,O,ie);$[ie]?$[ie].p(ue,re):($[ie]=Bo(ue),$[ie].c(),$[ie].m(c,null))}for(;ie<$.length;ie+=1)$[ie].d(1);$.length=O.length}},i:function(H){B||((0,e.Ui)(v.$$.fragment,H),B=!0)},o:function(H){(0,e.etI)(v.$$.fragment,H),B=!1},d:function(H){H&&(0,e.ogt)(c),(0,e.vpE)(v),(0,e.RMB)($,H)}}}function Bo(h){var c,o,l,d,f,v,_,B=h[11]+"",O=h[4](h[12])+"";return{c:function(){c=(0,e.bGB)("div"),o=(0,e.bGB)("div"),l=(0,e.fLW)(B),d=(0,e.DhX)(),f=(0,e.bGB)("div"),v=(0,e.fLW)(O),_=(0,e.DhX)(),(0,e.Ljt)(o,"class","vc-table-col vc-table-col-2"),(0,e.Ljt)(f,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,e.Ljt)(c,"class","vc-table-row vc-left-border vc-small")},m:function($,j){(0,e.$Tr)($,c,j),(0,e.R3I)(c,o),(0,e.R3I)(o,l),(0,e.R3I)(c,d),(0,e.R3I)(c,f),(0,e.R3I)(f,v),(0,e.R3I)(c,_)},p:function($,j){1024&j&&B!==(B=$[11]+"")&&(0,e.rTO)(l,B),1024&j&&O!==(O=$[4]($[12])+"")&&(0,e.rTO)(v,O)},d:function($){$&&(0,e.ogt)(c)}}}function Ro(h){var c,o,l,d,f,v,_,B;v=new It({props:{content:h[10].getData}});for(var O=Object.entries(h[10].getData),$=[],j=0;j<O.length;j+=1)$[j]=Mo(Eo(h,O,j));return{c:function(){c=(0,e.bGB)("div"),o=(0,e.bGB)("dl"),l=(0,e.bGB)("dt"),d=(0,e.fLW)(`Query String Parameters
                `),f=(0,e.bGB)("i"),(0,e.YCL)(v.$$.fragment),_=(0,e.DhX)();for(var H=0;H<$.length;H+=1)$[H].c();(0,e.Ljt)(f,"class","vc-table-row-icon"),(0,e.Ljt)(l,"class","vc-table-col vc-table-col-title"),(0,e.Ljt)(o,"class","vc-table-row vc-left-border")},m:function(H,re){(0,e.$Tr)(H,c,re),(0,e.R3I)(c,o),(0,e.R3I)(o,l),(0,e.R3I)(l,d),(0,e.R3I)(l,f),(0,e.yef)(v,f,null),(0,e.R3I)(c,_);for(var K=0;K<$.length;K+=1)$[K].m(c,null);B=!0},p:function(H,re){var K={};if(1024&re&&(K.content=H[10].getData),v.$set(K),1040&re){var ie;for(O=Object.entries(H[10].getData),ie=0;ie<O.length;ie+=1){var ue=Eo(H,O,ie);$[ie]?$[ie].p(ue,re):($[ie]=Mo(ue),$[ie].c(),$[ie].m(c,null))}for(;ie<$.length;ie+=1)$[ie].d(1);$.length=O.length}},i:function(H){B||((0,e.Ui)(v.$$.fragment,H),B=!0)},o:function(H){(0,e.etI)(v.$$.fragment,H),B=!1},d:function(H){H&&(0,e.ogt)(c),(0,e.vpE)(v),(0,e.RMB)($,H)}}}function Mo(h){var c,o,l,d,f,v,_,B=h[11]+"",O=h[4](h[12])+"";return{c:function(){c=(0,e.bGB)("div"),o=(0,e.bGB)("div"),l=(0,e.fLW)(B),d=(0,e.DhX)(),f=(0,e.bGB)("div"),v=(0,e.fLW)(O),_=(0,e.DhX)(),(0,e.Ljt)(o,"class","vc-table-col vc-table-col-2"),(0,e.Ljt)(f,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,e.Ljt)(c,"class","vc-table-row vc-left-border vc-small")},m:function($,j){(0,e.$Tr)($,c,j),(0,e.R3I)(c,o),(0,e.R3I)(o,l),(0,e.R3I)(c,d),(0,e.R3I)(c,f),(0,e.R3I)(f,v),(0,e.R3I)(c,_)},p:function($,j){1024&j&&B!==(B=$[11]+"")&&(0,e.rTO)(l,B),1024&j&&O!==(O=$[4]($[12])+"")&&(0,e.rTO)(v,O)},d:function($){$&&(0,e.ogt)(c)}}}function Po(h){var c,o,l,d,f,v,_,B;function O(H,re){return typeof H[10].postData=="string"?ls:as}v=new It({props:{content:h[10].postData}});var $=O(h),j=$(h);return{c:function(){c=(0,e.bGB)("div"),o=(0,e.bGB)("dl"),l=(0,e.bGB)("dt"),d=(0,e.fLW)(`Request Payload
                `),f=(0,e.bGB)("i"),(0,e.YCL)(v.$$.fragment),_=(0,e.DhX)(),j.c(),(0,e.Ljt)(f,"class","vc-table-row-icon"),(0,e.Ljt)(l,"class","vc-table-col vc-table-col-title"),(0,e.Ljt)(o,"class","vc-table-row vc-left-border")},m:function(H,re){(0,e.$Tr)(H,c,re),(0,e.R3I)(c,o),(0,e.R3I)(o,l),(0,e.R3I)(l,d),(0,e.R3I)(l,f),(0,e.yef)(v,f,null),(0,e.R3I)(c,_),j.m(c,null),B=!0},p:function(H,re){var K={};1024&re&&(K.content=H[10].postData),v.$set(K),$===($=O(H))&&j?j.p(H,re):(j.d(1),(j=$(H))&&(j.c(),j.m(c,null)))},i:function(H){B||((0,e.Ui)(v.$$.fragment,H),B=!0)},o:function(H){(0,e.etI)(v.$$.fragment,H),B=!1},d:function(H){H&&(0,e.ogt)(c),(0,e.vpE)(v),j.d()}}}function as(h){for(var c,o=Object.entries(h[10].postData),l=[],d=0;d<o.length;d+=1)l[d]=Lo(xo(h,o,d));return{c:function(){for(var f=0;f<l.length;f+=1)l[f].c();c=(0,e.cSb)()},m:function(f,v){for(var _=0;_<l.length;_+=1)l[_].m(f,v);(0,e.$Tr)(f,c,v)},p:function(f,v){if(1040&v){var _;for(o=Object.entries(f[10].postData),_=0;_<o.length;_+=1){var B=xo(f,o,_);l[_]?l[_].p(B,v):(l[_]=Lo(B),l[_].c(),l[_].m(c.parentNode,c))}for(;_<l.length;_+=1)l[_].d(1);l.length=o.length}},d:function(f){(0,e.RMB)(l,f),f&&(0,e.ogt)(c)}}}function ls(h){var c,o,l,d=h[10].postData+"";return{c:function(){c=(0,e.bGB)("div"),o=(0,e.bGB)("pre"),l=(0,e.fLW)(d),(0,e.Ljt)(o,"class","vc-table-col vc-table-col-value vc-max-height-line"),(0,e.Ljt)(o,"data-scrollable","1"),(0,e.Ljt)(c,"class","vc-table-row vc-left-border vc-small")},m:function(f,v){(0,e.$Tr)(f,c,v),(0,e.R3I)(c,o),(0,e.R3I)(o,l)},p:function(f,v){1024&v&&d!==(d=f[10].postData+"")&&(0,e.rTO)(l,d)},d:function(f){f&&(0,e.ogt)(c)}}}function Lo(h){var c,o,l,d,f,v,_,B=h[11]+"",O=h[4](h[12])+"";return{c:function(){c=(0,e.bGB)("div"),o=(0,e.bGB)("div"),l=(0,e.fLW)(B),d=(0,e.DhX)(),f=(0,e.bGB)("div"),v=(0,e.fLW)(O),_=(0,e.DhX)(),(0,e.Ljt)(o,"class","vc-table-col vc-table-col-2"),(0,e.Ljt)(f,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,e.Ljt)(f,"data-scrollable","1"),(0,e.Ljt)(c,"class","vc-table-row vc-left-border vc-small")},m:function($,j){(0,e.$Tr)($,c,j),(0,e.R3I)(c,o),(0,e.R3I)(o,l),(0,e.R3I)(c,d),(0,e.R3I)(c,f),(0,e.R3I)(f,v),(0,e.R3I)(c,_)},p:function($,j){1024&j&&B!==(B=$[11]+"")&&(0,e.rTO)(l,B),1024&j&&O!==(O=$[4]($[12])+"")&&(0,e.rTO)(v,O)},d:function($){$&&(0,e.ogt)(c)}}}function Oo(h){var c,o,l,d,f,v,_,B;v=new It({props:{content:h[10].header}});for(var O=Object.entries(h[10].header),$=[],j=0;j<O.length;j+=1)$[j]=Fo(wo(h,O,j));return{c:function(){c=(0,e.bGB)("div"),o=(0,e.bGB)("dl"),l=(0,e.bGB)("dt"),d=(0,e.fLW)(`Response Headers
                `),f=(0,e.bGB)("i"),(0,e.YCL)(v.$$.fragment),_=(0,e.DhX)();for(var H=0;H<$.length;H+=1)$[H].c();(0,e.Ljt)(f,"class","vc-table-row-icon"),(0,e.Ljt)(l,"class","vc-table-col vc-table-col-title"),(0,e.Ljt)(o,"class","vc-table-row vc-left-border")},m:function(H,re){(0,e.$Tr)(H,c,re),(0,e.R3I)(c,o),(0,e.R3I)(o,l),(0,e.R3I)(l,d),(0,e.R3I)(l,f),(0,e.yef)(v,f,null),(0,e.R3I)(c,_);for(var K=0;K<$.length;K+=1)$[K].m(c,null);B=!0},p:function(H,re){var K={};if(1024&re&&(K.content=H[10].header),v.$set(K),1040&re){var ie;for(O=Object.entries(H[10].header),ie=0;ie<O.length;ie+=1){var ue=wo(H,O,ie);$[ie]?$[ie].p(ue,re):($[ie]=Fo(ue),$[ie].c(),$[ie].m(c,null))}for(;ie<$.length;ie+=1)$[ie].d(1);$.length=O.length}},i:function(H){B||((0,e.Ui)(v.$$.fragment,H),B=!0)},o:function(H){(0,e.etI)(v.$$.fragment,H),B=!1},d:function(H){H&&(0,e.ogt)(c),(0,e.vpE)(v),(0,e.RMB)($,H)}}}function Fo(h){var c,o,l,d,f,v,_,B=h[11]+"",O=h[4](h[12])+"";return{c:function(){c=(0,e.bGB)("div"),o=(0,e.bGB)("div"),l=(0,e.fLW)(B),d=(0,e.DhX)(),f=(0,e.bGB)("div"),v=(0,e.fLW)(O),_=(0,e.DhX)(),(0,e.Ljt)(o,"class","vc-table-col vc-table-col-2"),(0,e.Ljt)(f,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,e.Ljt)(c,"class","vc-table-row vc-left-border vc-small")},m:function($,j){(0,e.$Tr)($,c,j),(0,e.R3I)(c,o),(0,e.R3I)(o,l),(0,e.R3I)(c,d),(0,e.R3I)(c,f),(0,e.R3I)(f,v),(0,e.R3I)(c,_)},p:function($,j){1024&j&&B!==(B=$[11]+"")&&(0,e.rTO)(l,B),1024&j&&O!==(O=$[4]($[12])+"")&&(0,e.rTO)(v,O)},d:function($){$&&(0,e.ogt)(c)}}}function ko(h){var c,o,l,d,f,v=h[10].responseSizeText+"";return{c:function(){c=(0,e.bGB)("div"),(o=(0,e.bGB)("div")).textContent="Size",l=(0,e.DhX)(),d=(0,e.bGB)("div"),f=(0,e.fLW)(v),(0,e.Ljt)(o,"class","vc-table-col vc-table-col-2"),(0,e.Ljt)(d,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,e.Ljt)(c,"class","vc-table-row vc-left-border vc-small")},m:function(_,B){(0,e.$Tr)(_,c,B),(0,e.R3I)(c,o),(0,e.R3I)(c,l),(0,e.R3I)(c,d),(0,e.R3I)(d,f)},p:function(_,B){1024&B&&v!==(v=_[10].responseSizeText+"")&&(0,e.rTO)(f,v)},d:function(_){_&&(0,e.ogt)(c)}}}function cs(h){var c,o,l,d,f,v,_,B,O,$,j,H,re,K,ie,ue,be,_e,Te,Qe,Fe,st,at,ct,$e,ze,ut,Pt,dt,lt,et,Ie,Me,gt,we,Ue,ot,Le,it,wt,Rt,Ft,Ct,tn,kt,nn,Tt,ln,Lt,yn,_n,jn,Jn,Re,nt,tt,rt,ft,St,cn,rn,on,Mt,Zt,wn,Jt,Vr,ci,ur=h[10].name+"",dr=h[10].method+"",hr=h[10].statusText+"",fr=h[10].costTime+"",pr=h[10].url+"",mr=h[10].method+"",gr=h[10].requestType+"",vr=h[10].status+"",yr=h[10].startTimeText+"",Ar=(h[10].response||"")+"";function Vs(){return h[7](h[10])}_e=new It({props:{handler:h[3],content:h[10]}});var jt=h[10].requestHeader!==null&&Do(h),Gt=h[10].getData!==null&&Ro(h),Wt=h[10].postData!==null&&Po(h),Qt=h[10].header!==null&&Oo(h);St=new It({props:{content:h[10].response}});var un=h[10].responseSize>0&&ko(h);return{c:function(){c=(0,e.bGB)("div"),o=(0,e.bGB)("dl"),l=(0,e.bGB)("dd"),d=(0,e.fLW)(ur),f=(0,e.bGB)("dd"),v=(0,e.fLW)(dr),_=(0,e.bGB)("dd"),B=(0,e.fLW)(hr),O=(0,e.bGB)("dd"),$=(0,e.fLW)(fr),j=(0,e.DhX)(),H=(0,e.bGB)("div"),re=(0,e.bGB)("div"),K=(0,e.bGB)("dl"),ie=(0,e.bGB)("dt"),ue=(0,e.fLW)(`General
                `),be=(0,e.bGB)("i"),(0,e.YCL)(_e.$$.fragment),Te=(0,e.DhX)(),Qe=(0,e.bGB)("div"),(Fe=(0,e.bGB)("div")).textContent="URL",st=(0,e.DhX)(),at=(0,e.bGB)("div"),ct=(0,e.fLW)(pr),$e=(0,e.DhX)(),ze=(0,e.bGB)("div"),(ut=(0,e.bGB)("div")).textContent="Method",Pt=(0,e.DhX)(),dt=(0,e.bGB)("div"),lt=(0,e.fLW)(mr),et=(0,e.DhX)(),Ie=(0,e.bGB)("div"),(Me=(0,e.bGB)("div")).textContent="Request Type",gt=(0,e.DhX)(),we=(0,e.bGB)("div"),Ue=(0,e.fLW)(gr),ot=(0,e.DhX)(),Le=(0,e.bGB)("div"),(it=(0,e.bGB)("div")).textContent="HTTP Status",wt=(0,e.DhX)(),Rt=(0,e.bGB)("div"),Ft=(0,e.fLW)(vr),Ct=(0,e.DhX)(),tn=(0,e.bGB)("div"),(kt=(0,e.bGB)("div")).textContent="Start Time",nn=(0,e.DhX)(),Tt=(0,e.bGB)("div"),ln=(0,e.fLW)(yr),Lt=(0,e.DhX)(),jt&&jt.c(),yn=(0,e.DhX)(),Gt&&Gt.c(),_n=(0,e.DhX)(),Wt&&Wt.c(),jn=(0,e.DhX)(),Qt&&Qt.c(),Jn=(0,e.DhX)(),Re=(0,e.bGB)("div"),nt=(0,e.bGB)("dl"),tt=(0,e.bGB)("dt"),rt=(0,e.fLW)(`Response
                `),ft=(0,e.bGB)("i"),(0,e.YCL)(St.$$.fragment),cn=(0,e.DhX)(),un&&un.c(),rn=(0,e.DhX)(),on=(0,e.bGB)("div"),Mt=(0,e.bGB)("pre"),Zt=(0,e.fLW)(Ar),(0,e.Ljt)(l,"class","vc-table-col vc-table-col-4"),(0,e.Ljt)(f,"class","vc-table-col"),(0,e.Ljt)(_,"class","vc-table-col"),(0,e.Ljt)(O,"class","vc-table-col"),(0,e.Ljt)(o,"class","vc-table-row vc-group-preview"),(0,e.VHj)(o,"vc-table-row-error",h[10].status>=400),(0,e.Ljt)(be,"class","vc-table-row-icon"),(0,e.Ljt)(ie,"class","vc-table-col vc-table-col-title"),(0,e.Ljt)(K,"class","vc-table-row vc-left-border"),(0,e.Ljt)(Fe,"class","vc-table-col vc-table-col-2"),(0,e.Ljt)(at,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,e.Ljt)(Qe,"class","vc-table-row vc-left-border vc-small"),(0,e.Ljt)(ut,"class","vc-table-col vc-table-col-2"),(0,e.Ljt)(dt,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,e.Ljt)(ze,"class","vc-table-row vc-left-border vc-small"),(0,e.Ljt)(Me,"class","vc-table-col vc-table-col-2"),(0,e.Ljt)(we,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,e.Ljt)(Ie,"class","vc-table-row vc-left-border vc-small"),(0,e.Ljt)(it,"class","vc-table-col vc-table-col-2"),(0,e.Ljt)(Rt,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,e.Ljt)(Le,"class","vc-table-row vc-left-border vc-small"),(0,e.Ljt)(kt,"class","vc-table-col vc-table-col-2"),(0,e.Ljt)(Tt,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,e.Ljt)(tn,"class","vc-table-row vc-left-border vc-small"),(0,e.Ljt)(ft,"class","vc-table-row-icon"),(0,e.Ljt)(tt,"class","vc-table-col vc-table-col-title"),(0,e.Ljt)(nt,"class","vc-table-row vc-left-border"),(0,e.Ljt)(Mt,"class","vc-table-col vc-max-height vc-min-height"),(0,e.Ljt)(Mt,"data-scrollable","1"),(0,e.Ljt)(on,"class","vc-table-row vc-left-border vc-small"),(0,e.Ljt)(H,"class","vc-group-detail"),(0,e.Ljt)(c,"slot","item"),(0,e.Ljt)(c,"class","vc-group"),(0,e.Ljt)(c,"id",wn=h[10].id),(0,e.VHj)(c,"vc-actived",h[10].actived)},m:function(mn,_t){(0,e.$Tr)(mn,c,_t),(0,e.R3I)(c,o),(0,e.R3I)(o,l),(0,e.R3I)(l,d),(0,e.R3I)(o,f),(0,e.R3I)(f,v),(0,e.R3I)(o,_),(0,e.R3I)(_,B),(0,e.R3I)(o,O),(0,e.R3I)(O,$),(0,e.R3I)(c,j),(0,e.R3I)(c,H),(0,e.R3I)(H,re),(0,e.R3I)(re,K),(0,e.R3I)(K,ie),(0,e.R3I)(ie,ue),(0,e.R3I)(ie,be),(0,e.yef)(_e,be,null),(0,e.R3I)(re,Te),(0,e.R3I)(re,Qe),(0,e.R3I)(Qe,Fe),(0,e.R3I)(Qe,st),(0,e.R3I)(Qe,at),(0,e.R3I)(at,ct),(0,e.R3I)(re,$e),(0,e.R3I)(re,ze),(0,e.R3I)(ze,ut),(0,e.R3I)(ze,Pt),(0,e.R3I)(ze,dt),(0,e.R3I)(dt,lt),(0,e.R3I)(re,et),(0,e.R3I)(re,Ie),(0,e.R3I)(Ie,Me),(0,e.R3I)(Ie,gt),(0,e.R3I)(Ie,we),(0,e.R3I)(we,Ue),(0,e.R3I)(re,ot),(0,e.R3I)(re,Le),(0,e.R3I)(Le,it),(0,e.R3I)(Le,wt),(0,e.R3I)(Le,Rt),(0,e.R3I)(Rt,Ft),(0,e.R3I)(re,Ct),(0,e.R3I)(re,tn),(0,e.R3I)(tn,kt),(0,e.R3I)(tn,nn),(0,e.R3I)(tn,Tt),(0,e.R3I)(Tt,ln),(0,e.R3I)(H,Lt),jt&&jt.m(H,null),(0,e.R3I)(H,yn),Gt&&Gt.m(H,null),(0,e.R3I)(H,_n),Wt&&Wt.m(H,null),(0,e.R3I)(H,jn),Qt&&Qt.m(H,null),(0,e.R3I)(H,Jn),(0,e.R3I)(H,Re),(0,e.R3I)(Re,nt),(0,e.R3I)(nt,tt),(0,e.R3I)(tt,rt),(0,e.R3I)(tt,ft),(0,e.yef)(St,ft,null),(0,e.R3I)(Re,cn),un&&un.m(Re,null),(0,e.R3I)(Re,rn),(0,e.R3I)(Re,on),(0,e.R3I)(on,Mt),(0,e.R3I)(Mt,Zt),Jt=!0,Vr||(ci=(0,e.oLt)(o,"click",Vs),Vr=!0)},p:function(mn,_t){h=mn,(!Jt||1024&_t)&&ur!==(ur=h[10].name+"")&&(0,e.rTO)(d,ur),(!Jt||1024&_t)&&dr!==(dr=h[10].method+"")&&(0,e.rTO)(v,dr),(!Jt||1024&_t)&&hr!==(hr=h[10].statusText+"")&&(0,e.rTO)(B,hr),(!Jt||1024&_t)&&fr!==(fr=h[10].costTime+"")&&(0,e.rTO)($,fr),1024&_t&&(0,e.VHj)(o,"vc-table-row-error",h[10].status>=400);var ui={};1024&_t&&(ui.content=h[10]),_e.$set(ui),(!Jt||1024&_t)&&pr!==(pr=h[10].url+"")&&(0,e.rTO)(ct,pr),(!Jt||1024&_t)&&mr!==(mr=h[10].method+"")&&(0,e.rTO)(lt,mr),(!Jt||1024&_t)&&gr!==(gr=h[10].requestType+"")&&(0,e.rTO)(Ue,gr),(!Jt||1024&_t)&&vr!==(vr=h[10].status+"")&&(0,e.rTO)(Ft,vr),(!Jt||1024&_t)&&yr!==(yr=h[10].startTimeText+"")&&(0,e.rTO)(ln,yr),h[10].requestHeader!==null?jt?(jt.p(h,_t),1024&_t&&(0,e.Ui)(jt,1)):((jt=Do(h)).c(),(0,e.Ui)(jt,1),jt.m(H,yn)):jt&&((0,e.dvw)(),(0,e.etI)(jt,1,1,(function(){jt=null})),(0,e.gbL)()),h[10].getData!==null?Gt?(Gt.p(h,_t),1024&_t&&(0,e.Ui)(Gt,1)):((Gt=Ro(h)).c(),(0,e.Ui)(Gt,1),Gt.m(H,_n)):Gt&&((0,e.dvw)(),(0,e.etI)(Gt,1,1,(function(){Gt=null})),(0,e.gbL)()),h[10].postData!==null?Wt?(Wt.p(h,_t),1024&_t&&(0,e.Ui)(Wt,1)):((Wt=Po(h)).c(),(0,e.Ui)(Wt,1),Wt.m(H,jn)):Wt&&((0,e.dvw)(),(0,e.etI)(Wt,1,1,(function(){Wt=null})),(0,e.gbL)()),h[10].header!==null?Qt?(Qt.p(h,_t),1024&_t&&(0,e.Ui)(Qt,1)):((Qt=Oo(h)).c(),(0,e.Ui)(Qt,1),Qt.m(H,Jn)):Qt&&((0,e.dvw)(),(0,e.etI)(Qt,1,1,(function(){Qt=null})),(0,e.gbL)());var di={};1024&_t&&(di.content=h[10].response),St.$set(di),h[10].responseSize>0?un?un.p(h,_t):((un=ko(h)).c(),un.m(Re,rn)):un&&(un.d(1),un=null),(!Jt||1024&_t)&&Ar!==(Ar=(h[10].response||"")+"")&&(0,e.rTO)(Zt,Ar),(!Jt||1024&_t&&wn!==(wn=h[10].id))&&(0,e.Ljt)(c,"id",wn),1024&_t&&(0,e.VHj)(c,"vc-actived",h[10].actived)},i:function(mn){Jt||((0,e.Ui)(_e.$$.fragment,mn),(0,e.Ui)(jt),(0,e.Ui)(Gt),(0,e.Ui)(Wt),(0,e.Ui)(Qt),(0,e.Ui)(St.$$.fragment,mn),Jt=!0)},o:function(mn){(0,e.etI)(_e.$$.fragment,mn),(0,e.etI)(jt),(0,e.etI)(Gt),(0,e.etI)(Wt),(0,e.etI)(Qt),(0,e.etI)(St.$$.fragment,mn),Jt=!1},d:function(mn){mn&&(0,e.ogt)(c),(0,e.vpE)(_e),jt&&jt.d(),Gt&&Gt.d(),Wt&&Wt.d(),Qt&&Qt.d(),(0,e.vpE)(St),un&&un.d(),Vr=!1,ci()}}}function us(h){var c,o,l,d;return l=new ho({props:{items:h[1],itemKey:"id",itemHeight:30,buffer:100,stickToBottom:!0,scrollbar:!0,$$slots:{item:[cs,function(f){return{10:f.item}},function(f){return f.item?1024:0}],empty:[ss],header:[is]},$$scope:{ctx:h}}}),{c:function(){c=(0,e.bGB)("div"),o=(0,e.bGB)("div"),(0,e.YCL)(l.$$.fragment),(0,e.Ljt)(o,"class","vc-plugin-content"),(0,e.Ljt)(c,"class","vc-table")},m:function(f,v){(0,e.$Tr)(f,c,v),(0,e.R3I)(c,o),(0,e.yef)(l,o,null),d=!0},p:function(f,v){var _=v[0],B={};2&_&&(B.items=f[1]),2098177&_&&(B.$$scope={dirty:_,ctx:f}),l.$set(B)},i:function(f){d||((0,e.Ui)(l.$$.fragment,f),d=!0)},o:function(f){(0,e.etI)(l.$$.fragment,f),d=!1},d:function(f){f&&(0,e.ogt)(c),(0,e.vpE)(l)}}}function ds(h,c,o){var l;(0,e.FIv)(h,Dn,(function(O){return o(6,l=O)}));var d=0,f=function(O){o(0,d=Object.keys(O).length)},v=Dn.subscribe(f);f(l);var _=[],B=function(O){(0,e.fxP)(Dn,l[O].actived=!l[O].actived,l)};return(0,u.H3)((function(){_o.use()})),(0,u.ev)((function(){v(),_o.unuse()})),h.$$.update=function(){64&h.$$.dirty&&o(1,_=Object.values(l))},[d,_,B,function(O){var $="curl -X "+O.method;return typeof O.postData=="string"?$+=" -d '"+O.postData+"'":typeof O.postData=="object"&&O.postData!==null&&($+=" -d '"+n.hZ(O.postData)+"'"),$+" '"+O.url+"'"},function(O){return n.Kn(O)||n.kJ(O)?n.hZ(O,{maxDepth:10,keyMaxLen:1e4,pretty:!0}):O},{fixedHeight:!0},l,function(O){return B(O.id)}]}var hs=(function(h){function c(o){var l;return l=h.call(this)||this,(0,e.S1n)((0,s.Z)(l),o,ds,us,e.N8,{options:5}),l}return(0,a.Z)(c,h),(0,g.Z)(c,[{key:"options",get:function(){return this.$$.ctx[5]}}]),c})(e.f_C),fs=hs,ps=(function(h){function c(){for(var l,d=arguments.length,f=new Array(d),v=0;v<d;v++)f[v]=arguments[v];return(l=h.call.apply(h,[this].concat(f))||this).model=ir.getSingleton(ir,"VConsoleNetworkModel"),l}(0,a.Z)(c,h);var o=c.prototype;return o.add=function(l){var d=new Co(new qn);for(var f in l)d[f]=l[f];return d.startTime=d.startTime||Date.now(),d.requestType=d.requestType||"custom",this.model.updateRequest(d.id,d),d},o.update=function(l,d){this.model.updateRequest(l,d)},o.clear=function(){this.model.clearLog()},c})(po),Uo=(function(h){function c(l,d,f){var v;return f===void 0&&(f={}),(v=h.call(this,l,d,fs,f)||this).model=ir.getSingleton(ir,"VConsoleNetworkModel"),v.exporter=void 0,v.exporter=new ps(l),v}(0,a.Z)(c,h);var o=c.prototype;return o.onReady=function(){h.prototype.onReady.call(this),this.onUpdateOption()},o.onAddTool=function(l){var d=this;l([{name:"Clear",global:!1,onClick:function(f){d.model.clearLog()}}])},o.onRemove=function(){h.prototype.onRemove.call(this),this.model&&this.model.unMock()},o.onUpdateOption=function(){var l,d,f;((l=this.vConsole.option.network)==null?void 0:l.maxNetworkNumber)!==this.model.maxNetworkNumber&&(this.model.maxNetworkNumber=Number((f=this.vConsole.option.network)==null?void 0:f.maxNetworkNumber)||1e3),(d=this.vConsole.option.network)!=null&&d.ignoreUrlRegExp&&(this.model.ignoreUrlRegExp=this.vConsole.option.network.ignoreUrlRegExp)},c})(Dt),ms=__webpack_require__(8679),gs=__webpack_require__.n(ms),ar=(0,$t.fZ)(),Yn=(0,$t.fZ)(),lr=__webpack_require__(5670),Zn={};lr.Z&&lr.Z.locals&&(Zn.locals=lr.Z.locals);var Ur,$r=0,Fn={};Fn.styleTagTransform=L(),Fn.setAttributes=I(),Fn.insert=w().bind(null,"head"),Fn.domAPI=b(),Fn.insertStyleElement=M(),Zn.use=function(h){return Fn.options=h||{},$r++||(Ur=y()(lr.Z,Fn)),Zn},Zn.unuse=function(){$r>0&&!--$r&&(Ur(),Ur=null)};var $o=Zn;function Vo(h,c,o){var l=h.slice();return l[8]=c[o],l}function Ho(h,c,o){var l=h.slice();return l[11]=c[o],l}function No(h){var c,o,l,d=h[0].nodeType===Node.ELEMENT_NODE&&zo(h),f=h[0].nodeType===Node.TEXT_NODE&&Xo(h);return{c:function(){c=(0,e.bGB)("div"),d&&d.c(),o=(0,e.DhX)(),f&&f.c(),(0,e.Ljt)(c,"class","vcelm-l"),(0,e.VHj)(c,"vc-actived",h[0]._isActived),(0,e.VHj)(c,"vc-toggle",h[0]._isExpand),(0,e.VHj)(c,"vcelm-noc",h[0]._isSingleLine)},m:function(v,_){(0,e.$Tr)(v,c,_),d&&d.m(c,null),(0,e.R3I)(c,o),f&&f.m(c,null),l=!0},p:function(v,_){v[0].nodeType===Node.ELEMENT_NODE?d?(d.p(v,_),1&_&&(0,e.Ui)(d,1)):((d=zo(v)).c(),(0,e.Ui)(d,1),d.m(c,o)):d&&((0,e.dvw)(),(0,e.etI)(d,1,1,(function(){d=null})),(0,e.gbL)()),v[0].nodeType===Node.TEXT_NODE?f?f.p(v,_):((f=Xo(v)).c(),f.m(c,null)):f&&(f.d(1),f=null),1&_&&(0,e.VHj)(c,"vc-actived",v[0]._isActived),1&_&&(0,e.VHj)(c,"vc-toggle",v[0]._isExpand),1&_&&(0,e.VHj)(c,"vcelm-noc",v[0]._isSingleLine)},i:function(v){l||((0,e.Ui)(d),l=!0)},o:function(v){(0,e.etI)(d),l=!1},d:function(v){v&&(0,e.ogt)(c),d&&d.d(),f&&f.d()}}}function zo(h){var c,o,l,d,f,v,_,B,O,$,j=h[0].nodeName+"",H=(h[0].className||h[0].attributes.length)&&jo(h),re=h[0]._isNullEndTag&&Wo(),K=h[0].childNodes.length>0&&Qo(h),ie=!h[0]._isNullEndTag&&qo(h);return{c:function(){c=(0,e.bGB)("span"),o=(0,e.fLW)("<"),l=(0,e.fLW)(j),H&&H.c(),d=(0,e.cSb)(),re&&re.c(),f=(0,e.fLW)(">"),K&&K.c(),v=(0,e.cSb)(),ie&&ie.c(),_=(0,e.cSb)(),(0,e.Ljt)(c,"class","vcelm-node")},m:function(ue,be){(0,e.$Tr)(ue,c,be),(0,e.R3I)(c,o),(0,e.R3I)(c,l),H&&H.m(c,null),(0,e.R3I)(c,d),re&&re.m(c,null),(0,e.R3I)(c,f),K&&K.m(ue,be),(0,e.$Tr)(ue,v,be),ie&&ie.m(ue,be),(0,e.$Tr)(ue,_,be),B=!0,O||($=(0,e.oLt)(c,"click",h[2]),O=!0)},p:function(ue,be){(!B||1&be)&&j!==(j=ue[0].nodeName+"")&&(0,e.rTO)(l,j),ue[0].className||ue[0].attributes.length?H?H.p(ue,be):((H=jo(ue)).c(),H.m(c,d)):H&&(H.d(1),H=null),ue[0]._isNullEndTag?re||((re=Wo()).c(),re.m(c,f)):re&&(re.d(1),re=null),ue[0].childNodes.length>0?K?(K.p(ue,be),1&be&&(0,e.Ui)(K,1)):((K=Qo(ue)).c(),(0,e.Ui)(K,1),K.m(v.parentNode,v)):K&&((0,e.dvw)(),(0,e.etI)(K,1,1,(function(){K=null})),(0,e.gbL)()),ue[0]._isNullEndTag?ie&&(ie.d(1),ie=null):ie?ie.p(ue,be):((ie=qo(ue)).c(),ie.m(_.parentNode,_))},i:function(ue){B||((0,e.Ui)(K),B=!0)},o:function(ue){(0,e.etI)(K),B=!1},d:function(ue){ue&&(0,e.ogt)(c),H&&H.d(),re&&re.d(),K&&K.d(ue),ue&&(0,e.ogt)(v),ie&&ie.d(ue),ue&&(0,e.ogt)(_),O=!1,$()}}}function jo(h){for(var c,o=h[0].attributes,l=[],d=0;d<o.length;d+=1)l[d]=Go(Ho(h,o,d));return{c:function(){c=(0,e.bGB)("i");for(var f=0;f<l.length;f+=1)l[f].c();(0,e.Ljt)(c,"class","vcelm-k")},m:function(f,v){(0,e.$Tr)(f,c,v);for(var _=0;_<l.length;_+=1)l[_].m(c,null)},p:function(f,v){if(1&v){var _;for(o=f[0].attributes,_=0;_<o.length;_+=1){var B=Ho(f,o,_);l[_]?l[_].p(B,v):(l[_]=Go(B),l[_].c(),l[_].m(c,null))}for(;_<l.length;_+=1)l[_].d(1);l.length=o.length}},d:function(f){f&&(0,e.ogt)(c),(0,e.RMB)(l,f)}}}function vs(h){var c,o=h[11].name+"";return{c:function(){c=(0,e.fLW)(o)},m:function(l,d){(0,e.$Tr)(l,c,d)},p:function(l,d){1&d&&o!==(o=l[11].name+"")&&(0,e.rTO)(c,o)},d:function(l){l&&(0,e.ogt)(c)}}}function ys(h){var c,o,l,d,f,v=h[11].name+"",_=h[11].value+"";return{c:function(){c=(0,e.fLW)(v),o=(0,e.fLW)('="'),l=(0,e.bGB)("i"),d=(0,e.fLW)(_),f=(0,e.fLW)('"'),(0,e.Ljt)(l,"class","vcelm-v")},m:function(B,O){(0,e.$Tr)(B,c,O),(0,e.$Tr)(B,o,O),(0,e.$Tr)(B,l,O),(0,e.R3I)(l,d),(0,e.$Tr)(B,f,O)},p:function(B,O){1&O&&v!==(v=B[11].name+"")&&(0,e.rTO)(c,v),1&O&&_!==(_=B[11].value+"")&&(0,e.rTO)(d,_)},d:function(B){B&&(0,e.ogt)(c),B&&(0,e.ogt)(o),B&&(0,e.ogt)(l),B&&(0,e.ogt)(f)}}}function Go(h){var c,o;function l(v,_){return v[11].value!==""?ys:vs}var d=l(h),f=d(h);return{c:function(){c=(0,e.fLW)(`Â 
            `),f.c(),o=(0,e.cSb)()},m:function(v,_){(0,e.$Tr)(v,c,_),f.m(v,_),(0,e.$Tr)(v,o,_)},p:function(v,_){d===(d=l(v))&&f?f.p(v,_):(f.d(1),(f=d(v))&&(f.c(),f.m(o.parentNode,o)))},d:function(v){v&&(0,e.ogt)(c),f.d(v),v&&(0,e.ogt)(o)}}}function Wo(h){var c;return{c:function(){c=(0,e.fLW)("/")},m:function(o,l){(0,e.$Tr)(o,c,l)},d:function(o){o&&(0,e.ogt)(c)}}}function Qo(h){var c,o,l,d,f=[Cs,As],v=[];function _(B,O){return B[0]._isExpand?1:0}return c=_(h),o=v[c]=f[c](h),{c:function(){o.c(),l=(0,e.cSb)()},m:function(B,O){v[c].m(B,O),(0,e.$Tr)(B,l,O),d=!0},p:function(B,O){var $=c;(c=_(B))===$?v[c].p(B,O):((0,e.dvw)(),(0,e.etI)(v[$],1,1,(function(){v[$]=null})),(0,e.gbL)(),(o=v[c])?o.p(B,O):(o=v[c]=f[c](B)).c(),(0,e.Ui)(o,1),o.m(l.parentNode,l))},i:function(B){d||((0,e.Ui)(o),d=!0)},o:function(B){(0,e.etI)(o),d=!1},d:function(B){v[c].d(B),B&&(0,e.ogt)(l)}}}function As(h){for(var c,o,l=h[0].childNodes,d=[],f=0;f<l.length;f+=1)d[f]=Ko(Vo(h,l,f));var v=function(_){return(0,e.etI)(d[_],1,1,(function(){d[_]=null}))};return{c:function(){for(var _=0;_<d.length;_+=1)d[_].c();c=(0,e.cSb)()},m:function(_,B){for(var O=0;O<d.length;O+=1)d[O].m(_,B);(0,e.$Tr)(_,c,B),o=!0},p:function(_,B){if(1&B){var O;for(l=_[0].childNodes,O=0;O<l.length;O+=1){var $=Vo(_,l,O);d[O]?(d[O].p($,B),(0,e.Ui)(d[O],1)):(d[O]=Ko($),d[O].c(),(0,e.Ui)(d[O],1),d[O].m(c.parentNode,c))}for((0,e.dvw)(),O=l.length;O<d.length;O+=1)v(O);(0,e.gbL)()}},i:function(_){if(!o){for(var B=0;B<l.length;B+=1)(0,e.Ui)(d[B]);o=!0}},o:function(_){d=d.filter(Boolean);for(var B=0;B<d.length;B+=1)(0,e.etI)(d[B]);o=!1},d:function(_){(0,e.RMB)(d,_),_&&(0,e.ogt)(c)}}}function Cs(h){var c;return{c:function(){c=(0,e.fLW)("...")},m:function(o,l){(0,e.$Tr)(o,c,l)},p:e.ZTd,i:e.ZTd,o:e.ZTd,d:function(o){o&&(0,e.ogt)(c)}}}function Ko(h){var c,o,l;return(c=new Yo({props:{node:h[8]}})).$on("toggleNode",h[4]),{c:function(){(0,e.YCL)(c.$$.fragment),o=(0,e.DhX)()},m:function(d,f){(0,e.yef)(c,d,f),(0,e.$Tr)(d,o,f),l=!0},p:function(d,f){var v={};1&f&&(v.node=d[8]),c.$set(v)},i:function(d){l||((0,e.Ui)(c.$$.fragment,d),l=!0)},o:function(d){(0,e.etI)(c.$$.fragment,d),l=!1},d:function(d){(0,e.vpE)(c,d),d&&(0,e.ogt)(o)}}}function qo(h){var c,o,l,d,f=h[0].nodeName+"";return{c:function(){c=(0,e.bGB)("span"),o=(0,e.fLW)("</"),l=(0,e.fLW)(f),d=(0,e.fLW)(">"),(0,e.Ljt)(c,"class","vcelm-node")},m:function(v,_){(0,e.$Tr)(v,c,_),(0,e.R3I)(c,o),(0,e.R3I)(c,l),(0,e.R3I)(c,d)},p:function(v,_){1&_&&f!==(f=v[0].nodeName+"")&&(0,e.rTO)(l,f)},d:function(v){v&&(0,e.ogt)(c)}}}function Xo(h){var c,o,l=h[1](h[0].textContent)+"";return{c:function(){c=(0,e.bGB)("span"),o=(0,e.fLW)(l),(0,e.Ljt)(c,"class","vcelm-t vcelm-noc")},m:function(d,f){(0,e.$Tr)(d,c,f),(0,e.R3I)(c,o)},p:function(d,f){1&f&&l!==(l=d[1](d[0].textContent)+"")&&(0,e.rTO)(o,l)},d:function(d){d&&(0,e.ogt)(c)}}}function bs(h){var c,o,l=h[0]&&No(h);return{c:function(){l&&l.c(),c=(0,e.cSb)()},m:function(d,f){l&&l.m(d,f),(0,e.$Tr)(d,c,f),o=!0},p:function(d,f){var v=f[0];d[0]?l?(l.p(d,v),1&v&&(0,e.Ui)(l,1)):((l=No(d)).c(),(0,e.Ui)(l,1),l.m(c.parentNode,c)):l&&((0,e.dvw)(),(0,e.etI)(l,1,1,(function(){l=null})),(0,e.gbL)())},i:function(d){o||((0,e.Ui)(l),o=!0)},o:function(d){(0,e.etI)(l),o=!1},d:function(d){l&&l.d(d),d&&(0,e.ogt)(c)}}}function Ss(h,c,o){var l;(0,e.FIv)(h,Yn,(function(_){return o(3,l=_)}));var d=c.node,f=(0,u.x)(),v=["br","hr","img","input","link","meta"];return(0,u.H3)((function(){$o.use()})),(0,u.ev)((function(){$o.unuse()})),h.$$set=function(_){"node"in _&&o(0,d=_.node)},h.$$.update=function(){9&h.$$.dirty&&d&&(o(0,d._isActived=d===l,d),o(0,d._isNullEndTag=(function(_){return v.indexOf(_.nodeName)>-1})(d),d),o(0,d._isSingleLine=d.childNodes.length===0||d._isNullEndTag,d))},[d,function(_){return _.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},function(){d._isNullEndTag||(o(0,d._isExpand=!d._isExpand,d),f("toggleNode",{node:d}))},l,function(_){e.cKT.call(this,h,_)}]}var Yo=(function(h){function c(o){var l;return l=h.call(this)||this,(0,e.S1n)((0,s.Z)(l),o,Ss,bs,e.N8,{node:0}),l}return(0,a.Z)(c,h),(0,g.Z)(c,[{key:"node",get:function(){return this.$$.ctx[0]},set:function(o){this.$$set({node:o}),(0,e.yl1)()}}]),c})(e.f_C),_s=Yo;function ws(h){var c,o,l;return(o=new _s({props:{node:h[0]}})).$on("toggleNode",h[1]),{c:function(){c=(0,e.bGB)("div"),(0,e.YCL)(o.$$.fragment),(0,e.Ljt)(c,"class","vc-plugin-content")},m:function(d,f){(0,e.$Tr)(d,c,f),(0,e.yef)(o,c,null),l=!0},p:function(d,f){var v={};1&f[0]&&(v.node=d[0]),o.$set(v)},i:function(d){l||((0,e.Ui)(o.$$.fragment,d),l=!0)},o:function(d){(0,e.etI)(o.$$.fragment,d),l=!1},d:function(d){d&&(0,e.ogt)(c),(0,e.vpE)(o)}}}function xs(h,c,o){var l;return(0,e.FIv)(h,ar,(function(d){return o(0,l=d)})),[l,function(d){e.cKT.call(this,h,d)}]}var Es=(function(h){function c(o){var l;return l=h.call(this)||this,(0,e.S1n)((0,s.Z)(l),o,xs,ws,e.N8,{}),l}return(0,a.Z)(c,h),c})(e.f_C),Ts=Es,Zo=(function(h){function c(l,d,f){var v;return f===void 0&&(f={}),(v=h.call(this,l,d,Ts,f)||this).isInited=!1,v.observer=void 0,v.nodeMap=void 0,v}(0,a.Z)(c,h);var o=c.prototype;return o.onShow=function(){this.isInited||this._init()},o.onRemove=function(){h.prototype.onRemove.call(this),this.isInited&&(this.observer.disconnect(),this.isInited=!1,this.nodeMap=void 0,ar.set(void 0))},o.onAddTool=function(l){var d=this;l([{name:"Expand",global:!1,onClick:function(f){d._expandActivedNode()}},{name:"Collapse",global:!1,onClick:function(f){d._collapseActivedNode()}}])},o._init=function(){var l=this;this.isInited=!0,this.nodeMap=new WeakMap;var d=this._generateVNode(document.documentElement);d._isExpand=!0,Yn.set(d),ar.set(d),this.compInstance.$on("toggleNode",(function(f){Yn.set(f.detail.node)})),this.observer=new(gs())((function(f){for(var v=0;v<f.length;v++){var _=f[v];l._isInVConsole(_.target)||l._handleMutation(_)}})),this.observer.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},o._handleMutation=function(l){switch(l.type){case"childList":l.removedNodes.length>0&&this._onChildRemove(l),l.addedNodes.length>0&&this._onChildAdd(l);break;case"attributes":this._onAttributesChange(l);break;case"characterData":this._onCharacterDataChange(l)}},o._onChildRemove=function(l){var d=this.nodeMap.get(l.target);if(d){for(var f=0;f<l.removedNodes.length;f++){var v=this.nodeMap.get(l.removedNodes[f]);if(v){for(var _=0;_<d.childNodes.length;_++)if(d.childNodes[_]===v){d.childNodes.splice(_,1);break}this.nodeMap.delete(l.removedNodes[f])}}this._refreshStore()}},o._onChildAdd=function(l){var d=this.nodeMap.get(l.target);if(d){for(var f=0;f<l.addedNodes.length;f++){var v=l.addedNodes[f],_=this._generateVNode(v);if(_){var B=void 0,O=v;do{if(O.nextSibling===null)break;O.nodeType===Node.ELEMENT_NODE&&(B=this.nodeMap.get(O.nextSibling)||void 0),O=O.nextSibling}while(B===void 0);if(B===void 0)d.childNodes.push(_);else for(var $=0;$<d.childNodes.length;$++)if(d.childNodes[$]===B){d.childNodes.splice($,0,_);break}}}this._refreshStore()}},o._onAttributesChange=function(l){this._updateVNodeAttributes(l.target),this._refreshStore()},o._onCharacterDataChange=function(l){var d=this.nodeMap.get(l.target);d&&(d.textContent=l.target.textContent,this._refreshStore())},o._generateVNode=function(l){if(!this._isIgnoredNode(l)){var d={nodeType:l.nodeType,nodeName:l.nodeName.toLowerCase(),textContent:"",id:"",className:"",attributes:[],childNodes:[]};if(this.nodeMap.set(l,d),d.nodeType!=l.TEXT_NODE&&d.nodeType!=l.DOCUMENT_TYPE_NODE||(d.textContent=l.textContent),l.childNodes.length>0){d.childNodes=[];for(var f=0;f<l.childNodes.length;f++){var v=this._generateVNode(l.childNodes[f]);v&&d.childNodes.push(v)}}return this._updateVNodeAttributes(l),d}},o._updateVNodeAttributes=function(l){var d=this.nodeMap.get(l);if(d&&l instanceof Element&&(d.id=l.id||"",d.className=l.className||"",l.hasAttributes&&l.hasAttributes())){d.attributes=[];for(var f=0;f<l.attributes.length;f++)d.attributes.push({name:l.attributes[f].name,value:l.attributes[f].value||""})}},o._expandActivedNode=function(){var l=(0,$t.U2)(Yn);if(l._isExpand)for(var d=0;d<l.childNodes.length;d++)l.childNodes[d]._isExpand=!0;else l._isExpand=!0;this._refreshStore()},o._collapseActivedNode=function(){var l=(0,$t.U2)(Yn);if(l._isExpand){for(var d=!1,f=0;f<l.childNodes.length;f++)l.childNodes[f]._isExpand&&(d=!0,l.childNodes[f]._isExpand=!1);d||(l._isExpand=!1),this._refreshStore()}},o._isIgnoredNode=function(l){if(l.nodeType===l.TEXT_NODE){if(l.textContent.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$|\n+/g,"")==="")return!0}else if(l.nodeType===l.COMMENT_NODE)return!0;return!1},o._isInVConsole=function(l){for(var d=l;d!==void 0;){if(d.id=="__vconsole")return!0;d=d.parentElement||void 0}return!1},o._refreshStore=function(){ar.update((function(l){return l}))},c})(Dt);function Jo(h,c,o,l,d,f,v){try{var _=h[f](v),B=_.value}catch(O){return void o(O)}_.done?c(B):Promise.resolve(B).then(l,d)}function zn(h){return function(){var c=this,o=arguments;return new Promise((function(l,d){var f=h.apply(c,o);function v(B){Jo(f,l,d,v,_,"next",B)}function _(B){Jo(f,l,d,v,_,"throw",B)}v(void 0)}))}}var Is=__webpack_require__(8270);function ei(h,c){var o=Object.keys(h);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(h);c&&(l=l.filter((function(d){return Object.getOwnPropertyDescriptor(h,d).enumerable}))),o.push.apply(o,l)}return o}function ti(h){for(var c=1;c<arguments.length;c++){var o=arguments[c]!=null?arguments[c]:{};c%2?ei(Object(o),!0).forEach((function(l){(0,Is.Z)(h,l,o[l])})):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(o)):ei(Object(o)).forEach((function(l){Object.defineProperty(h,l,Object.getOwnPropertyDescriptor(o,l))}))}return h}var ni=function(h){if(!h||h.length===0)return{};for(var c={},o=h.split(";"),l=0;l<o.length;l++){var d=o[l].indexOf("=");if(!(d<0)){var f=o[l].substring(0,d).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),v=o[l].substring(d+1,o[l].length);try{f=decodeURIComponent(f)}catch{}try{v=decodeURIComponent(v)}catch{}c[f]=v}}return c},ri=function(h,c,o){typeof document<"u"&&document.cookie!==void 0&&(document.cookie=encodeURIComponent(h)+"="+encodeURIComponent(c)+(function(l){l===void 0&&(l={});var d=l,f=d.path,v=d.domain,_=d.expires,B=d.secure,O=d.sameSite,$=["none","lax","strict"].indexOf((O||"").toLowerCase())>-1?O:null;return[f==null?"":";path="+f,v==null?"":";domain="+v,_==null?"":";expires="+_.toUTCString(),B===void 0||B===!1?"":";secure",$===null?"":";SameSite="+$].join("")})(o))},oi=function(){return typeof document>"u"||document.cookie===void 0?"":document.cookie},Ds=(function(){function h(){}var c=h.prototype;return c.key=function(o){return o<this.keys.length?this.keys[o]:null},c.setItem=function(o,l,d){ri(o,l,d)},c.getItem=function(o){var l=ni(oi());return Object.prototype.hasOwnProperty.call(l,o)?l[o]:null},c.removeItem=function(o,l){for(var d,f,v=["","/"],_=((d=location)==null||(f=d.hostname)==null?void 0:f.split("."))||[];_.length>1;)v.push(_.join(".")),_.shift();for(var B=0;B<v.length;B++)for(var O,$,j=((O=location)==null||($=O.pathname)==null?void 0:$.split("/"))||[],H="";j.length>0;){H+=(H==="/"?"":"/")+j.shift();var re=ti(ti({},l),{},{path:H,domain:v[B],expires:new Date(0)});ri(o,"",re)}},c.clear=function(){for(var o=[].concat(this.keys),l=0;l<o.length;l++)this.removeItem(o[l])},(0,g.Z)(h,[{key:"length",get:function(){return this.keys.length}},{key:"keys",get:function(){var o=ni(oi());return Object.keys(o).sort()}}]),h})(),Bs=(function(){function h(){this.keys=[],this.currentSize=0,this.limitSize=0}var c=h.prototype;return c.key=function(o){return o<this.keys.length?this.keys[o]:null},c.prepare=(function(){var o=zn(bt().mark((function l(){var d=this;return bt().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",new Promise((function(v,_){(0,n.qt)("getStorageInfo",{success:function(B){d.keys=B?B.keys.sort():[],d.currentSize=B?B.currentSize:0,d.limitSize=B?B.limitSize:0,v(!0)},fail:function(){_(!1)}})})));case 1:case"end":return f.stop()}}),l)})));return function(){return o.apply(this,arguments)}})(),c.getItem=function(o){return new Promise((function(l,d){(0,n.qt)("getStorage",{key:o,success:function(f){var v=f.data;if(typeof f.data=="object")try{v=JSON.stringify(f.data)}catch{}l(v)},fail:function(f){d(f)}})}))},c.setItem=function(o,l){return new Promise((function(d,f){(0,n.qt)("setStorage",{key:o,data:l,success:function(v){d(v)},fail:function(v){f(v)}})}))},c.removeItem=function(o){return new Promise((function(l,d){(0,n.qt)("removeStorage",{key:o,success:function(f){l(f)},fail:function(f){d(f)}})}))},c.clear=function(){return new Promise((function(o,l){(0,n.qt)("clearStorage",{success:function(d){o(d)},fail:function(d){l(d)}})}))},(0,g.Z)(h,[{key:"length",get:function(){return this.keys.length}}]),h})(),zt={updateTime:(0,$t.fZ)(0),activedName:(0,$t.fZ)(null),defaultStorages:(0,$t.fZ)(["cookies","localStorage","sessionStorage"])},cr=(function(h){function c(){var l;return(l=h.call(this)||this).storage=new Map,zt.activedName.subscribe((function(d){var f=(0,$t.U2)(zt.defaultStorages);f.length>0&&f.indexOf(d)===-1&&zt.activedName.set(f[0])})),zt.defaultStorages.subscribe((function(d){d.indexOf((0,$t.U2)(zt.activedName))===-1&&zt.activedName.set(d[0]),l.updateEnabledStorages()})),l}(0,a.Z)(c,h);var o=c.prototype;return o.getItem=(function(){var l=zn(bt().mark((function d(f){return bt().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:if(this.activedStorage){v.next=2;break}return v.abrupt("return","");case 2:return v.next=4,this.promisify(this.activedStorage.getItem(f));case 4:return v.abrupt("return",v.sent);case 5:case"end":return v.stop()}}),d,this)})));return function(d){return l.apply(this,arguments)}})(),o.setItem=(function(){var l=zn(bt().mark((function d(f,v){var _;return bt().wrap((function(B){for(;;)switch(B.prev=B.next){case 0:if(this.activedStorage){B.next=2;break}return B.abrupt("return");case 2:return B.next=4,this.promisify(this.activedStorage.setItem(f,v));case 4:return _=B.sent,this.refresh(),B.abrupt("return",_);case 7:case"end":return B.stop()}}),d,this)})));return function(d,f){return l.apply(this,arguments)}})(),o.removeItem=(function(){var l=zn(bt().mark((function d(f){var v;return bt().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:if(this.activedStorage){_.next=2;break}return _.abrupt("return");case 2:return _.next=4,this.promisify(this.activedStorage.removeItem(f));case 4:return v=_.sent,this.refresh(),_.abrupt("return",v);case 7:case"end":return _.stop()}}),d,this)})));return function(d){return l.apply(this,arguments)}})(),o.clear=(function(){var l=zn(bt().mark((function d(){var f;return bt().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:if(this.activedStorage){v.next=2;break}return v.abrupt("return");case 2:return v.next=4,this.promisify(this.activedStorage.clear());case 4:return f=v.sent,this.refresh(),v.abrupt("return",f);case 7:case"end":return v.stop()}}),d,this)})));return function(){return l.apply(this,arguments)}})(),o.refresh=function(){zt.updateTime.set(Date.now())},o.getEntries=(function(){var l=zn(bt().mark((function d(){var f,v,_,B,O;return bt().wrap((function($){for(;;)switch($.prev=$.next){case 0:if(f=this.activedStorage){$.next=3;break}return $.abrupt("return",[]);case 3:if(typeof f.prepare!="function"){$.next=6;break}return $.next=6,f.prepare();case 6:v=[],_=0;case 8:if(!(_<f.length)){$.next=17;break}return B=f.key(_),$.next=12,this.getItem(B);case 12:O=$.sent,v.push([B,O]);case 14:_++,$.next=8;break;case 17:return $.abrupt("return",v);case 18:case"end":return $.stop()}}),d,this)})));return function(){return l.apply(this,arguments)}})(),o.updateEnabledStorages=function(){var l=(0,$t.U2)(zt.defaultStorages);l.indexOf("cookies")>-1?document.cookie!==void 0&&this.storage.set("cookies",new Ds):this.deleteStorage("cookies"),l.indexOf("localStorage")>-1?window.localStorage&&this.storage.set("localStorage",window.localStorage):this.deleteStorage("localStorage"),l.indexOf("sessionStorage")>-1?window.sessionStorage&&this.storage.set("sessionStorage",window.sessionStorage):this.deleteStorage("sessionStorage"),l.indexOf("wxStorage")>-1?(0,n.H_)()&&this.storage.set("wxStorage",new Bs):this.deleteStorage("wxStorage")},o.promisify=function(l){return typeof l=="string"||l==null?Promise.resolve(l):l},o.deleteStorage=function(l){this.storage.has(l)&&this.storage.delete(l)},(0,g.Z)(c,[{key:"activedStorage",get:function(){return this.storage.get((0,$t.U2)(zt.activedName))}}]),c})(vo.N);function ii(h,c,o){var l=h.slice();return l[20]=c[o][0],l[21]=c[o][1],l[23]=o,l}function si(h){var c;return{c:function(){(c=(0,e.bGB)("div")).textContent="Empty",(0,e.Ljt)(c,"class","vc-plugin-empty")},m:function(o,l){(0,e.$Tr)(o,c,l)},p:e.ZTd,d:function(o){o&&(0,e.ogt)(c)}}}function Rs(h){var c,o,l,d,f,v=h[20]+"",_=h[5](h[21])+"";return{c:function(){c=(0,e.bGB)("div"),o=(0,e.fLW)(v),l=(0,e.DhX)(),d=(0,e.bGB)("div"),f=(0,e.fLW)(_),(0,e.Ljt)(c,"class","vc-table-col"),(0,e.Ljt)(d,"class","vc-table-col vc-table-col-2")},m:function(B,O){(0,e.$Tr)(B,c,O),(0,e.R3I)(c,o),(0,e.$Tr)(B,l,O),(0,e.$Tr)(B,d,O),(0,e.R3I)(d,f)},p:function(B,O){1&O&&v!==(v=B[20]+"")&&(0,e.rTO)(o,v),1&O&&_!==(_=B[5](B[21])+"")&&(0,e.rTO)(f,_)},d:function(B){B&&(0,e.ogt)(c),B&&(0,e.ogt)(l),B&&(0,e.ogt)(d)}}}function Ms(h){var c,o,l,d,f,v,_;return{c:function(){c=(0,e.bGB)("div"),o=(0,e.bGB)("textarea"),l=(0,e.DhX)(),d=(0,e.bGB)("div"),f=(0,e.bGB)("textarea"),(0,e.Ljt)(o,"class","vc-table-input"),(0,e.Ljt)(c,"class","vc-table-col"),(0,e.Ljt)(f,"class","vc-table-input"),(0,e.Ljt)(d,"class","vc-table-col vc-table-col-2")},m:function(B,O){(0,e.$Tr)(B,c,O),(0,e.R3I)(c,o),(0,e.BmG)(o,h[2]),(0,e.$Tr)(B,l,O),(0,e.$Tr)(B,d,O),(0,e.R3I)(d,f),(0,e.BmG)(f,h[3]),v||(_=[(0,e.oLt)(o,"input",h[11]),(0,e.oLt)(f,"input",h[12])],v=!0)},p:function(B,O){4&O&&(0,e.BmG)(o,B[2]),8&O&&(0,e.BmG)(f,B[3])},d:function(B){B&&(0,e.ogt)(c),B&&(0,e.ogt)(l),B&&(0,e.ogt)(d),v=!1,(0,e.j7q)(_)}}}function Ps(h){var c,o,l,d,f,v;return(c=new Bt.Z({props:{name:"delete"}})).$on("click",(function(){return h[14](h[20])})),l=new It({props:{content:[h[20],h[21]].join("=")}}),(f=new Bt.Z({props:{name:"edit"}})).$on("click",(function(){return h[15](h[20],h[21],h[23])})),{c:function(){(0,e.YCL)(c.$$.fragment),o=(0,e.DhX)(),(0,e.YCL)(l.$$.fragment),d=(0,e.DhX)(),(0,e.YCL)(f.$$.fragment)},m:function(_,B){(0,e.yef)(c,_,B),(0,e.$Tr)(_,o,B),(0,e.yef)(l,_,B),(0,e.$Tr)(_,d,B),(0,e.yef)(f,_,B),v=!0},p:function(_,B){h=_;var O={};1&B&&(O.content=[h[20],h[21]].join("=")),l.$set(O)},i:function(_){v||((0,e.Ui)(c.$$.fragment,_),(0,e.Ui)(l.$$.fragment,_),(0,e.Ui)(f.$$.fragment,_),v=!0)},o:function(_){(0,e.etI)(c.$$.fragment,_),(0,e.etI)(l.$$.fragment,_),(0,e.etI)(f.$$.fragment,_),v=!1},d:function(_){(0,e.vpE)(c,_),_&&(0,e.ogt)(o),(0,e.vpE)(l,_),_&&(0,e.ogt)(d),(0,e.vpE)(f,_)}}}function Ls(h){var c,o,l,d;return(c=new Bt.Z({props:{name:"cancel"}})).$on("click",h[9]),(l=new Bt.Z({props:{name:"done"}})).$on("click",(function(){return h[13](h[20])})),{c:function(){(0,e.YCL)(c.$$.fragment),o=(0,e.DhX)(),(0,e.YCL)(l.$$.fragment)},m:function(f,v){(0,e.yef)(c,f,v),(0,e.$Tr)(f,o,v),(0,e.yef)(l,f,v),d=!0},p:function(f,v){h=f},i:function(f){d||((0,e.Ui)(c.$$.fragment,f),(0,e.Ui)(l.$$.fragment,f),d=!0)},o:function(f){(0,e.etI)(c.$$.fragment,f),(0,e.etI)(l.$$.fragment,f),d=!1},d:function(f){(0,e.vpE)(c,f),f&&(0,e.ogt)(o),(0,e.vpE)(l,f)}}}function ai(h){var c,o,l,d,f,v,_;function B(K,ie){return K[1]===K[23]?Ms:Rs}var O=B(h),$=O(h),j=[Ls,Ps],H=[];function re(K,ie){return K[1]===K[23]?0:1}return d=re(h),f=H[d]=j[d](h),{c:function(){c=(0,e.bGB)("div"),$.c(),o=(0,e.DhX)(),l=(0,e.bGB)("div"),f.c(),v=(0,e.DhX)(),(0,e.Ljt)(l,"class","vc-table-col vc-table-col-1 vc-table-action"),(0,e.Ljt)(c,"class","vc-table-row")},m:function(K,ie){(0,e.$Tr)(K,c,ie),$.m(c,null),(0,e.R3I)(c,o),(0,e.R3I)(c,l),H[d].m(l,null),(0,e.R3I)(c,v),_=!0},p:function(K,ie){O===(O=B(K))&&$?$.p(K,ie):($.d(1),($=O(K))&&($.c(),$.m(c,o)));var ue=d;(d=re(K))===ue?H[d].p(K,ie):((0,e.dvw)(),(0,e.etI)(H[ue],1,1,(function(){H[ue]=null})),(0,e.gbL)(),(f=H[d])?f.p(K,ie):(f=H[d]=j[d](K)).c(),(0,e.Ui)(f,1),f.m(l,null))},i:function(K){_||((0,e.Ui)(f),_=!0)},o:function(K){(0,e.etI)(f),_=!1},d:function(K){K&&(0,e.ogt)(c),$.d(),H[d].d()}}}function Os(h){for(var c,o,l,d,f=h[0],v=[],_=0;_<f.length;_+=1)v[_]=ai(ii(h,f,_));var B=function($){return(0,e.etI)(v[$],1,1,(function(){v[$]=null}))},O=null;return f.length||(O=si()),{c:function(){c=(0,e.bGB)("div"),(o=(0,e.bGB)("div")).innerHTML=`<div class="vc-table-col">Key</div> 
    <div class="vc-table-col vc-table-col-2">Value</div> 
    <div class="vc-table-col vc-table-col-1 vc-table-action"></div>`,l=(0,e.DhX)();for(var $=0;$<v.length;$+=1)v[$].c();O&&O.c(),(0,e.Ljt)(o,"class","vc-table-row"),(0,e.Ljt)(c,"class","vc-table")},m:function($,j){(0,e.$Tr)($,c,j),(0,e.R3I)(c,o),(0,e.R3I)(c,l);for(var H=0;H<v.length;H+=1)v[H].m(c,null);O&&O.m(c,null),d=!0},p:function($,j){var H=j[0];if(1007&H){var re;for(f=$[0],re=0;re<f.length;re+=1){var K=ii($,f,re);v[re]?(v[re].p(K,H),(0,e.Ui)(v[re],1)):(v[re]=ai(K),v[re].c(),(0,e.Ui)(v[re],1),v[re].m(c,null))}for((0,e.dvw)(),re=f.length;re<v.length;re+=1)B(re);(0,e.gbL)(),!f.length&&O?O.p($,H):f.length?O&&(O.d(1),O=null):((O=si()).c(),O.m(c,null))}},i:function($){if(!d){for(var j=0;j<f.length;j+=1)(0,e.Ui)(v[j]);d=!0}},o:function($){v=v.filter(Boolean);for(var j=0;j<v.length;j+=1)(0,e.etI)(v[j]);d=!1},d:function($){$&&(0,e.ogt)(c),(0,e.RMB)(v,$),O&&O.d()}}}function Fs(h,c,o){var l,d=this&&this.__awaiter||function(ie,ue,be,_e){return new(be||(be=Promise))((function(Te,Qe){function Fe(ct){try{at(_e.next(ct))}catch($e){Qe($e)}}function st(ct){try{at(_e.throw(ct))}catch($e){Qe($e)}}function at(ct){var $e;ct.done?Te(ct.value):($e=ct.value,$e instanceof be?$e:new be((function(ze){ze($e)}))).then(Fe,st)}at((_e=_e.apply(ie,ue||[])).next())}))},f=cr.getSingleton(cr,"VConsoleStorageModel"),v=zt.updateTime;(0,e.FIv)(h,v,(function(ie){return o(10,l=ie)}));var _=[],B=-1,O="",$="",j=function(){o(1,B=-1),o(2,O=""),o(3,$="")},H=function(ie){return d(void 0,void 0,void 0,bt().mark((function ue(){return bt().wrap((function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,f.removeItem(ie);case 2:case"end":return be.stop()}}),ue)})))},re=function(ie){return d(void 0,void 0,void 0,bt().mark((function ue(){return bt().wrap((function(be){for(;;)switch(be.prev=be.next){case 0:if(O===ie){be.next=3;break}return be.next=3,f.removeItem(ie);case 3:f.setItem(O,$),j();case 5:case"end":return be.stop()}}),ue)})))},K=function(ie,ue,be){return d(void 0,void 0,void 0,bt().mark((function _e(){return bt().wrap((function(Te){for(;;)switch(Te.prev=Te.next){case 0:o(2,O=ie),o(3,$=ue),o(1,B=be);case 3:case"end":return Te.stop()}}),_e)})))};return h.$$.update=function(){1024&h.$$.dirty&&l&&d(void 0,void 0,void 0,bt().mark((function ie(){return bt().wrap((function(ue){for(;;)switch(ue.prev=ue.next){case 0:return j(),ue.t0=o,ue.next=4,f.getEntries();case 4:ue.t1=_=ue.sent,(0,ue.t0)(0,ue.t1);case 6:case"end":return ue.stop()}}),ie)})))},[_,B,O,$,v,function(ie){return(0,n.id)(ie,1024)},H,re,K,function(){j()},l,function(){O=this.value,o(2,O)},function(){$=this.value,o(3,$)},function(ie){return re(ie)},function(ie){return H(ie)},function(ie,ue,be){return K(ie,ue,be)}]}var ks=(function(h){function c(o){var l;return l=h.call(this)||this,(0,e.S1n)((0,s.Z)(l),o,Fs,Os,e.N8,{}),l}return(0,a.Z)(c,h),c})(e.f_C),Us=ks,li=(function(h){function c(l,d,f){var v;return f===void 0&&(f={}),(v=h.call(this,l,d,Us,f)||this).model=cr.getSingleton(cr,"VConsoleStorageModel"),v.onAddTopBarCallback=void 0,v}(0,a.Z)(c,h);var o=c.prototype;return o.onReady=function(){h.prototype.onReady.call(this),this.onUpdateOption()},o.onShow=function(){this.model.refresh()},o.onAddTopBar=function(l){this.onAddTopBarCallback=l,this.updateTopBar()},o.onAddTool=function(l){var d=this;l([{name:"Add",global:!1,onClick:function(){d.model.setItem("new_"+Date.now(),"new_value")}},{name:"Refresh",global:!1,onClick:function(){d.model.refresh()}},{name:"Clear",global:!1,onClick:function(){d.model.clear()}}])},o.onUpdateOption=function(){var l,d=(l=this.vConsole.option.storage)==null?void 0:l.defaultStorages;(0,n.kJ)(d)&&(d=d.length>0?d:["cookies"])!==(0,$t.U2)(zt.defaultStorages)&&(zt.defaultStorages.set(d),zt.activedName.set(d[0]),this.updateTopBar())},o.updateTopBar=function(){var l=this;if(typeof this.onAddTopBarCallback=="function"){for(var d=(0,$t.U2)(zt.defaultStorages),f=[],v=0;v<d.length;v++){var _=d[v];f.push({name:_[0].toUpperCase()+_.substring(1),data:{name:_},actived:_===(0,$t.U2)(zt.activedName),onClick:function(B,O){var $=(0,$t.U2)(zt.activedName);if(O.name===$)return!1;zt.activedName.set(O.name),l.model.refresh()}})}this.onAddTopBarCallback(f)}},c})(Dt),Yt=(function(){function h(o){var l=this;if(this.version="3.15.1",this.isInited=!1,this.option={},this.compInstance=void 0,this.pluginList={},this.log=void 0,this.system=void 0,this.network=void 0,h.instance&&h.instance instanceof h)return console.debug("[vConsole] vConsole is already exists."),h.instance;if(h.instance=this,this.isInited=!1,this.option={defaultPlugins:["system","network","element","storage"],log:{},network:{},storage:{}},n.Kn(o))for(var d in o)this.option[d]=o[d];this.option.maxLogNumber!==void 0&&(this.option.log.maxLogNumber=this.option.maxLogNumber,console.debug("[vConsole] Deprecated option: `maxLogNumber`, use `log.maxLogNumber` instead.")),this.option.onClearLog!==void 0&&console.debug("[vConsole] Deprecated option: `onClearLog`."),this.option.maxNetworkNumber!==void 0&&(this.option.network.maxNetworkNumber=this.option.maxNetworkNumber,console.debug("[vConsole] Deprecated option: `maxNetworkNumber`, use `network.maxNetworkNumber` instead.")),this._addBuiltInPlugins();var f=function(){l.isInited||(l._initComponent(),l._autoRun())};if(document!==void 0)document.readyState==="loading"?r.bind(window,"DOMContentLoaded",f):f();else{var v;v=setTimeout((function _(){document&&document.readyState=="complete"?(v&&clearTimeout(v),f()):v=setTimeout(_,1)}),1)}}var c=h.prototype;return c._addBuiltInPlugins=function(){this.addPlugin(new mo("default","Log"));var o=this.option.defaultPlugins,l={system:{proto:go,name:"System"}};if(l.network={proto:Uo,name:"Network"},l.element={proto:Zo,name:"Element"},l.storage={proto:li,name:"Storage"},o&&n.kJ(o))for(var d=0;d<o.length;d++){var f=l[o[d]];f?this.addPlugin(new f.proto(o[d],f.name)):console.debug("[vConsole] Unrecognized default plugin ID:",o[d])}},c._initComponent=function(){var o=this;if(!r.one("#__vconsole")){var l,d=1*n.cF("switch_x"),f=1*n.cF("switch_y");typeof this.option.target=="string"?l=document.querySelector(this.option.target):this.option.target instanceof HTMLElement&&(l=this.option.target),l instanceof HTMLElement||(l=document.documentElement),this.compInstance=new dn({target:l,props:{switchButtonPosition:{x:d,y:f}}}),this.compInstance.$on("show",(function(v){v.detail.show?o.show():o.hide()})),this.compInstance.$on("changePanel",(function(v){var _=v.detail.pluginId;o.showPlugin(_)}))}this._updateComponentByOptions()},c._updateComponentByOptions=function(){if(this.compInstance){if(this.compInstance.theme!==this.option.theme){var o=this.option.theme;o=o!=="light"&&o!=="dark"?"":o,this.compInstance.theme=o}this.compInstance.disableScrolling!==this.option.disableLogScrolling&&(this.compInstance.disableScrolling=!!this.option.disableLogScrolling)}},c.setSwitchPosition=function(o,l){this.compInstance.switchButtonPosition={x:o,y:l}},c._autoRun=function(){for(var o in this.isInited=!0,this.pluginList)this._initPlugin(this.pluginList[o]);this._showFirstPluginWhenEmpty(),this.triggerEvent("ready")},c._showFirstPluginWhenEmpty=function(){var o=Object.keys(this.pluginList);this.compInstance.activedPluginId===""&&o.length>0&&this.showPlugin(o[0])},c.triggerEvent=function(o,l){var d=this;o="on"+o.charAt(0).toUpperCase()+o.slice(1),n.mf(this.option[o])&&setTimeout((function(){d.option[o].apply(d,l)}),0)},c._initPlugin=function(o){var l=this;o.vConsole=this,this.compInstance.pluginList[o.id]={id:o.id,name:o.name,hasTabPanel:!1,tabOptions:void 0,topbarList:[],toolbarList:[],content:void 0,contentContainer:void 0},this.compInstance.pluginList=this._reorderPluginList(this.compInstance.pluginList),o.trigger("init"),o.trigger("renderTab",(function(d,f){f===void 0&&(f={});var v=l.compInstance.pluginList[o.id];v.hasTabPanel=!0,v.tabOptions=f,d&&(l.compInstance.pluginList[o.id].content=d),l.compInstance.pluginList=l.compInstance.pluginList})),o.trigger("addTopBar",(function(d){if(d){for(var f=[],v=0;v<d.length;v++){var _=d[v];f.push({name:_.name||"Undefined",className:_.className||"",actived:!!_.actived,data:_.data,onClick:_.onClick})}l.compInstance.pluginList[o.id].topbarList=f,l.compInstance.pluginList=l.compInstance.pluginList}})),o.trigger("addTool",(function(d){if(d){for(var f=[],v=0;v<d.length;v++){var _=d[v];f.push({name:_.name||"Undefined",global:!!_.global,data:_.data,onClick:_.onClick})}l.compInstance.pluginList[o.id].toolbarList=f,l.compInstance.pluginList=l.compInstance.pluginList}})),o.isReady=!0,o.trigger("ready")},c._triggerPluginsEvent=function(o){for(var l in this.pluginList)this.pluginList[l].isReady&&this.pluginList[l].trigger(o)},c._triggerPluginEvent=function(o,l){var d=this.pluginList[o];d&&d.isReady&&d.trigger(l)},c._reorderPluginList=function(o){var l=this;if(!n.kJ(this.option.pluginOrder))return o;for(var d=Object.keys(o).sort((function(_,B){var O=l.option.pluginOrder.indexOf(_),$=l.option.pluginOrder.indexOf(B);return O===$?0:O===-1?1:$===-1?-1:O-$})),f={},v=0;v<d.length;v++)f[d[v]]=o[d[v]];return f},c.addPlugin=function(o){return this.pluginList[o.id]!==void 0?(console.debug("[vConsole] Plugin `"+o.id+"` has already been added."),!1):(this.pluginList[o.id]=o,this.isInited&&(this._initPlugin(o),this._showFirstPluginWhenEmpty()),!0)},c.removePlugin=function(o){o=(o+"").toLowerCase();var l=this.pluginList[o];if(l===void 0)return console.debug("[vConsole] Plugin `"+o+"` does not exist."),!1;l.trigger("remove");try{delete this.pluginList[o],delete this.compInstance.pluginList[o]}catch{this.pluginList[o]=void 0,this.compInstance.pluginList[o]=void 0}return this.compInstance.pluginList=this.compInstance.pluginList,this.compInstance.activedPluginId==o&&(this.compInstance.activedPluginId="",this._showFirstPluginWhenEmpty()),!0},c.show=function(){this.isInited&&(this.compInstance.show=!0,this._triggerPluginsEvent("showConsole"))},c.hide=function(){this.isInited&&(this.compInstance.show=!1,this._triggerPluginsEvent("hideConsole"))},c.showSwitch=function(){this.isInited&&(this.compInstance.showSwitchButton=!0)},c.hideSwitch=function(){this.isInited&&(this.compInstance.showSwitchButton=!1)},c.showPlugin=function(o){this.isInited&&(this.pluginList[o]||console.debug("[vConsole] Plugin `"+o+"` does not exist."),this.compInstance.activedPluginId&&this._triggerPluginEvent(this.compInstance.activedPluginId,"hide"),this.compInstance.activedPluginId=o,this._triggerPluginEvent(this.compInstance.activedPluginId,"show"))},c.setOption=function(o,l){if(typeof o=="string"){for(var d=o.split("."),f=this.option,v=0;v<d.length;v++){if(d[v]==="__proto__"||d[v]==="constructor"||d[v]==="prototype")return void console.debug("[vConsole] Cannot set `"+d[v]+"` in `vConsole.setOption()`.");f[d[v]]===void 0&&(f[d[v]]={}),v===d.length-1&&(f[d[v]]=l),f=f[d[v]]}this._triggerPluginsEvent("updateOption"),this._updateComponentByOptions()}else if(n.Kn(o)){for(var _ in o)_!=="__proto__"&&_!=="constructor"&&_!=="prototype"?this.option[_]=o[_]:console.debug("[vConsole] Cannot set `"+_+"` in `vConsole.setOption()`.");this._triggerPluginsEvent("updateOption"),this._updateComponentByOptions()}else console.debug("[vConsole] The first parameter of `vConsole.setOption()` must be a string or an object.")},c.destroy=function(){if(this.isInited){this.isInited=!1,h.instance=void 0;for(var o=Object.keys(this.pluginList),l=o.length-1;l>=0;l--)this.removePlugin(o[l]);this.compInstance.$destroy()}},(0,g.Z)(h,null,[{key:"instance",get:function(){return window.__VCONSOLE_INSTANCE},set:function(o){o===void 0||o instanceof h?window.__VCONSOLE_INSTANCE=o:console.debug("[vConsole] Cannot set `VConsole.instance` because the value is not the instance of VConsole.")}}]),h})();Yt.VConsolePlugin=void 0,Yt.VConsoleLogPlugin=void 0,Yt.VConsoleDefaultPlugin=void 0,Yt.VConsoleSystemPlugin=void 0,Yt.VConsoleNetworkPlugin=void 0,Yt.VConsoleElementPlugin=void 0,Yt.VConsoleStoragePlugin=void 0,Yt.VConsolePlugin=Ut,Yt.VConsoleLogPlugin=Ir,Yt.VConsoleDefaultPlugin=mo,Yt.VConsoleSystemPlugin=go,Yt.VConsoleNetworkPlugin=Uo,Yt.VConsoleElementPlugin=Zo,Yt.VConsoleStoragePlugin=li;var $s=Yt})(),__webpack_exports__=__webpack_exports__.default,__webpack_exports__})()}))})(vconsole_min$1)),vconsole_min$1.exports}var vconsole_minExports=requireVconsole_min();const VConsole=getDefaultExportFromCjs(vconsole_minExports);class StatsModule{constructor(n){if(!(n!=null&&n.containerId))throw new Error("containerId is required");this.init(n)}init(n){var r,s,a,e,u,p,y,C,b,x;const t=document.getElementById(n.containerId);this.stats=new Stats,this.stats.showPanel((n==null?void 0:n.type)||0),(r=n==null?void 0:n.style)!=null&&r.position&&(this.stats.dom.style.position=((s=n==null?void 0:n.style)==null?void 0:s.position)||"absolute"),(a=n==null?void 0:n.style)!=null&&a.top&&(this.stats.dom.style.top=(e=n==null?void 0:n.style)==null?void 0:e.top),(u=n==null?void 0:n.style)!=null&&u.left&&(this.stats.dom.style.left=(p=n==null?void 0:n.style)==null?void 0:p.left),(y=n==null?void 0:n.style)!=null&&y.right&&(this.stats.dom.style.right=(C=n==null?void 0:n.style)==null?void 0:C.right),(b=n==null?void 0:n.style)!=null&&b.bottom&&(this.stats.dom.style.bottom=(x=n==null?void 0:n.style)==null?void 0:x.bottom),this.stats.dom.style.display="none",t.appendChild(this.stats.dom),console.log(this.stats.dom,n)}hide(){this.stats.dom.style.display="none"}show(){this.stats.dom.style.display="block"}}let gridSize=1,spaceSize=50;class DebugPanel{constructor(n){var t;this.metaView=n,this.gui=new GUI({container:document.getElementById("metaverse")}),this.gui.domElement.style.position="absolute",this.gui.domElement.style.top="10%",this.gui.domElement.style.right="0",this.state=new StatsModule({containerId:"app",type:0,style:{position:"absolute",top:"0"}}),(t=this.state)==null||t.show(),this.debugPanelConf={showGSInfo:!1,gridSize:1,spaceSize:30,engine:this.getEngine(),onSaveLocation:this.onSaveLocation.bind(this),onRestoreLocation:this.onRestoreLocation.bind(this),onResetLocation:this.onResetLocation.bind(this),onTestLowFrame:this.onTestLowFrame.bind(this)},this.vConsole=new VConsole,this.init()}show(){console.log("show panel"),this.isHidden=!1,this.gui.show(),this.vConsole&&typeof this.vConsole.showSwitch=="function"&&this.vConsole.showSwitch()}hide(){this.isHidden=!0,console.log("hide panel"),this.gui.hide(),this.vConsole&&typeof this.vConsole.hideSwitch=="function"&&this.vConsole.hideSwitch()}animate(){var n;(n=this.state)==null||n.stats.update()}onSaveLocation(){this.metaView.playerController.saveCurrentPosition(this.metaView.sceneController,"default")}onRestoreLocation(){this.metaView.playerController.restoreSavedPosition(this.metaView.sceneController,"default")}onResetLocation(){this.metaView.playerController.setPosition(0,0,0)}onTestLowFrame(){this.metaView.enterLowFrameRateMode()}init(){this.gui.add(this.debugPanelConf,"showGSInfo").onChange(()=>{this.debugPanelConf.showGSInfo?(console.log("showGSInfo"),this.metaView.sceneController.showInfoPanel(!0)):this.metaView.sceneController.showInfoPanel(!1)}),this.gui.add(this.debugPanelConf,"gridSize",1,30,1).onChange(()=>{gridSize=this.debugPanelConf.gridSize,createWalls(this.metaView.sceneController.getScene())}),this.gui.add(this.debugPanelConf,"spaceSize",30,150,10).onChange(()=>{spaceSize=this.debugPanelConf.ç©ºé—´å¤§å°,createWalls(this.metaView.sceneController.getScene())}),this.gui.add(this.debugPanelConf,"engine",Object.getOwnPropertyNames(EngineConfig)).name("æ¸²æŸ“å¼•æ“Ž").onChange(n=>{localStorage.setItem("engine",n),window.location.reload()}),this.gui.add(this.debugPanelConf,"onSaveLocation").name("ä¿å­˜ä½ç½®"),this.gui.add(this.debugPanelConf,"onRestoreLocation").name("æ¢å¤ä½ç½®"),this.gui.add(this.debugPanelConf,"onTestLowFrame").name("æµ‹è¯•ä½Žå¸§çŽ‡æ¨¡å¼"),this.gui.add(this.debugPanelConf,"onResetLocation").name("é‡ç½®ä½ç½®"),this.gui.hide(),this.vConsole.hideSwitch()}getEngine(){return localStorage.getItem("engine")===null?EngineConfig.GaussianSplats3D:localStorage.getItem("engine")}}let walls=[];function createWalls(g){walls.forEach(u=>g.remove(u)),walls=[];const n=20,t=.2,r=spaceSize/gridSize,s=spaceSize/2-r/2,a=new MeshStandardMaterial({color:16711680,transparent:!0,side:DoubleSide$1}),e=new MeshStandardMaterial({color:255,transparent:!0,side:DoubleSide$1});for(let u=0;u<gridSize-1;u++)for(let p=0;p<gridSize;p++){const y=new Mesh$1(new BoxGeometry$1(spaceSize,n,t),a);y.position.set(-s+u*r,n/2,-s+p*r),walls.push(y),g.add(y)}for(let u=0;u<gridSize;u++)for(let p=0;p<gridSize-1;p++){const y=new Mesh$1(new BoxGeometry$1(t,n,spaceSize),e);y.position.set(-s+u*r,n/2,-s+p*r),walls.push(y),g.add(y)}console.log(`åˆ›å»º ${gridSize}x${gridSize} ç½‘æ ¼ï¼Œå…± ${walls.length} å µå¢™`)}class WindowController{constructor(){this.isMobile=!1,this.currentOrientation=window.innerWidth>window.innerHeight?"landscape":"portrait",this.orientationChangeDialog=null,this.onOrientationChangeCallback=null,this.init()}init(){this.isMobile=isMobile()}onWindowResize(){console.log("window-controller","onWindowResize")}checkOrientationChange(){if(!this.isMobile)return;const n=window.innerWidth>window.innerHeight?"landscape":"portrait";n!==this.currentOrientation&&(this.currentOrientation=n,setTimeout(()=>{this.showOrientationDialog()},500))}createOrientationDialog(){const n=document.createElement("div");n.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 9999;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    `;const t=document.createElement("div");t.style.cssText=`
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      max-width: 320px;
      width: 90%;
      text-align: center;
      transform: scale(0.7) translateY(20px);
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      border: 1px solid rgba(255, 255, 255, 0.2);
    `;const r=document.createElement("h3");r.textContent="å±å¹•æ–¹å‘å·²æ”¹å˜",r.style.cssText=`
      color: white;
      margin: 0 0 12px 0;
      font-size: 18px;
      font-weight: 600;
    `;const s=document.createElement("p");s.textContent="ä¸ºäº†èŽ·å¾—æœ€ä½³ä½“éªŒï¼Œå»ºè®®é‡æ–°è½½å…¥é¡µé¢",s.style.cssText=`
      color: rgba(255, 255, 255, 0.9);
      margin: 0 0 24px 0;
      font-size: 14px;
      line-height: 1.5;
    `;const a=document.createElement("div");a.style.cssText=`
      display: flex;
      gap: 12px;
      justify-content: center;
    `;const e=document.createElement("button");e.textContent="å–æ¶ˆ",e.style.cssText=`
      padding: 10px 20px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      background: transparent;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s ease;
      min-width: 80px;
    `;const u=document.createElement("button");return u.textContent="é‡æ–°è½½å…¥",u.style.cssText=`
      padding: 10px 20px;
      border: none;
      background: linear-gradient(45deg, #ff6b6b, #ee5a24);
      color: white;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s ease;
      min-width: 80px;
      box-shadow: 0 4px 12px rgba(238, 90, 36, 0.3);
    `,this.addButtonHoverEffects(e,u),e.addEventListener("click",()=>{this.hideOrientationDialog()}),u.addEventListener("click",()=>{window.location.reload()}),a.appendChild(e),a.appendChild(u),t.appendChild(r),t.appendChild(s),t.appendChild(a),n.appendChild(t),document.body.appendChild(n),requestAnimationFrame(()=>{n.style.opacity="1",t.style.transform="scale(1) translateY(0)"}),n}addButtonHoverEffects(n,t){n.addEventListener("mouseenter",()=>{n.style.background="rgba(255, 255, 255, 0.1)",n.style.transform="translateY(-1px)"}),n.addEventListener("mouseleave",()=>{n.style.background="transparent",n.style.transform="translateY(0)"}),t.addEventListener("mouseenter",()=>{t.style.transform="translateY(-1px) scale(1.02)",t.style.boxShadow="0 6px 16px rgba(238, 90, 36, 0.4)"}),t.addEventListener("mouseleave",()=>{t.style.transform="translateY(0) scale(1)",t.style.boxShadow="0 4px 12px rgba(238, 90, 36, 0.3)"})}showOrientationDialog(){this.orientationChangeDialog&&this.hideOrientationDialog(),this.orientationChangeDialog=this.createOrientationDialog()}hideOrientationDialog(){if(this.orientationChangeDialog){const n=this.orientationChangeDialog.querySelector("div");this.orientationChangeDialog.style.opacity="0",n.style.transform="scale(0.7) translateY(20px)",setTimeout(()=>{this.orientationChangeDialog&&this.orientationChangeDialog.parentNode&&this.orientationChangeDialog.parentNode.removeChild(this.orientationChangeDialog),this.orientationChangeDialog=null},300)}}setOrientationChangeCallback(n){this.onOrientationChangeCallback=n}getIsMobile(){return this.isMobile}getCurrentOrientation(){return this.currentOrientation}destroy(){var n;window.removeEventListener("resize",(n=this.handleResize)==null?void 0:n.bind(this)),this.hideOrientationDialog()}}class PerformanceController{constructor(n=!1){this.isMobile=n,this.devicePerformanceLevel=n?"medium":"high",this.recommendedFrameRate=n?90:120,this.performanceThresholds={high:120,medium:90,low:60},this.frameCount=0,this.lastFrameTime=Date.now(),this.recentFrameRates=[],this.frameRateCheckInterval=1e3,this.lastFrameRateCheck=Date.now(),this.frameRateDropThreshold=.3,this.enableLowFrameRateMode=!1,this.lastRecoveryTime=0,this.recoveryProtectionDelay=1e4,this.monitoringStartTime=0,this.monitoringDelay=1e4,this.isMonitoringEnabled=!1}detectDevicePerformance(){if(!this.isMobile){this.devicePerformanceLevel="high",this.recommendedFrameRate=this.performanceThresholds.high,console.log("PCè®¾å¤‡é»˜è®¤æ€§èƒ½ç­‰çº§ï¼šé«˜ï¼ŒæŽ¨èå¸§çŽ‡ï¼š120fps");return}try{const n=document.createElement("canvas"),t=n.getContext("webgl")||n.getContext("experimental-webgl");if(!t){this.devicePerformanceLevel="low",this.recommendedFrameRate=this.performanceThresholds.low,console.log("WebGLä¸æ”¯æŒï¼Œè®¾å¤‡æ€§èƒ½ç­‰çº§ï¼šä½Ž");return}const r=t.getExtension("WEBGL_debug_renderer_info");let s="";r&&(s=t.getParameter(r.UNMASKED_RENDERER_WEBGL).toLowerCase());const a=navigator.deviceMemory||4,e=navigator.hardwareConcurrency||4;let u=0;s.includes("adreno")?s.includes("740")||s.includes("730")||s.includes("720")?u+=40:s.includes("650")||s.includes("640")||s.includes("630")?u+=30:u+=20:s.includes("mali")?s.includes("g78")||s.includes("g77")||s.includes("g76")?u+=35:s.includes("g72")||s.includes("g71")||s.includes("g52")?u+=25:u+=15:s.includes("apple")?u+=45:u+=20,a>=8?u+=30:a>=6?u+=25:a>=4?u+=20:u+=10,e>=8?u+=20:e>=6?u+=15:e>=4?u+=10:u+=5,u>=70?(this.devicePerformanceLevel="high",this.recommendedFrameRate=this.performanceThresholds.high):u>=40?(this.devicePerformanceLevel="medium",this.recommendedFrameRate=this.performanceThresholds.medium):(this.devicePerformanceLevel="low",this.recommendedFrameRate=this.performanceThresholds.low),console.log("è®¾å¤‡æ€§èƒ½æ£€æµ‹å®Œæˆï¼š"),console.log(`- è®¾å¤‡å¾—åˆ†: ${u}`),console.log(`- æ€§èƒ½ç­‰çº§: ${this.devicePerformanceLevel}`),console.log(`- æŽ¨èå¸§çŽ‡: ${this.recommendedFrameRate}fps`),console.log(`- æ€§èƒ½è¯„åˆ†: ${u}`),console.log(`- GPUä¿¡æ¯: ${s}`),console.log(`- å†…å­˜: ${a}GB`),console.log(`- CPUæ ¸å¿ƒ: ${e}`)}catch(n){console.warn("è®¾å¤‡æ€§èƒ½æ£€æµ‹å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤ä¸­ç­‰æ€§èƒ½è®¾ç½®:",n),this.devicePerformanceLevel="medium",this.recommendedFrameRate=this.performanceThresholds.medium}}startMonitoring(){this.monitoringStartTime=Date.now(),this.isMonitoringEnabled=!1,console.log("å¸§çŽ‡ç›‘æµ‹å°†åœ¨10ç§’åŽå¼€å§‹")}monitorFrameRate(){const n=Date.now();if(!this.isMonitoringEnabled&&this.monitoringStartTime>0)if(n-this.monitoringStartTime>=this.monitoringDelay)this.isMonitoringEnabled=!0,console.log("å¼€å§‹å¸§çŽ‡ç›‘æµ‹");else{this.frameCount=this.frameCount+1;return}if(!this.isMonitoringEnabled){this.frameCount=this.frameCount+1;return}if(this.frameCount=this.frameCount+1,n-this.lastFrameRateCheck>=this.frameRateCheckInterval){const t=this.frameCount/((n-this.lastFrameRateCheck)/1e3);this.recentFrameRates.push({fps:t,timestamp:n}),this.recentFrameRates=this.recentFrameRates.filter(r=>n-r.timestamp<=4e3),this.checkFrameRateChange(),this.frameCount=0,this.lastFrameRateCheck=n}}checkFrameRateChange(){if(this.recentFrameRates.length<4)return;const n=Date.now(),t=this.recentFrameRates.filter(e=>n-e.timestamp<=1e3),r=t.reduce((e,u)=>e+u.fps,0)/t.length,s=this.recentFrameRates.filter(e=>n-e.timestamp>1e3&&n-e.timestamp<=4e3),a=s.reduce((e,u)=>e+u.fps,0)/s.length;if(a>0){const u=1-r/a,p=this.recommendedFrameRate*(1-this.frameRateDropThreshold),y=r<p,C=a<p,b=n-this.lastRecoveryTime<this.recoveryProtectionDelay;if((u>this.frameRateDropThreshold||y||C)&&!b){if(!this.enableLowFrameRateMode){this.enableLowFrameRateMode=!0;let x="";u>this.frameRateDropThreshold?x=`å¸§çŽ‡ä¸‹é™${(u*100).toFixed(1)}%`:y?x=`å½“å‰å¸§çŽ‡ä½ŽäºŽæŽ¨èå€¼${this.recommendedFrameRate}fpsçš„30%(${p.toFixed(1)}fps)`:C&&(x=`ä¸‰ç§’å¹³å‡å¸§çŽ‡ä½ŽäºŽæŽ¨èå€¼${this.recommendedFrameRate}fpsçš„30%(${p.toFixed(1)}fps)`),console.log(`æ£€æµ‹åˆ°${x}ï¼Œå¯ç”¨ä½Žå¸§çŽ‡æ¨¡å¼`),console.log(`æœ€è¿‘1ç§’å¹³å‡å¸§çŽ‡: ${r.toFixed(1)}fpsï¼Œä¹‹å‰3ç§’å¹³å‡å¸§çŽ‡: ${a.toFixed(1)}fps`),console.log(`è®¾å¤‡æ€§èƒ½ç­‰çº§: ${this.devicePerformanceLevel}ï¼ŒæŽ¨èå¸§çŽ‡: ${this.recommendedFrameRate}fps`)}}else u<this.frameRateDropThreshold*.5&&r>=p*1.2&&a>=p*1.2?this.enableLowFrameRateMode&&!this.isUserEnablLowFrameRateMode&&(this.enableLowFrameRateMode=!1,this.lastRecoveryTime=n,console.log("å¸§çŽ‡æ¢å¤æ­£å¸¸ï¼Œç¦ç”¨ä½Žå¸§çŽ‡æ¨¡å¼ï¼Œ10ç§’å†…ä¸å†è¿›å…¥ä½Žå¸§çŽ‡æ¨¡å¼"),console.log(`æœ€è¿‘1ç§’å¹³å‡å¸§çŽ‡: ${r.toFixed(1)}fpsï¼Œä¹‹å‰3ç§’å¹³å‡å¸§çŽ‡: ${a.toFixed(1)}fps`)):b&&(u>this.frameRateDropThreshold||y||C)&&console.log(`æ£€æµ‹åˆ°æ€§èƒ½é—®é¢˜ï¼Œä½†åœ¨æ¢å¤ä¿æŠ¤æœŸå†…(å‰©ä½™${((this.recoveryProtectionDelay-(n-this.lastRecoveryTime))/1e3).toFixed(1)}ç§’)ï¼Œæš‚ä¸è¿›å…¥ä½Žå¸§çŽ‡æ¨¡å¼`)}}getPerformanceLevel(){return this.devicePerformanceLevel}getRecommendedFrameRate(){return this.recommendedFrameRate}isLowFrameRateMode(){return this.enableLowFrameRateMode}resetLowFrameRateMode(){this.enableLowFrameRateMode&&(this.lastRecoveryTime=Date.now()),this.enableLowFrameRateMode=!1,this.isUserEnablLowFrameRateMode=!1}enterLowFrameRateMode(){this.enableLowFrameRateMode||(this.enableLowFrameRateMode=!0,this.isUserEnablLowFrameRateMode=!0,console.log("æ‰‹åŠ¨è¿›å…¥ä½Žå¸§çŽ‡æ¨¡å¼"),console.log(`è®¾å¤‡æ€§èƒ½ç­‰çº§: ${this.devicePerformanceLevel}ï¼ŒæŽ¨èå¸§çŽ‡: ${this.recommendedFrameRate}fps`))}}class MetaverseViewer{constructor(n,t,r){console.log("container",n,t),this.configUrl=t,this.container=n,this.clock=null,this.animationId=null,this.onInteractionCallback=(r==null?void 0:r.onInteractionCallback)||null,this.landmark=null,this.landmarkRing=null,this.landmarkAnimTime=0,this.lastInputTime=Date.now(),this.isRenderingPaused=!1,this.renderPauseDelay=300,this.pauseStartTime=0,this.autoResumeDelay=2e3,this.sceneController=new SceneController(n),this.inputController=new InputController(n),this.playerController=null,this.windowController=new WindowController,this.performanceController=new PerformanceController(this.windowController.getIsMobile()),this.debugPanel=new DebugPanel(this)}async init(){var n;this.config=await this.getSceneMataFile(this.configUrl),document.title=this.config.name||"æ¨¡åž‹",this.clock=new Clock,this.performanceController.detectDevicePerformance(),await this.sceneController.initScene(this.config),this.performanceController.startMonitoring(),this.playerController=new PlayerController(this.sceneController.getScene(),this.sceneController.getWorldOctree(),this.config.avatarInfo),await this.playerController.init(),setTimeout(()=>{var t,r;(t=this.config.avatarInfo)!=null&&t.camera&&this.sceneController.setCameraAndOribitControl((r=this.config.avatarInfo)==null?void 0:r.camera)},300),this.inputController.setCharacterControls(this.playerController),this.inputController.setOrbitCallbacks(()=>this.startOrbiting(),()=>this.stopOrbiting()),this.setupInputListeners(),this.sceneController.initializeCameraTarget(this.playerController.getPosition()),(n=this.config)!=null&&n.interaction.length&&this.addInteractionZone(this.config.interaction),this.startAnimate()}startAnimate(){this.animate(),this.animate()}async getSceneMataFile(n){const t=await fetch(n,{mode:"cors",credentials:"omit",cache:"reload"});if(t.status!==200)return new Error(`load ${n} error ${t.statusText},${t.body}`);const r=await t.json();return console.log(`getSceneMataFile success file url ${n} content:`,r),r}setupInputListeners(){var t,r,s,a,e,u,p,y,C;const n=()=>{this.lastInputTime=Date.now(),this.isRenderingPaused&&this.resetRender()};document.addEventListener("keydown",n),document.addEventListener("keyup",n),this.container.addEventListener("mousedown",n),this.container.addEventListener("mousemove",n),this.container.addEventListener("mouseup",n),this.container.addEventListener("wheel",n),(t=document.getElementById("leftArea"))==null||t.addEventListener("touchstart",n),(r=document.getElementById("leftArea"))==null||r.addEventListener("touchmove",n),(s=document.getElementById("leftArea"))==null||s.addEventListener("touchend",n),(a=document.getElementById("orbitButton"))==null||a.addEventListener("touchstart",n),(e=document.getElementById("orbitButton"))==null||e.addEventListener("touchmove",n),(u=document.getElementById("orbitButton"))==null||u.addEventListener("touchend",n),(p=document.getElementById("orbitButton"))==null||p.addEventListener("mousedown",n),(y=document.getElementById("orbitButton"))==null||y.addEventListener("mousemove",n),(C=document.getElementById("orbitButton"))==null||C.addEventListener("mouseup",n),this.container.addEventListener("touchstart",n),this.container.addEventListener("touchmove",n),this.container.addEventListener("touchend",n),this.resetRenderState=n}resetRender(){this.lastInputTime=Date.now(),this.isRenderingPaused&&(this.isRenderingPaused=!1,this.performanceController.resetLowFrameRateMode(),console.log("æ¢å¤æ¸²æŸ“"),this.sceneController.animate(),setTimeout(()=>{this.playerController.restoreSavedPosition(this.sceneController,"animate",!0)},10))}addInteractionZone(n){this.interactionZone=[],this.interactionBox=[],this.modelSpotLight=[],n.forEach(t=>{const r=new BoxGeometry$1(...t.geometry),s=new MeshBasicMaterial$1({color:65280,transparent:!0,opacity:0}),a=new Mesh$1(r,s);a.position.set(...t.geometryPos),this.interactionZone.push(a);const e=new Box3$1().setFromObject(a);this.interactionBox.push(e),this.sceneController.getScene().add(a),this.addModel(new Vector3(Number(t.geometryPos[0])+t.modelPos[0],Number(t.geometryPos[1])+t.modelPos[1],Number(t.geometryPos[2])+t.modelPos[2]),t.model,t.scale||[1,1,1],degreesToRadians(t.rotation||[0,0,0]))}),this.addPointLightsForLabubu()}addInteractionZone2(n,t){console.log(222,n.geometry,333,n.geometryPos);const r=["-2","0","-10"],s=new BoxGeometry$1(...n.geometry),a=new MeshBasicMaterial$1({color:65280,transparent:!0,opacity:1});this.interactionZone2=new Mesh$1(s,a),this.interactionZone2.position.set(...r),this.sceneController.getScene().add(this.interactionZone2),this.interactionBox2=new Box3$1().setFromObject(this.interactionZone2),console.log("options.geometryPos",n.geometryPos),this.addModel(new Vector3(-3.6,Number(r[1]+.7),-10),"big_head_baby.glb",[1,1,1],[0,0,0])}addModel(n,t,r,s){const a=new GLTFLoader;a.setPath("./models/aigc/"),a.load(t,e=>{console.log(11111,t);const u=e.scene||e.scenes[0];u.position.copy(n),u.rotation.y=s[1],this.sceneController.getScene().add(u),e.scene.scale.set(...r),this.modelScene.push(u),this.sceneController.getScene().add(u)},void 0,e=>{console.error("Error loading model:",e)})}addPointLightsForLabubu(){const n=new AmbientLight(16777164,.6);this.sceneController.getScene().add(n),this.modelAmbientLight=n}animate(){if(this.performanceController.monitorFrameRate(),this.debugPanel.animate(),this.animationId=requestAnimationFrame(this.animate.bind(this)),this.performanceController.isLowFrameRateMode()){console.log("è¿›å…¥ä½Žå¸§çŽ‡æ¨¡å¼");const t=Date.now();if(t-this.lastInputTime>this.renderPauseDelay)if(this.isRenderingPaused||(this.playerController.saveCurrentPosition(this.sceneController,"animate"),this.isRenderingPaused=!0,this.pauseStartTime=t,console.log("è¿›å…¥ä¸æ¸²æŸ“æ¨¡å¼")),t-this.pauseStartTime>this.autoResumeDelay)this.lastInputTime=t,console.log("2ç§’åŽè‡ªåŠ¨æ¢å¤æ¸²æŸ“"),this.resetRenderState();else return}const n=this.clock.getDelta();if(this.sceneController.animate(),this.playerController&&this.playerController.isLoaded()){this.playerController.update(n,this.inputController,this.sceneController.getCamera());const t=this.playerController.getPosition();this.sceneController.updateCamera(t),this.checkInteractionZone(t)}this.modelMixer&&this.modelMixer.update(n),this.sceneController.getOrbitControl().update()}checkInteractionZone(n){if(!this.interactionZone.length||!this.interactionBox.length)return;const t=new Vector3(n.x,n.y,n.z);let r=!1,s="",a="";this.interactionBox.forEach((e,u)=>{if(e.containsPoint(t)){debugger;s=this.config.interaction[u].dialog,a=this.config.interaction[u].query,r=!0}}),this.onInteractionCallback&&this.onInteractionCallback(r,s,a)}switchRunToggle(){this.playerController&&this.playerController.switchRunToggle()}update(n,t){if(t&&(this.inputController.keysPressed=t),this.playerController&&this.playerController.isLoaded()){this.playerController.update(n,this.inputController,this.sceneController.getCamera());const r=this.playerController.getPosition();this.sceneController.updateCamera(r)}}destroy(){this.animationId&&cancelAnimationFrame(this.animationId),this.resetRenderState&&(document.removeEventListener("keydown",this.resetRenderState),document.removeEventListener("keyup",this.resetRenderState),document.removeEventListener("touchstart",this.resetRenderState),document.removeEventListener("touchmove",this.resetRenderState),document.removeEventListener("touchend",this.resetRenderState),this.container.removeEventListener("mousedown",this.resetRenderState),this.container.removeEventListener("mousemove",this.resetRenderState),this.container.removeEventListener("mouseup",this.resetRenderState),this.container.removeEventListener("wheel",this.resetRenderState),this.container.removeEventListener("touchstart",this.resetRenderState),this.container.removeEventListener("touchmove",this.resetRenderState),this.container.removeEventListener("touchend",this.resetRenderState)),this.inputController.destroy(),this.modelScene&&(this.sceneController.getScene().remove(this.modelScene),this.modelScene=null),this.modelMixer&&(this.modelMixer.stopAllAction(),this.modelMixer=null),this.modelAmbientLight&&(this.sceneController.getScene().remove(this.modelAmbientLight),this.modelAmbientLight.dispose(),this.modelAmbientLight=null),this.modelSpotLight&&(this.sceneController.getScene().remove(this.modelSpotLight),this.sceneController.getScene().remove(this.modelSpotLight.target),this.modelSpotLight.dispose(),this.modelSpotLight=null),this.sceneController.getRenderer()&&this.sceneController.getRenderer().dispose(),this.windowController&&this.windowController.destroy()}setDebugPanelVisible(n){if(n){this.debugPanel.show();return}this.debugPanel.hide()}startOrbiting(){if(this.playerController&&this.playerController.isLoaded()){const n=this.playerController.getPosition();this.sceneController.startOrbiting(n)}}stopOrbiting(){this.sceneController.stopOrbiting()}setInteractionCallback(n){this.onInteractionCallback=n}getIsMobile(){return this.windowController.getIsMobile()}enterLowFrameRateMode(){this.performanceController.enterLowFrameRateMode()}onWindowResize(){console.log("onWindowResize"),this.windowController.onWindowResize(),this.sceneController.onWindowResize(),this.isRenderingPaused&&this.resetRender()}}const _hoisted_1$1={class:"dialog-box"},_hoisted_2={class:"dialog-text"},_hoisted_3={key:1,class:"controls-guide"},_sfc_main$1={__name:"Metaverse",setup(g){const n=ref(null);let t=null;const r=ref(""),s=ref(!1);ref(!1);const a=ref(""),e=ref(!1);let u="å…ˆç”Ÿ~éº¦å½“åŠ³å¤§ç‰¹æƒ ï¼Œäº†è§£ä¸€ä¸‹";const p=ref(""),y=ref(!1),C=ref(null);let b=!1,x=!1,w=null,E=0;const I=ref(!0),R=()=>{E<u.length?(p.value=u.substring(0,E+1),E++):(clearInterval(w),setTimeout(()=>{y.value=!0},500))},M=()=>{E=0,p.value="",y.value=!1,w&&clearInterval(w),w=setInterval(R,100)},T=(G,Q,ee)=>{b&&G&&x!==G||G!==x&&(G&&!e.value?(u=Q,e.value=!0,a.value=ee,M()):!G&&e.value&&(e.value=!1),x=G,b=!1)},L=G=>(G.preventDefault(),G.stopPropagation(),!1),V=()=>{document.hidden?(console.log("é¡µé¢åˆ‡åˆ°åŽå°ï¼Œä¿å­˜å½“å‰ä½ç½®"),t&&t.playerController&&t.sceneController&&t.playerController.saveCurrentPosition(t.sceneController,"documentVisibility")):(console.log("é¡µé¢åˆ‡å›žå‰å°ï¼Œæ¢å¤ä¿å­˜çš„ä½ç½®"),setTimeout(()=>{t&&t.playerController&&t.sceneController&&t.playerController.restoreSavedPosition(t.sceneController,"documentVisibility",!0)},200))};onMounted(async()=>{await U(),document.addEventListener("visibilitychange",V);try{if(!r.value)return;if(t=new MetaverseViewer(n.value,decodeURIComponent(r.value),{onInteractionCallback:T.bind(this)}),await t.init(),I.value=t.getIsMobile(),t.setDebugPanelVisible(s.value),window.addEventListener("resize",k),n.value){n.value.addEventListener("contextmenu",L),n.value.addEventListener("selectstart",L),n.value.addEventListener("dragstart",L);let G=null;n.value.addEventListener("touchstart",Q=>{G=setTimeout(()=>{Q.preventDefault(),Q.stopPropagation()},500)}),n.value.addEventListener("touchend",()=>{G&&(clearTimeout(G),G=null)}),n.value.addEventListener("touchmove",()=>{G&&(clearTimeout(G),G=null)})}}catch(G){console.error("MetaverseViewer åˆå§‹åŒ–å¤±è´¥:",G)}});const k=()=>{t&&t.onWindowResize()};onBeforeUnmount(()=>{t&&t.destroy(),document.removeEventListener("visibilitychange",V)});const F=()=>{s.value=!s.value,t&&(t.setDebugPanelVisible(s.value),console.log("è°ƒè¯•çŠ¶æ€å·²åˆ‡æ¢ä¸º:",s.value?"å¼€å¯":"å…³é—­"))},P=()=>{console.log("äº¤äº’æŒ‰é’®è¢«ç‚¹å‡»",t.playerController.getPosition(),"modelType",a.value),window.wx.miniProgram.postMessage({data:{action:"pay",orderId:"12345",position:t.playerController.getPosition(),modelType:a.value}}),console.log("wx.miniProgram.navigateTo"),e.value=!1,b=!0,wx.miniProgram.navigateTo({url:`/pages/authorize/index?modelType=${a.value}`})},U=async()=>{isWeixin()&&(console.log("å¾®ä¿¡SDK:"),loadWxJsSdk());const G=window.location.href.split("#/viewer")[1];console.log("hashString1===",G);const ee=new URLSearchParams(G).get("sceneUrl");console.log("sceneUrl====",ee),r.value=ee};return(G,Q)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{class:"three-container",ref_key:"threeContainer",ref:n},null,512),createBaseVNode("button",{class:"debug-button",onClick:F},toDisplayString(s.value?"å…³é—­è°ƒè¯•":"æ‰“å¼€è°ƒè¯•"),1),e.value?(openBlock(),createElementBlock("div",{key:0,class:"dialog-container",style:normalizeStyle(C.value)},[createBaseVNode("div",_hoisted_1$1,[createBaseVNode("p",_hoisted_2,toDisplayString(p.value),1),y.value?(openBlock(),createElementBlock("button",{key:0,class:"purchase-button",onClick:P}," åŽ»çœ‹çœ‹ ")):createCommentVNode("",!0)])],4)):createCommentVNode("",!0),I.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_3,[...Q[0]||(Q[0]=[createStaticVNode('<div class="guide-title" data-v-53f5069e>æ“ä½œæŒ‡å¼•</div><div class="guide-item" data-v-53f5069e><span class="key" data-v-53f5069e>W A S D</span><span class="description" data-v-53f5069e>æŽ§åˆ¶æ–¹å‘</span></div><div class="guide-item" data-v-53f5069e><span class="key" data-v-53f5069e>SHIFT</span><span class="description" data-v-53f5069e>åˆ‡æ¢è·‘æ­¥/èµ°è·¯</span></div>',3)])]))],64))}},Metaverse=_export_sfc(_sfc_main$1,[["__scopeId","data-v-53f5069e"]]),_hoisted_1={id:"app"},_sfc_main={__name:"App",setup(g){const n=ref(window.location.hash);return onMounted(async()=>{console.log("window.location.hash=",window.location.hash);let t=null;function r(){const s=window.location.hash;return console.log("hash===",s),s&&(n.value=s.split("?")[0]),new URLSearchParams(s.split("?")[1]||"").get("modelUrl")}t=r(),window.addEventListener("hashchange",function(){console.log("hashchange==");const s=r();console.log("hashchange newModelUrl",s),console.log("hashchange currentModelUrl",t),t!==s&&s!==null&&(console.log("ModelUrl changed from",t,"to",s,"- reloading page"),window.location.reload()),s===null&&t===null&&window.location.reload(),t=s})}),(t,r)=>(openBlock(),createElementBlock("div",_hoisted_1,[n.value===""?(openBlock(),createBlock(ModelList,{key:0})):createCommentVNode("",!0),n.value==="#/viewer"?(openBlock(),createBlock(Metaverse,{key:1})):createCommentVNode("",!0)]))}},App=_export_sfc(_sfc_main,[["__scopeId","data-v-c4d5c474"]]);createApp(App).mount("#app");
//# sourceMappingURL=index-DYMUG6QD.js.map
